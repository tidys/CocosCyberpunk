System.register("chunks:///_virtual/achievement.ts",["./rollupPluginModLoBabelHelpers.js","cc","./util2.ts","./save.ts","./singleton.ts","./data-core.ts"],(function(e){"use strict";var t,n,c,i,a,r,o;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,c=e._decorator},function(e){i=e.UtilTime},function(e){a=e.Save},function(e){r=e.Singleton},function(e){o=e.DataGameInst}],execute:function(){var s;n._RF.push({},"40889rxchBBdKZtoFL6Fbxb","achievement",void 0);var u=c.ccclass;c.property,e("Achievement",u("Achievement")(s=function(e){function n(){for(var t,n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(t=e.call.apply(e,[this].concat(c))||this).percent=0,t.unlockAllAchi=!1,t}t(n,e);var c=n.prototype;return c.init=function(){var e=o._data.achievement,t=a.Instance.get("achievement");a.Instance._cur.achievement={},t=a.Instance.get("achievement");for(var n=0;n<e.length;n++){var c=e[n];void 0===t[c.name]&&(t[c.name]={name:c.name,condition:c.condition,value:c.value,percent:0,stat_value:0})}a.Instance._cur.achievement=t,this.updateData()},c.totalTime=function(){var e=a.Instance.statisticsValue("level_playTime");return void 0===e&&(e=0),""+(e=i.toHours(e))},c.totalPercent=function(){return this.percent},c.getAchi=function(e){return a.Instance.get("achievement")[e]},c.updateData=function(){var e=a.Instance.get("achievement"),t=a.Instance.get("statistics");if(1!==a.Instance.get("achi_percent")){var n=1;for(var c in e){var r=e[c];if(1!==r.percent){var o=t[r.value];if(void 0===o)continue;o>r.condition&&(o=r.condition),r.stat_value=o;var s=o/r.condition;r.percent=s,r.unlock_time=i.yearMonth()}this.percent+=r.percent,n++}this.percent/=n,this.unlockAllAchi=1===this.percent,a.Instance._cur.achi_percent=this.percent}},n}(r))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/action.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ui.ts","./sound.ts","./msg.ts","./res-cache.ts","./g-scene.ts","./data-structure.ts","./res.ts","./fun.ts","./level.ts","./game.ts","./local.ts"],(function(t){"use strict";var n,i,o,e,a,c,s,f,u,_,r,d,h,l;return{setters:[function(t){n=t.inheritsLoose},function(t){i=t.cclegacy,o=t.randomRangeInt},function(t){e=t.UI},function(t){a=t.Sound},function(t){c=t.Msg},function(t){s=t.ResCache},function(t){f=t.GScene},function(t){u=t.Queue},function(t){_=t.Res},function(t){r=t.fun},function(t){d=t.Level},function(t){h=t.Game},function(t){l=t.Local}],execute:function(){i._RF.push({},"5afefP7ANpMSK26z0CCzDoz","action",void 0);var v=t("Action",function(){function t(t){this._data={},this._time=0,this._index=0,this._queue=Object.create(null),this._act=void 0,this._data=s.Instance.getJson(t).json,this._queue=new u(5)}var n=t.prototype;return n.on=function(t){this.push(t,"start"),c.emit("msg_stat_times",t)},n.off=function(t){this.push(t,"end")},n.push=function(t,n){var i=this._data[t];if(void 0!==i){var o=i[n];if(void 0!==o){var e=new m(o);this._queue.push(e)}}else console.warn("Undefined action:",t)},n.pop=function(){this._act=this._queue.pop()},n.update=function(t){if(!f.isLoadScene)if(this._act){var n;this._act.time+=t;var i,o=null==(n=this._act)?void 0:n.data[this._act.idx];if(void 0===o||void 0===this._act)throw new Error("Error actor action index: "+(null==(i=this._act)?void 0:i.idx));this._act.time>=o.time&&(p.do(o.name,o.data),this._act.idx+=1,this._act.idx>=this._act.data.length&&(this._act=void 0))}else this._queue.empty()||this.pop()},t}()),m=(t("ActionParallel",function(){function t(t){this._data={},this._time=0,this._index=0,this._act=void 0,this._actions=[],this._data=s.Instance.getJson(t).json}var n=t.prototype;return n.on=function(t){this.push(t,"start"),c.emit("msg_stat_times",t)},n.off=function(t){this.push(t,"end")},n.push=function(t,n){var i=this._data[t];if(void 0!==i){var o=i[n],e=new m(o);this._actions.push(e)}else console.error("Undefined action:",t)},n.update=function(t){var n=this._actions.length;if(!(n<=0))for(var i=n-1;i>=0;i--){var o=this._actions[i];o.time+=t;var e=o.data[o.idx];o.time>=e.time&&(p.do(e.name,e.data),o.idx+=1,o.idx>=o.data.length&&this._actions.splice(i,1))}},t}()),t("ActionActor",function(t){function i(n,i){var o;return(o=t.call(this,n)||this)._actor=void 0,o._actor=i,o}n(i,t);var o=i.prototype;return o.on=function(n){t.prototype.on.call(this,n),c.emit("msg_stat_times",n)},o.update=function(t){if(!f.isLoadScene)if(this._act){this._act.time+=t;for(var n=this._act.data.length,i=this._act.idx;i<n&&this.checkRunAction();i++);}else this._queue.empty()||this.pop()},o.checkRunAction=function(){var t,n,i=this,o=null==(t=this._act)?void 0:t.data[this._act.idx];if(void 0===o||void 0===this._act)throw new Error("Error actor action index: "+(null==(n=this._act)?void 0:n.idx));return this._act.time>=o.time&&(o.delay>0?r.delay((function(){p.do(o.name,o.data,i._actor)}),o.delay):p.do(o.name,o.data,this._actor),this._act.idx+=1,this._act.idx>=this._act.data.length&&(this._act=void 0),this._actor.actionEnd(),!0)},i}(v)),t("ActionActorEquip",function(t){function i(n,i){var o;return(o=t.call(this,n)||this)._actor=void 0,o._actor=i,o}n(i,t);var o=i.prototype;return o.on=function(n){t.prototype.on.call(this,n),this._actor.isPlayer&&c.emit("msg_stat_times",n)},o.update=function(t){if(!f.isLoadScene)if(this._act){this._act.time+=t;for(var n=this._act.data.length,i=this._act.idx;i<n&&this.checkRunAction();i++);}else this._queue.empty()||this.pop()},o.checkRunAction=function(){var t,n,i=this,o=null==(t=this._act)?void 0:t.data[this._act.idx];if(void 0===o||void 0===this._act)throw new Error("Error actor action index: "+(null==(n=this._act)?void 0:n.idx));return this._act.time>=o.time&&(o.delay>0?r.delay((function(){g.do(o.name,o.data,i._actor)}),o.delay):g.do(o.name,o.data,this._actor),this._act.idx+=1,this._act.idx>=this._act.data.length&&(this._act=void 0),this._actor.actionEnd(),!0)},i}(v)),t("ActionQueue",function(t){function i(){return t.apply(this,arguments)||this}return n(i,t),i.prototype.update=function(t){if(!f.isLoadScene)if(this._act){this._act.time+=t;var n=this._act.data[this._act.idx];this._act.time>=n.time&&(p.do(n.name,n.data),this._act.idx+=1,this._act.idx>=this._act.data.length&&(this._act=void 0))}else this._queue.empty()||this.pop()},i}(v)),t("ActionGroup",(function(t){this.data=void 0,this.time=0,this.idx=0,this.data=t}))),p=t("UtilAction",function(){function t(){}return t.do=function(t,n,i){void 0===i&&(i=void 0);var o=this[t];o?o(n,i):console.warn("Not defined action:"+t)},t.on_check_preload=function(){f.isPreload&&(f.isLoadScene=!0)},t.on_scene=function(t){f.Load(t,(function(){}))},t.off_scene=function(t){},t.on_ui=function(t){e.Instance.on(t)},t.off_ui=function(t){e.Instance.off(t)},t.on_sfx=function(t){a.on(t)},t.off_sfx=function(t){a.off(t)},t.on_sfxing=function(t,n){void 0===n&&(n=1),a.playLoop(t,n)},t.off_sfxing=function(t){a.offing(t)},t.on_bgm=function(t){a.onBGM(t)},t.off_bgm=function(t){a.offBGM(t)},t.update_bgm=function(){a.updateBGM()},t.on_msg=function(t){c.emit(t)},t.on_msg_num=function(t,n){c.emit(t.key,t.value)},t.on_msg_str=function(t){c.emit(t.key,t.value)},t.on_msg_str_local=function(t,n){c.emit(t.key,l.Instance.get(t.value))},t.on_inst_scene=function(t){var n=s.Instance.getPrefab(t);_.inst(n,d.Instance._objectNode).setPosition(0,0,0)},t.on_inst=function(t,n){var i=s.Instance.getPrefab(t),o=_.inst(i,d.Instance._objectNode);void 0!==n&&n._view&&(o.parent=n._view,o.setPosition(0,0,0))},t.on_inst_pool=function(t){var n=s.Instance.getPrefab(t);_.inst(n,h.Instance._poolNode).setPosition(0,0,0)},t.off_inst=function(t,n){},t.on_inst_fx=function(t,n){var i=t.res,o=t.bone,e=s.Instance.getPrefab(i),a=_.inst(e,d.Instance._objectNode);if(void 0!==n&&n._view){var c=n.node.getChildByName(o);a.parent=c,a.setPosition(0,0,0)}},t.off_inst_fx=function(t,n){var i=t.res,o=t.bone;if(void 0!==n&&null!==n._view){var e,a=null==(e=n.node.getChildByName(o))?void 0:e.getChildByName(i);a&&a.emit("setDestroy")}},t.on_active=function(t,n){n.setActive(t)},t.on_fx=function(t,n){n.onFx(t)},t.on_buff=function(t,n){},t.set_fx=function(t,n){n.setFx(t)},t.on_ani=function(t,n){n._anim?n._anim.play(t):console.log("Not register SkeletalAnimation")},t.on_anig=function(t,n){n._animationGraph&&n._animationGraph.play?n._animationGraph.play(t.key,t.value):console.log("Not register animationGraph.")},t.on_set=function(t,n){n._data[t.key]=t.value},t.off_set=function(t,n){n._data[t]=!1},t.on_add=function(t,n){for(var i in console.log(t),t)console.log(i),n._data[i]+=t[i]},t.on_mul=function(t,n){for(var i in console.log(t),t)console.log(i),n._data[i]*=t[i]},t.on_com=function(t,n){n.node.addComponent(t)},t.on_call=function(t,n){n[t]()},t}()),g=t("UtilActionEquip",function(){function t(){}return t.do=function(t,n,i){void 0===i&&(i=void 0);var o=this[t];o?o(n,i):console.warn("Not defined action:"+t)},t.on_check_preload=function(){f.isPreload&&(f.isLoadScene=!0)},t.on_scene=function(t){f.Load(t,(function(){}))},t.off_scene=function(t){},t.on_ui=function(t){e.Instance.on(t)},t.off_ui=function(t){e.Instance.off(t)},t.on_sfx=function(t){a.on(t)},t.on_sfx_random=function(t){var n=t.key,i=t.value,e=n+"_"+o(0,i);a.on(e)},t.off_sfx=function(t){a.off(t)},t.on_sfxing=function(t,n){void 0===n&&(n=1),a.playLoop(t,n)},t.off_sfxing=function(t){a.offing(t)},t.on_bgm=function(t){a.onBGM(t)},t.off_bgm=function(t){a.offBGM(t)},t.update_bgm=function(){a.updateBGM()},t.on_msg=function(t){c.emit(t)},t.on_msg_num=function(t,n){c.emit(t.key,t.value)},t.on_msg_str=function(t){c.emit(t.key,t.value)},t.on_msg_str_local=function(t,n){c.emit(t.key,l.Instance.get(t.value))},t.on_inst_scene=function(t){var n=s.Instance.getPrefab(t);_.inst(n,d.Instance._objectNode).setPosition(0,0,0)},t.on_inst=function(t,n){var i=s.Instance.getPrefab(t),o=_.inst(i,d.Instance._objectNode);n&&n._viewRoot&&(o.parent=n._viewRoot,o.setPosition(0,0,0))},t.off_inst=function(t,n){},t.on_inst_fx=function(t,n){var i=t.res,o=t.bone,e=s.Instance.getPrefab(i),a=_.inst(e,d.Instance._objectNode);if(void 0!==n&&null!==n._view){var c=n.node.getChildByName(o);a.parent=c,a.setPosition(0,0,0)}},t.off_inst_fx=function(t,n){var i=t.res,o=t.bone;if(void 0!==n&&null!==n._view){var e,a=null==(e=n.node.getChildByName(o))?void 0:e.getChildByName(i);a&&a.emit("setDestroy")}},t.on_active=function(t,n){n.setActive(t)},t.on_fx=function(t,n){n.onFx(t)},t.on_buff=function(t,n){},t.set_fx=function(t,n){n.setFx(t)},t.on_anig=function(t,n){n._animationGraph?n._animationGraph.play(t.key,t.value):console.log("Not register animationGraph.")},t.on_set=function(t,n){n._data[t.key]=t.value},t.off_set=function(t,n){n._data[t]=!1},t.on_add=function(t,n){for(var i in console.log(t),t)console.log(i),n._data[i]+=t[i]},t.on_mul=function(t,n){for(var i in console.log(t),t)console.log(i),n._data[i]*=t[i]},t.on_call=function(t,n){n[t]()},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/actor-animation-graph-group.ts",["./rollupPluginModLoBabelHelpers.js","cc","./actor-animation-graph.ts"],(function(o){"use strict";var r,t,n,i,a;return{setters:[function(o){r=o.inheritsLoose},function(o){t=o.cclegacy,n=o._decorator,i=o.Component},function(o){a=o.ActorAnimationGraph}],execute:function(){var p;t._RF.push({},"a16cfECKupHAYIDleIbLuiL","actor-animation-graph-group",void 0);var e=n.ccclass;n.property,o("ActorAnimationGraphGroup",e("ActorAnimationGraphGroup")(p=function(o){function t(){for(var r,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return(r=o.call.apply(o,[this].concat(n))||this)._groups=void 0,r}r(t,o);var n=t.prototype;return n.__preload=function(){if(this._groups=this.getComponentsInChildren(a),void 0===this._groups||null===this._groups)throw new Error(this.node.name+" node not find ActorAnimationGraph")},n.play=function(o,r){console.log("ActorAnimationGraphGroup",o,r);for(var t=0;t<this._groups.length;t++)this._groups[t].play(o,r)},t}(i))||p);t._RF.pop()}}}));

System.register("chunks:///_virtual/actor-animation-graph.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var n,r,o,a,i;return{setters:[function(t){n=t.inheritsLoose},function(t){r=t.cclegacy,o=t._decorator,a=t.animation,i=t.Component}],execute:function(){var e;r._RF.push({},"fbeacJjQuZEAbtmtlaKymUK","actor-animation-graph",void 0);var c=o.ccclass;o.property,t("ActorAnimationGraph",c("ActorAnimationGraph")(e=function(t){function r(){for(var n,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=t.call.apply(t,[this].concat(o))||this)._graph=void 0,n}n(r,t);var o=r.prototype;return o.start=function(){if(this._graph=this.getComponent(a.AnimationController),void 0===this._graph||null===this._graph)throw new Error(this.node.name+" can not find AnimationController")},o.play=function(t,n){var r;null==(r=this._graph)||r.setValue(t,n)},o.setValue=function(t,n){var r;null==(r=this._graph)||r.setValue(t,n)},o.update=function(t){},r}(i))||e);r._RF.pop()}}}));

System.register("chunks:///_virtual/actor-animator-contorller.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var r,n,o,a,e;return{setters:[function(t){r=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator,a=t.SkeletalAnimation,e=t.Component}],execute:function(){var c;n._RF.push({},"7acb11oPfRMPYvENyeWzZHr","actor-animator-contorller",void 0);var i=o.ccclass;o.property,t("ActorAnimatorController",i("ActorAnimatorController")(c=function(t){function n(){for(var r,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return(r=t.call.apply(t,[this].concat(o))||this)._anim=Object.create(null),r._data=Object.create(null),r}r(n,t);var o=n.prototype;return o.init=function(t){this._data=t,this._anim=this.getComponent(a)},o.play=function(t){var r=this._data[t];this._anim.play(r[0])},n}(e))||c);n._RF.pop()}}}));

System.register("chunks:///_virtual/actor-axe.ts",["./rollupPluginModLoBabelHelpers.js","cc","./actor-equip-base.ts","./damage-core.ts"],(function(t){"use strict";var e,a,o,r,s,c,n;return{setters:[function(t){e=t.inheritsLoose},function(t){a=t.cclegacy,o=t._decorator,r=t.geometry,s=t.PhysicsSystem},function(t){c=t.ActorEquipBase},function(t){n=t.calculateDamage}],execute:function(){var i;a._RF.push({},"87a46XACzNEdpKUTmrMIVs4","actor-axe",void 0);var u=o.ccclass;o.property,t("ActorAxe",u("ActorAxe")(i=function(t){function a(){return t.apply(this,arguments)||this}return e(a,t),a.prototype.onFire=function(){this._bagData.bulletCount--;var t=this._actor._forwardNode,e=t.worldPosition,a=t.forward,o=new r.Ray(e.x,e.y,e.z,a.x,a.y,a.z),c=this._data.damage.distance,i=void 0;s.instance.raycastClosest(o,24,c)&&(i=s.instance.raycastClosestResult),n(this._data,i)},a}(c))||i);a._RF.pop()}}}));

System.register("chunks:///_virtual/actor-bag.ts",["cc","./data-core.ts","./level.ts"],(function(t){"use strict";var a,e,i,n;return{setters:[function(t){a=t.cclegacy,e=t.game},function(t){i=t.DataEquipInst},function(t){n=t.Level}],execute:function(){a._RF.push({},"31aaeyr2DFMfrMfzAwNQLNe","actor-bag",void 0);t("ActorBag",function(){function t(t){this._actor=void 0,this._capacity=0,this._usageCount=0,this._actor=t,this._capacity=this._actor._data.bag_capacity,this._actor._data.equipment_name_list=new Array(this._capacity);for(var a=0;a<this._capacity;a++)this._actor._data.equipment_name_list[a]="";for(var e=t._data.bags,i=0;i<e.length;i++)this.pickedItem(e[i])}var a=t.prototype;return a.getEmptySlot=function(){for(var t=0;t<this._actor._data.equipment_name_list.length;t++){if(this._actor._data.equipment_name_list[t].length<=0)return t}return-1},a.pickedSameWeaponIncreaseClips=function(t){return!!this._actor._data.items[t]&&(this._actor.bulletBox++,!0)},a.pickedBulletBox=function(){var t;return!!(null==(t=this._actor._actorEquipment)?void 0:t.currentEquipItem)&&(this._actor.bulletBox+=2,!0)},a.pickedItem=function(t){var a=this._actor._data.items[t],e=i.get(t);if(a&&e.stackable)this.stackItem(e.bullet_count);else{var n=this.getEmptySlot();if(-1===n)return!1;this.createItem(e,t),this._actor._data.equipment_name_list[n]=t,this._usageCount++}return!0},a.dropItem=function(){var t,a,e=this._actor._data.current_equipment_index;if(e>=this._capacity||e<=0)return!1;var i=this._actor._data.equipment_name_list,r=i[e];if(!r||r.length<=0)return!1;null==(t=this._actor._actorEquipment)||t.unEquip(),this._actor._data.items[r]=void 0;var c=this._actor.node.worldPosition;return n.Instance.addDrop(r,c),i[e]="",this._actor._data.current_equipment_index=0,null==(a=this._actor._actorEquipment)||a.equip(0),this._usageCount--,!0},a.createItem=function(t,a){var i={name:a,actor:this._actor,stackable:void 0!==t.stackable,count:1,data:t,bulletClipCount:t.bullet_clip_count,bulletCount:t.bullet_count,lastUseTime:e.totalTime};this._actor._data.items[a]=i},a.stackItem=function(t){t.count++,t.bulletCount+=t.data.bullet_count},t}());a._RF.pop()}}}));

System.register("chunks:///_virtual/actor-base.ts",["./rollupPluginModLoBabelHelpers.js","cc","./action.ts","./local.ts","./msg.ts","./res-cache.ts","./util2.ts","./level.ts","./res-pool.ts"],(function(t){"use strict";var n,i,e,o,s,a,c,d,u,r,h,l,f,_;return{setters:[function(t){n=t.inheritsLoose},function(t){i=t.cclegacy,e=t._decorator,o=t.ParticleSystem,s=t.Vec3,a=t.Component},function(t){c=t.ActionActor},function(t){d=t.Local},function(t){u=t.Msg},function(t){r=t.ResCache},function(t){h=t.UtilNode,l=t.UtilVec3},function(t){f=t.Level},function(t){_=t.ResPool}],execute:function(){var p;i._RF.push({},"d0fffR4zwBGa7zh9DgsAkms","actor-base",void 0);var v=e.ccclass;t("ActorBase",v("ActorBase")(p=function(t){function i(){for(var n,i=arguments.length,e=new Array(i),o=0;o<i;o++)e[o]=arguments[o];return(n=t.call.apply(t,[this].concat(e))||this)._action=void 0,n._data={},n._updates=[],n._dir=new s(0,0,0),n._curDir=new s(0,0,0),n._angleVertical=0,n._groupIndex=-1,n.isPlayer=!1,n._anim=void 0,n._animationGraph=void 0,n._view=void 0,n._actionUpdate=function(){},n}n(i,t);var e=i.prototype;return e.__preload=function(){this.onBind()},e.init=function(t){Object.assign(this._data,r.Instance.getJson(t).json),null==this._action&&(this._action=new c(this._data.action,this)),null==this._view&&(this._view=h.find(this.node,"view")),this.initView()},e.initView=function(){},e.onBind=function(){this.node.on("do",this.do,this)},e.offBind=function(){this.node.off("do",this.do,this)},e.onUpdate=function(){},e.offUpdate=function(){this._updates=[]},e.updateAttribute=function(){},e.onDestroy=function(){this.offBind()},e.do=function(t){this._action&&this._action.on(t)},e.update=function(t){this._action&&this._action.update(t);for(var n=this._updates.length,i=0;i<n;i++)this._updates[i](t)},e.setActive=function(t){var n,i=this.node.getChildByName(t.key);i?i.active=t.value:console.warn(" You want set undefined node active. "+(null==(n=this.node)?void 0:n.name)+"/"+t.key)},e.setFx=function(t){var n=h.find(this.node,t.key),i=null==n?void 0:n.getComponentsInChildren(o);if(void 0!==i)for(var e=0;e<i.length;e++){var s=i[e];s.loop=t.value,t.value&&s.play()}},e.onFx=function(t){var n=h.find(this.node,t),i=null==n?void 0:n.getComponentsInChildren(o);if(void 0!==i)for(var e=0;e<i.length;e++){i[e].play()}},e.actionEnd=function(){},e.setDir=function(t){l.copy(this._dir,t)},e.updateHP=function(){var t=this._data.hp/this._data.max_hp;this._data.is_low_hp=t<.5,u.emit("fil_hp",t)},e.onDead=function(){this.isPlayer?this.isPlayer&&(f.Instance._player=void 0):(-1!==this._groupIndex&&(f.Instance.removeEnemy(this.node),u.emit("msg_remove_enemy",this._groupIndex),u.emit("msg_tips",""+d.Instance.get("killed_one"))),_.Instance.push(this.node))},i}(a))||p);i._RF.pop()}}}));

System.register("chunks:///_virtual/actor-brain.ts",["./rollupPluginModLoBabelHelpers.js","cc","./sensor-rays-angle.ts","./util2.ts","./navigation-system.ts","./actor-input-brain.ts","./level.ts","./actor.ts"],(function(t){"use strict";var i,o,n,e,s,r,a,c,h,l,d,u,y,v,p,g,_;return{setters:[function(t){i=t.inheritsLoose},function(t){o=t.cclegacy,n=t._decorator,e=t.v3,s=t.random,r=t.game,a=t.Vec3,c=t.math,h=t.randomRange,l=t.randomRangeInt,d=t.Component},function(t){u=t.SensorRaysAngle},function(t){y=t.UtilVec3},function(t){v=t.NavSystem},function(t){p=t.ActorInputBrain},function(t){g=t.Level},function(t){_=t.Actor}],execute:function(){var f;o._RF.push({},"2fdf6FtIJFKYJiADMcY5lJ3","actor-brain",void 0);var P=n.ccclass,w=e(0,0,0);t("ActorBrain",P("ActorBrain")(f=function(t){function o(){for(var i,o=arguments.length,n=new Array(o),s=0;s<o;s++)n[s]=arguments[s];return(i=t.call.apply(t,[this].concat(n))||this)._actor=void 0,i._wayPoints=new Array,i._moveDir=e(0,0,0),i.targetDirection=e(0,0,0),i.input=void 0,i.sensorRays=void 0,i.isFollowWayPointsMove=!1,i.currentWaypointsIndex=1,i.closestNavigationPon=-1,i._targetNode=void 0,i.targetPosition=e(0,0,0),i.waypointsFireIndex=-1,i.waypointsFire=new Array,i.fireDirection=e(0,0,0),i.reloadTime=0,i.followPathsDirection=1,i.fireWaitTime=5,i}i(o,t);var n=o.prototype;return n.start=function(){this._actor=this.getComponent(_),this.input=this.getComponent(p);var t=this.node.getChildByName("sensor_target");if(this.sensorRays=t.getComponent(u),this.closestNavigationPon=this._actor._data.nearest,void 0===this._actor||void 0===this.input||void 0===this.sensorRays)throw new Error(this.node.name+" node lose components : ActorBase or ActorInputBrain.")},n.onMove=function(){this.input.onMove(this._moveDir),this.input.onRotation(this.targetDirection.x,this.targetDirection.z),this.input.onRun(s()<.05)},n.onJump=function(){var t;null==(t=this.input)||t.onJump()},n.onCrouch=function(){var t;null==(t=this.input)||t.onCrouch()},n.onProne=function(){var t;null==(t=this.input)||t.onProne()},n.onFire=function(){var t;null==(t=this.input)||t.onFire()},n.update=function(t){var i,o,n;g.Instance.stop||this._actor.isReady&&(null!=(i=this._actor)&&i._data.is_dead||!g.Instance._player||null!=(o=g.Instance._player)&&o._data.is_dead||(this.checkNearPlayer(),void 0!==this._targetNode?this.shootFire():(this.randomMove(),null==(n=this.input)||n.onAim(!1))))},n.shootFire=function(){var t,i,o,n,e=this.checkPlayerAngle();if(this.moveFire(e),this.reloadTime>0)this.reloadTime-=r.deltaTime;else{var s;if(null!=(t=this._actor)&&null!=(i=t._actorEquipment)&&null!=(o=i.currentEquip)&&o.isBulletEmpty)return null==(s=this.input)||s.onReload(),void(this.reloadTime=3);null==(n=this.input)||n.onAim(!0),this.checkFire(e)}},n.randomMove=function(){this.waypointsFireIndex=-1,this.isFollowWayPointsMove?this.PathsFollowing():this.calculateNextPosition()},n.PathsFollowing=function(){if(this.isFollowWayPointsMove){this._actor._actorMove.faceMove=!0;var t=this._actor.node.worldPosition,i=this._wayPoints[this.currentWaypointsIndex];if(y.copy(this.targetPosition,i),a.distance(t,i)<=1)this.currentWaypointsIndex+=this.followPathsDirection,this.currentWaypointsIndex>=this._wayPoints.length||this.currentWaypointsIndex<0?this.isFollowWayPointsMove=!1:this.closestNavigationPon=this._wayPoints[this.currentWaypointsIndex].id;else{var o;if(null!=(o=this.sensorRays)&&o.checkedNode){y.copy(this.targetDirection,this.sensorRays.checkedNode.worldPosition),this.targetDirection.y=this.node.worldPosition.y;var n=this.targetDirection.clone();n.subtract(this.node.worldPosition);var s=-this.targetDirection.clone().cross(this.node.forward).y,r=n.clone();r.cross(e(0,s>0?-1:1,0)),this.targetDirection.add(r)}else y.copy(this.targetDirection,this.targetPosition);this.targetDirection.y=t.y,this.targetDirection.subtract(t).normalize(),this._moveDir.x=-this.targetDirection.x,this._moveDir.y=0,this._moveDir.z=-this.targetDirection.z,this.lookAtTarget(this._moveDir),this._moveDir.x=0,this._moveDir.y=0,this._moveDir.z=1,this.onMove()}}},n.followTargetPaths=function(){},n.lookAtTarget=function(t){y.copy(w,t);var i=Math.abs(a.angle(t,this.node.forward));if(i>.001){var o=Math.sign(-w.cross(this.node.forward).y);this.targetDirection.x=o*i,this.targetDirection.z=0}},n.moveFire=function(t){this._actor._actorMove.faceMove=!1,-1===this.waypointsFireIndex&&(this.closestNavigationPon=v.findNearest(this._actor.node.worldPosition),v.randomFirePath(this.waypointsFire,this.closestNavigationPon),this.waypointsFireIndex=0);var i=this._actor.node.worldPosition,o=this.waypointsFire[this.waypointsFireIndex];y.copy(this.targetPosition,o),a.distance(i,o)<=1&&(this.waypointsFireIndex++,this.waypointsFireIndex>=this.waypointsFire.length&&(this.closestNavigationPon=v.findNearest(this._actor.node.worldPosition),v.randomFirePath(this.waypointsFire,this.closestNavigationPon),this.waypointsFireIndex=0,o=this.waypointsFire[this.waypointsFireIndex])),y.copy(this.targetDirection,this.targetPosition),this.targetDirection.y=i.y;var n=t<5?.5:1.5;this.targetDirection.subtract(i).normalize().multiplyScalar(n),this._moveDir.x=-this.targetDirection.x,this._moveDir.y=0,this._moveDir.z=-this.targetDirection.z;var e=g.Instance._player;y.copy(this.targetDirection,i),this.targetDirection.y+=e._data.is_crouch?.3:1,this.targetDirection.subtract(e.node.worldPosition).normalize(),this.lookAtTarget(this.targetDirection),this.onMove()},n.checkPlayerAngle=function(){var t,i=g.Instance._player,o=null==(t=this._actor)?void 0:t.node.forward;return y.copy(this.fireDirection,i.node.worldPosition),this.fireDirection.subtract(this._actor.node.worldPosition),c.toDegree(a.angle(o,this.fireDirection))},n.checkFire=function(t){this.fireWaitTime-=r.deltaTime,this.fireWaitTime>0||(this.fireWaitTime=h(.3,1.3),t<10&&this.onFire())},n.freePathMove=function(){v.randomPaths(this._wayPoints,this._actor.node.worldPosition,l(5,10),this.closestNavigationPon),console.log("this._wayPoints:",this._wayPoints),this.isFollowWayPointsMove=!0,this.currentWaypointsIndex=0},n.fleeTarget=function(){},n.followTarget=function(){v.findPaths(this._wayPoints,this._actor.node.worldPosition,this.closestNavigationPon,g.Instance._player.node.worldPosition)},n.checkNearPlayer=function(){var t=g.Instance._player;if(t){var i=this._actor._data;a.distance(t.node.worldPosition,this._actor.node.worldPosition)<i.ai_nearby_distance?this._targetNode=t.node:this._targetNode=void 0}},n.calculateNextPosition=function(){v.randomPaths(this._wayPoints,this._actor.node.worldPosition,l(5,10)),0!==this._wayPoints.length?(this.isFollowWayPointsMove=!0,this.currentWaypointsIndex=0):console.warn(this.node.name+" can not find path")},o}(d))||f);o._RF.pop()}}}));

System.register("chunks:///_virtual/actor-crossbow.ts",["./rollupPluginModLoBabelHelpers.js","cc","./actor-equip-base.ts"],(function(t){"use strict";var o,r,c,n;return{setters:[function(t){o=t.inheritsLoose},function(t){r=t.cclegacy,c=t._decorator},function(t){n=t.ActorEquipBase}],execute:function(){var s;r._RF.push({},"5e88bG7rXpPQpQXM9RcthFZ","actor-crossbow",void 0);var e=c.ccclass;c.property,t("ActorCrossbow",e("ActorCrossbow")(s=function(t){function r(){for(var o,r=arguments.length,c=new Array(r),n=0;n<r;n++)c[n]=arguments[n];return(o=t.call.apply(t,[this].concat(c))||this)._pointShoot=void 0,o}o(r,t);var c=r.prototype;return c.start=function(){this._pointShoot=this.node.getChildByName("point_shoot")},c.onDestroy=function(){},c.update=function(t){},r}(n))||s);r._RF.pop()}}}));

System.register("chunks:///_virtual/actor-enemy-gun.ts",["./rollupPluginModLoBabelHelpers.js","cc","./actor-equip-base.ts","./damage-core.ts","./util2.ts"],(function(t){"use strict";var e,o,a,r,s,c,n,i;return{setters:[function(t){e=t.inheritsLoose},function(t){o=t.cclegacy,a=t._decorator,r=t.geometry,s=t.PhysicsSystem},function(t){c=t.ActorEquipBase},function(t){n=t.calculateDamage},function(t){i=t.UtilVec3}],execute:function(){var u;o._RF.push({},"e3635TDq7ZKc7JAm2Ip1xHk","actor-enemy-gun",void 0);var l=a.ccclass,y=(a.property,new r.Ray);t("ActorEnemyGun",l("ActorEnemyGun")(u=function(t){function o(){return t.apply(this,arguments)||this}return e(o,t),o.prototype.onFire=function(){var t;if(null!=(t=this._actor)&&t._forwardNode){this._bagData.bulletCount--;var e=this._actor._forwardNode,o=e.worldPosition,a=e.forward;i.copy(y.o,o),i.copy(y.d,a);var r,c=this._data.damage.distance;s.instance.raycastClosest(y,this.mask,c)&&(r=s.instance.raycastClosestResult),this.showTracer(r,a),n(this._data,r)}},o}(c))||u);o._RF.pop()}}}));

System.register("chunks:///_virtual/actor-equip-base.ts",["./rollupPluginModLoBabelHelpers.js","cc","./action.ts","./util2.ts","./msg.ts","./fx-base.ts","./fx.ts","./local.ts"],(function(t){"use strict";var i,o,a,n,e,s,l,c,u,h,r,_,d,f;return{setters:[function(t){i=t.inheritsLoose},function(t){o=t.cclegacy,a=t._decorator,n=t.v3,e=t.game,s=t.randomRange,l=t.Component},function(t){c=t.ActionActorEquip},function(t){u=t.UtilNode,h=t.UtilVec3},function(t){r=t.Msg},function(t){_=t.FxBase},function(t){d=t.fx},function(t){f=t.Local}],execute:function(){var p;o._RF.push({},"e03a7kAZPFDNqTbtmPEpmKL","actor-equip-base",void 0);var m=a.ccclass,v=(a.property,n(0,0,0));t("ActorEquipBase",m("ActorEquipBase")(p=function(t){function o(){for(var i,o=arguments.length,a=new Array(o),n=0;n<o;n++)a[n]=arguments[n];return(i=t.call.apply(t,[this].concat(a))||this).point_shoot=void 0,i._animationGraph=void 0,i._view=void 0,i._bagData=void 0,i._data={},i._action=void 0,i._actor=void 0,i.isPlayer=!1,i.fxMuzzle=void 0,i.isBulletEmpty=!1,i.mask=28,i}i(o,t);var a=o.prototype;return a.__preload=function(){this.point_shoot=this.node.getChildByName("point_shoot"),this.fxMuzzle=u.find(this.node,"fx_muzzle").getComponent(_),this._view=this.node.getChildByName("view"),this.node.on("do",this.do,this),this.node.on("init",this.init,this)},a.init=function(t){this._actor=t.actor,this._bagData=t,this._data=this._bagData.data,this._action=new c(this._data.action,this),this._bagData.lastUseTime=e.totalTime/1e3,this.isPlayer=this._actor.isPlayer,this._animationGraph=this._actor._animationGraph},a.onDestroy=function(){this.node.off("do",this.do,this),this.node.off("init",this.init,this)},a.do=function(t){if(this._action){if("fire"===t&&!this.checkUse())return;this._action.on(t)}},a.checkAutoFire=function(){var t;null!=(t=this._actor)&&t._data.is_auto_fire&&this.do("fire")},a.update=function(t){var i;null==(i=this._action)||i.update(t)},a.setActive=function(t){var i,o=this.node.getChildByName(t.key);o?o.active=t.value:console.warn(" You want set undefined node active. "+(null==(i=this.node)?void 0:i.name)+"/"+t.key)},a.hiddenNode=function(){this.node.active=!1},a.setFx=function(t){d.playLoop(this.node,t.key,t.value)},a.showMuzzle=function(){var t;null==(t=this.fxMuzzle)||t.play()},a.onFx=function(t){d.play(this.node,t)},a.onRecoil=function(){var t,i=this._actor._data.is_aim?this._data.recoil_aim_rate:1,o=s(this._data.recoil_x[0],this._data.recoil_x[1])*i,a=s(this._data.recoil_y[0],this._data.recoil_y[1])*i;null==(t=this._actor)||t.onRotation(o,a)},a.showTracer=function(t,i){var o=this.fxMuzzle.node.worldPosition;null!=t&&t.hitPoint?h.copy(v,t.hitPoint):(h.copy(v,o),v.add3f(100*i.x,100*i.y,100*i.z)),r.emit("msg_set_tracer",{start:o,end:v})},a.actionEnd=function(){},a.checkUse=function(){if(this.isBulletEmpty=this._bagData.bulletCount<=0&&-1!==this._bagData.data.bullet_count,this.isBulletEmpty)return this.do("fire_empty"),!1;var t=this._bagData.lastUseTime;return(e.totalTime-t)/1e3>=this._data.damage.cooling},a.updateCooling=function(){this._bagData.lastUseTime=e.totalTime},a.checkFullBullet=function(){var t;return this._bagData.bulletCount==(null==(t=this._bagData)?void 0:t.data.bullet_count)&&(r.emit("msg_tips",""+f.Instance.get("bullet_is_full")),!0)},a.onReload=function(){var t;this._actor&&(this._actor.bulletBox>0?(this._actor.bulletBox--,this._actor.bulletBox<0&&(this._actor.bulletBox=0),this._bagData.bulletCount=null==(t=this._bagData)?void 0:t.data.bullet_count,this.isBulletEmpty=!1):r.emit("msg_tips",""+f.Instance.get("clip_is_null")))},a.onUse=function(){},o}(l))||p);o._RF.pop()}}}));

System.register("chunks:///_virtual/actor-equipment.ts",["cc","./msg.ts","./res.ts","./res-cache.ts","./util2.ts","./fun.ts","./actor-equip-base.ts"],(function(t){"use strict";var e,i,a,u,n,r,s,o,c;return{setters:[function(t){e=t.cclegacy,i=t.math,a=t.game},function(t){u=t.Msg},function(t){n=t.Res},function(t){r=t.ResCache},function(t){s=t.UtilNode},function(t){o=t.fun},function(t){c=t.ActorEquipBase}],execute:function(){e._RF.push({},"74f98UsRHZC9pmTPSWWn7y/","actor-equipment",void 0);t("ActorEquipment",function(){function t(t){this._actor=void 0,this.equipPool={},this.equipBoneNode={},this.currentEquipNode=void 0,this.currentEquipItem=void 0,this.currentEquip=void 0,this.stableValue=1,this._actor=t,this.equipBoneNode=s.getChildrenByNameBlur(this._actor.node,"weapon_root");for(var e=this._actor._data.cache_equipment_list,i=e.length,a=0;a<i;a++){var u=e[a],o=r.Instance.getPrefab(u+"_tps"),c=this.equipBoneNode[this._actor._data.weapon_bone],_=n.inst(o,c);this.equipPool[u]=_,_.active=!1}this.equip(t._data.default_equip_index)}var e=t.prototype;return e.equip=function(t){var e=this;if(this._actor._data.current_equipment_index!==t){var i=this._actor._data.equipment_name_list[t];if(!i||i.length<=0)return!1;this.unEquip();var a=this;return o.delay((function(){var n,r=a._actor._data.items;a.currentEquipNode=a.equipPool[i],a.currentEquipItem=r[i],a.currentEquipNode.active=!0,a.currentEquipNode.emit("init",e.currentEquipItem),a.currentEquipNode.emit("do","take_out"),a._actor._data.current_equipment_index=t,a.currentEquip=null==(n=a.currentEquipNode)?void 0:n.getComponent(c),e._actor.isPlayer&&(u.emit("msg_change_equip"),u.emit("msg_update_equip_info"))}),.3),!0}return!1},e.unEquip=function(){var t=this._actor._data.current_equipment_index;if(-1!==t){var e,i=this._actor._data.equipment_name_list[t];if(!i)return void console.warn("The equipment index that does not exist, the index id is "+t+", the object is "+(null==(e=this._actor)?void 0:e.node.name));var a=this.equipPool[i];a?a.emit("do","take_back"):console.warn("")}},e.do=function(t){var e;null==(e=this.currentEquipNode)||e.emit("do",t)},e.updateAim=function(t,e){if(void 0===e&&(e=!1),void 0===this.currentEquipItem)0!==this.stableValue&&(this.stableValue=0,this._actor.isPlayer&&u.emit("msg_update_aim",this.stableValue));else{var n=this.currentEquipItem.data,r=n.stable_max_value,s=0;e?(this.stableValue=n.stable_max_value,s=n.stable_max_value):(0!==r&&(s=Math.abs(t)<=.001?n.stable_min_value:n.stable_max_value*t,s=Math.max(n.stable_min_value,s)),this.stableValue=i.lerp(this.stableValue,s,a.deltaTime*n.stable_smooth)),this._actor.isPlayer&&u.emit("msg_update_aim",this.stableValue)}},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/actor-face.ts",["./rollupPluginModLoBabelHelpers.js","cc","./util2.ts","./actor-move.ts"],(function(t){"use strict";var e,o,i,r,n,a,s,c,l,u,h,g,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){n=t.cclegacy,a=t._decorator,s=t.Node,c=t.CCFloat,l=t.v3,u=t.math,h=t.Component},function(t){g=t.UtilVec3},function(t){p=t.ActorMove}],execute:function(){var f,y,A,m,v,b,d,P,N,w,F;n._RF.push({},"d7147wbmLFMe7umNHco0sw5","actor-face",void 0);var z=a.ccclass,M=a.property;t("ActorFace",(f=z("ActorFace"),y=M(s),A=M({type:p,tooltip:"Test actor move."}),m=M(c),v=M(c),f((P=e((d=function(t){function e(){for(var e,o=arguments.length,n=new Array(o),a=0;a<o;a++)n[a]=arguments[a];return e=t.call.apply(t,[this].concat(n))||this,i(e,"rotationNode",P,r(e)),i(e,"actorMove",N,r(e)),i(e,"smoothAngle",w,r(e)),i(e,"smoothHeight",F,r(e)),e.targetAngle=l(0,0,0),e.currentAngle=l(0,0,0),e.targetPosition=l(0,0,0),e.currentPosition=l(0,0,0),e}o(e,t);var n=e.prototype;return n.start=function(){g.copy(this.targetAngle,this.rotationNode.eulerAngles),g.copy(this.currentAngle,this.targetAngle),g.copy(this.targetPosition,this.rotationNode.position),g.copy(this.currentAngle,this.targetPosition)},n.update=function(t){var e,o;this.rotationX(this.actorMove.angleVertical),this.currentAngle.x=u.lerp(this.currentAngle.x,this.targetAngle.x,this.smoothAngle*t),null==(e=this.rotationNode)||e.setRotationFromEuler(this.currentAngle),this.currentPosition.y=u.lerp(this.currentPosition.y,this.targetPosition.y,this.smoothHeight*t),null==(o=this.rotationNode)||o.setPosition(this.currentPosition)},n.rotationX=function(t){this.targetAngle.x=t},n.setRootY=function(t){this.targetPosition.y=t},e}(h)).prototype,"rotationNode",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=e(d.prototype,"actorMove",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=e(d.prototype,"smoothAngle",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 20}}),F=e(d.prototype,"smoothHeight",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),b=d))||b));n._RF.pop()}}}));

System.register("chunks:///_virtual/actor-follow-path-move.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(o){"use strict";var t,e,r,c;return{setters:[function(o){t=o.inheritsLoose},function(o){e=o.cclegacy,r=o._decorator,c=o.Component}],execute:function(){var n;e._RF.push({},"11a17e44/ZM8pmh7+TPj4bj","actor-follow-path-move",void 0);var l=r.ccclass;o("ActorFollowPathMove",l("ActorFollowPathMove")(n=function(o){function e(){return o.apply(this,arguments)||this}return t(e,o),e}(c))||n);e._RF.pop()}}}));

System.register("chunks:///_virtual/actor-grenade.ts",["./rollupPluginModLoBabelHelpers.js","cc","./actor-equip-base.ts","./res.ts","./res-cache.ts","./projectile-grenade.ts","./level.ts"],(function(e){"use strict";var t,r,o,n,c,a,s,i,u;return{setters:[function(e){t=e.inheritsLoose},function(e){r=e.cclegacy,o=e._decorator,n=e.v3},function(e){c=e.ActorEquipBase},function(e){a=e.Res},function(e){s=e.ResCache},function(e){i=e.ProjectileGrenade},function(e){u=e.Level}],execute:function(){var l;r._RF.push({},"aeef2VVpNJLY5ylnl63G0o0","actor-grenade",void 0);var d=o.ccclass;o.property,e("ActorGrenade",d("ActorGrenade")(l=function(e){function r(){return e.apply(this,arguments)||this}return t(r,e),r.prototype.onFire=function(){var e=this._actor._forwardNode,t=e.worldPosition,r=e.forward,o=s.Instance.getPrefab(this._data.projectile_res),c=n(t.x,t.y,t.z);c.add(r);var l=a.instNode(o,u.Instance._objectNode,c).getComponent(i),d=r.multiplyScalar(10);null==l||l.onThrow(this._data,d,this._actor)},r}(c))||l);r._RF.pop()}}}));

System.register("chunks:///_virtual/actor-handgun.ts",["./rollupPluginModLoBabelHelpers.js","cc","./actor-equip-base.ts","./damage-core.ts","./util2.ts"],(function(t){"use strict";var a,o,s,e,r,c,n,i;return{setters:[function(t){a=t.inheritsLoose},function(t){o=t.cclegacy,s=t._decorator,e=t.geometry,r=t.PhysicsSystem},function(t){c=t.ActorEquipBase},function(t){n=t.calculateDamage},function(t){i=t.UtilVec3}],execute:function(){var u;o._RF.push({},"84405vmlmBO84kE1VAOHbv6","actor-handgun",void 0);var l=s.ccclass,d=(s.property,new e.Ray);t("ActorHandgun",l("ActorHandgun")(u=function(t){function o(){return t.apply(this,arguments)||this}return a(o,t),o.prototype.onFire=function(){this._bagData.bulletCount--;var t=this._actor._forwardNode,a=t.worldPosition,o=t.forward;i.copy(d.o,a),i.copy(d.d,o);var s,e=this._data.damage.distance;r.instance.raycastClosest(d,this.mask,e)&&(s=r.instance.raycastClosestResult),this.showTracer(s,o),n(this._data,s,this._actor)},o}(c))||u);o._RF.pop()}}}));

System.register("chunks:///_virtual/actor-input-brain.ts",["./rollupPluginModLoBabelHelpers.js","cc","./actor.ts"],(function(n){"use strict";var o,t,r,i,c;return{setters:[function(n){o=n.inheritsLoose},function(n){t=n.cclegacy,r=n._decorator,i=n.Component},function(n){c=n.Actor}],execute:function(){var u;t._RF.push({},"9a7794VGPBGDpf47jYvUBqo","actor-input-brain",void 0);var a=r.ccclass;r.property,n("ActorInputBrain",a("ActorInputBrain")(u=function(n){function t(){for(var o,t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return(o=n.call.apply(n,[this].concat(r))||this)._actor=void 0,o._isPause=!1,o}o(t,n);var r=t.prototype;return r.start=function(){if(this._actor=this.getComponent(c),null===this._actor)throw new Error(this.node.name+" node can not find ActorEnemy")},r.onMove=function(n){var o;null==(o=this._actor)||o.onMove(n)},r.onRotation=function(n,o){var t;null==(t=this._actor)||t.onRotation(n,o)},r.onDir=function(n,o){var t;null==(t=this._actor)||t.onDir(n,o)},r.onJump=function(){var n;null==(n=this._actor)||n.onJump()},r.onRun=function(n){var o;null==(o=this._actor)||o.onRun(n)},r.onCrouch=function(){var n;null==(n=this._actor)||n.onCrouch()},r.onProne=function(){},r.onAim=function(n){var o;null==(o=this._actor)||o.onAim(n)},r.onChangeEquips=function(){throw new Error("Method not implemented.")},r.onFire=function(){var n;null==(n=this._actor)||n.onFire()},r.onEquip=function(n){var o;null==(o=this._actor)||o.onEquip(n)},r.onPick=function(){var n;null==(n=this._actor)||n.onPick()},r.onReload=function(){var n;null==(n=this._actor)||n.onReload()},r.onDrop=function(){var n;null==(n=this._actor)||n.onDrop()},r.onPause=function(){},t}(i))||u);t._RF.pop()}}}));

System.register("chunks:///_virtual/actor-input.ts",["./rollupPluginModLoBabelHelpers.js","cc","./level.ts","./msg.ts","./ui.ts"],(function(t){"use strict";var n,o,i,e,r,c,s,u;return{setters:[function(t){n=t.inheritsLoose},function(t){o=t.cclegacy,i=t._decorator,e=t.sys,r=t.Component},function(t){c=t.Level},function(t){s=t.Msg},function(t){u=t.UI}],execute:function(){var a,l;o._RF.push({},"01c09MbFBBOMaVVPRCTuZwT","actor-input",void 0);var f=i.ccclass;t("ActorInput",f("ActorInput")(((l=function(t){function o(){for(var n,o=arguments.length,i=new Array(o),e=0;e<o;e++)i[e]=arguments[e];return(n=t.call.apply(t,[this].concat(i))||this)._actor=void 0,n._isPause=!1,n._isOpenEquips=!1,n}n(o,t);var i=o.prototype;return i.start=function(){s.on("msg_set_input_active",this.setActive.bind(this)),o.inst=this,s.on("msg_exit_pointer",this.exitPointer.bind(this))},i.exitPointer=function(){document.exitPointerLock()},i.onDestroy=function(){s.off("msg_set_input_active",this.setActive.bind(this)),s.off("msg_exit_pointer",this.exitPointer.bind(this)),e.platform!==e.Platform.MOBILE_BROWSER&&e.platform!==e.Platform.ANDROID&&e.platform!==e.Platform.IOS||u.Instance.off("ui_joystick")},i.setActive=function(t){if(t)this.initInput();else{for(var n=0;n<this.node.children.length;n++)this.node.children[n].active=!1;u.Instance.off("ui_joystick")}},i.initInput=function(){this._actor=c.Instance._player,e.platform===e.Platform.MOBILE_BROWSER||e.platform===e.Platform.ANDROID||e.platform===e.Platform.IOS?u.Instance.on("ui_joystick"):(this.node.children[1].active=!0,this.node.children[0].active=!0)},i.onMove=function(t){var n;null==(n=this._actor)||n.onMove(t)},i.onRotation=function(t,n){var o;null==(o=this._actor)||o.onRotation(t,n)},i.onJump=function(){var t;null==(t=this._actor)||t.onJump()},i.onRun=function(t){var n;null==(n=this._actor)||n.onRun(t)},i.onCrouch=function(){var t;null==(t=this._actor)||t.onCrouch()},i.onAim=function(){var t;null==(t=this._actor)||t.onAim(void 0)},i.onFire=function(){var t;null==(t=this._actor)||t.onFire()},i.onAutoFire=function(t){var n;null==(n=this._actor)||n.onAutoFire(t)},i.onEquip=function(t){var n;null==(n=this._actor)||n.onEquip(t)},i.onPick=function(){var t;null==(t=this._actor)||t.onPick()},i.onReload=function(){var t;null==(t=this._actor)||t.onReload()},i.onDrop=function(){var t;null==(t=this._actor)||t.onDrop()},i.onDir=function(t,n){},i.onPause=function(){this._isPause=!this._isPause,s.emit("push","level_pause")},i.onChangeEquips=function(){return s.emit("push","select_equips"),!0},o}(r)).inst=void 0,a=l))||a);o._RF.pop()}}}));

System.register("chunks:///_virtual/actor-interface.ts",["cc"],(function(t){"use strict";var i;return{setters:[function(t){i=t.cclegacy}],execute:function(){i._RF.push({},"92104FiaI1OLrtZm0vpahcL","actor-interface",void 0);t("DamageData",(function(){this.hitPart=void 0,this.hitDistance=void 0,this.fireData=void 0}));i._RF.pop()}}}));

System.register("chunks:///_virtual/actor-items.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var c,r,e,o;return{setters:[function(t){c=t.inheritsLoose},function(t){r=t.cclegacy,e=t._decorator,o=t.Component}],execute:function(){var n;r._RF.push({},"bccb4KGCkdLp4PwckmEAX8R","actor-items",void 0);var i=e.ccclass;t("ActorItem",i("ActorItem")(n=function(t){function r(){for(var c,r=arguments.length,e=new Array(r),o=0;o<r;o++)e[o]=arguments[o];return(c=t.call.apply(t,[this].concat(e))||this).data=void 0,c.item=void 0,c}return c(r,t),r.prototype.start=function(){},r}(o))||n);r._RF.pop()}}}));

System.register("chunks:///_virtual/actor-lookat.ts",["./rollupPluginModLoBabelHelpers.js","cc","./util2.ts"],(function(e){"use strict";var t,o,n,r,i,a,c,l,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){i=e.cclegacy,a=e._decorator,c=e.Node,l=e.Component},function(e){u=e.UtilNode}],execute:function(){var s,p,b,f,h,d;i._RF.push({},"9a855v+MrJGRJngc67wZaM9","actor-lookat",void 0);var _=a.ccclass,y=a.property;e("ActorLookAt",(s=_("ActorLookAt"),p=y(c),s((h=t((f=function(e){function t(){for(var t,o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return t=e.call.apply(e,[this].concat(i))||this,n(t,"bone_name",h,r(t)),n(t,"bone_head",d,r(t)),t._angle=0,t._dir=1,t}o(t,e);var i=t.prototype;return i.start=function(){this.bone_head=u.find(this.node,this.bone_name)},i.lateUpdate=function(e){var t;null==(t=this.bone_head)||t.setRotationFromEuler(this._angle,0,0)},t}(l)).prototype,"bone_name",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"bone_root"}}),d=t(f.prototype,"bone_head",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Object.create(null)}}),b=f))||b));i._RF.pop()}}}));

System.register("chunks:///_virtual/actor-machine-gun.ts",["./rollupPluginModLoBabelHelpers.js","cc","./actor-equip-base.ts","./damage-core.ts","./util2.ts"],(function(t){"use strict";var a,e,c,o,s,r,n,i;return{setters:[function(t){a=t.inheritsLoose},function(t){e=t.cclegacy,c=t._decorator,o=t.geometry,s=t.PhysicsSystem},function(t){r=t.ActorEquipBase},function(t){n=t.calculateDamage},function(t){i=t.UtilVec3}],execute:function(){var u;e._RF.push({},"d1de3133u1FBqWbaaiwq/Dy","actor-machine-gun",void 0);var l=c.ccclass,h=(c.property,new o.Ray);t("ActorMachineGun",l("ActorMachineGun")(u=function(t){function e(){return t.apply(this,arguments)||this}return a(e,t),e.prototype.onFire=function(){this._bagData.bulletCount--;var t=this._actor._forwardNode,a=t.worldPosition,e=t.forward;i.copy(h.o,a),i.copy(h.d,e);var c,o=this._data.damage.distance;s.instance.raycastClosest(h,this.mask,o)&&(c=s.instance.raycastClosestResult),this.showTracer(c,e),n(this._data,c,this._actor)},e}(r))||u);e._RF.pop()}}}));

System.register("chunks:///_virtual/actor-main.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var r,e,n,o;return{setters:[function(t){r=t.inheritsLoose},function(t){e=t.cclegacy,n=t._decorator,o=t.Component}],execute:function(){var c,a;e._RF.push({},"fa586se66dJFL/MRNNbvyZO","actor-main",void 0);var i=n.ccclass;n.property,t("ActorMain",i("ActorMain")(((a=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.start=function(){e.target=this.node},n.update=function(t){},e}(o)).target=Object.create(null),c=a))||c);e._RF.pop()}}}));

System.register("chunks:///_virtual/actor-melee-weapon.ts",["./rollupPluginModLoBabelHelpers.js","cc","./actor-equip-base.ts","./damage-core.ts"],(function(t){"use strict";var e,a,o,r,s,c,n;return{setters:[function(t){e=t.inheritsLoose},function(t){a=t.cclegacy,o=t._decorator,r=t.geometry,s=t.PhysicsSystem},function(t){c=t.ActorEquipBase},function(t){n=t.calculateDamage}],execute:function(){var i;a._RF.push({},"4bb2849/HJC6rO7tSJB+h0F","actor-melee-weapon",void 0);var u=o.ccclass;o.property,t("ActorMeleeWeapon",u("ActorMeleeWeapon")(i=function(t){function a(){return t.apply(this,arguments)||this}return e(a,t),a.prototype.onFire=function(){this._bagData.bulletCount--;var t=this._actor._forwardNode,e=t.worldPosition,a=t.forward,o=new r.Ray(e.x,e.y,e.z,a.x,a.y,a.z),c=this._data.damage.distance,i=void 0;s.instance.raycastClosest(o,24,c)&&(i=s.instance.raycastClosestResult),n(this._data,i,this._actor)},a}(c))||i);a._RF.pop()}}}));

System.register("chunks:///_virtual/actor-move-slope.ts",["./rollupPluginModLoBabelHelpers.js","cc","./util2.ts"],(function(t){"use strict";var i,s,e,o,r,a,n,c,l;return{setters:[function(t){i=t.inheritsLoose},function(t){s=t.cclegacy,e=t._decorator,o=t.Vec3,r=t.v3,a=t.PhysicsSystem,n=t.geometry,c=t.Component},function(t){l=t.UtilVec3}],execute:function(){var h;s._RF.push({},"ab95dwRddFBYan4djoZ8kId","actor-move-slope",void 0);var p=e.ccclass;e.property,t("ActorMoveSlope",p("ActorMoveSlope")(h=function(t){function s(){for(var i,s=arguments.length,e=new Array(s),o=0;o<s;o++)e[o]=arguments[o];return(i=t.call.apply(t,[this].concat(e))||this).ray=new n.Ray,i.mask=0,i.distance=.4,i.p0=r(0,0,0),i.p1=r(0,0,0),i.direction=r(0,0,0),i}i(s,t);var e=s.prototype;return e.start=function(){this.mask=24,l.copy(this.ray.d,o.ZERO),this.ray.d=r(0,-1,0),this.distance=.3},e.updateSlope=function(t){var i=t.length();if(0===i)return o.ZERO;if(l.copy(this.ray.o,this.node.worldPosition),l.copy(this.direction,t),a.instance.raycastClosest(this.ray,this.mask,this.distance)){var s=a.instance.raycastClosestResult;if(l.copy(this.p0,s.hitPoint),this.ray.o.add(t.normalize().multiplyScalar(.03)),a.instance.raycastClosest(this.ray,this.mask,this.distance)){var e=a.instance.raycastClosestResult;l.copy(this.direction,e.hitPoint),this.direction.subtract(this.p0).normalize().multiplyScalar(i)}}return this.direction},s}(c))||h);s._RF.pop()}}}));

System.register("chunks:///_virtual/actor-move.ts",["./rollupPluginModLoBabelHelpers.js","cc","./util2.ts","./sensor-slope.ts","./sensor-ground.ts","./level.ts"],(function(t){"use strict";var e,i,o,n,r,l,a,s,c,h,u,p,g,y,v,d;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){r=t.cclegacy,l=t._decorator,a=t.v3,s=t.CCFloat,c=t.Vec3,h=t.RigidBody,u=t.math,p=t.Component},function(t){g=t.UtilVec3},function(t){y=t.SensorSlope},function(t){v=t.SensorGround},function(t){d=t.Level}],execute:function(){var f,V,m,M,b,S,D,z,w,L,R,x,F,P,A,C,G,j;r._RF.push({},"b31a5kDRyND84FJnozP5Ljo","actor-move",void 0);var H=l.ccclass,_=l.property,E=a(0,0,0);t("ActorMove",(f=H("ActorMove"),V=_({type:s,tooltip:"Move Speed. "}),m=_({tooltip:"Jump Force."}),M=_({type:s,tooltip:"Move smooth value."}),b=_({type:s,tooltip:"Default angle value"}),S=_({type:y,tooltip:" Sensor slope."}),D=_({type:v,tooltip:" Sensor ground."}),f((L=e((w=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),l=0;l<i;l++)r[l]=arguments[l];return e=t.call.apply(t,[this].concat(r))||this,o(e,"speed",L,n(e)),o(e,"jumpForce",R,n(e)),o(e,"smoothMove",x,n(e)),o(e,"angleVertical",F,n(e)),o(e,"sensorSlop",P,n(e)),o(e,"sensorGround",A,n(e)),e.velocity=a(0,0,0),e.velocityLocal=a(0,0,0),e.currentVelocity=a(0,0,0),e.moveVec3=new c(0,0,0),e.currentDirection=a(0,0,0),e.direction=a(0,0,0),e.angleHead=0,e.rigid=void 0,o(e,"angleVerticalMax",C,n(e)),o(e,"angleVerticalMin",G,n(e)),o(e,"faceMove",j,n(e)),e.angle=0,e.isJump=!1,e.isStopMove=!1,e}i(e,t);var r=e.prototype;return r.start=function(){this.rigid=this.getComponent(h),this.sensorSlop=this.getComponent(y),this.sensorGround=this.getComponent(v),this.node.setRotationFromEuler(0,180,0),this.onRotation(180,0)},r.lateUpdate=function(t){d.Instance.stop?this.stop():this.isStopMove||(this.movePosition(t),this.moveRotation())},r.movePosition=function(t){var e,i,o;if(c.lerp(this.velocityLocal,this.velocityLocal,this.moveVec3,t*this.smoothMove),g.copy(this.velocity,this.velocityLocal),this.faceMove&&c.rotateY(this.velocity,this.velocity,c.ZERO,u.toRadian(this.node.eulerAngles.y)),null==(e=this.rigid)||e.getLinearVelocity(this.currentVelocity),this.velocity.y=this.currentVelocity.y,null!=(i=this.sensorGround)&&i._isGround&&this.sensorSlop.checkSlope(this.velocity)){var n=this.velocity.length();g.copy(this.velocity,this.sensorSlop.vectorSlop),this.velocity.normalize().multiplyScalar(n)}null==(o=this.rigid)||o.setLinearVelocity(this.velocity)},r.moveRotation=function(){if(g.copy(this.currentDirection,this.direction),this.angle=u.toDegree(Math.abs(c.angle(this.currentDirection,this.node.forward))),this.angle>.001){g.copy(E,this.currentDirection);var t=Math.sign(-E.cross(this.node.forward).y)*this.angle+this.node.eulerAngles.y;this.node.setRotationFromEuler(0,t,0)}},r.directionRotation=function(){if(g.copy(this.currentDirection,this.direction),this.angle=u.toDegree(Math.abs(c.angle(this.currentDirection,this.node.forward))),this.angle>.001){g.copy(E,this.currentDirection);var t=Math.sign(-E.cross(this.node.forward).y)*this.angle+this.node.eulerAngles.y;this.node.setRotationFromEuler(0,t,0)}},r.moveDirection=function(t){g.copy(this.moveVec3,t),this.moveVec3.multiplyScalar(this.speed)},r.jump=function(){var t,e;null==(t=this.rigid)||t.getLinearVelocity(this.currentVelocity),this.currentVelocity.y=7,null==(e=this.rigid)||e.setLinearVelocity(this.currentVelocity)},r.onRotation=function(t,e){this.angleHead+=t,this.direction.z=-Math.cos(Math.PI/180*this.angleHead),this.direction.x=Math.sin(Math.PI/180*this.angleHead),this.angleVertical-=e,this.angleVertical>=this.angleVerticalMax&&(this.angleVertical=this.angleVerticalMax),this.angleVertical<=this.angleVerticalMin&&(this.angleVertical=this.angleVerticalMin)},r.onDirection=function(t,e,i){this.direction.x=t,this.direction.z=i,this.angleVertical=e,this.angleVertical>=this.angleVerticalMax&&(this.angleVertical=this.angleVerticalMax),this.angleVertical<=this.angleVerticalMin&&(this.angleVertical=this.angleVerticalMin)},r.stop=function(){this.rigid.getLinearVelocity(this.velocity),this.velocity.x=0,this.velocity.z=0,this.velocity.y=0,this.rigid.setLinearVelocity(this.velocity)},e}(p)).prototype,"speed",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),R=e(w.prototype,"jumpForce",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return a(0,6,0)}}),x=e(w.prototype,"smoothMove",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),F=e(w.prototype,"angleVertical",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),P=e(w.prototype,"sensorSlop",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=e(w.prototype,"sensorGround",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=e(w.prototype,"angleVerticalMax",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 30}}),G=e(w.prototype,"angleVerticalMin",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-30}}),j=e(w.prototype,"faceMove",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),z=w))||z));r._RF.pop()}}}));

System.register("chunks:///_virtual/actor-part.ts",["./rollupPluginModLoBabelHelpers.js","cc","./actor-base.ts"],(function(r){"use strict";var t,e,i,o,a,n,c,l;return{setters:[function(r){t=r.applyDecoratedDescriptor,e=r.inheritsLoose,i=r.initializerDefineProperty,o=r.assertThisInitialized},function(r){a=r.cclegacy,n=r._decorator,c=r.Component},function(r){l=r.ActorBase}],execute:function(){var p,s,u,f,y,b;a._RF.push({},"f8ec2rpJ9BFXYzAmFMC0kiU","actor-part",void 0);var h=n.ccclass,d=n.property;r("ActorPart",(p=h("ActorPart"),s=d({type:l}),p((y=t((f=function(r){function t(){for(var t,e=arguments.length,a=new Array(e),n=0;n<e;n++)a[n]=arguments[n];return t=r.call.apply(r,[this].concat(a))||this,i(t,"actor",y,o(t)),i(t,"part",b,o(t)),t}return e(t,r),t}(c)).prototype,"actor",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=t(f.prototype,"part",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"body"}}),u=f))||u));a._RF.pop()}}}));

System.register("chunks:///_virtual/actor-physical-skin.ts",["./rollupPluginModLoBabelHelpers.js","cc","./sensor-rays-angle.ts","./util2.ts"],(function(t){"use strict";var n,i,o,e,s,r,c,a;return{setters:[function(t){n=t.inheritsLoose},function(t){i=t.cclegacy,o=t._decorator,e=t.RigidBody,s=t.v3,r=t.Component},function(t){c=t.SensorRaysAngle},function(t){a=t.UtilNode}],execute:function(){var l;i._RF.push({},"cc90b2jDw1Fy5MH+dH/0Us+","actor-physical-skin",void 0);var u=o.ccclass;t("ActorPhysicalSkin",u("ActorPhysicalSkin")(l=function(t){function i(){for(var n,i=arguments.length,o=new Array(i),e=0;e<i;e++)o[e]=arguments[e];return(n=t.call.apply(t,[this].concat(o))||this).sensor=void 0,n.rigid=void 0,n.velocity=s(0,0,0),n.dir=s(0,0,0),n.velocityPlane=s(0,0,0),n.inverseForce=s(0,0,0),n}n(i,t);var o=i.prototype;return o.start=function(){this.sensor=a.getChildComponent(this.node,"skin",c),this.rigid=a.getComponent(this.node,e),this.velocity=s(0,0,0)},o.lateUpdate=function(t){},i}(r))||l);i._RF.pop()}}}));

System.register("chunks:///_virtual/actor-piranha.ts",["./rollupPluginModLoBabelHelpers.js","cc","./actor-base.ts","./brain.ts"],(function(n){"use strict";var t,r,a,o,i;return{setters:[function(n){t=n.inheritsLoose},function(n){r=n.cclegacy,a=n._decorator},function(n){o=n.ActorBase},function(n){i=n.Brain}],execute:function(){var c;r._RF.push({},"88d40zFkp1NQbbgrHIqus64","actor-piranha",void 0);var e=a.ccclass;a.property,n("ActorPiranha",e("ActorPiranha")(c=function(n){function r(){for(var t,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=n.call.apply(n,[this].concat(a))||this)._brain=void 0,t}t(r,n);var a=r.prototype;return a.start=function(){this.init("actor-piranha"),this._brain=new i(this._data.brain,this)},a.update=function(n){},a.noFoundPlayer=function(){},a.foundPlayer=function(){},a.nearPlayer=function(){},a.canEatPlayer=function(){},a.fleePlayer=function(){},a.feedPlayer=function(){},a.idle=function(){},a.move=function(){},a.jump=function(){},a.crossRoad=function(){},a.forcePrepareJump=function(){},r}(o))||c);r._RF.pop()}}}));

System.register("chunks:///_virtual/actor-sensor-drop-item.ts",["./rollupPluginModLoBabelHelpers.js","cc","./msg.ts","./sensor-rays.ts"],(function(t){"use strict";var e,o,r,i,n,s,c,a,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,r=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){n=t.cclegacy,s=t._decorator,c=t.Component},function(t){a=t.Msg},function(t){u=t.SensorRays}],execute:function(){var p,d,h;n._RF.push({},"d3508eOQZhLSJm3wolQq1en","actor-sensor-drop-item",void 0);var l=s.ccclass,f=s.property;t("ActorSensorDropItem",l("ActorSensorDropItem")((h=e((d=function(t){function e(){for(var e,o=arguments.length,n=new Array(o),s=0;s<o;s++)n[s]=arguments[s];return e=t.call.apply(t,[this].concat(n))||this,r(e,"num",h,i(e)),e.sensor=void 0,e.pickedNode=void 0,e.state=-1,e.curState=-1,e}o(e,t);var n=e.prototype;return n.start=function(){if(this.sensor=this.getComponent(u),null===this.sensor)throw new Error(this.node.name+" node can not find 'SensorRays' component.")},n.update=function(t){if(this.sensor.checked){this.pickedNode=this.sensor.checkedNode;this.pickedNode.name;this.curState=255}else this.curState=0,this.pickedNode=void 0;this.state!==this.curState&&(this.state=this.curState,a.emit("msg_grp_take_info",this.state))},n.getPicked=function(){if(null!=this.pickedNode)return this.pickedNode},e}(c)).prototype,"num",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),p=d))||p);n._RF.pop()}}}));

System.register("chunks:///_virtual/actor-shotgun.ts",["./rollupPluginModLoBabelHelpers.js","cc","./actor-equip-base.ts","./actor-part.ts"],(function(t){"use strict";var o,a,r,e,n,c,s;return{setters:[function(t){o=t.inheritsLoose},function(t){a=t.cclegacy,r=t._decorator,e=t.geometry,n=t.PhysicsSystem},function(t){c=t.ActorEquipBase},function(t){s=t.ActorPart}],execute:function(){var i;a._RF.push({},"1f1b9uZSClHnYl0aIaVtp6I","actor-shotgun",void 0);var u=r.ccclass;r.property,t("ActorShotgun",u("ActorShotgun")(i=function(t){function a(){return t.apply(this,arguments)||this}return o(a,t),a.prototype.onFire=function(){this._bagData.bulletCount--;var t=this._actor._forwardNode,o=t.worldPosition,a=t.forward,r=new e.Ray(o.x,o.y,o.z,a.x,a.y,a.z),c=this._data.damage.distance;if(n.instance.raycastClosest(r,8,c)){var i=n.instance.raycastClosestResult,u=i.collider.node.name;if(console.log("handgun fire hit "+u),u.concat("actor")){var d=i.collider.node.getComponent(s);d||console.error(" damage part can not add actor part component. "+d);var l=d.actor,p=this._data.damage[u];void 0===p&&console.error("hit part undefind "+u),l._data.hp-=p,l._data.hp<=0&&(this._actor._data.hp=1,l.do("dead"))}}else console.log("empty shoot.")},a}(c))||i);a._RF.pop()}}}));

System.register("chunks:///_virtual/actor-sound.ts",["./rollupPluginModLoBabelHelpers.js","cc","./sound.ts","./msg.ts","./actor.ts","./data-core.ts","./level.ts"],(function(t){"use strict";var n,e,o,r,i,a,s,c,u,h,l,p,f;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){i=t.cclegacy,a=t._decorator,s=t.randomRangeInt,c=t.Component},function(t){u=t.Sound},function(t){h=t.Msg},function(t){l=t.Actor},function(t){p=t.DataSoundInst},function(t){f=t.Level}],execute:function(){var d,g,_;i._RF.push({},"f7156vNNEhMz6XwfCtXaUup","actor-sound",void 0);var v=a.ccclass,S=a.property;t("ActorSound",v("ActorSound")((_=n((g=function(t){function n(){for(var n,e=arguments.length,i=new Array(e),a=0;a<e;a++)i[a]=arguments[a];return n=t.call.apply(t,[this].concat(i))||this,o(n,"stepLength",_,r(n)),n._currentStepLength=0,n._data={},n.actor=void 0,n}e(n,t);var i=n.prototype;return i.start=function(){this.actor=this.getComponent(l),this._data=this.actor._data,h.on("msg_walk_sfx",this.walkSfx.bind(this))},i.onDestroy=function(){h.off("msg_walk_sfx",this.walkSfx.bind(this))},i.update=function(t){var n;f.Instance.stop||(this._data.is_ground&&(this._currentStepLength+=Math.abs(t*(null==(n=this.actor._actorMove.velocityLocal)?void 0:n.length()))),this._currentStepLength>=this.stepLength&&(this.walkSfx(),this._currentStepLength-=this.stepLength))},i.walkSfx=function(){var t="walk_"+this._data.walk_in_type,n=p.get(t),e=s(0,n.length);u.on(n[e])},n}(c)).prototype,"stepLength",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1.2}}),d=g))||d);i._RF.pop()}}}));

System.register("chunks:///_virtual/actor-statistics.ts",["./rollupPluginModLoBabelHelpers.js","cc","./actor.ts","./msg.ts"],(function(t){"use strict";var i,s,c,e,n,a,o;return{setters:[function(t){i=t.inheritsLoose},function(t){s=t.cclegacy,c=t._decorator,e=t.v3,n=t.Component},function(t){a=t.Actor},function(t){o=t.Msg}],execute:function(){var r;s._RF.push({},"6dcabE6lv9PrasfsU70ClZn","actor-statistics",void 0);var u=c.ccclass;c.property,t("ActorStatistics",u("ActorStatistics")(r=function(t){function s(){for(var i,s=arguments.length,c=new Array(s),n=0;n<s;n++)c[n]=arguments[n];return(i=t.call.apply(t,[this].concat(c))||this).actor=void 0,i._velocity=e(0,0,0),i._statisticsTime=1,i._moveDistance=0,i._runDistance=0,i}i(s,t);var c=s.prototype;return c.start=function(){this.actor=this.getComponent(a)},c.update=function(t){var i,s,c;null==(i=this.actor)||null==(s=i._actorMove)||null==(c=s.rigid)||c.getLinearVelocity(this._velocity),this._velocity.y=0;var e=this._velocity.length();if(e>.1){var n,a=e*t;this._moveDistance+=a,null!=(n=this.actor)&&n._data.isRun&&(this._runDistance+=a),this._statisticsTime-=t,this._statisticsTime<=0&&(this._statisticsTime=1,o.emit("msg_stat_distance",{key:"move",distance:this._moveDistance}),this._runDistance>0&&o.emit("msg_stat_distance",{key:"run",distance:this._runDistance}),this._moveDistance=0,this._runDistance=0)}},s}(n))||r);s._RF.pop()}}}));

System.register("chunks:///_virtual/actor-task-go-target.ts",["./rollupPluginModLoBabelHelpers.js","cc","./actor-tasks.ts"],(function(t){"use strict";var i,n,s,o;return{setters:[function(t){i=t.inheritsLoose},function(t){n=t.cclegacy,s=t.Vec3},function(t){o=t.TaskBase}],execute:function(){n._RF.push({},"1cc27kllUFEX45C6T+8JuXj","actor-task-go-target",void 0);t("ActorTaskGoTarget",function(t){function n(){for(var i,n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(i=t.call.apply(t,[this].concat(s))||this).name="ActorActionWay",i.actor=void 0,i.index=0,i.waypoints=[],i.isStart=!1,i}i(n,t);var o=n.prototype;return o.init=function(t){this.actor=t},o.initWayPoints=function(t){this.index=0,this.waypoints=t},o.update=function(){if(this.isStart&&this.isWait&&s.distance(this.actor._data.pos,this.waypoints[this.index].pos)<.1){if(this.index>=this.waypoints.length)return void this.end();var t=this.waypoints[this.index+1].clone();t.subtract(this.actor._data.pos),this.actor.setDir(t),this.onAction(this.waypoints[this.index].action)}},o.onAction=function(t){this.actor.do(t)},n}(o));n._RF.pop()}}}));

System.register("chunks:///_virtual/actor-tasks.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var s,i,n;return{setters:[function(t){s=t.inheritsLoose},function(t){i=t.cclegacy,n=t.game}],execute:function(){i._RF.push({},"1c3d5DTGRlHz5SLFikzWo7F","actor-tasks",void 0);var e=t("TaskBase",function(){function t(){this.name="",this.isStart=!1,this.isWait=!1,this.tasks=[],this.onCompleteFun=void 0}var s=t.prototype;return s.add=function(){for(var t=0;t<arguments.length;t++)this.tasks.push(t<0||arguments.length<=t?void 0:arguments[t])},s.start=function(){this.isStart=!0},s.sequence=function(t){var s=new a;return s.add(t),this.tasks.push(s),s},s.parallel=function(t){var s=new o;return s.add(t),this.tasks.push(s),s},s.update=function(){this.isStart&&(this.isWait||this.end())},s.end=function(){this.isStart=!1,this.isWait=!1,null!==this.onCompleteFun&&(this.onCompleteFun(),console.log("on complete:",this)),this.onCompleteFun=void 0,console.log("on end:",this.name,n.frameTime)},s.break=function(){for(var t=0;t<this.tasks.length;t++)this.tasks[t].break()},s.onComplete=function(t){this.onCompleteFun=t},t}()),a=t("TaskSequence",function(t){function i(){for(var s,i=arguments.length,n=new Array(i),e=0;e<i;e++)n[e]=arguments[e];return(s=t.call.apply(t,[this].concat(n))||this).index=0,s}s(i,t);var n=i.prototype;return n.start=function(){t.prototype.start.call(this),this.index=0,this.tasks[this.index].start()},n.update=function(){this.isStart&&(this.isWait||(this.tasks[this.index].isStart?this.tasks[this.index].update():this.next()))},n.next=function(){this.index++,this.index>=this.tasks.length?this.end():this.tasks[this.index].start()},n.end=function(){t.prototype.end.call(this)},i}(e)),o=t("TaskParallel",function(t){function i(){return t.apply(this,arguments)||this}s(i,t);var n=i.prototype;return n.start=function(){t.prototype.start.call(this);for(var s=0;s<this.tasks.length;s++)this.tasks[s].start()},n.update=function(){if(this.isStart&&!this.isWait){for(var t=0;t<this.tasks.length;t++)this.tasks[t].update();for(var s=0;s<this.tasks.length;s++)if(this.tasks[s].isStart)return;this.end()}},n.end=function(){t.prototype.end.call(this)},i}(e));i._RF.pop()}}}));

System.register("chunks:///_virtual/actor.ts",["./rollupPluginModLoBabelHelpers.js","cc","./actor-base.ts","./local.ts","./msg.ts","./util2.ts","./actor-animation-graph.ts","./actor-bag.ts","./actor-equipment.ts","./actor-sensor-drop-item.ts","./actor-move.ts","./sensor-ground.ts","./actor-face.ts","./sound.ts"],(function(t){"use strict";var i,a,e,o,n,s,r,_,c,h,u,d,l,p,m,g,v,f,y,w,M,b,q,A;return{setters:[function(t){i=t.applyDecoratedDescriptor,a=t.inheritsLoose,e=t.initializerDefineProperty,o=t.assertThisInitialized,n=t.createClass},function(t){s=t.cclegacy,r=t._decorator,_=t.v3,c=t.game,h=t.Vec3,u=t.math},function(t){d=t.ActorBase},function(t){l=t.Local},function(t){p=t.Msg},function(t){m=t.UtilNode,g=t.UtilVec3},function(t){v=t.ActorAnimationGraph},function(t){f=t.ActorBag},function(t){y=t.ActorEquipment},function(t){w=t.ActorSensorDropItem},function(t){M=t.ActorMove},function(t){b=t.SensorGround},function(t){q=t.ActorFace},function(t){A=t.Sound}],execute:function(){var x,S,k,E,I,R,B;s._RF.push({},"93422/IafpK0ZdI10gHw4yr","actor",void 0);var G=r.ccclass,D=r.property,N=_(0,0,0);_(0,0,0),t("Actor",(x=G("Actor"),S=D({type:w}),k=D({type:q}),x((R=i((I=function(t){function i(){for(var i,a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(i=t.call.apply(t,[this].concat(n))||this)._move=_(0,0,0),i._actorBag=void 0,i._actorEquipment=void 0,e(i,"actorSensorDropItem",R,o(i)),e(i,"_actorFace",B,o(i)),i._actorSensorGround=void 0,i._actorMove=void 0,i._viewNoWeapon=Object.create(null),i._forwardNode=void 0,i._viewRoot=void 0,i.forward=_(0,0,0),i._fps=0,i.isReady=!1,i.bulletBox=2,i}a(i,t);var s=i.prototype;return s.initView=function(){t.prototype.initView.call(this),null==this._actorBag&&(this._actorBag=new f(this)),null==this._actorEquipment&&(this._actorEquipment=new y(this)),null==this._actorSensorGround&&(this._actorSensorGround=this.node.getComponent(b)),null==this._actorMove&&(this._actorMove=this.getComponent(M)),null==this._forwardNode&&(this._forwardNode=m.find(this.node,"forwardNode")),null==this._viewRoot&&(this._viewRoot=m.find(this.node,"animation_view")),null==this._animationGraph&&(this._animationGraph=this._viewRoot.getComponent(v)),this.do("play")},s.onUpdate=function(){t.prototype.onUpdate.call(this),this._updates.push(this.updateAction.bind(this))},s.do=function(i){this.noAction||t.prototype.do.call(this,i)},s.updateAction=function(t){var i,a,e;(this._fps=c.frameRate,this._data.hit_recover>0)?(this._data.hit_recover-=t,this._actorMove.isStopMove=!0,null==(e=this._actorMove)||e.stop()):this._actorMove.isStopMove=!1;var o=this.calculateRunStrength(t);this._actorMove.speed=o?-this._data.run_speed.z:-this._data.move_speed.z;var n=Math.abs(this._actorMove.velocity.length()/this._actorMove.speed);null==(i=this._actorEquipment)||i.updateAim(n),this.recoverStrength(),this._forwardNode&&g.copy(this.forward,null==(a=this._forwardNode)?void 0:a.forward)},s.onJump=function(){!1!==this._actorSensorGround._isGround&&(this._data.strength>=this._data.cost_jump_strength&&(this._data.strength-=this._data.cost_jump_strength),this.do("jump"))},s.onGround=function(){this.do("on_ground")},s.offGround=function(){this.do("off_ground")},s.onWin=function(){},s.jump=function(){var t;null==(t=this._actorMove)||t.jump()},s.onMove=function(t){var i;null==(i=this._actorMove)||i.moveDirection(t)},s.onRotation=function(t,i){var a;t>90&&(t=90),t<-90&&(t=-90),null==(a=this._actorMove)||a.onRotation(t,i)},s.onDir=function(t,i){this._dir.z=i,this._dir.x=t},s.onPause=function(){},s.onRun=function(t){this._data.is_run=t},s.onPick=function(){var t,i=null==(t=this.actorSensorDropItem)?void 0:t.getPicked();if(void 0!==i){var a,e,o,n=i.name;if("medkit"==n){var s=this._data.max_hp-this._data.hp;return s<=0?void p.emit("msg_tips",""+l.Instance.get("full_hp")):(this._data.hp=this._data.max_hp,A.on("sfx_recovery_hp"),this.updateHP(),p.emit("msg_tips",l.Instance.get("recovery_hp")+"  "+s),void i.emit("picked"))}if(null!=(a=this._actorBag)&&a.pickedSameWeaponIncreaseClips(n))return i.emit("picked"),p.emit("msg_tips",l.Instance.get("picked_clip")+"  "+n+"  x 1"),p.emit("msg_update_bag"),void p.emit("msg_update_equip_info");if("bullet_box"===n)return null==(o=this._actorBag)||o.pickedBulletBox(),i.emit("picked"),p.emit("msg_tips",""+l.Instance.get("picked_bullet_box")),void p.emit("msg_update_equip_info");null!=(e=this._actorBag)&&e.pickedItem(n)?(i.emit("picked"),p.emit("msg_tips",l.Instance.get("picked")+"  "+l.Instance.get(n)+"  x 1"),this.bulletBox++,p.emit("msg_update_bag"),p.emit("msg_update_equip_info")):p.emit("msg_tips",""+l.Instance.get("bag_is_full"))}},s.onDrop=function(){var t;null!=(t=this._actorBag)&&t.dropItem()&&p.emit("msg_update_bag")},s.onCrouch=function(){var t;this._data.is_crouch=!this._data.is_crouch,null==(t=this._animationGraph)||t.play("bool_crouch",this._data.is_crouch),p.emit("msg_change_tps_camera_height",this._data.is_crouch?this._data.stand_camera_height:this._data.crouch_camera_height)},s.onAim=function(t){if(void 0===t)this._data.is_aim=!this._data.is_aim;else{if(t==this._data.is_aim)return;this._data.is_aim=t}this.do(this._data.is_aim?"on_aim":"off_aim"),this.isPlayer&&p.emit("msg_change_tps_camera_target",this._data.is_aim?1:0)},s.onFire=function(){var t,i,a;0!=(null==(t=this._actorEquipment.currentEquip)?void 0:t.checkUse())&&(null==(i=this._actorEquipment)||i.do("fire"),null==(a=this._actorEquipment)||a.updateAim(1,!0))},s.onAutoFire=function(t){this._data.is_auto_fire=t},s.onReload=function(){var t,i,a;null!=(t=this._actorEquipment)&&null!=(i=t.currentEquip)&&i.checkFullBullet()||null==(a=this._actorEquipment)||a.do("reload")},s.onEquip=function(t){var i;null!=(i=this._actorEquipment)&&i.equip(t)?this._data.has_multi_res&&(this._viewNoWeapon.active=!1):this._data.has_multi_res&&(this._viewNoWeapon.active=!0)},s.onChangeEquips=function(){return!1},s.calculateStrengthUseEquip=function(){var t=this._data.strength>=this._data.cost_use_equip_strength;return t&&(this._data.strength-=this._data.cost_use_equip_strength,this._data.strength=Math.max(this._data.strength,0)),t},s.calculateRunStrength=function(t){var i=this._data.is_run&&this._data.strength>=this._data.cost_run_strength;return i&&(this._data.strength-=this._data.cost_run_strength*t,this._data.strength=Math.max(this._data.strength,0)),i},s.recoverStrength=function(){if(!1!==this._data.is_ground&&!this._data.is_run){this._data.strength+=this._data.recover_ground_strength*c.deltaTime,this._data.strength>this._data.max_strength&&(this._data.strength=this._data.max_strength);var t=this._data.strength/this._data.max_strength;this.isPlayer&&p.emit("fil_strength",t)}},s.lateUpdate=function(t){var i,a,e,o;if(null!=this._actorMove){(null==(i=this._actorMove)?void 0:i.rigid).getLinearVelocity(N),N.y=0;var n=N.length(),s=this.node.eulerAngles.y;h.rotateY(N,N,h.ZERO,u.toRadian(-s));var r=N.x,_=N.z,c=n*this._data.linear_velocity_animation_rate,d=this._actorMove.angle;n<.01&&d>2&&(c=d*this._data.angle_velocity_animation_rate,r=d/this._data.angle_velocity_animation_scale),null==(a=this._animationGraph)||a.setValue("num_velocity_x",r),null==(e=this._animationGraph)||e.setValue("num_velocity_y",-_),null==(o=this._animationGraph)||o.setValue("num_move_speed",c)}},n(i,[{key:"noAction",get:function(){return this._data.is_dead||this._data.is_win}}]),i}(d)).prototype,"actorSensorDropItem",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=i(I.prototype,"_actorFace",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=I))||E));s._RF.pop()}}}));

System.register("chunks:///_virtual/aim-control.ts",["./rollupPluginModLoBabelHelpers.js","cc","./math-util.ts","./aim-ik.ts","./util2.ts"],(function(t){"use strict";var i,e,o,r,n,a,s,l,h,u,g,c,m,p,d;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){n=t.cclegacy,a=t._decorator,s=t.Vec3,l=t.Quat,h=t.Node,u=t.math,g=t.game,c=t.Component},function(t){m=t.default},function(t){p=t.default},function(t){d=t.UtilVec3}],execute:function(){var f,T,w,b,v,k,_,P,y,A,W,D,R,S,z,M,x,I,V,K,N,C,F,Q,U,O,j,E,H,L,Y,B,J,q,G,X,Z;n._RF.push({},"adfa7JrNT5IuKAHSExYQS6b","aim-control",void 0);var $=a.ccclass,tt=a.property,it=new s,et=new s,ot=new l,rt=(new l,new s);t("default",(f=$("AimControl"),T=tt({type:p,tooltip:"Reference to the AimIK component."}),w=tt({tooltip:"Master weight of the IK solver."}),b=tt({type:h,tooltip:"The target to aim at. Do not use the Target transform that is assigned to AimIK. Set to null if you wish to stop aiming."}),v=tt({tooltip:"The time it takes to switch targets."}),k=tt({tooltip:"The time it takes to blend in/out of AimIK weight."}),_=tt({tooltip:"Enables smooth turning towards the target according to the parameters under this header."}),P=tt({tooltip:"Speed of turning towards the target using Vector3.RotateTowards."}),y=tt({tooltip:"Speed of moving towards the target using Vector3.RotateTowards."}),A=tt({tooltip:"Speed of slerping towards the target."}),W=tt({tooltip:"The position of the pivot that the aim target is rotated around relative to the root of the character."}),D=tt({tooltip:"Minimum distance of aiming from the first bone. Keeps the solver from failing if the target is too close."}),R=tt({tooltip:"Offset applied to the target in world space. Convenient for scripting aiming inaccuracy."}),S=tt({tooltip:"Character root will be rotate around the Y axis to keep root forward within this angle from the aiming direction."}),z=tt({tooltip:"If enabled, aligns the root forward to target direction after Max Root Angle has been exceeded."}),M=tt({tooltip:"The time of turning towards the target direction if Max Root Angle has been exceeded and Turn To Target is enabled."}),x=tt({tooltip:"If true, AimIK will consider whatever the current direction of the weapon to be the forward aiming direction and work additively on top of that. This enables you to use recoil and reloading animations seamlessly with AimIK. Adjust the Vector3 value below if the weapon is not aiming perfectly forward in the aiming animation clip."}),I=tt({tooltip:"The direction of the animated weapon aiming in character space. Tweak this value to adjust the aiming. Use Animated Aim Direction must be enabled for this property to work."}),f((N=i((K=function(t){function i(){for(var i,e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return i=t.call.apply(t,[this].concat(n))||this,o(i,"ik",N,r(i)),o(i,"weight",C,r(i)),o(i,"target",F,r(i)),o(i,"targetSwitchSmoothTime",Q,r(i)),o(i,"weightSmoothTime",U,r(i)),o(i,"smoothTurnTowardsTarget",O,r(i)),o(i,"maxRadiansDelta",j,r(i)),o(i,"maxMagnitudeDelta",E,r(i)),o(i,"slerpSpeed",H,r(i)),o(i,"pivotOffsetFromRoot",L,r(i)),o(i,"minDistance",Y,r(i)),o(i,"offset",B,r(i)),o(i,"maxRootAngle",J,r(i)),o(i,"turnToTarget",q,r(i)),o(i,"turnToTargetTime",G,r(i)),o(i,"useAnimatedAimDirection",X,r(i)),o(i,"animatedAimDirection",Z,r(i)),i._lastTarget=null,i._switchWeight=0,i._switchWeightV=0,i._weightV=0,i._lastPosition=new s,i._dir=new s,i._lastSmoothTowardsTarget=!1,i.turningToTarget=!1,i.turnToTargetMlp=1,i.turnToTargetMlpV=0,i._interval=void 0,i}e(i,t);var n=i.prototype;return n.start=function(){this._lastPosition=s.clone(this.ik.solver.ikPosition),s.subtract(this._dir,this.ik.solver.ikPosition,this._getPivot()),this.ik.solver.target=this.target},n.lateUpdate=function(){this.target!=this._lastTarget&&(null==this._lastTarget&&null!=this.target&&this.ik.solver.ikPositionWeight<=0?(this._lastPosition=s.clone(this.target.getWorldPosition()),s.subtract(this._dir,this.target.getWorldPosition(),this._getPivot()),s.add(this.ik.solver.ikPosition,this.target.getWorldPosition(),this.offset)):(this._lastPosition=s.clone(this.ik.solver.ikPosition),s.subtract(this._dir,this.ik.solver.ikPosition,this._getPivot())),this._switchWeight=0,this._lastTarget=this.target);var t={value:this._weightV};this.ik.solver.ikPositionWeight=m.smoothDamp(this.ik.solver.ikPositionWeight,null!=this.target?this.weight:0,t,this.weightSmoothTime),this._weightV=t.value,this.ik.solver.ikPositionWeight>=.999&&(this.ik.solver.ikPositionWeight=1),this.ik.solver.ikPositionWeight<=.001&&(this.ik.solver.ikPositionWeight=0),this.ik.solver.ikPositionWeight<=0||(t.value=this._switchWeightV,this._switchWeight=m.smoothDamp(this._switchWeight,1,t,this.targetSwitchSmoothTime),this._switchWeightV=t.value,this._switchWeight>=.99&&(this._switchWeight=1),null!=this.target&&(s.add(it,this.target.getWorldPosition(),this.offset),s.lerp(this.ik.solver.ikPosition,this._lastPosition,it,this._switchWeight)),this.smoothTurnTowardsTarget!=this._lastSmoothTowardsTarget&&(s.subtract(this._dir,this.ik.solver.ikPosition,this._getPivot()),this._lastSmoothTowardsTarget=this.smoothTurnTowardsTarget),this.smoothTurnTowardsTarget&&(s.subtract(it,this.ik.solver.ikPosition,this._getPivot()),l.fromViewUp(ot,it,new s(0,1,0)),l.toEuler(this._dir,ot),s.add(this.ik.solver.ikPosition,this._getPivot(),this._dir)),this._applyMinDistance(),this._rootRotation(),this.useAnimatedAimDirection&&(s.transformQuat(it,this.animatedAimDirection,this.ik.rootNode.getWorldRotation()),this.ik.rootNode.inverseTransformPoint(this.ik.solver.axis,it)))},n._getPivot=function(){return s.transformQuat(rt,this.pivotOffsetFromRoot,this.ik.rootNode.getWorldRotation()),s.add(rt,rt,this.ik.rootNode.getWorldPosition()),rt},n._applyMinDistance=function(){d.copy(it,this._getPivot()),s.subtract(et,this.ik.solver.ikPosition,it);var t=Math.max(et.length(),this.minDistance);et.normalize(),et.multiplyScalar(t),s.add(this.ik.solver.ikPosition,it,et)},n._rootRotation=function(){var t=this.ik.enableAim?this.maxRootAngle:0,i=u.lerp(180,t*this.turnToTargetMlp,this.ik.solver.ikPositionWeight);if(i<180){l.invert(ot,this.ik.rootNode.getWorldRotation()),s.subtract(it,this.ik.solver.ikPosition,this._getPivot()),s.transformQuat(it,it,ot);var e=u.toDegree(Math.atan2(it.x,it.z)),o=0;e>i&&(o=e-i,!this.turningToTarget&&this.turnToTarget&&this._startCoroutine(this._turnToTarget.bind(this))),e<-i&&(o=e+i,!this.turningToTarget&&this.turnToTarget&&this._startCoroutine(this._turnToTarget.bind(this))),l.fromAxisAngle(ot,s.UP,u.toRadian(o)),l.multiply(ot,ot,this.ik.rootNode.getWorldRotation())}},n._turnToTarget=function(){for(this.turningToTarget=!0;this.turnToTargetMlp>0;)return this.turnToTargetMlp-=g.deltaTime,void(this.turnToTargetMlp<.01&&(this.turnToTargetMlp=0));clearInterval(this._interval),this._interval=null,this.turnToTargetMlp=1},n._startCoroutine=function(t){this._interval&&clearInterval(this._interval),this._interval=setInterval(t)},i}(c)).prototype,"ik",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=i(K.prototype,"weight",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),F=i(K.prototype,"target",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=i(K.prototype,"targetSwitchSmoothTime",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.3}}),U=i(K.prototype,"weightSmoothTime",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.3}}),O=i(K.prototype,"smoothTurnTowardsTarget",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),j=i(K.prototype,"maxRadiansDelta",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),E=i(K.prototype,"maxMagnitudeDelta",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),H=i(K.prototype,"slerpSpeed",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),L=i(K.prototype,"pivotOffsetFromRoot",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new s(0,0,0)}}),Y=i(K.prototype,"minDistance",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),B=i(K.prototype,"offset",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new s(0,0,0)}}),J=i(K.prototype,"maxRootAngle",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 45}}),q=i(K.prototype,"turnToTarget",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),G=i(K.prototype,"turnToTargetTime",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.2}}),X=i(K.prototype,"useAnimatedAimDirection",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Z=i(K.prototype,"animatedAimDirection",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new s(0,0,1)}}),V=K))||V));n._RF.pop()}}}));

System.register("chunks:///_virtual/aim-ik.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ik-bone.ts","./ik-solver-aim.ts"],(function(e){"use strict";var t,o,i,n,r,a,l,s,u,c,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,l=e.Node,s=e.CCFloat,u=e.Component},function(e){c=e.default},function(e){p=e.default}],execute:function(){var d,h,b,f,m,y,v,g,w,N,k;r._RF.push({},"4022do3adVMFotSYiH8nDlE","aim-ik",void 0);var z=a.ccclass,A=a.property;e("default",(d=z("AimIK"),h=A({type:l,tooltip:"this node that we want to aim at ikPosition."}),b=A({type:l,tooltip:"this node that we want to aim at ikPosition."}),f=A({type:[l],tooltip:"bones node"}),m=A({type:[s],tooltip:"bones weight"}),d((g=t((v=function(e){function t(){for(var t,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).solver=new p(t.node),i(t,"rootNode",g,n(t)),i(t,"aimNode",w,n(t)),i(t,"boneNodes",N,n(t)),i(t,"boneWeights",k,n(t)),t.enableAim=!0,t}o(t,e);var r=t.prototype;return r.start=function(){var e=this;this.boneNodes.forEach((function(t,o){e.solver.bones.push(new c(t,e.boneWeights[o]))})),this.solver.rootNode=this.rootNode,this.solver.aimNode=this.aimNode},r.update=function(){this.enableAim&&this.solver.update()},r.lateUpdate=function(){this.enableAim&&this.solver.lateUpdate()},t}(u)).prototype,"rootNode",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(v.prototype,"aimNode",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=t(v.prototype,"boneNodes",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),k=t(v.prototype,"boneWeights",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),y=v))||y));r._RF.pop()}}}));

System.register("chunks:///_virtual/animation-to-oribit.ts",["./rollupPluginModLoBabelHelpers.js","cc","./orbit-camera.ts"],(function(t){"use strict";var i,o,n,e,r,a,u,s,c,h,l,b;return{setters:[function(t){i=t.applyDecoratedDescriptor,o=t.inheritsLoose,n=t.initializerDefineProperty,e=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,u=t.Quat,s=t.Animation,c=t.input,h=t.Input,l=t.Component},function(t){b=t.default}],execute:function(){var p,d,f,m,T,v,y;r._RF.push({},"9c9cbHvoP9DX5EFtWceqQFo","animation-to-oribit",void 0);var D=a.ccclass,_=a.property,I=new u;t("animation_to_oribit",(p=D("animation_to_oribit"),d=_(s),f=_(b),p((v=i((T=function(t){function i(){for(var i,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return i=t.call.apply(t,[this].concat(r))||this,n(i,"ani",v,e(i)),n(i,"orbit",y,e(i)),i.touched=!1,i.timeoutID=void 0,i}o(i,t);var r=i.prototype;return r.start=function(){c.on(h.EventType.TOUCH_START,this.onTouchStart,this),c.on(h.EventType.TOUCH_END,this.onTouchEnd,this)},r.onTouchStart=function(){this.orbit&&this.ani&&(this.touched=!0,this.timeoutID&&clearTimeout(this.timeoutID),this.ani.enabled=!1,this.orbit.enabled=!0)},r.onTouchEnd=function(){var t=this;this.orbit&&this.ani&&(this.orbit.enabled=!1,this.timeoutID=setTimeout((function(){t.touched=!1,t.ani.enabled=!0,t.timeoutID=void 0}),1e3))},r.update=function(t){this.orbit&&!this.touched&&(u.slerp(I,this.orbit.node.rotation,u.IDENTITY,7*t),this.orbit.node.rotation=I)},i}(l)).prototype,"ani",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=i(T.prototype,"orbit",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=T))||m));r._RF.pop()}}}));

System.register("chunks:///_virtual/animationgraph-move.ts",["./rollupPluginModLoBabelHelpers.js","cc","./msg.ts"],(function(t){"use strict";var e,i,n,r,o,a,s,c;return{setters:[function(t){e=t.inheritsLoose,i=t.applyDecoratedDescriptor,n=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){o=t.cclegacy,a=t._decorator,s=t.animation},function(t){c=t.Msg}],execute:function(){var u,g,p,l;o._RF.push({},"4cc78tsgRFOp6z9sZ05BwP4","animationgraph-move",void 0);var h=a.ccclass,m=a.property;t("AnimationGraphMove",h("AnimationGraphMove")((g=function(t){function i(){for(var e,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o))||this,n(e,"time",p,r(e)),n(e,"msg",l,r(e)),e._triggered=!1,e}e(i,t);var o=i.prototype;return o.onMotionStateEnter=function(t,e){},o.onMotionStateExit=function(t,e){this._triggered=!1},o.onMotionStateUpdate=function(t,e){e.progress>this.time&&!this._triggered?(this._triggered=!0,c.emit(this.msg)):e.progress<this.time&&this._triggered&&(this._triggered=!1)},o.onStateMachineEnter=function(t){},o.onStateMachineExit=function(t){},i}(s.StateMachineComponent),p=i(g.prototype,"time",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),l=i(g.prototype,"msg",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"msg_walk_sfx"}}),u=g))||u);o._RF.pop()}}}));

System.register("chunks:///_virtual/astar.ts",["./rollupPluginModLoBabelHelpers.js","cc","./singleton.ts","./data-structure.ts"],(function(t){"use strict";var s,e,i,o,a;return{setters:[function(t){s=t.inheritsLoose},function(t){e=t.cclegacy,i=t.instantiate},function(t){o=t.Singleton},function(t){a=t.Stack}],execute:function(){e._RF.push({},"9adba4beKpHbrekEG1z+Xiv","astar",void 0);t("AStar",function(t){function e(){for(var s,e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];return(s=t.call.apply(t,[this].concat(i))||this).map=void 0,s.start_pos=void 0,s.end_pos=void 0,s.closeTable=[],s.openTable=void 0,s.max_x=0,s.max_z=0,s.dir=[[-1,1],[0,1],[1,0],[-1,0],[1,0],[-1,-1],[0,-1],[1,-1]],s._tempNode=void 0,s._stop=!0,s}s(e,t);var o=e.prototype;return o.initMap=function(t){this.map=[],this.max_x=t.length,this.max_z=t[0].length;for(var s=0;s<this.max_x;s++){for(var e=[],i=0;i<this.max_z;i++){var o={f:-1,state:t[s][i]};e.push(o)}this.map.push(e)}console.log(this.map),this.openTable=new a(20),this.closeTable=this.createTable(this.max_x,this.max_z,0),this.copyTable(this.closeTable,this.map)},o.setTestNode=function(t){this._tempNode=t},o.testNode=function(t){var s=i(this._tempNode);s.parent=this._tempNode.parent,s.setPosition(t[0],0,t[1])},o.find=function(t,s){console.log("start:",t,"end:",s),this._stop=!1,this.start_pos=t,this.end_pos=s,this.openTable.push([t.x,t.z]),this.checkCurrent(t)},o.update=function(){if(!this._stop)if(this.openTable.size()>0){var t=this.openTable.pop();this.testNode(t),this.checkCurrent({x:t[0],z:t[1]})}else console.log("can not find target pos.")},o.checkCurrent=function(t){if(t.x===this.end_pos.x&&t.z===this.end_pos.z)return console.log("find end pos."),void(this._stop=!0);this.map[t.x][t.z].state=0,this.openTable.pop(),this.closeTable[t.x][t.z]=1;for(var s=0;s<this.dir.length;s++){var e=t.x+this.dir[s][0],i=t.z+this.dir[s][1];if(!(e<0||i<0||e>=this.max_x||i>=this.max_z)&&1!==this.closeTable[e][i]){var o=this.f_cost({x:e,z:i},this.end_pos);this.map[e][i].cost=o,this.openTable.push([e,i])}}},o.f_cost=function(t,s){return Math.abs(t.x-s.x)+Math.abs(t.z-s.z)},o.createTable=function(t,s,e){for(var i=t,o=s,a=[],n=0;n<i;n++){for(var r=[],h=0;h<o;h++)r.push(e);a.push(r)}return a},o.copyTable=function(t,s){for(var e=this.max_x,i=this.max_z,o=0;o<e;o++)for(var a=0;a<i;a++)t[o][a]=s[o][a]},o.clearTable=function(t){for(var s=t.length,e=t[0].length,i=0;i<s;i++)for(var o=0;o<e;o++)t[i][o]=0},e}(o));e._RF.pop()}}}));

System.register("chunks:///_virtual/base-stage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./env","./href-setting.ts","./pass-utils.ts","./utils2.ts","./setting.ts"],(function(e){"use strict";var t,i,r,n,a,s,o,u,l,c,h,g,f,p,d,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.createClass,r=e.initializerDefineProperty},function(e){n=e.cclegacy,a=e._decorator,s=e.CCString,o=e.Node,u=e.director,l=e.Vec2,c=e.gfx},function(e){h=e.EDITOR},function(e){g=e.HrefSetting},function(e){f=e.passUtils},function(e){p=e.getCameraUniqueID,d=e.getRenderArea},function(e){b=e.settings}],execute:function(){var m,S,w,y,_,v,N,z,C,D,M,R;n._RF.push({},"a5cad28rH1GHouQWrQfoVu6","base-stage",void 0);var k=a.ccclass,A=a.type,P=a.property,T=0;e("BaseStage",(m=k("BaseStage"),S=P(s),w=A(o),m(((R=function(){function e(){this._id=0,this._materialName="blit-screen",r(this,"enable",v,this),r(this,"name",N,this),r(this,"shadingScale",z,this),r(this,"customSize",C,this),r(this,"outputNames",D,this),r(this,"targetStageNode",M,this),this.useCustomSize=!1,this.renderToScreen=!1,this.rtCount=1,this.renderTextures=[],this._rect=new c.Rect(0,0,1,1),this.clearColors=[new c.Color(0,0,0,1)],this.requestDepth=!1,this.lastStage=void 0,this.uniqueStage=!1,this._renderArea=new c.Rect,this._id=T++}var t=e.prototype;return t.slotName=function(e,t){void 0===t&&(t=0);var i=this.outputNames[t]+this.name;return this.uniqueStage?i:i+"_"+this._id+"_"+p(e)},t.finalShadingScale=function(){return this.shadingScale*u.root.pipeline.pipelineSceneData.shadingScale},t.checkEnable=function(){return this.enable},t.renderProfiler=function(e){g.showFps&&b.renderProfiler&&!h&&(f.pass.showStatistics=!0,b.renderProfiler=!1)},t.getRenderArea=function(e){var t=this.finalShadingScale(),i=d(this._renderArea,e,e.window.width*t,e.window.height*t);return i.width=Math.floor(i.width),i.height=Math.floor(i.height),i},t.destroy=function(){},t.render=function(e,t){},i(e,[{key:"materialName",get:function(){return this._materialName}},{key:"material",get:function(){return globalThis.pipelineAssets.getMaterial(this._materialName)}},{key:"outputTexture",get:function(){return null}}]),e}()).outputMap=new Map,R.stages=new Map,R.forwardStage=void 0,v=t((_=R).prototype,"enable",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),N=t(_.prototype,"name",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"BaseStage"}}),z=t(_.prototype,"shadingScale",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),C=t(_.prototype,"customSize",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new l(1024,1024)}}),D=t(_.prototype,"outputNames",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),M=t(_.prototype,"targetStageNode",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=_))||y));n._RF.pop()}}}));

System.register("chunks:///_virtual/bind.ts",["./rollupPluginModLoBabelHelpers.js","cc","./msg.ts","./singleton.ts","./local.ts","./GameQuality.ts","./sound.ts","./res-cache.ts","./level.ts","./save.ts","./game-set.ts","./data-core.ts"],(function(t){"use strict";var n,e,i,s,a,c,u,r,o,_,h,f;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy},function(t){i=t.Msg},function(t){s=t.Singleton},function(t){a=t.Local},function(t){c=t.GameQuality},function(t){u=t.Sound},function(t){r=t.ResCache},function(t){o=t.Level},function(t){_=t.Save},function(t){h=t.GameSet},function(t){f=t.DataGameInst}],execute:function(){e._RF.push({},"87dbck8mEZM4qc/S2vmPPG8","bind",void 0);t("Bind",function(t){function e(){for(var n,e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];return(n=t.call.apply(t,[this].concat(i))||this)._map={},n.totalEvents=0,n}n(e,t);var s=e.prototype;return s.init=function(){i.on("msg_count_events",this.countEvents.bind(this)),this._map.txt_upgrade_life_detail=function(){return o.Instance.getUpgradeCardInfo(0)},this._map.txt_upgrade_attack_detail=function(){return o.Instance.getUpgradeCardInfo(1)},this._map.txt_upgrade_defense_detail=function(){return o.Instance.getUpgradeCardInfo(2)},this._map.btn_select_upgrade_0=function(){o.Instance.upgradePlayerAttributes(0),i.emit("back")},this._map.btn_select_upgrade_1=function(){o.Instance.upgradePlayerAttributes(1),i.emit("back")},this._map.btn_select_upgrade_2=function(){o.Instance.upgradePlayerAttributes(2),i.emit("back")},this._map.txt_language=function(){return a.Instance.getShowName()},this._map.txt_game_quality=function(){return c.Instance.getShowName()},this._map.sli_sound=function(){return u.volumeSound},this._map.sli_music=function(){return u.volumeMusic},this._map.sli_sensitivity=function(){return h.Instance.sensitivity},this._map.sli_sensitivity_a=function(){return h.Instance.sensitivity_a},this._map.spr_score=function(){var t="txt_score_"+o.Instance.getLevelScore();return r.Instance.getSprite(t)},this._map.txt_killed=function(){return _.Instance.getStatistics("killedTimes")},this._map.txt_hit_head=function(){return _.Instance.getStatistics("hit_headTimes")},this._map.txt_hsp=function(){return(100*_.Instance.getStatistics("hit_rate")).toFixed(2)+" %"},this._map.txt_be_hit=function(){return _.Instance.getStatistics("be_hit_times")},this._map.txt_dodge=function(){return(100*_.Instance.getStatistics("dodge_rate")).toFixed(2)+" %"},this._map.txt_level_score=function(){return""+_.Instance.getStatistics("level_score")},this._map.txt_day_num=function(){return""+_.Instance.get("day")},this._map.txt_show_version=function(){return""+f._data.show_version}},s.initData=function(t){var n=this;this.init(),t.forEach((function(t){var e=t.name,s=t.event,a=t.data;t.data||(a=void 0),n._map[e]=function(){i.emit(s,a)}}))},s.on=function(t){var n=this._map[t];n?(n(),this.countEvents()):console.warn("Can not find key:"+t)},s.get=function(t){return this._map[t]()},s.hasBind=function(t){return void 0!==this._map[t]},s.countEvents=function(){this.totalEvents++},s.checkRefresh=function(){this.totalEvents>0&&(i.emit("refresh_ui"),this.totalEvents=0)},s.update=function(t){this.checkRefresh()},e}(s));e._RF.pop()}}}));

System.register("chunks:///_virtual/blit-stage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./base-stage.ts","./utils2.ts"],(function(e){"use strict";var t,r,a,i,n,o,s,l,c,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,a=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){n=e.cclegacy,o=e._decorator,s=e.rendering,l=e.gfx},function(e){c=e.BaseStage},function(e){u=e.getLoadOpOfClearFlag}],execute:function(){var d,p,g,R,m,f;n._RF.push({},"162c50lqCVDC7q2n+oadaN7","blit-stage",void 0);o.type;var h=o.property,w=o.ccclass,y=s.RasterView,T=s.AttachmentType,E=s.AccessType,C=s.ResourceResidency,F=(s.LightInfo,s.SceneFlags),v=s.QueueHint,A=s.ComputeView,N=(l.Format,l.LoadOp),b=l.StoreOp,S=(l.ClearFlagBit,l.Color);l.Viewport,e("BlitStage",(d=w("BlitStage"),p=h({override:!0}),d((m=t((R=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(t=e.call.apply(e,[this].concat(n))||this)._materialName="blit-screen",a(t,"name",m,i(t)),a(t,"textureFormat",f,i(t)),t}return r(t,e),t.prototype.render=function(e,t){if(this.material){var r=this.getRenderArea(e),a=r.width,i=r.height,n=!this.renderToScreen,o=this.slotName(e,0);t.containsResource(o)||(n?t.addRenderTarget(o,this.textureFormat,a,i,C.MANAGED):t.addRenderTexture(o,this.textureFormat,a,i,e.window));var s=t.addRasterPass(a,i,"Blit");s.name=o+"_Pass";var l=this.lastStage.slotName(e,0);if(t.containsResource(l)){var c=new A;c.name="inputTexture",s.addComputeView(l,c)}var d=new y("_",E.WRITE,T.RENDER_TARGET,n?N.CLEAR:u(e.clearFlag,T.RENDER_TARGET),b.STORE,e.clearFlag,new S(e.clearColor.x,e.clearColor.y,e.clearColor.z,e.clearColor.w));s.addRasterView(o,d),n||s.addQueue(v.RENDER_TRANSPARENT).addCameraQuad(e,this.material,0,F.NONE)}},t}(c)).prototype,"name",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"BlitStage"}}),f=t(R.prototype,"textureFormat",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return l.Format.RGBA8}}),g=R))||g));n._RF.pop()}}}));

System.register("chunks:///_virtual/blocklistedGPUS.ts",["cc"],(function(e){"use strict";var o;return{setters:[function(e){o=e.cclegacy}],execute:function(){o._RF.push({},"4a5f6WZ0Z5Fs549cGVFe73y","blocklistedGPUS",void 0);e("BLOCKLISTED_GPUS",["geforce 320m","geforce 8600","geforce 8600m gt","geforce 8800 gs","geforce 8800 gt","geforce 9400","geforce 9400m g","geforce 9400m","geforce 9600m gt","geforce 9600m","geforce fx go5200","geforce gt 120","geforce gt 130","geforce gt 330m","geforce gtx 285","google swiftshader","intel g41","intel g45","intel gma 4500mhd","intel gma x3100","intel hd 3000","intel q45","legacy","mali-2","mali-3","mali-4","quadro fx 1500","quadro fx 4","quadro fx 5","radeon hd 2400","radeon hd 2600","radeon hd 4670","radeon hd 4850","radeon hd 4870","radeon hd 5670","radeon hd 5750","radeon hd 6290","radeon hd 6300","radeon hd 6310","radeon hd 6320","radeon hd 6490m","radeon hd 6630m","radeon hd 6750m","radeon hd 6770m","radeon hd 6970m","sgx 543","sgx543"]);o._RF.pop()}}}));

System.register("chunks:///_virtual/bloom-stage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./base-stage.ts","./utils2.ts","./bloom.ts","./pass-utils.ts","./href-setting.ts"],(function(e){"use strict";var t,r,s,a,o,i,n,l,u,p,m,c,d,P;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,s=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){o=e.cclegacy,i=e._decorator,n=e.rendering,l=e.gfx,u=e.Vec4},function(e){p=e.BaseStage},function(e){m=e.getCameraUniqueID},function(e){c=e.BloomSetting},function(e){d=e.passUtils},function(e){P=e.HrefSetting}],execute:function(){var S,b,f,g,h,R,w;o._RF.push({},"8939f1rzhVPHK+0SSc+e69d","bloom-stage",void 0);i.type;var v=i.property,B=i.ccclass,y=(n.RasterView,n.AttachmentType,n.AccessType,n.ResourceResidency,n.LightInfo,n.SceneFlags,n.QueueHint,n.ComputeView,l.Format),C=(l.LoadOp,l.StoreOp,l.ClearFlagBit,l.Color,l.Viewport,e("MAX_BLOOM_FILTER_PASS_NUM",6)),A=e("BLOOM_PREFILTERPASS_INDEX",0),I=e("BLOOM_DOWNSAMPLEPASS_INDEX",1),L=e("BLOOM_UPSAMPLEPASS_INDEX",I+C),M=e("BLOOM_COMBINEPASS_INDEX",L+C),_={enable:!0,threshold:1,iterations:2,intensity:.2,blurRadius:1};new u,new l.Sampler(new l.SamplerInfo(l.Filter.LINEAR,l.Filter.LINEAR,void 0,l.Address.CLAMP,l.Address.CLAMP),0),e("BloomStage",(S=B("custom.BloomStage"),b=v({override:!0}),f=v({override:!0}),S((R=t((h=function(e){function t(){for(var t,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))||this)._materialName="blit-screen",s(t,"name",R,a(t)),s(t,"outputNames",w,a(t)),t}r(t,e);var o=t.prototype;return o.checkEnable=function(){var e=c.instance||_;return this.enable&&e.enable&&!!P.bloom},o.render=function(e,t){d.clearFlag=l.ClearFlagBit.COLOR,u.set(d.clearColor,0,0,0,1);var r=globalThis.pipelineAssets.getMaterial("bloom");d.material=r;var s=c.instance||_,a=y.RGBA16F,o=m(e),i="Camera"+o,n=this.getRenderArea(e),p=n.width,P=n.height,S="dsBloomPassPrefilterColor"+i;p>>=1,P>>=1,r.setProperty("texSize",new u(0,0,s.threshold,0),A);var b=this.lastStage.slotName(e,0);d.addRasterPass(p,P,"bloom-prefilter","CameraBloomPrefilterPass"+o).setViewport(n.x,n.y,p,P).setPassInput(b,"outputResultMap").addRasterView(S,a).blitScreen(A).version();for(var f=S,g=s.iterations,h=0,R=0;R<g;++R){p>>=1,P>>=1;for(var w=0;w<2;w++){var v=new u,B="dsBloomPassDownSampleColor"+i+h;w?v.set(0,s.blurRadius/p):v.set(s.blurRadius/p,0),r.setProperty("texSize",v,I+h);var C="bloom-downsample"+h;d.addRasterPass(p,P,C,"CameraBloomDownSamplePass"+o+h).setViewport(n.x,n.y,p,P).setPassInput(f,"bloomTexture").addRasterView(B,a).blitScreen(I+h).version(),f=B,h++}}for(var O=g-2;O>=0;--O){p<<=1,P<<=1,r.setProperty("texSize",new u(1,1,0,0),L+O);var N="dsBloomPassUpSampleColor"+i+O;d.addRasterPass(p,P,"bloom-upsample"+O,"CameraBloomUpSamplePass"+o+O).setViewport(n.x,n.y,p,P).setPassInput(f,"outputResultMap").setPassInput("dsBloomPassDownSampleColor"+i+(2*O+1),"bloomTexture").addRasterView(N,a).blitScreen(L+O).version(),f=N}var E=this.slotName(e,0);r.setProperty("texSize",new u(s.intensity,1,0,0),M),d.addRasterPass(n.width,n.height,"bloom-combine","CameraBloomCombinePass"+o).setPassInput(b,"outputResultMap").setPassInput(f,"bloomTexture").addRasterView(E,a).blitScreen(M).version()},t}(p)).prototype,"name",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"BloomStage"}}),w=t(h.prototype,"outputNames",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return["BloomPassCombineColor"]}}),g=h))||g));o._RF.pop()}}}));

System.register("chunks:///_virtual/bloom.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,i,n,r,o,a,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,l=e.Component}],execute:function(){var u,c,s,p,b,f,y,h;o._RF.push({},"99a2aAEXIlGU6gxUaHh/fuz","bloom",void 0);var d=a.ccclass,g=a.property,m=a.executeInEditMode;e("BloomSetting",d("BloomSetting")(u=m(((h=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,n(t,"enable",s,r(t)),n(t,"threshold",p,r(t)),n(t,"iterations",b,r(t)),n(t,"intensity",f,r(t)),n(t,"blurRadius",y,r(t)),t}i(t,e);var o=t.prototype;return o.onEnable=function(){t.instance=this},o.onDisable=function(){t.instance===this&&(t.instance=void 0)},t}(l)).instance=void 0,s=t((c=h).prototype,"enable",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),p=t(c.prototype,"threshold",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),b=t(c.prototype,"iterations",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),f=t(c.prototype,"intensity",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.8}}),y=t(c.prototype,"blurRadius",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),u=c))||u)||u);o._RF.pop()}}}));

System.register("chunks:///_virtual/brain.ts",["cc","./res-cache.ts"],(function(n){"use strict";var o,t,e,c;return{setters:[function(n){o=n.cclegacy,t=n._decorator,e=n.random},function(n){c=n.ResCache}],execute:function(){o._RF.push({},"e413cJPsaZPVKZ581gpLPn+","brain",void 0);t.ccclass,t.property,n("Brain",function(){function n(n,o){this.data={},this.actor=void 0,this.data=c.Instance.getJson(n).json,this.actor=o}var o=n.prototype;return o.update=function(n){},o.runNode=function(n){void 0===n.children?this.action(n.action):(console.log("run node:",n.node),this[n.node](n.children))},o.random=function(n){for(var o=e(),t=0;t<n.length;t++){var c=n[t];if(c.value<o)return void this.runNode(c)}console.error("bad config data:",n)},o.condition=function(n){console.log("condition:",n);for(var o=0;o<n.length;o++){var t=n[o];if("canEatPlayer"===t.value)return void this.runNode(t)}console.log("bad logic design:",n)},o.sequence=function(n){console.log("sequence:",n);for(var o=0;o<n.length;o++){var t=n[o];this.runNode(t)}},o.action=function(n){console.log("do action:",n),this.actor.do(n)},n}());o._RF.pop()}}}));

System.register("chunks:///_virtual/buff.ts",["./rollupPluginModLoBabelHelpers.js","cc","./singleton.ts","./res-cache.ts"],(function(t){"use strict";var n,e,o,i;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy},function(t){o=t.Singleton},function(t){i=t.ResCache}],execute:function(){e._RF.push({},"052977TCF5GD7IVf1w0O4Bf","buff",void 0);t("Buff",function(t){function e(){for(var n,e=arguments.length,o=new Array(e),i=0;i<e;i++)o[i]=arguments[i];return(n=t.call.apply(t,[this].concat(o))||this)._data={},n}n(e,t);var o=e.prototype;return o.init=function(){this._data=i.Instance.getJson("data-buff").json},o.get=function(t){if(this._data[t])return this._data[t];console.error("can not find buff:",t)},e}(o));e._RF.pop()}}}));

System.register("chunks:///_virtual/camera-auto-bind-occlusion.ts",["./rollupPluginModLoBabelHelpers.js","cc","./static-occlusion-culling.ts"],(function(n){"use strict";var o,t,c,i,u,e,r;return{setters:[function(n){o=n.inheritsLoose},function(n){t=n.cclegacy,c=n._decorator,i=n.find,u=n.Camera,e=n.Component},function(n){r=n.StaticOcclusionCulling}],execute:function(){var l;t._RF.push({},"37314AQD1xLKIBSq2DoJyqP","camera-auto-bind-occlusion",void 0);var a=c.ccclass;c.property,n("CameraAutoBindOcclusion",a("CameraAutoBindOcclusion")(l=function(n){function t(){return n.apply(this,arguments)||this}return o(t,n),t.prototype.onEnable=function(){var n=i("static-occlusion-culling");if(null!=n){var o=n.getComponent(r);if(null===o)throw new Error("culling node not find 'StaticOcclusionCulling'");o.camera=this.getComponent(u)}},t}(e))||l);t._RF.pop()}}}));

System.register("chunks:///_virtual/camera-controller.ts",["./rollupPluginModLoBabelHelpers.js","cc","./msg.ts","./g-math.ts","./util2.ts","./smooth-local-z.ts"],(function(t){"use strict";var e,o,i,s,r,n,a,l,c,f,h,u,_,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,s=t.assertThisInitialized},function(t){r=t.cclegacy,n=t._decorator,a=t.Vec3,l=t.v3,c=t.find,f=t.Component},function(t){h=t.Msg},function(t){u=t.GVec3},function(t){_=t.UtilVec3},function(t){p=t.SmoothLocalZ}],execute:function(){var m,g,d,y,b;r._RF.push({},"ea461kUoi5AnrnPwoN0wJvS","camera-controller",void 0);var w=n.ccclass,v=n.property;t("CameraController",w("CameraController")((d=e((g=function(t){function e(){for(var e,o=arguments.length,r=new Array(o),n=0;n<o;n++)r[n]=arguments[n];return e=t.call.apply(t,[this].concat(r))||this,i(e,"smooth",d,s(e)),i(e,"maxOffsetZ",y,s(e)),i(e,"target",b,s(e)),e._velocity=new a(0,0,0),e._followTarget=Object.create(null),e._offsetZ=0,e._offsetZScale=1,e._target=l(0,0,0),e._dir=l(0,0,0),e._pos=l(0,0,0),e.controlZ=Object.create(null),e}o(e,t);var r=e.prototype;return r.start=function(){this._followTarget=c(this.target),this._target=this._followTarget.position.clone(),_.copy(this._pos,this._target),this.node.setWorldPosition(this._target),this.controlZ=this.node.children[0].children[0].getComponent(p),h.bind("set_camera_len",this.setLen,this),h.bind("set_offset_scale",this.setOffsetScale,this),console.log("camera controller:",this.node.worldPosition)},r.onDestroy=function(){h.off("set_camera_len",this.setLen),h.off("set_offset_scale",this.setOffsetScale)},r.setLen=function(t){this.controlZ.setOffset(t)},r.setOffsetScale=function(t){},r.lateUpdate=function(t){this.smoothDamp(t)},r.smoothDamp=function(t){_.copy(this._target,this._followTarget.position),_.copy(this._dir,this._followTarget.forward),this._offsetZScale>0&&this._target.add(this._dir.multiplyScalar(this._offsetZ*this._offsetZScale)),u.smoothDamp(this._pos,this._target,this._velocity,this.smooth,t),this.node.setWorldPosition(this._pos)},e}(f)).prototype,"smooth",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),y=e(g.prototype,"maxOffsetZ",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),b=e(g.prototype,"target",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"actor"}}),m=g))||m);r._RF.pop()}}}));

System.register("chunks:///_virtual/camera-fps.ts",["./rollupPluginModLoBabelHelpers.js","cc","./actor-base.ts","./util2.ts"],(function(t){"use strict";var e,r,n,o,i,a,c,l,s,u,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){i=t.cclegacy,a=t._decorator,c=t.Node,l=t.v3,s=t.Component},function(t){u=t.ActorBase},function(t){p=t.UtilVec3}],execute:function(){var f,h,g,d,y,_,m;i._RF.push({},"893ddTfpyVCPq006JFECGnc","camera-fps",void 0);var v=a.ccclass,b=a.property;t("camera_fps",(f=v("camera_fps"),h=b(c),g=b(u),f((_=e((y=function(t){function e(){for(var e,r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))||this).angle=l(0,0,0),n(e,"root",_,o(e)),n(e,"_actor",m,o(e)),e}r(e,t);var i=e.prototype;return i.start=function(){var t;this._actor=null==(t=this.root)?void 0:t.getComponent(u)},i.update=function(t){this.updateAngle()},i.updateAngle=function(){p.copy(this.angle,this.node.eulerAngles),this.angle.x=this._actor._angleVertical,this.node.setRotationFromEuler(this.angle)},e}(s)).prototype,"root",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=e(y.prototype,"_actor",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=y))||d));i._RF.pop()}}}));

System.register("chunks:///_virtual/camera-move-target.ts",["./rollupPluginModLoBabelHelpers.js","cc","./util2.ts","./msg.ts","./sensor-ray-node-to-node.ts"],(function(t){"use strict";var e,o,i,r,n,s,a,l,c,h,u,p,m,g;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){n=t.cclegacy,s=t._decorator,a=t.Node,l=t.CCFloat,c=t.v3,h=t.Vec3,u=t.Component},function(t){p=t.UtilVec3},function(t){m=t.Msg},function(t){g=t.SensorRayNodeToNode}],execute:function(){var d,v,f,y,b,N,P,w,T,M,z,_,A,S,C,F,k,D,R;n._RF.push({},"d4de4av0rlIV6iZZOG0ZmJ+","camera-move-target",void 0);var L=s.ccclass,V=s.property;t("CameraMoveTarget",(d=L("CameraMoveTarget"),v=V({type:a,tooltip:"Target Node"}),f=V({type:l,tooltip:"Smooth position move."}),y=V({type:l,tooltip:"Smooth angle."}),b=V({type:l,tooltip:"Smooth position move."}),N=V({type:a,tooltip:"Camera Node."}),P=V({type:[a],tooltip:"Target node list."}),w=V({type:l,tooltip:"Start the waiting time."}),T=V({type:a,tooltip:"Look at target node."}),d((_=e((z=function(t){function e(){for(var e,o=arguments.length,n=new Array(o),s=0;s<o;s++)n[s]=arguments[s];return e=t.call.apply(t,[this].concat(n))||this,i(e,"targetNode",_,r(e)),i(e,"smoothSlowMove",A,r(e)),i(e,"smoothAngle",S,r(e)),i(e,"smoothFastMove",C,r(e)),i(e,"cameraNode",F,r(e)),i(e,"targets",k,r(e)),i(e,"waitTime",D,r(e)),i(e,"lookAtTarget",R,r(e)),e.currentPosition=c(0,0,0),e.currentAngle=c(0,0,0),e.sensor=void 0,e.movePosition=c(0,0,0),e.smoothMove=5,e}o(e,t);var n=e.prototype;return n.start=function(){m.on("msg_change_tps_camera_target",this.setTarget.bind(this)),p.copy(this.currentPosition,this.cameraNode.position),p.copy(this.currentAngle,this.cameraNode.eulerAngles),this.sensor=this.getComponent(g)},n.onDestroy=function(){m.off("msg_change_tps_camera_target",this.setTarget.bind(this))},n.update=function(t){var e,o,i;if(this.waitTime>0)this.waitTime-=t;else if(this.targetNode){if(this.sensor.hitPoint.length()>0){p.copy(this.movePosition,this.sensor.hitPoint),this.movePosition.subtract(this.node.worldPosition);var r=this.movePosition.length();p.copy(this.movePosition,this.targetNode.position),this.movePosition.subtract(this.node.position).normalize().multiplyScalar(r),this.smoothMove=this.smoothFastMove}else p.copy(this.movePosition,this.targetNode.position),this.smoothMove=this.smoothSlowMove;h.lerp(this.currentPosition,this.currentPosition,this.movePosition,this.smoothMove*t),null==(e=this.cameraNode)||e.setPosition(this.currentPosition),null==(o=this.cameraNode)||o.setRotationFromEuler(this.targetNode.eulerAngles),null==(i=this.lookAtTarget)||i.setPosition(0,0,-this.cameraNode.position.z-5)}},n.setTarget=function(t){this.targetNode=this.targets[t],this.sensor.endNode=this.targetNode},e}(u)).prototype,"targetNode",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=e(z.prototype,"smoothSlowMove",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),S=e(z.prototype,"smoothAngle",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),C=e(z.prototype,"smoothFastMove",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 15}}),F=e(z.prototype,"cameraNode",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=e(z.prototype,"targets",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),D=e(z.prototype,"waitTime",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),R=e(z.prototype,"lookAtTarget",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=z))||M));n._RF.pop()}}}));

System.register("chunks:///_virtual/camera-msg.ts",["./rollupPluginModLoBabelHelpers.js","cc","./msg.ts","./static-occlusion-culling.ts"],(function(t){"use strict";var e,i,n,r,a,c,o,s,l,u,m;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){a=t.cclegacy,c=t._decorator,o=t.Camera,s=t.find,l=t.Component},function(t){u=t.Msg},function(t){m=t.StaticOcclusionCulling}],execute:function(){var g,f,p;a._RF.push({},"6ec11Syo3ZN5J5QUf/RVjXg","camera-msg",void 0);var d=c.ccclass,h=c.property;t("CameraMsg",d("CameraMsg")((p=e((f=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),c=0;c<i;c++)a[c]=arguments[c];return e=t.call.apply(t,[this].concat(a))||this,n(e,"msg",p,r(e)),e._cameraNode=void 0,e._camera=void 0,e}i(e,t);var a=e.prototype;return a.start=function(){u.bind(this.msg,this.setCamera,this),this._cameraNode=this.node.children[0],this._camera=this._cameraNode.getComponent(o)},a.setCamera=function(t){if(this._cameraNode.active=t,t){var e=s("static-occlusion-culling");if(null==e)return void console.warn("Can not find static-occlusion-culling.");var i=e.getComponent(m);if(null===i)throw new Error("culling node not find 'StaticOcclusionCulling'");this._camera&&(i.camera=this._camera)}},e}(l)).prototype,"msg",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"msg_set_camera"}}),g=f))||g);a._RF.pop()}}}));

System.register("chunks:///_virtual/camera-setting.ts",["./rollupPluginModLoBabelHelpers.js","cc","./npm.ts"],(function(e){"use strict";var t,i,n,a,r,o,c,l,s,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized,r=e.createClass},function(e){o=e.cclegacy,c=e._decorator,l=e.Camera,s=e.Component},function(e){u=e.InPlayMode}],execute:function(){var p,m,f,g,d;o._RF.push({},"52b2fAWR29Md4fbcmUHQI+k","camera-setting",void 0);var h=c.ccclass,y=c.property,b=c.executeInEditMode;e("CameraSetting",h("CameraSetting")(p=b(((d=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).camera=void 0,n(t,"isMainCamera",f,a(t)),n(t,"pipeline",g,a(t)),t}return i(t,e),t.prototype.__preload=function(){this.camera=this.getComponent(l)},r(t,null,[{key:"mainCamera",get:function(){return u?this.main?this.main.camera:null:globalThis.cce.Camera._camera}}]),t}(s)).main=void 0,f=t((m=d).prototype,"isMainCamera",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),g=t(m.prototype,"pipeline",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"main"}}),p=m))||p)||p);o._RF.pop()}}}));

System.register("chunks:///_virtual/camera-tps.ts",["./rollupPluginModLoBabelHelpers.js","cc","./util2.ts","./actor-move.ts","./msg.ts"],(function(t){"use strict";var e,o,i,r,n,s,a,l,c,u,h,g,p,m;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){n=t.cclegacy,s=t._decorator,a=t.Node,l=t.CCFloat,c=t.v3,u=t.math,h=t.Component},function(t){g=t.UtilVec3},function(t){p=t.ActorMove},function(t){m=t.Msg}],execute:function(){var f,y,A,b,d,v,P,_,M,N,x;n._RF.push({},"d925fkhBbFMlpxpYVQ/aIgE","camera-tps",void 0);var z=s.ccclass,w=s.property;t("CameraTps",(f=z("CameraTps"),y=w(a),A=w({type:p,tooltip:"Test actor move."}),b=w(l),d=w(l),f((_=e((P=function(t){function e(){for(var e,o=arguments.length,n=new Array(o),s=0;s<o;s++)n[s]=arguments[s];return e=t.call.apply(t,[this].concat(n))||this,i(e,"rotationNode",_,r(e)),i(e,"actorMove",M,r(e)),i(e,"smoothAngle",N,r(e)),i(e,"smoothHeight",x,r(e)),e.targetAngle=c(0,0,0),e.currentAngle=c(0,0,0),e.targetPosition=c(0,0,0),e.currentPosition=c(0,0,0),e}o(e,t);var n=e.prototype;return n.start=function(){g.copy(this.targetAngle,this.rotationNode.eulerAngles),g.copy(this.currentAngle,this.targetAngle),g.copy(this.targetPosition,this.rotationNode.position),g.copy(this.currentAngle,this.targetPosition),m.on("msg_change_tps_camera_height",this.setRootY.bind(this))},n.update=function(t){var e,o;this.rotationX(this.actorMove.angleVertical),this.currentAngle.x=u.lerp(this.currentAngle.x,this.targetAngle.x,this.smoothAngle*t),null==(e=this.rotationNode)||e.setRotationFromEuler(this.currentAngle),this.currentPosition.y=u.lerp(this.currentPosition.y,this.targetPosition.y,this.smoothHeight*t),null==(o=this.rotationNode)||o.setPosition(this.currentPosition)},n.rotationX=function(t){this.targetAngle.x=t},n.setRootY=function(t){this.targetPosition.y=t},e}(h)).prototype,"rotationNode",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=e(P.prototype,"actorMove",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=e(P.prototype,"smoothAngle",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 20}}),x=e(P.prototype,"smoothHeight",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),v=P))||v));n._RF.pop()}}}));

System.register("chunks:///_virtual/check-auto-pick.ts",["./rollupPluginModLoBabelHelpers.js","cc","./actor.ts"],(function(t){"use strict";var c,o,i,e,r,n;return{setters:[function(t){c=t.inheritsLoose},function(t){o=t.cclegacy,i=t._decorator,e=t.sys,r=t.Component},function(t){n=t.Actor}],execute:function(){var s;o._RF.push({},"52239TQ3/pDRZ1hvSKAC236","check-auto-pick",void 0);var u=i.ccclass;t("CheckAutoPick",u("CheckAutoPick")(s=function(t){function o(){for(var c,o=arguments.length,i=new Array(o),e=0;e<o;e++)i[e]=arguments[e];return(c=t.call.apply(t,[this].concat(i))||this)._actor=void 0,c.checkAutoPickTime=1,c.isAutoPick=!1,c}c(o,t);var i=o.prototype;return i.start=function(){this._actor=this.getComponent(n),this.isAutoPick=e.platform===e.Platform.MOBILE_BROWSER||e.platform===e.Platform.ANDROID||e.platform===e.Platform.IOS},i.update=function(t){var c;this.isAutoPick&&(this.checkAutoPickTime-=t,this.checkAutoPickTime>0||(this.checkAutoPickTime=1,null==(c=this._actor)||c.onPick()))},o}(r))||s);o._RF.pop()}}}));

System.register("chunks:///_virtual/cleanRenderer.ts",["cc"],(function(e){"use strict";var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){e("cleanRenderer",(function(e){return e=e.toLowerCase().replace(/.*angle ?\((.+)\)(?: on vulkan [0-9.]+)?$/i,"$1").replace(/\s(\d{1,2}gb|direct3d.+$)|\(r\)| \([^)]+\)$/g,"").replace(/(?:vulkan|opengl) \d+\.\d+(?:\.\d+)?(?: \((.*)\))?/,"$1")})),n._RF.push({},"55125GOne9MJJ/SpxX21UJW","cleanRenderer",void 0),n._RF.pop()}}}));

System.register("chunks:///_virtual/collider-group.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(r){"use strict";var e,o,t,n,i,l,u,c;return{setters:[function(r){e=r.applyDecoratedDescriptor,o=r.inheritsLoose,t=r.initializerDefineProperty,n=r.assertThisInitialized},function(r){i=r.cclegacy,l=r._decorator,u=r.Collider,c=r.Component}],execute:function(){var p,a,s;i._RF.push({},"53e802WyhxI6L/WgGE2nM54","collider-group",void 0);var g=l.ccclass,d=l.property;r("ColliderGroup",g("ColliderGroup")((s=e((a=function(r){function e(){for(var e,o=arguments.length,i=new Array(o),l=0;l<o;l++)i[l]=arguments[l];return e=r.call.apply(r,[this].concat(i))||this,t(e,"group",s,n(e)),e}return o(e,r),e.prototype.onEnable=function(){var r;null==(r=this.node.getComponent(u))||r.setGroup(1<<this.group)},e}(c)).prototype,"group",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),p=a))||p);i._RF.pop()}}}));

System.register("chunks:///_virtual/damage-core.ts",["cc","./sound.ts","./fx.ts","./local.ts","./msg.ts","./actor-part.ts","./data-core.ts"],(function(t){"use strict";var e,i,a,n,o,r,s;return{setters:[function(t){e=t.cclegacy},function(t){i=t.Sound},function(t){a=t.fx},function(t){n=t.Local},function(t){o=t.Msg},function(t){r=t.ActorPart},function(t){s=t.DataLevelInst}],execute:function(){function d(t,e){if(void 0!==t&&(t.fx&&a.on(t.fx,e),t.sfx&&i.on(t.sfx),void 0===t.notify)){if(null==t.notify)return;o.emit("msg_tips",""+n.Instance.get(t.notify))}}t({calculateDamage:function(t,e,i){null!=i&&i.isPlayer&&o.emit("msg_stat_times","enemy_fire");if(void 0===e)return void o.emit("msg_tips",""+n.Instance.get("hit_nothing"));var _=e.collider.node,m="hit_"+_.name.split("_")[0],l=t.damage,c=_.getComponent(r);if(c){var f=c.part,u=l[f];if(void 0===u)throw new Error(_.name+" node hit part undefine '"+f+"'");var h=c.actor;if(void 0===h)throw new Error(_.name+" node hit part '"+f+"' undefine actor");null!=i&&i.isPlayer&&o.emit("msg_stat_times","hit_"+f),h.isPlayer&&o.emit("msg_stat_times","be_hit_"+f),h._data.hp-=u,h._data.hp<=0?(h._data.hp=1,a.on(s._data.fx_dead,h.node.worldPosition),null!=i&&i.isPlayer&&o.emit("msg_stat_times","killed"),h.do("dead")):h.do("hit_gun"),m="hit_body",h.isPlayer&&h.updateHP()}d(l[m],e.hitPoint)},calculateDamageNode:function(t,e,i,n){var _="hit_"+e.name.split("_")[0],m=t.damage,l=e.getComponent(r);null!=n&&n.isPlayer&&o.emit("msg_stat_times","enemy_fire");if(l){var c=l.part,f=m[c];if(void 0===f)throw new Error(e.name+" node hit part undefine '"+c+"'");var u=l.actor;if(void 0===u)throw new Error(e.name+" node hit part '"+c+"' undefine actor");null!=n&&n.isPlayer&&o.emit("msg_stat_times","hit_"+c),u.isPlayer&&o.emit("msg_stat_times","be_hit_"+c),u._data.hp-=f,u._data.hp<=0?(u._data.hp=0,a.on(s._data.fx_dead,u.node.worldPosition),u.isPlayer&&o.emit("msg_stat_times","killed"),u.do("dead")):u.do("hit_gun"),u.isPlayer&&u.updateHP(),_="hit_body"}d(m[_],i)}}),e._RF.push({},"d8d6avZExlO5Yj1hlbjXg5L","damage-core",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/data-base.ts",["cc","./res-cache.ts"],(function(t){"use strict";var n,e;return{setters:[function(t){n=t.cclegacy},function(t){e=t.ResCache}],execute:function(){n._RF.push({},"cec941+DThBWIDIZ/fyveHN","data-base",void 0);t("DataBase",function(){function t(){this._data={},this._name=""}var n=t.prototype;return n.init=function(t){this._name=t,this._data=e.Instance.getJson(t).json,this.bind()},n.bind=function(){},n.get=function(t){var n=this._data[t];if(void 0===n)throw new Error(this._name+" database not find "+t+".");return n},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/data-camera.ts",["./rollupPluginModLoBabelHelpers.js","cc","./data-base.ts"],(function(t){"use strict";var a,e,n;return{setters:[function(t){a=t.inheritsLoose},function(t){e=t.cclegacy},function(t){n=t.DataBase}],execute:function(){e._RF.push({},"45947iRzi1JkJqDd47P8Fr3","data-camera",void 0);t("DataCamera",function(t){function e(){return t.apply(this,arguments)||this}return a(e,t),e}(n));e._RF.pop()}}}));

System.register("chunks:///_virtual/data-core.ts",["cc","./data-equip.ts","./data-sound.ts","./data-camera.ts","./data-game.ts","./data-game-set.ts","./data-level.ts","./data-navigation.ts","./data-pool.ts","./data-upgrade-card.ts"],(function(a){"use strict";var t,n,e,i,d,o,s,u,c,r;return{setters:[function(a){t=a.cclegacy},function(a){n=a.DataEquip},function(a){e=a.DataSound},function(a){i=a.DataCamera},function(a){d=a.DataGame},function(a){o=a.DataGameSet},function(a){s=a.DataLevel},function(a){u=a.DataNavigation},function(a){c=a.DataPool},function(a){r=a.DataUpgradeCard}],execute:function(){a("Init",(function(){D.init("data-equips"),f.init("data-sound"),g.init("data-camera"),m.init("data-navigation"),l.init("data-upgrade-card"),p.init("data-game"),v.init("data-level"),I.init("data-pool"),w.init("data-game-set")})),t._RF.push({},"d7e08WdljRJZouEfdSMymQu","data-core",void 0);var D=a("DataEquipInst",new n),f=a("DataSoundInst",new e),g=a("DataCameraInst",new i),m=a("DataNavigationInst",new u),l=a("DataUpgradeCardInst",new r),p=a("DataGameInst",new d),v=a("DataLevelInst",new s),I=a("DataPoolInst",new c),w=a("DataGameSetInst",new o);t._RF.pop()}}}));

System.register("chunks:///_virtual/data-equip.ts",["./rollupPluginModLoBabelHelpers.js","cc","./data-base.ts"],(function(t){"use strict";var e,n,u;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){u=t.DataBase}],execute:function(){n._RF.push({},"a9ecbFdZo9FcqxVL5Oz8g4M","data-equip",void 0);t("DataEquip",function(t){function n(){return t.apply(this,arguments)||this}return e(n,t),n}(u));n._RF.pop()}}}));

System.register("chunks:///_virtual/data-game-set.ts",["./rollupPluginModLoBabelHelpers.js","cc","./data-base.ts"],(function(t){"use strict";var e,n,a;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){a=t.DataBase}],execute:function(){n._RF.push({},"9e7d3P7YG1AfInmoKyxijZM","data-game-set",void 0);t("DataGameSet",function(t){function n(){return t.apply(this,arguments)||this}return e(n,t),n}(a));n._RF.pop()}}}));

System.register("chunks:///_virtual/data-game.ts",["./rollupPluginModLoBabelHelpers.js","cc","./data-base.ts"],(function(t){"use strict";var e,n,a;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){a=t.DataBase}],execute:function(){n._RF.push({},"bf4147VFJRPUonMb12JXCxD","data-game",void 0);t("DataGame",function(t){function n(){return t.apply(this,arguments)||this}return e(n,t),n}(a));n._RF.pop()}}}));

System.register("chunks:///_virtual/data-level.ts",["./rollupPluginModLoBabelHelpers.js","cc","./data-base.ts"],(function(t){"use strict";var e,a,n;return{setters:[function(t){e=t.inheritsLoose},function(t){a=t.cclegacy},function(t){n=t.DataBase}],execute:function(){a._RF.push({},"da03dmsaRZDvraDcaqusGYh","data-level",void 0);t("DataLevel",function(t){function a(){return t.apply(this,arguments)||this}return e(a,t),a}(n));a._RF.pop()}}}));

System.register("chunks:///_virtual/data-navigation.ts",["./rollupPluginModLoBabelHelpers.js","cc","./data-base.ts"],(function(t){"use strict";var n,a,i;return{setters:[function(t){n=t.inheritsLoose},function(t){a=t.cclegacy},function(t){i=t.DataBase}],execute:function(){a._RF.push({},"a28cfIm9SRM8J7cmlkhzuU+","data-navigation",void 0);t("DataNavigation",function(t){function a(){return t.apply(this,arguments)||this}return n(a,t),a}(i));a._RF.pop()}}}));

System.register("chunks:///_virtual/data-pool.ts",["./rollupPluginModLoBabelHelpers.js","cc","./data-base.ts"],(function(t){"use strict";var n,o,e;return{setters:[function(t){n=t.inheritsLoose},function(t){o=t.cclegacy},function(t){e=t.DataBase}],execute:function(){o._RF.push({},"9dadf3CfoJKy44cO9hdnCA8","data-pool",void 0);t("DataPool",function(t){function o(){return t.apply(this,arguments)||this}return n(o,t),o}(e));o._RF.pop()}}}));

System.register("chunks:///_virtual/data-sound.ts",["./rollupPluginModLoBabelHelpers.js","cc","./data-base.ts"],(function(t){"use strict";var n,s,e;return{setters:[function(t){n=t.inheritsLoose},function(t){s=t.cclegacy},function(t){e=t.DataBase}],execute:function(){s._RF.push({},"f8b55UsGRNAyZzk3aLbtpJH","data-sound",void 0);t("DataSound",function(t){function s(){return t.apply(this,arguments)||this}return n(s,t),s}(e));s._RF.pop()}}}));

System.register("chunks:///_virtual/data-structure.ts",["cc"],(function(e){"use strict";var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"c2b970jje9G0YW2aFF70Bwa","data-structure",void 0);e("Stack",function(){function e(e){void 0===e&&(e=10),this._elements=void 0,this._size=void 0,this._elements=new Array(e),this._size=0}var t=e.prototype;return t.push=function(e){var t=this._elements.length;if(this._size>t){var s=new Array(t);this._elements=this._elements.concat(s)}this._elements[this._size++]=e},t.cur=function(){return this._elements[this._size-1]},t.pop=function(){return this._elements[--this._size]},t.peek=function(){return this._elements[this._size-1]},t.size=function(){return this._size},t.empty=function(){return 0===this._size},t.clear=function(e){void 0===e&&(e=10),delete this._elements,this._elements=new Array(e),this._size=0},e}()),e("Queue",function(){function e(e){this._elements=void 0,this._size=void 0,this._elements=new Array,this._size=e}var t=e.prototype;return t.push=function(e){return null!==e&&(void 0===this._size||isNaN(this._size)||this._elements.length===this._size&&this.pop(),this._elements.unshift(e),!0)},t.pop=function(){return this._elements.pop()},t.size=function(){return this._elements.length},t.empty=function(){return 0===this.size()},t.clear=function(){delete this._elements,this._elements=new Array},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/data-upgrade-card.ts",["./rollupPluginModLoBabelHelpers.js","cc","./data-base.ts"],(function(t){"use strict";var a,e,r;return{setters:[function(t){a=t.inheritsLoose},function(t){e=t.cclegacy},function(t){r=t.DataBase}],execute:function(){e._RF.push({},"02b9ahZRUBA7bjNMjB4tBer","data-upgrade-card",void 0);t("DataUpgradeCard",function(t){function e(){return t.apply(this,arguments)||this}return a(e,t),e}(r));e._RF.pop()}}}));

System.register("chunks:///_virtual/debug-util.ts",["./rollupPluginModLoBabelHelpers.js","cc","./save.ts","./local.ts","./msg.ts","./singleton.ts","./data-core.ts"],(function(n){"use strict";var t,e,i,s,u,c,a,o;return{setters:[function(n){t=n.inheritsLoose},function(n){e=n.cclegacy,i=n.setDisplayStats},function(n){s=n.Save},function(n){u=n.Local},function(n){c=n.Msg},function(n){a=n.Singleton},function(n){o=n.DataGameInst}],execute:function(){e._RF.push({},"12b65hqoTJMQp4UrJq8/Cwl","debug-util",void 0);n("DebugUtil",function(n){function e(){for(var t,e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];return(t=n.call.apply(n,[this].concat(i))||this).index=0,t}t(e,n);var a=e.prototype;return a.init=function(){var n=this;void 0===s.Instance._cur.debugIndex&&(s.Instance._cur.debugIndex=0),this.index=s.Instance._cur.debugIndex;var t=o._data;this.CheckDisplayStats(),c.on("next_debug",(function(){n.index++,n.index>=t.debug_info.length&&(n.index=0),s.Instance._cur.debugIndex=n.index,n.CheckDisplayStats()})),c.on("pre_debug",(function(){n.index--,n.index<0&&(n.index=t.debug_info.length-1),s.Instance._cur.debugIndex=n.index,n.CheckDisplayStats()}))},a.CheckDisplayStats=function(){i(1===this.index)},a.getShowName=function(){var n=o._data;return u.Instance.get(n.debug_info[this.index])},e}(a));e._RF.pop()}}}));

System.register("chunks:///_virtual/debug.ts",["cc","./camera-setting.ts"],(function(e){"use strict";var r,t,n;return{setters:[function(e){r=e.cclegacy,t=e.director},function(e){n=e.CameraSetting}],execute:function(){function i(){var e;return(e=n.mainCamera&&n.mainCamera.camera)&&e.initGeometryRenderer(),e&&e.geometryRenderer||t.root.pipeline.geometryRenderer}e("getGeometryRenderer",i),r._RF.push({},"db928AuGApHz43L4Rc0Dg1T","debug",void 0),globalThis.getGeometryRenderer=i,r._RF.pop()}}}));

System.register("chunks:///_virtual/deferred-gbuffer-stage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./base-stage.ts","./setting.ts","./pass-utils.ts"],(function(e){"use strict";var t,r,a,s,i,o,n,f,c,l,u,d,p,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,a=e.initializerDefineProperty,s=e.assertThisInitialized},function(e){i=e.cclegacy,o=e._decorator,n=e.rendering,f=e.gfx,c=e.director,l=e.Vec4,u=e.sys},function(e){d=e.BaseStage},function(e){p=e.settings},function(e){g=e.passUtils}],execute:function(){var h,m,R,S,y;i._RF.push({},"b34cfr6rxFCqbF3H0jep8eD","deferred-gbuffer-stage",void 0);o.type;var B=o.property,C=o.ccclass,D=(n.RasterView,n.AttachmentType,n.AccessType,n.ResourceResidency,n.LightInfo),N=n.SceneFlags,w=n.QueueHint,_=(n.ComputeView,f.Format),b=(f.LoadOp,f.StoreOp,f.ClearFlagBit);f.Color,f.Viewport,e("DeferredGBufferStage",(h=C("DeferredGBufferStage"),m=B({override:!0}),h((y=t((S=function(e){function t(){for(var t,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i))||this)._name="DeferredGBufferStage",t._materialName="blit-screen",a(t,"outputNames",y,s(t)),t}return r(t,e),t.prototype.render=function(e,t){p.gbufferStage=this,c.root.pipeline.pipelineSceneData.fog.fogStart=1;var r=this.getRenderArea(e),a=r.width,s=r.height;g.clearFlag=b.COLOR|b.DEPTH_STENCIL,l.set(g.clearColor,0,0,0,1),l.set(g.clearDepthColor,e.clearDepth,e.clearStencil,0,0);var i=_.RGBA16F,o=i;u.isMobile||(o=_.RGBA32F);var n=this.slotName(e,0),f=this.slotName(e,1),d=this.slotName(e,2),h=this.slotName(e,3),m=this.slotName(e,4);g.addRasterPass(a,s,"default",n+"_Pass").setViewport(r.x,r.y,a,s).addRasterView(n,i,!0).addRasterView(f,i,!0).addRasterView(d,i,!0).addRasterView(h,o,!0).addRasterView(m,_.DEPTH_STENCIL,!0).version(),g.pass.addQueue(w.RENDER_OPAQUE).addSceneOfCamera(e,new D,N.OPAQUE_OBJECT|N.CUTOUT_OBJECT|N.DRAW_INSTANCING)},t}(d)).prototype,"outputNames",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return["gBufferColor","gBufferNormal","gBufferEmissive","gBufferPosition","gBufferDS"]}}),R=S))||R));i._RF.pop()}}}));

System.register("chunks:///_virtual/deferred-lighting-stage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./base-stage.ts","./utils2.ts","./height-fog.ts","./reflection-probe-utils.ts","./setting.ts","./pass-utils.ts","./href-setting.ts"],(function(e){"use strict";var t,r,a,s,i,l,n,o,u,g,h,d,p,c,f,_,b,S,L;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,a=e.initializerDefineProperty,s=e.assertThisInitialized,i=e.createForOfIteratorHelperLoose},function(e){l=e.cclegacy,n=e._decorator,o=e.rendering,u=e.gfx,g=e.Vec4,h=e.director,d=e.renderer},function(e){p=e.BaseStage},function(e){c=e.getCameraUniqueID},function(e){f=e.fogUBO},function(e){_=e.ReflectionProbes},function(e){b=e.settings},function(e){S=e.passUtils},function(e){L=e.HrefSetting}],execute:function(){var C,T,m,E,R,N,I;l._RF.push({},"77df5CptaNE6rvmEIZglcx/","deferred-lighting-stage",void 0);n.type;var B=n.property,v=n.ccclass,y=(o.RasterView,o.AttachmentType,o.AccessType,o.ResourceResidency,o.LightInfo),w=o.SceneFlags,x=o.QueueHint,D=(o.ComputeView,u.Format),P=(u.LoadOp,u.StoreOp,u.ClearFlagBit,u.Color,u.Viewport,new g);e("DeferredLightingStage",(C=v("DeferredLightingStage"),T=B({override:!0}),m=B({override:!0}),C((N=t((R=function(e){function t(){for(var t,r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(t=e.call.apply(e,[this].concat(i))||this)._materialName="blit-screen",t.materialMap=new Map,t.tempMat=void 0,t.clearMat=void 0,t.enableClusterLighting=0,t.enableIBL=0,t.enableShadow=0,t.probes=[],a(t,"name",N,s(t)),a(t,"outputNames",I,s(t)),t}r(t,e);var l=t.prototype;return l.updateClusterUBO=function(e,t){var r=globalThis.LightWorldCluster.instance;if(r){t.setProperty("light_cluster_BoundsMin",P.set(r.boundsMin.x,r.boundsMin.y,r.boundsMin.z,1)),t.setProperty("light_cluster_BoundsDelta",P.set(r.boundsDelta.x,r.boundsDelta.y,r.boundsDelta.z,1)),t.setProperty("light_cluster_CellsDot",r.clusterCellsDotData),t.setProperty("light_cluster_CellsMax",r.clusterCellsMaxData),t.setProperty("light_cluster_TextureSize",r.clusterTextureSizeData),t.setProperty("light_cluster_InfoTextureInvSize",r.infoTextureInvSizeData),t.setProperty("light_cluster_CellsCountByBoundsSizeAndPixelsPerCell",r.clusterCellsCountByBoundsSizeData),e.setTexture("light_cluster_InfoTexture",r.dataInfoTextureFloat),e.setTexture("light_cluster_Texture",r.clusterTexture);var a=h.root.pipeline.globalDSManager.pointSampler;e.setSampler("light_cluster_InfoTexture",a),e.setSampler("light_cluster_Texture",a)}},l.render=function(e,t){var r=c(e),a=this.getRenderArea(e),s=a.width,l=a.height,n=this.slotName(e,0),o=this.slotName(e,1);b.gbufferStage&&(o=b.gbufferStage.slotName(e,4)),g.set(S.clearColor,0,0,0,1),S.clearFlag=u.ClearFlagBit.COLOR,S.addRasterPass(s,l,"deferred-lighting","LightingShader"+r).setViewport(a.x,a.y,s,l).setPassInput(this.lastStage.slotName(e,0),"gbuffer_albedoMap").setPassInput(this.lastStage.slotName(e,1),"gbuffer_normalMap").setPassInput(this.lastStage.slotName(e,2),"gbuffer_emissiveMap").setPassInput(this.lastStage.slotName(e,3),"gbuffer_posMap");var h=S.pass,p=b.shadowStage;if(p)for(var C,T=i(p.mainLightShadows);!(C=T()).done;){var m=C.value;S.setPassInput(m,"cc_shadowMap")}S.addRasterView(n,D.RGBA16F,!0).version();var E=_.probes;E=E.filter((function(e){return e.enabledInHierarchy}));var R=L.ibl;b.bakingReflection&&(R=0);var N=globalThis.pipelineAssets.getMaterial("deferred-lighting"),I=this.materialMap.get(e);I&&I.parent===N||((I=new d.MaterialInstance({parent:N})).recompileShaders({CC_RECEIVE_SHADOW:1,REFLECTION_PROBE_COUNT:E.length,ENABLE_CLUSTER_LIGHTING:L.clusterLighting,ENABLE_IBL:R,ENABLE_SHADOW:L.shadow}),this.enableClusterLighting=L.clusterLighting,this.enableIBL=R,this.enableShadow=L.shadow,this.materialMap.set(e,I)),E.length===this.probes.length&&this.enableClusterLighting===L.clusterLighting&&this.enableIBL===R&&this.enableShadow===L.shadow||(I.recompileShaders({REFLECTION_PROBE_COUNT:E.length,ENABLE_CLUSTER_LIGHTING:L.clusterLighting,ENABLE_IBL:R,ENABLE_SHADOW:L.shadow}),this.enableClusterLighting=L.clusterLighting,this.enableIBL=R,this.enableShadow=L.shadow),h.addConstant("CustomLightingUBO","deferred-lighting");for(var B=0;B<3;B++){var v=E[B];if(!v)break;var A=v.node.worldPosition,M=Math.max(v.size.x,v.size.y,v.size.z);I.setProperty("light_ibl_posRange"+B,P.set(A.x,A.y,A.z,M));var O=v._cubemap;h.setTexture("light_ibl_Texture"+B,O.getGFXTexture()),h.setSampler("light_ibl_Texture"+B,O.getGFXSampler())}if(this.probes=E,this.updateClusterUBO(h,I),f.update(I),S.pass.addQueue(x.RENDER_TRANSPARENT).addCameraQuad(e,I,0,w.VOLUMETRIC_LIGHTING),L.transparent){S.clearFlag=u.ClearFlagBit.NONE,S.addRasterPass(s,l,"default","LightingTransparent"+r).setViewport(a.x,a.y,s,l).addRasterView(n,D.RGBA16F,!0).addRasterView(o,D.DEPTH_STENCIL,!0).version();var z=w.TRANSPARENT_OBJECT|w.PLANAR_SHADOW|w.GEOMETRY;S.pass.addQueue(x.RENDER_TRANSPARENT).addSceneOfCamera(e,new y,z)}},t}(p)).prototype,"name",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"DeferredLightingStage"}}),I=t(R.prototype,"outputNames",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return["DeferredLightingColor","gBufferDS"]}}),E=R))||E));l._RF.pop()}}}));

System.register("chunks:///_virtual/deferred-post-stage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./base-stage.ts","./utils2.ts","./pass-utils.ts","./setting.ts","./href-setting.ts"],(function(e){"use strict";var t,r,a,s,i,n,o,p,l,c,u,f,g,d,m,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,a=e.initializerDefineProperty,s=e.assertThisInitialized},function(e){i=e.cclegacy,n=e._decorator,o=e.rendering,p=e.gfx,l=e.Vec4,c=e.renderer,u=e.game},function(e){f=e.BaseStage},function(e){g=e.getCameraUniqueID},function(e){d=e.passUtils},function(e){m=e.settings},function(e){h=e.HrefSetting}],execute:function(){var y,v,w,P,S,R,b;i._RF.push({},"d9ef0mfpIlLCrG3rbw2qEXn","deferred-post-stage",void 0);n.type;var C=n.property,D=n.ccclass,F=(o.RasterView,o.AttachmentType,o.AccessType,o.ResourceResidency,o.LightInfo,o.SceneFlags,o.QueueHint,o.ComputeView,p.Format);p.LoadOp,p.StoreOp,p.ClearFlagBit,p.Color,p.Viewport,e("DeferredPostStage",(y=D("DeferredPostStage"),v=C({override:!0}),w=C({override:!0}),y((R=t((S=function(e){function t(){for(var t,r=arguments.length,i=new Array(r),n=0;n<r;n++)i[n]=arguments[n];return(t=e.call.apply(e,[this].concat(i))||this)._materialName="final-post",t.materialMap=new Map,a(t,"name",R,s(t)),a(t,"outputNames",b,s(t)),t.params1=new l,t.params2=new l,t}return r(t,e),t.prototype.render=function(e,t){var r=g(e),a=this.getRenderArea(e),s=this.lastStage.slotName(e,0),i=this.slotName(e,0);d.clearFlag=e.clearFlag&p.ClearFlagBit.COLOR,l.set(d.clearColor,0,0,0,1);var n=this.materialMap.get(e);n&&n.parent===this.material||(n=new c.MaterialInstance({parent:this.material}),this.materialMap.set(e,n)),d.material=n;var o=this.finalShadingScale();n.setProperty("params1",this.params1.set(u.canvas.width,u.canvas.height,m.outputRGBE?1:0,m.tonemapped?0:1)),n.setProperty("params2",this.params2.set(h.fxaa,0,0,0));var f=a.width/o,y=a.height/o;d.addRasterPass(f,y,"post-process","CameraPostprocessPass"+r).setViewport(a.x,a.y,f,y).setPassInput(s,"inputTexture").addRasterView(i,F.RGBA8,!1).blitScreen(0).version(),this.renderProfiler(e)},t}(f)).prototype,"name",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"DeferredPostStage"}}),b=t(S.prototype,"outputNames",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return["DeferredPostColor","DeferredPostDS"]}}),P=S))||P));i._RF.pop()}}}));

System.register("chunks:///_virtual/delay_play_animation.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var n,t,i,a,o,r,l,c,u,y,p;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){o=e.cclegacy,r=e._decorator,l=e.input,c=e.Input,u=e.KeyCode,y=e.Animation,p=e.Component}],execute:function(){var s,m,d,f;o._RF.push({},"6543dhd6KFBhY3acAElu4Ew","delay_play_animation",void 0);var h=r.ccclass,_=r.property;e("DelayPlayAnimation",h("DelayPlayAnimation")((d=n((m=function(e){function n(){for(var n,t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];return n=e.call.apply(e,[this].concat(o))||this,i(n,"delay",d,a(n)),i(n,"anim_name",f,a(n)),n}t(n,e);var o=n.prototype;return o.start=function(){var e=this;l.on(c.EventType.KEY_UP,(function(n){n.keyCode===u.SPACE&&e.delayPlay()}),this)},o.delayPlay=function(){var e=this;setTimeout((function(){var n;null==(n=e.node.getComponent(y))||n.play(e.anim_name);e.node.getComponent(y)}),1e3*this.delay)},n}(p)).prototype,"delay",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),f=n(m.prototype,"anim_name",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"minmax.com"}}),s=m))||s);o._RF.pop()}}}));

System.register("chunks:///_virtual/delay-active.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,r,i,n,o,a,c,l,s;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,c=e.Node,l=e.ParticleSystem,s=e.Component}],execute:function(){var u,p,y,f,d,v;o._RF.push({},"b5f58ANV5xLUZ3iLUJoyoIX","delay-active",void 0);var h=a.ccclass,g=a.property;e("DelayActive",(u=h("DelayActive"),p=g(c),u((d=t((f=function(e){function t(){for(var t,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,i(t,"targets",d,n(t)),i(t,"delay",v,n(t)),t}return r(t,e),t.prototype.start=function(){for(var e,t=this,r=null==(e=this.node)?void 0:e.getComponentsInChildren(l),i=0;i<r.length;i++)r[i].play();setTimeout((function(){t.targets.forEach((function(e){e.active=!0})),t.node.removeFromParent()}),1e3*this.delay)},t}(s)).prototype,"targets",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),v=t(f.prototype,"delay",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),y=f))||y));o._RF.pop()}}}));

System.register("chunks:///_virtual/delay-play.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,n,i,r,a,o,l,c,u,s;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,l=e.Animation,c=e.CCFloat,u=e.CCString,s=e.Component}],execute:function(){var p,y,f,m,b,d,g,h,v;a._RF.push({},"9d854y5DxxKkYWCzFWQ/uYO","delay-play",void 0);var z=o.ccclass,C=o.property;e("DelayPlay",(p=z("DelayPlay"),y=C([l]),f=C([c]),m=C([u]),p((g=t((d=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,i(t,"animations",g,r(t)),i(t,"delay",h,r(t)),i(t,"animation_names",v,r(t)),t}return n(t,e),t.prototype.start=function(){},t}(s)).prototype,"animations",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),h=t(d.prototype,"delay",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),v=t(d.prototype,"animation_names",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),b=d))||b));a._RF.pop()}}}));

System.register("chunks:///_virtual/delay-show-node.ts",["./rollupPluginModLoBabelHelpers.js","cc","./fun.ts","./util2.ts"],(function(e){"use strict";var t,n,o,i,r,a,c,s,l,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,c=e.v3,s=e.Component},function(e){l=e.fun},function(e){u=e.UtilVec3}],execute:function(){var d,p,f;r._RF.push({},"d02a0dfe4FA+akYTVqTgTcA","delay-show-node",void 0);var y=a.ccclass,h=a.property;e("delay_show_node",y("delay_show_node")((f=t((p=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,o(t,"delay_time",f,i(t)),t._scale=c(0,0,0),t}n(t,e);var r=t.prototype;return r.onEnable=function(){u.copy(this._scale,this.node.getWorldScale()),this.node.setScale(0,0,0)},r.start=function(){var e=this;l.delay((function(){e.node.setScale(e._scale)}),this.delay_time)},t}(s)).prototype,"delay_time",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.2}}),d=p))||d);r._RF.pop()}}}));

System.register("chunks:///_virtual/deobfuscateAppleGPU.ts",["cc","./webgl-constants.ts","./deviceInfo.ts"],(function(e){"use strict";var a,r,t,n,c,i,o,u,f,l,v;return{setters:[function(e){a=e.cclegacy},function(e){r=e.GL_VERTEX_SHADER,t=e.GL_FRAGMENT_SHADER,n=e.GL_ARRAY_BUFFER,c=e.GL_STATIC_DRAW,i=e.GL_FLOAT,o=e.GL_COLOR_BUFFER_BIT,u=e.GL_TRIANGLES,f=e.GL_RGBA,l=e.GL_UNSIGNED_BYTE},function(e){v=e.deviceInfo}],execute:function(){e("deobfuscateAppleGPU",(function(e,a,d){if(!d)return[a];var s,h=function(e){var a="\n    precision highp float;\n    attribute vec3 aPosition;\n    varying float vvv;\n    void main() {\n      vvv = 0.31622776601683794;\n      gl_Position = vec4(aPosition, 1.0);\n    }\n  ",v="\n    precision highp float;\n    varying float vvv;\n    void main() {\n      vec4 enc = vec4(1.0, 255.0, 65025.0, 16581375.0) * vvv;\n      enc = fract(enc);\n      enc -= enc.yzww * vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0, 0.0);\n      gl_FragColor = enc;\n    }\n  ",d=e.createShader(r),s=e.createShader(t),h=e.createProgram();if(!(s&&d&&h))return;e.shaderSource(d,a),e.shaderSource(s,v),e.compileShader(d),e.compileShader(s),e.attachShader(h,d),e.attachShader(h,s),e.linkProgram(h),e.detachShader(h,d),e.detachShader(h,s),e.deleteShader(d),e.deleteShader(s),e.useProgram(h);var p=e.createBuffer();e.bindBuffer(n,p),e.bufferData(n,new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),c);var _=e.getAttribLocation(h,"aPosition");e.vertexAttribPointer(_,3,i,!1,0,0),e.enableVertexAttribArray(_),e.clearColor(1,1,1,1),e.clear(o),e.viewport(0,0,1,1),e.drawArrays(u,0,3);var A=new Uint8Array(4);return e.readPixels(0,0,1,1,f,l,A),e.deleteProgram(h),e.deleteBuffer(p),A.join("")}(e),p="801621810",_="8016218135",A="80162181161",S=null!=v&&v.isIpad?[["a7",A,12],["a8",_,15],["a8x",_,15],["a9",_,15],["a9x",_,15],["a10",_,15],["a10x",_,15],["a12",p,15],["a12x",p,15],["a12z",p,15],["a14",p,15],["m1",p,15]]:[["a7",A,12],["a8",_,12],["a9",_,15],["a10",_,15],["a11",p,15],["a12",p,15],["a13",p,15],["a14",p,15]];"80162181255"===h?s=S.filter((function(e){return e[2]>=14})):(s=S.filter((function(e){return e[1]===h}))).length||(s=S);return s.map((function(e){return"apple "+e[0]+" gpu"}))})),a._RF.push({},"dc7cagY9e5B+5Hb2UflP2TS","deobfuscateAppleGPU",void 0),a._RF.pop()}}}));

System.register("chunks:///_virtual/deobfuscateRenderer.ts",["cc","./deobfuscateAppleGPU.ts"],(function(e){"use strict";var t,c;return{setters:[function(e){t=e.cclegacy},function(e){c=e.deobfuscateAppleGPU}],execute:function(){e("deobfuscateRenderer",(function(e,t,u){return"apple gpu"===t?c(e,t,u):[t]})),t._RF.push({},"3e583xIz2JIWaUDY4cAD/xh","deobfuscateRenderer",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/destroy-settings.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,r,i,n,o,s,c,a;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){o=t.cclegacy,s=t._decorator,c=t.CCBoolean,a=t.Component}],execute:function(){var u,l,p,y,f;o._RF.push({},"2e346wKSjFIN5CqVUsQrX47","destroy-settings",void 0);var d=s.ccclass,g=s.property;t("destroySettings",(u=d("destroySettings"),l=g(c),u((f=e((y=function(t){function e(){for(var e,r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return e=t.call.apply(t,[this].concat(o))||this,i(e,"isDestroy",f,n(e)),e}return r(e,t),e.prototype.start=function(){},e}(a)).prototype,"isDestroy",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),p=y))||p));o._RF.pop()}}}));

System.register("chunks:///_virtual/dev.ts",["./rollupPluginModLoBabelHelpers.js","cc","./msg.ts"],(function(t){"use strict";var n,e,o,c,i,u,s,r;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,o=t._decorator,c=t.input,i=t.Input,u=t.KeyCode,s=t.Component},function(t){r=t.Msg}],execute:function(){var p;e._RF.push({},"cc1d4LUJZpOtbnwuA/YXPCT","dev",void 0);var v=o.ccclass;o.property,t("Dev",v("Dev")(p=function(t){function e(){return t.apply(this,arguments)||this}n(e,t);var o=e.prototype;return o.start=function(){c.on(i.EventType.KEY_DOWN,this.onKeyDown,this)},o.onKeyDown=function(t){t.keyCode==u.KEY_P&&this.onClickDev()},o.onClickDev=function(){r.emit("push","dev")},o.update=function(t){},e}(s))||p);e._RF.pop()}}}));

System.register("chunks:///_virtual/deviceInfo.ts",["cc","./ssr.ts"],(function(i){"use strict";var t,e;return{setters:[function(i){t=i.cclegacy},function(i){e=i.isSSR}],execute:function(){t._RF.push({},"bb9f4jQcmBBGJZb7y32FDm2","deviceInfo",void 0);i("deviceInfo",function(){if(!e){var i=window.navigator,t=i.userAgent,n=i.platform,s=i.maxTouchPoints,o=/(iphone|ipod|ipad)/i.test(t),r="iPad"===n||"MacIntel"===n&&s>0&&!window.MSStream;return{isIpad:r,isMobile:/android/i.test(t)||o||r,isSafari12:/Version\/12.+Safari/.test(t)}}}());t._RF.pop()}}}));

System.register("chunks:///_virtual/disable-probe-update-runtime.ts",["cc"],(function(){"use strict";var e,r,a,o,t,n;return{setters:[function(c){e=c.cclegacy,r=c.game,a=c.Game,o=c.ReflectionProbeManager,t=c.director,n=c.Director}],execute:function(){e._RF.push({},"fbcf2VoLvpPo6rFsxM3riJr","disable-probe-update-runtime",void 0),r.on(a.EVENT_GAME_INITED,(function(){var e,r;if(void 0!==o)e=o.probeManager,r=o.probeManager.onUpdateProbes;else for(var a=t._callbackTable[n.EVENT_BEFORE_UPDATE].callbackInfos,c=0;c<a.length;c++)if((e=a[c].target)&&e.onUpdateProbes){r=e.onUpdateProbes;break}e&&r&&t.off(n.EVENT_BEFORE_UPDATE,r,e)})),e._RF.pop()}}}));

System.register("chunks:///_virtual/disable-update-ubo.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,o,n,u,a;return{setters:[function(t){e=t.inheritsLoose},function(t){o=t.cclegacy,n=t._decorator,u=t.MeshRenderer,a=t.Component}],execute:function(){var s;o._RF.push({},"1aee8DtcaFMBLRwdpO9OuHZ","disable-update-ubo",void 0);var r=n.ccclass;n.property,t("disable_update_ubo",r("disable_update_ubo")(s=function(t){function o(){return t.apply(this,arguments)||this}return e(o,t),o.prototype.start=function(){var t=this;setTimeout((function(){t.getComponentsInChildren(u).forEach((function(t){var e=t.model.updateUBOs;t.model.updateUBOs=function(){this._localDataUpdated&&e.call(this)}}))}),1e3)},o}(a))||s);o._RF.pop()}}}));

System.register("chunks:///_virtual/drop-item.ts",["./rollupPluginModLoBabelHelpers.js","cc","./msg.ts","./res-pool.ts"],(function(e){"use strict";var t,o,i,n,s,r;return{setters:[function(e){t=e.inheritsLoose},function(e){o=e.cclegacy,i=e._decorator,n=e.Component},function(e){s=e.Msg},function(e){r=e.ResPool}],execute:function(){var c;o._RF.push({},"e970d4rKHNKup4eamDFF4za","drop-item",void 0);var p=i.ccclass;i.property,e("DropItem",p("DropItem")(c=function(e){function o(){for(var t,o=arguments.length,i=new Array(o),n=0;n<o;n++)i[n]=arguments[n];return(t=e.call.apply(e,[this].concat(i))||this).itemName="",t.groupIndex=0,t.itemNode=void 0,t.effectNode=void 0,t}t(o,e);var i=o.prototype;return i.start=function(){this.node.on("picked",this.picked,this)},i.onDestroy=function(){this.node.off("picked",this.picked,this)},i.init=function(e,t,o){this.itemName=e,this.node.name=e,this.groupIndex=o;var i=this.node.children[0],n=e+"_pickup";this.itemNode=r.Instance.pop(n,i.worldPosition,i);var s="fx_drop_lv_"+t;this.effectNode=r.Instance.pop(s,this.node.worldPosition,this.node)},i.picked=function(){var e;s.emit("msg_remove_item",this.groupIndex),r.Instance.push(this.itemNode),null==(e=this.effectNode)||e.emit("remove"),this.node.name="drop_item",r.Instance.push(this.node)},o}(n))||c);o._RF.pop()}}}));

System.register("chunks:///_virtual/editor-camera-placer.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,r,o,a,c,i,n,p,l,s;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,o=e.initializerDefineProperty,a=e.assertThisInitialized,c=e.createClass},function(e){i=e.cclegacy,n=e._decorator,p=e.Vec3,l=e.Quat,s=e.Component}],execute:function(){var u,y,d;i._RF.push({},"5161fNg0y5MS50Us7M1kE49","editor-camera-placer",void 0);var f=n.property,_=n.ccclass,h=n.executeInEditMode;e("EditorCameraPlacer",_("EditorCameraPlacer")(u=h((d=t((y=function(e){function t(){for(var t,r=arguments.length,c=new Array(r),i=0;i<r;i++)c[i]=arguments[i];return t=e.call.apply(e,[this].concat(c))||this,o(t,"_place",d,a(t)),t._oldPosition=new p,t._oldRotation=new l,t}return r(t,e),t.prototype.update=function(){},c(t,[{key:"place",get:function(){return this._place},set:function(e){this._place=e}}]),t}(s)).prototype,"_place",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),t(y.prototype,"place",[f],Object.getOwnPropertyDescriptor(y.prototype,"place"),y.prototype),u=y))||u)||u);i._RF.pop()}}}));

System.register("chunks:///_virtual/editor.ts",["cc","./env"],(function(e){"use strict";var t,n,r,o;return{setters:[function(e){t=e.cclegacy,n=e.warn,r=e.error},function(e){o=e.EDITOR}],execute:function(){e({download:function(e,t){return new Promise((function(n,r){p.head(e,(function(o,i,a){if(o)return r(o);p(e).pipe(c.createWriteStream(t)).on("close",(function(){n(null)}))}))}))},error:function(){r.apply(void 0,arguments)},formatPath:function(e){return e.replace(/\\/g,"/")},log:function(){n.apply(void 0,arguments)},relpaceExt:function(e,t){var n=a.basename(e).replace(a.extname(e),t);return a.join(a.dirname(e),n)},repaintInEditMode:function(){f.Engine.repaintInEditMode()},warn:function(){n.apply(void 0,arguments)}}),t._RF.push({},"82665FTrUlFd6B6tPgfFpSW","editor",void 0);var i=e("EDITOR",o),a=(e("io",i),e("ws",i),e("path",i)),c=e("fse",i),u=(e("base642arraybuffer",i),e("Sharp",i),e("Buffer",i),e("globby",i)),p=e("request",i);globalThis.fse=c,globalThis.path=a,globalThis.globby=u;var f=e("cce",i);e("EditorExtends",i),e("Editor",i),e("projectPath",i),e("projectAssetPath",i),e("projectTempPath",i);t._RF.pop()}}}));

System.register("chunks:///_virtual/Electron.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var n,t,r,o;return{setters:[function(e){n=e.createClass,t=e.asyncToGenerator,r=e.regeneratorRuntime},function(e){o=e.cclegacy}],execute:function(){o._RF.push({},"0907e8LT0RI2rtAbQ2ziAFM","Electron",void 0);var i=e("default",function(){function e(){}return e.sendAsync=function(){var e=t(r().mark((function e(n,t,o){var i,c;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t=void 0),void 0===o&&(o=void 0),e.next=4,null==(i=window.electron)?void 0:i.ipcRenderer.invoke(n,t);case 4:c=e.sent,void 0!==o&&o(c);case 6:case"end":return e.stop()}}),e)})));return function(n,t,r){return e.apply(this,arguments)}}(),e.send=function(e,n){var t;return void 0===n&&(n=void 0),null==(t=window.electron)?void 0:t.ipcRenderer.invoke(e,n)},e.A2C=function(e,n){console.log("A2C:",e,n)},n(e,null,[{key:"appUserID",get:function(){return globalThis.remote?globalThis.remote.app.getUserID():""}},{key:"appUserPath",get:function(){return globalThis.remote?globalThis.remote.app.getPath("userData"):""}}]),e}());i.is_steam=!1,i.counter=0,o._RF.pop()}}}));

System.register("chunks:///_virtual/error.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var r,e,o,s;return{setters:[function(t){r=t.inheritsLoose,e=t.assertThisInitialized,o=t.wrapNativeSuper},function(t){s=t.cclegacy}],execute:function(){s._RF.push({},"0f140lESWZBN6xPxjHqfsPm","error",void 0);t("OutdatedBenchmarksError",function(t){function o(r){var s;return s=t.call(this,r)||this,Object.setPrototypeOf(e(s),(this instanceof o?this.constructor:void 0).prototype),s}return r(o,t),o}(o(Error)));s._RF.pop()}}}));

System.register("chunks:///_virtual/event.ts",["cc"],(function(e){"use strict";var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"8edfa4MOMJElrnab8AYAYP0","event",void 0);e("default",function(){function e(){this._listeners=[],this._onceListeners=[]}var t=e.prototype;return t.on=function(e,t){for(var n=this._listeners,r=0;r<n.length;r++)if(n[r][0]===e&&n[r][1]===t)return;n.push([e,t])},t.off=function(e,t){for(var n=this._listeners,r=0;r<n.length;r++)if(n[r][0]===e)return void n.splice(r,1)},t.once=function(e,t){for(var n=this._onceListeners,r=0;r<n.length;r++)if(n[r][0]===e&&n[r][1]===t)return;n.push([e,t])},t.invoke=function(e,t,n,r,i,s){for(var o=[],c=0;c<arguments.length;c++)o[c]=arguments[c];for(var f=this._listeners,u=0;u<f.length;u++){var h=f[u];h[0].apply(h[1],o)}for(var l=this._onceListeners,a=0;a<l.length;a++){var v=l[a];v[0].apply(v[1],o)}l.length=0},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/fil-smooth.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,i,l,a,o,r,n,s,u,c;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,l=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){o=t.cclegacy,r=t._decorator,n=t.Sprite,s=t.math,u=t.game,c=t.Component}],execute:function(){var h,f,p;o._RF.push({},"1e9b8oU7zZP3r62t7FBDaMa","fil-smooth",void 0);var v=r.ccclass,m=r.property;t("FilSmooth",v("FilSmooth")((p=e((f=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))||this).fil_value=Object.create(null),e.value=1,l(e,"smooth",p,a(e)),e}i(e,t);var o=e.prototype;return o.start=function(){this.fil_value=this.getComponent(n)},o.setValue=function(t){this.value=t},o.update=function(t){var e=Math.abs(this.fil_value.fillRange-this.value);0!==e&&(this.fil_value.fillRange=s.lerp(this.fil_value.fillRange,this.value,u.deltaTime*this.smooth),e<1e-4&&(this.fil_value.fillRange=this.value))},e}(c)).prototype,"smooth",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),h=f))||h);o._RF.pop()}}}));

System.register("chunks:///_virtual/force-area.ts",["./rollupPluginModLoBabelHelpers.js","cc","./game.ts","./util2.ts"],(function(e){"use strict";var o,t,r,i,n,c,l,a,s,h,u,f;return{setters:[function(e){o=e.applyDecoratedDescriptor,t=e.inheritsLoose,r=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){n=e.cclegacy,c=e._decorator,l=e.Vec3,a=e.v3,s=e.Collider,h=e.Component},function(e){u=e.Game},function(e){f=e.UtilVec3}],execute:function(){var d,p,g,y,_,S;n._RF.push({},"0cbc93C5zZOP4OPrSSc53nC","force-area",void 0);var v=c.ccclass,m=c.property;e("ForceArea",(d=v("ForceArea"),p=m(l),d((_=o((y=function(e){function o(){for(var o,t=arguments.length,n=new Array(t),c=0;c<t;c++)n[c]=arguments[c];return o=e.call.apply(e,[this].concat(n))||this,r(o,"force",_,i(o)),r(o,"posScale",S,i(o)),o._force=a(0,0,0),o._collider=void 0,o}t(o,e);var n=o.prototype;return n.__preload=function(){this._collider=this.getComponent(s),this._collider.on("onTriggerEnter",this.onTriggerEnter,this),this._collider.on("onTriggerStay",this.onTriggerStay,this)},n.onEnable=function(){var e="level"===u.Instance._currentGameNodeName;this._collider.enabled=e},n.forceRate=function(e){return f.copy(this._force,this.force),0!==this.posScale.x&&(this._force.x=this.calculate(e.worldPosition.x-this.node.worldPosition.x,this.posScale.x,this.force.x)),0!==this.posScale.y&&(this._force.y=this.calculate(e.worldPosition.y-this.node.worldPosition.y,this.posScale.y,this.force.y)),0!==this.posScale.z&&(this._force.z=this.calculate(e.worldPosition.z-this.node.worldPosition.z,this.posScale.z,this.force.z)),this._force.clone()},n.calculate=function(e,o,t){var r=e/o;return(r=2*Math.log(r)+o)<0&&(r=0),r=(o-r)/o+11},n.onTriggerEnter=function(e){e.otherCollider.node.emit("addAreaForce",this.forceRate(e.otherCollider.node))},n.onTriggerStay=function(e){e.otherCollider.node.emit("addAreaForce",this.forceRate(e.otherCollider.node))},o}(h)).prototype,"force",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return a(0,0,0)}}),S=o(y.prototype,"posScale",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return a(0,4,0)}}),g=y))||g));n._RF.pop()}}}));

System.register("chunks:///_virtual/forward-post-stage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./base-stage.ts","./utils2.ts","./pass-utils.ts"],(function(e){"use strict";var t,r,a,i,s,o,n,l,c,p,u,d,g,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,a=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){s=e.cclegacy,o=e._decorator,n=e.rendering,l=e.gfx,c=e.Vec4,p=e.renderer,u=e.director},function(e){d=e.BaseStage},function(e){g=e.getCameraUniqueID},function(e){h=e.passUtils}],execute:function(){var m,f,w,y,F,v,P;s._RF.push({},"02d63ZtAh5DppeJkk4nRaGT","forward-post-stage",void 0);o.type;var R=o.property,S=o.ccclass,b=(n.RasterView,n.AttachmentType,n.AccessType,n.ResourceResidency,n.LightInfo,n.SceneFlags,n.QueueHint,n.ComputeView,l.Format);l.LoadOp,l.StoreOp,l.ClearFlagBit,l.Color,l.Viewport,e("ForwardPostStage",(m=S("ForwardPostStage"),f=R({override:!0}),w=R({override:!0}),m((v=t((F=function(e){function t(){for(var t,r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return(t=e.call.apply(e,[this].concat(s))||this)._materialName="blit-screen",t.materialMap=new Map,a(t,"name",v,i(t)),a(t,"outputNames",P,i(t)),t}return r(t,e),t.prototype.render=function(e,t){var r=g(e),a=this.getRenderArea(e),i=a.width,s=a.height,o=this.lastStage.slotName(e,0),n=this.slotName(e,0);h.clearFlag=e.clearFlag&l.ClearFlagBit.COLOR,c.set(h.clearColor,0,0,0,1);var d=this.materialMap.get(e);d&&d.parent===this.material||(d=new p.MaterialInstance({parent:this.material}),this.materialMap.set(e,d)),h.material=d;var m=this.finalShadingScale(),f=u.root.mainWindow!==e.window;f||(i/=m,s/=m),h.addRasterPass(i,s,"post-process","CameraPostprocessPass"+r).setViewport(a.x,a.y,i,s).setPassInput(o,"inputTexture").addRasterView(n,b.RGBA8,f).blitScreen(0),this.renderProfiler(e)},t}(d)).prototype,"name",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"ForwardPostStage"}}),P=t(F.prototype,"outputNames",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return["ForwardPostColor"]}}),y=F))||y));s._RF.pop()}}}));

System.register("chunks:///_virtual/forward-stage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./utils2.ts","./base-stage.ts"],(function(e){"use strict";var a,t,r,i,n,o,s,d,l,c,u,h,p,w,R,S;return{setters:[function(e){a=e.applyDecoratedDescriptor,t=e.inheritsLoose,r=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){n=e.cclegacy,o=e.pipeline,s=e.renderer,d=e.gfx,l=e.rendering,c=e._decorator,u=e.director},function(e){h=e.getRenderArea,p=e.validPunctualLightsCulling,w=e.CameraInfo,R=e.getCameraUniqueID},function(e){S=e.BaseStage}],execute:function(){var E,g,T,A,f,m,D;n._RF.push({},"7bbd81TYatCzICAkwvjeK7e","forward-stage",void 0);var N=o.supportsR32FloatTexture,L=s.scene,C=L.ShadowType,v=L.LightType,_=(L.SKYBOX_FLAG,L.CSMLevel,d.Format),P=d.LoadOp,O=d.StoreOp,b=d.ClearFlagBit,I=d.Color,y=d.Viewport,F=l.RasterView,G=l.AttachmentType,H=l.AccessType,M=l.ResourceResidency,B=l.LightInfo,U=l.SceneFlags,V=l.QueueHint,x=(l.ComputeView,c.ccclass),z=c.property;e("ForwardStage",(E=x("custom.ForwardStage"),g=z({override:!0}),T=z({override:!0}),E((m=a((f=function(e){function a(){for(var a,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(a=e.call.apply(e,[this].concat(n))||this)._materialName="blit-screen",r(a,"name",m,i(a)),r(a,"outputNames",D,i(a)),a}t(a,e);var n=a.prototype;return n.buildShadowPass=function(e,a,t,r,i,n,o){var s=a.device,l=e;if(!a.containsResource(l)){var c=N(s)?_.R32F:_.RGBA8;a.addRenderTarget(l,c,n,o,M.MANAGED),a.addDepthStencil(l+"Depth",_.DEPTH_STENCIL,n,o,M.MANAGED)}var u=a.addRasterPass(n,o,"default");u.name=e,u.addRasterView(l,new F("_",H.WRITE,G.RENDER_TARGET,P.CLEAR,O.STORE,b.COLOR,new I(1,1,1,t.clearColor.w))),u.addRasterView(l+"Depth",new F("_",H.WRITE,G.DEPTH_STENCIL,P.CLEAR,O.DISCARD,b.DEPTH_STENCIL,new I(t.clearDepth,t.clearStencil,0,0)));var p=h(new d.Rect,t,n,o,r,i);u.setViewport(new y(p.x,p.y,p.width,p.height)),u.addQueue(V.RENDER_OPAQUE).addSceneOfCamera(t,new B(r,i),U.SHADOW_CASTER)},n.buildShadowPasses=function(e,a,t){p(t,a);var r=t,i=r.pipelineSceneData.shadows,n=t.pipelineSceneData.validPunctualLights,o=new w,s=t.pipelineSceneData.shadows;if(!i.enabled||i.type!==C.ShadowMap)return o;o.shadowEnabled=!0;for(var d=[],l=0,c=0;l<i.maxReceived&&c<n.length;){var u=n[c];if(u.type===v.SPOT)u.shadowEnabled&&(d.push(u),l++);c++}var h=a.scene.mainLight,R=s.size.x,S=s.size.y;if(h&&h.shadowEnabled)if(o.mainLightShadowNames[0]="MainLightShadow"+e,h.shadowFixedArea)this.buildShadowPass(o.mainLightShadowNames[0],t,a,h,0,R,S);else for(var E=r.pipelineSceneData.csmSupported?h.csmLevel:1,g=0;g<E;g++)o.mainLightShadowNames[g]="MainLightShadow"+e,this.buildShadowPass(o.mainLightShadowNames[g],t,a,h,g,R,S);for(var T=0;T<d.length;T++){var A=d[T],f="SpotLightShadow"+T.toString()+e;o.spotLightShadowNames[T]=f,this.buildShadowPass(f,t,a,A,0,R,S)}return o},n.render=function(e,a){u.root.pipeline.pipelineSceneData.fog.fogStart=0;var t=R(e),r=this.getRenderArea(e),i=r.width,n=r.height,o=this.slotName(e,0),s=this.slotName(e,1);a.containsResource(o)||(a.addRenderTarget(o,_.RGBA16F,i,n,M.MANAGED),a.addDepthStencil(s,_.DEPTH_STENCIL,i,n,M.MANAGED)),a.updateRenderTarget(o,i,n),a.updateDepthStencil(s,i,n);var d=a.addRasterPass(i,n,"default");d.name=this.name+"_"+t;var l=new F("_",H.WRITE,G.RENDER_TARGET,P.CLEAR,O.STORE,e.clearFlag,new I(0,0,0,0)),c=new F("_",H.WRITE,G.DEPTH_STENCIL,P.CLEAR,O.STORE,e.clearFlag,new I(e.clearDepth,e.clearStencil,0,0));d.addRasterView(o,l),d.addRasterView(s,c),d.addQueue(V.RENDER_OPAQUE).addSceneOfCamera(e,new B,U.OPAQUE_OBJECT|U.PLANAR_SHADOW|U.CUTOUT_OBJECT|U.DEFAULT_LIGHTING|U.DRAW_INSTANCING),d.addQueue(V.RENDER_TRANSPARENT).addSceneOfCamera(e,new B,U.UI|U.TRANSPARENT_OBJECT|U.GEOMETRY)},a}(S)).prototype,"name",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"custom.ForwardStage"}}),D=a(f.prototype,"outputNames",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return["ForwardColor","ForwardDepth"]}}),A=f))||A));n._RF.pop()}}}));

System.register("chunks:///_virtual/fsr-stage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./base-stage.ts","./utils2.ts","./pass-utils.ts","./setting.ts","./href-setting.ts"],(function(e){"use strict";var t,a,r,s,i,n,o,l,p,u,c,f,g,h,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.inheritsLoose,r=e.initializerDefineProperty,s=e.assertThisInitialized},function(e){i=e.cclegacy,n=e._decorator,o=e.rendering,l=e.gfx,p=e.Vec4,u=e.renderer},function(e){c=e.BaseStage},function(e){f=e.getCameraUniqueID},function(e){g=e.passUtils},function(e){h=e.settings},function(e){m=e.HrefSetting}],execute:function(){var R,d,S,y,b,w,F,v;i._RF.push({},"f1a1aVRjOtCHo8borUeME6P","fsr-stage",void 0);n.type;var C=n.property,P=n.ccclass,M=(o.RasterView,o.AttachmentType,o.AccessType,o.ResourceResidency,o.LightInfo,o.SceneFlags,o.QueueHint,o.ComputeView,l.Format);l.LoadOp,l.StoreOp,l.ClearFlagBit,l.Color,l.Viewport,e("FSRStage",(R=P("FSRStage"),d=C({override:!0}),S=C({override:!0}),R((w=t((b=function(e){function t(){for(var t,a=arguments.length,i=new Array(a),n=0;n<a;n++)i[n]=arguments[n];return(t=e.call.apply(e,[this].concat(i))||this)._materialName="fsr",t.materialMap=new Map,r(t,"name",w,s(t)),r(t,"sharpness",F,s(t)),r(t,"outputNames",v,s(t)),t}a(t,e);var i=t.prototype;return i.checkEnable=function(){return!h.bakingReflection&&(this.enable&&!!m.fsr)},i.render=function(e,t){var a=f(e),r=this.getRenderArea(e),s=r.width,i=r.height,n=this.finalShadingScale(),o=Math.floor(s/n),c=Math.floor(i/n);g.clearFlag=l.ClearFlagBit.COLOR,p.set(g.clearColor,0,0,0,1);var m=this.materialMap.get(e);m&&m.parent===this.material||(m=new u.MaterialInstance({parent:this.material}),this.materialMap.set(e,m)),g.material=m,m.setProperty("fsrParams",new p(this.sharpness,0,0,0)),m.setProperty("texSize",new p(s,i,o,c));var R=this.lastStage.slotName(e,0),d="FSR_EASU";g.addRasterPass(o,c,"post-process","CameraFSR_EASU_Pass"+a).setViewport(r.x,r.y,o,c).setPassInput(R,"outputResultMap").addRasterView(d,M.RGBA8).blitScreen(0);var S=this.slotName(e,0);g.addRasterPass(o,c,"post-process","CameraFSR_RCAS_Pass"+a).setViewport(r.x,r.y,o,c).setPassInput(d,"outputResultMap").addRasterView(S,M.RGBA8).blitScreen(1),h.tonemapped=!0},t}(c)).prototype,"name",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"FSRStage"}}),F=t(b.prototype,"sharpness",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.2}}),v=t(b.prototype,"outputNames",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return["FSRColor"]}}),y=b))||y));i._RF.pop()}}}));

System.register("chunks:///_virtual/fun.ts",["cc"],(function(t){"use strict";var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"ed3d4WCsZNHJpU/MgDfbWRo","fun",void 0);t("fun",function(){function t(){}return t.delay=function(t,n){setTimeout(t,1e3*n)},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/fx-actor-fall-point.ts",["./rollupPluginModLoBabelHelpers.js","cc","./util2.ts"],(function(t){"use strict";var i,e,o,s,h,n,r,a,l,c,_,u;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,s=t.assertThisInitialized},function(t){h=t.cclegacy,n=t._decorator,r=t.ParticleSystem,a=t.geometry,l=t.v3,c=t.PhysicsSystem,_=t.Component},function(t){u=t.UtilVec3}],execute:function(){var y,p,g,f,d,P;h._RF.push({},"079ffBOeyBO3aMG1gk/AcFZ","fx-actor-fall-point",void 0);var v=n.ccclass,x=n.property;t("FxActorFallPoint",(y=v("FxActorFallPoint"),p=x(r),y((d=i((f=function(t){function i(){for(var i,e=arguments.length,h=new Array(e),n=0;n<e;n++)h[n]=arguments[n];return(i=t.call.apply(t,[this].concat(h))||this)._ray=new a.Ray,i._height=0,i._line=void 0,i._fxHit=void 0,i._hitPos=void 0,o(i,"particle_high_light",d,s(i)),o(i,"rate_high_light",P,s(i)),i}e(i,t);var h=i.prototype;return h.start=function(){this._line=this.node.getChildByName("line"),this._fxHit=this.node.getChildByName("hitpoint"),this._hitPos=l(0,0,0),this._ray.d.x=0,this._ray.d.y=-1,this._ray.d.z=0},h.update=function(t){this.detectPoint()},h.detectPoint=function(){if(u.copy(this._ray.o,this.node.worldPosition),c.instance.raycastClosest(this._ray)){var t=c.instance.raycastClosestResult;this._height=this.node.worldPosition.y-t.hitPoint.y,u.copy(this._hitPos,t.hitPoint),this._hitPos.y+=.05,this.particle_high_light.startSpeed.constant=this._height*this.rate_high_light}else this._height=0;var i=this._height>.3;this._line.active=i,this._fxHit.active=i,this._line.setScale(1,3*this._height,1),this._fxHit.setWorldPosition(this._hitPos)},i}(_)).prototype,"particle_high_light",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=i(f.prototype,"rate_high_light",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),g=f))||g));h._RF.pop()}}}));

System.register("chunks:///_virtual/fx-auto-remove.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,r,o,i,n,a,c,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){n=e.cclegacy,a=e._decorator,c=e.ParticleSystem,l=e.Component}],execute:function(){var s,u,p;n._RF.push({},"9a13dQ1gv1PzI0/macqLJJ/","fx-auto-remove",void 0);var d=a.ccclass,y=a.property;e("FxAutoRemove",d("FxAutoRemove")((p=t((u=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return t=e.call.apply(e,[this].concat(n))||this,o(t,"delayTime",p,i(t)),t}r(t,e);var n=t.prototype;return n.start=function(){for(var e,t=null==(e=this.node)?void 0:e.getComponentsInChildren(c),r=0;r<t.length;r++)t[r].play()},n.update=function(e){this.delayTime-=e,this.delayTime<0&&(e=9999,this.node.destroy())},t}(l)).prototype,"delayTime",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),s=u))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/fx-base.ts",["./rollupPluginModLoBabelHelpers.js","cc","./res-pool.ts"],(function(e){"use strict";var t,i,o,r,s,n,a,l,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,o=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){s=e.cclegacy,n=e._decorator,a=e.ParticleSystem,l=e.Component},function(e){c=e.ResPool}],execute:function(){var h,p,u,y;s._RF.push({},"a337dbviatHz4BIgY6tyVw5","fx-base",void 0);var d=n.ccclass,m=n.property;e("FxBase",d("FxBase")((u=t((p=function(e){function t(){for(var t,i=arguments.length,s=new Array(i),n=0;n<i;n++)s[n]=arguments[n];return t=e.call.apply(e,[this].concat(s))||this,o(t,"destroyTime",u,r(t)),t.particles=void 0,o(t,"autoRemove",y,r(t)),t.delayTime=3,t}i(t,e);var s=t.prototype;return s.start=function(){var e;this.particles=null==(e=this.node)?void 0:e.getComponentsInChildren(a),this.node.on("play",this.play,this),this.node.on("remove",this.remove,this),this.delayTime=this.destroyTime},s.onDestroy=function(){this.node.off("play",this.play,this),this.node.off("remove",this.remove,this)},s.play=function(){this.delayTime=this.destroyTime;for(var e=0;e<this.particles.length;e++){var t=this.particles[e];t.stop(),t.play()}},s.lateUpdate=function(e){this.autoRemove&&(this.delayTime-=e,this.delayTime<0&&this.remove())},s.remove=function(){c.Instance.push(this.node),this.delayTime=this.destroyTime},t}(l)).prototype,"destroyTime",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),y=t(p.prototype,"autoRemove",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),h=p))||h);s._RF.pop()}}}));

System.register("chunks:///_virtual/fx-bullet-tracer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./res.ts","./fun.ts"],(function(t){"use strict";var e,i,n,o,r,s,a,l,c,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,a=t.randomRange,l=t.Component},function(t){c=t.Res},function(t){u=t.fun}],execute:function(){var h,p,f,d,v;r._RF.push({},"2027aQpjO5JX6n1yWEVEr5k","fx-bullet-tracer",void 0);var m=s.ccclass,y=s.property;t("FxBulletTracer",m("FxBulletTracer")((f=e((p=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,n(e,"poolCount",f,o(e)),n(e,"segment",d,o(e)),n(e,"hiddenTime",v,o(e)),e.pool=void 0,e}i(e,t);var r=e.prototype;return r.__preload=function(){this.node.on("init",this.init,this)},r.init=function(){this.pool=new Array(this.poolCount);var t=this.node.children[0];this.pool[0]=t,t.active=!1;for(var e=1;e<this.poolCount;e++)this.pool[e]=c.instNode(t,this.node);this.node.on("setTracer",this.setTracer,this)},r.onDestroy=function(){this.node.off("init",this.init,this),this.node.off("setTracer",this.setTracer,this)},r.setTracer=function(t,e){for(var i=e.clone(),n=e.clone().subtract(t).normalize(),o=i.subtract(t).length(),r=o/this.poolCount,s=this.calculateSegment(o),l=t.clone(),c=0;c<s;c++){var h=r,p=this.pool[c];p.active=!0,p.setPosition(l),p.lookAt(e),p.setScale(.3,1,a(.3,h)),l.add(n.clone().multiplyScalar(h))}u.delay(this.hiddenLines.bind(this),this.hiddenTime)},r.calculateSegment=function(t){var e=Math.round(t/this.segment);return e>this.poolCount&&(e=this.poolCount),e},r.hiddenLines=function(){for(var t=0;t<this.poolCount;t++)this.pool[t].active=!1},e}(l)).prototype,"poolCount",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),d=e(p.prototype,"segment",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),v=e(p.prototype,"hiddenTime",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.05}}),h=p))||h);r._RF.pop()}}}));

System.register("chunks:///_virtual/fx-car-random-move.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var i,t,r,n,o,a,l,c;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,l=e.randomRange,c=e.Component}],execute:function(){var u,s,m,f,p,h,d;o._RF.push({},"e2a817Bt0VFg58Mwhn5duM9","fx-car-random-move",void 0);var v=a.ccclass,b=a.property;e("FxCarRandomMove",v("FxCarRandomMove")((m=i((s=function(e){function i(){for(var i,t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];return i=e.call.apply(e,[this].concat(o))||this,r(i,"offsetY",m,n(i)),r(i,"intervalTime",f,n(i)),r(i,"count",p,n(i)),r(i,"minTime",h,n(i)),r(i,"maxTime",d,n(i)),i}t(i,e);var o=i.prototype;return o.start=function(){this.intervalTime=l(this.minTime,this.maxTime),this.node.setPosition(0,this.offsetY,0)},o.update=function(e){if(this.intervalTime-=e,this.intervalTime<0){this.intervalTime=l(this.minTime,this.maxTime);for(var i=0;i<this.node.children.length;i++)this.node.children[i].emit("msg_node_fly_car")}},i}(c)).prototype,"offsetY",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 54}}),f=i(s.prototype,"intervalTime",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),p=i(s.prototype,"count",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),h=i(s.prototype,"minTime",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),d=i(s.prototype,"maxTime",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),u=s))||u);o._RF.pop()}}}));

System.register("chunks:///_virtual/fx-fly-car.ts",["./rollupPluginModLoBabelHelpers.js","cc","./sound.ts"],(function(i){"use strict";var t,n,e,a,o,r,s,l,c,u,m,p;return{setters:[function(i){t=i.applyDecoratedDescriptor,n=i.inheritsLoose,e=i.initializerDefineProperty,a=i.assertThisInitialized},function(i){o=i.cclegacy,r=i._decorator,s=i.Animation,l=i.randomRange,c=i.randomRangeInt,u=i.random,m=i.Component},function(i){p=i.Sound}],execute:function(){var f,d,h,y;o._RF.push({},"ca8aas24DdInY0w56lO6O5Q","fx-fly-car",void 0);var T=r.ccclass,v=r.property;i("FxFlyCar",T("FxFlyCar")((h=t((d=function(i){function t(){for(var t,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return t=i.call.apply(i,[this].concat(o))||this,e(t,"maxTime",h,a(t)),e(t,"minTime",y,a(t)),t.animation=void 0,t.waitTime=0,t}n(t,i);var o=t.prototype;return o.start=function(){var i=this;this.animation=this.node.children[0].getComponent(s),this.node.on("msg_node_fly_car",(function(){i.waitTime=l(i.minTime,i.maxTime)}))},o.update=function(i){if(this.waitTime-=i,this.waitTime<0){var t,n;this.waitTime=9999999999,this.node.setRotationFromEuler(0,l(0,360),0);var e=c(0,5);this.node.setPosition(0,e,0),null==(t=this.animation)||t.stop(),null==(n=this.animation)||n.play(),this.animation.defaultClip.speed=l(.2,.6),u()>.5&&e<7&&p.on("sfx_car_fly",l(.3,1))}},t}(m)).prototype,"maxTime",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),y=t(d.prototype,"minTime",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),f=d))||f);o._RF.pop()}}}));

System.register("chunks:///_virtual/fx-ghost-vertex.ts",["./rollupPluginModLoBabelHelpers.js","cc","./util2.ts"],(function(t){"use strict";var i,n,e,o,s,r,c,a,l,h,u,d,p;return{setters:[function(t){i=t.applyDecoratedDescriptor,n=t.inheritsLoose,e=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){s=t.cclegacy,r=t._decorator,c=t.v4,a=t.v3,l=t.SkinnedMeshRenderer,h=t.clamp01,u=t.Vec3,d=t.Component},function(t){p=t.UtilVec3}],execute:function(){var f,m,v;s._RF.push({},"2f0404bvmdBJYOUS4dso/Rx","fx-ghost-vertex",void 0);var P=r.ccclass,y=r.property;t("FxGhostVertex",P("FxGhostVertex")((v=i((m=function(t){function i(){for(var i,n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return i=t.call.apply(t,[this].concat(s))||this,e(i,"intensity",v,o(i)),i.materials=[],i.directionUniform=c(),i.direction=a(),i.currentPosition=void 0,i.lastPosition=void 0,i.t=0,i}n(i,t);var s=i.prototype;return s.start=function(){var t=this;this.currentPosition=this.node.position.clone(),this.lastPosition=this.currentPosition.clone(),this.node.getComponentsInChildren(l).forEach((function(i){t.materials.push(i.material)}))},s.update=function(t){var i=this;p.copy(this.currentPosition,this.node.worldPosition),this.currentPosition.equals(this.lastPosition)&&(this.t=0),this.t+=t,this.t=h(this.t),u.lerp(this.lastPosition,this.lastPosition,this.currentPosition,this.t),u.subtract(this.direction,this.lastPosition,this.currentPosition).multiplyScalar(this.intensity),this.materials.forEach((function(t){var n=t.passes[0].getHandle("direction");t.passes[0].getUniform(n,i.directionUniform),i.directionUniform.set(i.direction.x,i.direction.y,i.direction.z,i.directionUniform.w),t.passes[0].setUniform(n,i.directionUniform)}))},i}(d)).prototype,"intensity",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 4}}),f=m))||f);s._RF.pop()}}}));

System.register("chunks:///_virtual/fx-ghost.ts",["./rollupPluginModLoBabelHelpers.js","cc","./res.ts","./util2.ts"],(function(e){"use strict";var t,i,n,s,o,r,h,a,l,c,d,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,s=e.assertThisInitialized},function(e){o=e.cclegacy,r=e._decorator,h=e.Node,a=e.SkinnedMeshRenderer,l=e.MeshRenderer,c=e.Component},function(e){d=e.Res},function(e){u=e.UtilNode}],execute:function(){var m,p,_,g,f,v,R;o._RF.push({},"15334m3zupEZYbwablb0Hq1","fx-ghost",void 0);var b=r.ccclass,y=r.property;e("FxGhost",(m=b("FxGhost"),p=y(h),m((f=t((g=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return t=e.call.apply(e,[this].concat(o))||this,n(t,"count",f,s(t)),n(t,"target",v,s(t)),n(t,"simpleTime",R,s(t)),t.meshRenders=void 0,t._intervalTime=0,t._ghostItems=[],t._eachCount=0,t._index=0,t._total=0,t}i(t,e);var o=t.prototype;return o.start=function(){this.meshRenders=this.target.getComponentsInChildren(a),console.log(this.meshRenders),this._eachCount=this.meshRenders.length;var e=this.count*this._eachCount;this._total=e,this._ghostItems=Array(e);var t=this.node.children[0];this._ghostItems[0]={node:t,meshRender:u.getComponent(t,l)};for(var i=1;i<e;i++){var n=d.instNode(t,this.node);this._ghostItems[i]={node:n,meshRender:u.getComponent(n,l)}}console.log(this.meshRenders,this._ghostItems)},o.update=function(e){this._intervalTime-=e,this._intervalTime<0&&(this.simpleMeshInfo(),this._intervalTime=this.simpleTime)},o.simpleMeshInfo=function(){for(var e=0;e<this._eachCount;e++){var t=this.meshRenders[e].mesh,i=this.meshRenders[e].node;if(null!=t){var n=Object.assign(t),s=this._ghostItems[this._index];s.meshRender.mesh=n,s.node.setPosition(this._index,i.worldPosition.y,i.worldPosition.z),s.node.setWorldRotation(i.getWorldRotation()),this._index++,console.log(this._index),this._index>=this._total&&(this._index=0)}else console.warn(this.meshRenders[e].node.name+" Can not find mesh")}},t}(c)).prototype,"count",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),v=t(g.prototype,"target",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=t(g.prototype,"simpleTime",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),_=g))||_));o._RF.pop()}}}));

System.register("chunks:///_virtual/fx-group.ts",["./rollupPluginModLoBabelHelpers.js","cc","./fun.ts"],(function(t){"use strict";var e,i,r,o,s,n,a,l,c;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){s=t.cclegacy,n=t._decorator,a=t.ParticleSystem,l=t.Component},function(t){c=t.fun}],execute:function(){var p,h,u;s._RF.push({},"67c81qisCpIuZe2AlE7MRDT","fx-group",void 0);var f=n.ccclass,y=n.property;t("FxGroup",f("FxGroup")((u=e((h=function(t){function e(){for(var e,i=arguments.length,s=new Array(i),n=0;n<i;n++)s[n]=arguments[n];return(e=t.call.apply(t,[this].concat(s))||this)._particles=void 0,e._loop=!0,r(e,"delayTime",u,o(e)),e}i(e,t);var s=e.prototype;return s.start=function(){if(this._particles=this.node.getComponentsInChildren(a),this.node.on("setDestroy",this.setDestroy,this),this.play(!0),void 0===this._particles||this._particles.length<=0)throw new Error("This node "+this.node.name+" can not find particles.")},s.onDestroy=function(){this.node.off("setDestroy",this.setDestroy,this)},s.setLoop=function(t){for(var e=0;e<this._particles.length;e++)this._particles[e].loop=t;this._loop=t},s.setEnable=function(t){for(var e=0;e<this._particles.length;e++)this._particles[e].enabled=t},s.stop=function(t){for(var e=0;e<this._particles.length;e++)this._particles[e].stop()},s.play=function(t){for(var e=0;e<this._particles.length;e++)this._particles[e].play()},s.setDestroy=function(){var t=this;this.setLoop(!1),c.delay((function(){var e;null==(e=t.node)||e.destroy()}),this.delayTime)},e}(l)).prototype,"delayTime",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),p=h))||p);s._RF.pop()}}}));

System.register("chunks:///_virtual/fx-init.ts",["./rollupPluginModLoBabelHelpers.js","cc","./fx.ts"],(function(t){"use strict";var n,i,e,o,r;return{setters:[function(t){n=t.inheritsLoose},function(t){i=t.cclegacy,e=t._decorator,o=t.Component},function(t){r=t.fx}],execute:function(){var c;i._RF.push({},"ed45evN5chHZorv00WyDaoU","fx-init",void 0);var s=e.ccclass;e.property,t("FxInit",s("FxInit")(c=function(t){function i(){return t.apply(this,arguments)||this}return n(i,t),i.prototype.start=function(){r.init(this.node)},i}(o))||c);i._RF.pop()}}}));

System.register("chunks:///_virtual/fx-light-flash.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var i,h,l,s,e,a,o,n;return{setters:[function(t){i=t.inheritsLoose},function(t){h=t.cclegacy,l=t._decorator,s=t.MeshRenderer,e=t.randomRangeInt,a=t.math,o=t.Color,n=t.Component}],execute:function(){var r;h._RF.push({},"81bbcKEtCtKh5NgwGgaV/8x","fx-light-flash",void 0);var u=l.ccclass;l.property,t("FxLightFlash",u("FxLightFlash")(r=function(t){function h(){for(var i,h=arguments.length,l=new Array(h),s=0;s<h;s++)l[s]=arguments[s];return(i=t.call.apply(t,[this].concat(l))||this).matLight=void 0,i.lightColor=new o(255,255,255,255),i.lightValueMax=10,i.lightValueMin=200,i.length=0,i.flashTimes=3,i.value=0,i.t=0,i.smooth=10,i.isFlash=!1,i}i(h,t);var l=h.prototype;return l.start=function(){var t;this.matLight=null==(t=this.node.getComponent(s))?void 0:t.materials[0],this.onFlash()},l.onFlash=function(){this.flashTimes=e(1,5),this.lightValueMax=255,this.lightValueMin=e(180,200),this.length=this.lightValueMax-this.lightValueMin,this.value=this.lightValueMax},l.update=function(t){var i;this.t+=t,this.value=a.pingPong(this.t*this.smooth,this.length)+this.lightValueMin,this.lightColor.a=this.value,this.lightColor.g=this.value,this.lightColor.b=this.value,null==(i=this.matLight)||i.setProperty("emissive",this.lightColor)},h}(n))||r);h._RF.pop()}}}));

System.register("chunks:///_virtual/fx-ray-line.ts",["./rollupPluginModLoBabelHelpers.js","cc","./util2.ts"],(function(t){"use strict";var e,n,i,r,c,o;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,i=t._decorator,r=t.v3,c=t.Component},function(t){o=t.UtilVec3}],execute:function(){var s;n._RF.push({},"303d6l3bwlBS4gsxegu8pB1","fx-ray-line",void 0);var a=i.ccclass;i.property,t("FxRayLine",a("FxRayLine")(s=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))||this).direction=r(0,0,0),e}return e(n,t),n.prototype.setRayLine=function(t,e){o.copy(this.direction,e),this.direction.subtract(t);var n=this.direction.length();this.node.setScale(.1,1,n)},n}(c))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/fx.ts",["cc","./util2.ts","./fx-base.ts","./res-pool.ts"],(function(n){"use strict";var t,o,e,i,c,f,s;return{setters:[function(n){t=n.cclegacy,o=n._decorator,e=n.sys,i=n.ParticleSystem},function(n){c=n.UtilNode},function(n){f=n.FxBase},function(n){s=n.ResPool}],execute:function(){var r,l;t._RF.push({},"0114dEwOBNDK5KXBCkGcdgv","fx",void 0);var a=o.ccclass;o.property,n("fx",a("fx")(((l=function(){function n(){}return n.init=function(n){this.node=n},n.on=function(n,t){e.platform==e.Platform.IOS&&n.includes("fx_hit")||"fx_hit_body"!=n&&s.Instance.pop(n,t).emit("play")},n.play=function(n,t){var o=c.find(n,t).getComponent(f);null==o||o.play()},n.playLoop=function(n,t,o){var e=c.find(this.node,t),f=null==e?void 0:e.getComponentsInChildren(i);if(void 0!==f)for(var s=0;s<f.length;s++){var r=f[s];r.loop=o,o&&r.play()}else console.warn(" effect can not find "+t)},n}()).node=void 0,r=l))||r);t._RF.pop()}}}));

System.register("chunks:///_virtual/fxaa-stage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./base-stage.ts","./utils2.ts","./pass-utils.ts","./href-setting.ts"],(function(e){"use strict";var t,a,r,i,n,s,o,l,c,p,u,f,g,m,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.inheritsLoose,r=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){n=e.cclegacy,s=e._decorator,o=e.rendering,l=e.gfx,c=e.Vec2,p=e.Vec4,u=e.renderer},function(e){f=e.BaseStage},function(e){g=e.getCameraUniqueID},function(e){m=e.passUtils},function(e){h=e.HrefSetting}],execute:function(){var d,y,x,S,w,F,v;n._RF.push({},"fc02aH+JINIT4RBde72td/Y","fxaa-stage",void 0);s.type;var b=s.property,R=s.ccclass,I=(o.RasterView,o.AttachmentType,o.AccessType,o.ResourceResidency,o.LightInfo,o.SceneFlags,o.QueueHint,o.ComputeView,l.Format);l.LoadOp,l.StoreOp,l.ClearFlagBit,l.Color,l.Viewport;new l.Sampler(new l.SamplerInfo(l.Filter.POINT,l.Filter.POINT),0).custom=!0;e("FxaaStage",(d=R("FxaaStage"),y=b({override:!0}),x=b({override:!0}),d((F=t((w=function(e){function t(){for(var t,a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(t=e.call.apply(e,[this].concat(n))||this)._materialName="fxaa",t.materialMap=new Map,r(t,"name",F,i(t)),r(t,"outputNames",v,i(t)),t._offset=new c,t.texSize=new p,t}a(t,e);var n=t.prototype;return n.checkEnable=function(){return e.prototype.checkEnable.call(this)&&!!h.fxaa},n.render=function(e,t){var a=g(e),r=this.getRenderArea(e),i=r.width,n=r.height;m.clearFlag=l.ClearFlagBit.COLOR,p.set(m.clearColor,0,0,0,1);var s=this.materialMap.get(e);s&&s.parent===this.material||(s=new u.MaterialInstance({parent:this.material}),this.materialMap.set(e,s)),s.setProperty("texSize",this.texSize.set(i,n,0,0)),m.material=s;var o=this.lastStage.slotName(e,0),c=this.slotName(e,0);m.addRasterPass(i,n,"post-process","Camera_Fxaa_Pass"+a),m.setViewport(r.x,r.y,i,n).setPassInput(o,"inputTex").addRasterView(c,I.RGBA8).blitScreen(0).version()},t}(f)).prototype,"name",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"FxaaStage"}}),v=t(w.prototype,"outputNames",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return["FxaaStageColor"]}}),S=w))||S));n._RF.pop()}}}));

System.register("chunks:///_virtual/g-math.ts",["cc","./util2.ts"],(function(t){"use strict";var n,r,o,e,a,c,x;return{setters:[function(t){n=t.cclegacy,r=t.lerp,o=t.Vec3,e=t.Color,a=t.v3,c=t.math},function(t){x=t.Gizmo}],execute:function(){n._RF.push({},"1c767GdozZCpJ8PXzfR8wYb","g-math",void 0);var u=t("GMath",function(){function t(){}return t.uuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var n=16*Math.random()|0;return("x"===t?n:3&n|8).toString(16)}))},t.clamp=function(t,n,r){return t<n?t=n:t>r&&(t=r),t},t.smoothDamp=function(n,r,o,e,a){var c=Number.POSITIVE_INFINITY,x=2/(e=Math.max(1e-4,e)),u=x*a,l=1/(1+u+.48*u*u+.235*u*u*u),i=n-r,m=r,p=c*e,h=(o+x*(i=t.clamp(i,-p,p)))*a;o=(o-x*h)*l;var f=(r=n-i)+(i+h)*l;return m-n>0==f>m&&(o=((f=m)-m)/a),[f,o]},t.lerpSmooth=function(t,n,o,e){return r(n,t,Math.exp(-o*e))},t.range=function(t,n,r){return r>t?t:r<n?n:r},t.StretchedBillboardAngle=function(t,n,r,u){var l=r.clone().subtract(n),i=o.dot(l,u),m=u.clone().multiplyScalar(i),p=r.clone().subtract(m);x.drawLine(o.ZERO,t.clone().multiplyScalar(4),e.RED),x.drawLine(o.ZERO,l.clone().multiplyScalar(4),e.YELLOW),x.drawLine(o.ZERO,u.clone().multiplyScalar(4),e.YELLOW),x.drawBox(m,a(.1,.1,.1),e.BLUE),x.drawLine(m,p.clone().add(m),e.GREEN),x.drawLine(o.ZERO,p,e.GREEN);var h=a(1,0,0);x.drawLine(o.ZERO,h,e.MAGENTA);var f=c.toDegree(o.angle(p,h));return console.log(f),r.y>n.y?f-90:-f-90},t}());t("GVec3",function(){function t(){}return t.smoothDamp=function(t,n,r,o,e){var a=u.smoothDamp(t.x,n.x,r.x,o,e),c=u.smoothDamp(t.y,n.y,r.y,o,e),x=u.smoothDamp(t.z,n.z,r.z,o,e);t.x=a[0],t.y=c[0],t.z=x[0],n.x=a[1],n.y=c[1],n.z=x[1]},t.lerpSmooth=function(t,n,r,o){return t.x=u.lerpSmooth(n.x,t.x,r,o),t.y=u.lerpSmooth(n.y,t.y,r,o),t.z=u.lerpSmooth(n.z,t.z,r,o),t},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/g-scene.ts",["cc","./res-cache.ts"],(function(e){"use strict";var n,c,o;return{setters:[function(e){n=e.cclegacy,c=e.director},function(e){o=e.ResCache}],execute:function(){n._RF.push({},"1b4c1RDNQhFpIYtG+RSuaHQ","g-scene",void 0);var t=e("GScene",function(){function e(){}return e.Load=function(n,t){e.isLoadScene=!0,c.loadScene(n,(function(c,r){if(c)throw new Error("Load Scene Error.");r?(t(),e.isLoadScene=!1,o.Instance.removeLoad()):console.warn("Can not load scene. - "+n)}))},e}());t.isLoadScene=!1,t.isPreload=!1,t.msg={id:100,action:"load scene",current:"",wait_count:1,count:1},n._RF.pop()}}}));

System.register("chunks:///_virtual/game-set.ts",["./rollupPluginModLoBabelHelpers.js","cc","./msg.ts","./singleton.ts","./save.ts","./data-core.ts"],(function(t){"use strict";var e,i,s,n,a,o,l;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,s=t.sys},function(t){n=t.Msg},function(t){a=t.Singleton},function(t){o=t.Save},function(t){l=t.DataGameSetInst}],execute:function(){i._RF.push({},"54df82LaMZJwZNKv5PmG2Qo","game-set",void 0);t("GameSet",function(t){function i(){for(var e,i=arguments.length,s=new Array(i),n=0;n<i;n++)s[n]=arguments[n];return(e=t.call.apply(t,[this].concat(s))||this).sensitivity=.5,e.sensitivity_a=.5,e.screen_to_angle=270,e.move_value_list=[3,4,10,20,40],e.move_accelerate_list=[.7,.8,1,2,3],e.accelerate_point=20,e.data=void 0,e}return e(i,t),i.prototype.init=function(){var t=this;this.data=l._data.pc,s.platform!==s.Platform.MOBILE_BROWSER&&s.platform!==s.Platform.ANDROID&&s.platform!==s.Platform.IOS||(this.data=l._data.ios),this.sensitivity_a=this.data.sensitivity_a,this.screen_to_angle=this.data.screen_to_angle,this.move_value_list=this.data.move_value_list,this.move_accelerate_list=this.data.move_accelerate_list,this.accelerate_point=this.data.accelerate_point,this.sensitivity=o.Instance.get("sensitivity"),null==this.sensitivity&&(this.sensitivity=.5,o.Instance.set("sensitivity",.5)),n.on("sli_sensitivity",(function(e){t.sensitivity=e,o.Instance.set("sensitivity",e)})),n.on("sli_sensitivity_a",(function(e){t.sensitivity_a=e})),n.on("inp_move_value_list",(function(e){var i=e.split(",");t.move_value_list.length=0;for(var s=0;s<i.length;s++)t.move_value_list.push(Number(i[s]))})),n.on("inp_move_accelerate_list",(function(e){var i=e.split(",");t.move_accelerate_list.length=0;for(var s=0;s<i.length;s++)t.move_accelerate_list.push(Number(i[s]))})),n.on("inp_screen_to_angle",(function(e){t.screen_to_angle=Number(e)})),n.on("inp_accelerate_point",(function(e){t.accelerate_point=Number(e)}))},i}(a));i._RF.pop()}}}));

System.register("chunks:///_virtual/game-type.ts",["cc"],(function(){"use strict";var e,t;return{setters:[function(c){e=c.cclegacy,t=c._decorator}],execute:function(){e._RF.push({},"569cdaxVGxBWYLT5Dvwh5ld","game-type",void 0);t.ccclass,t.property;e._RF.pop()}}}));

System.register("chunks:///_virtual/game.ts",["./rollupPluginModLoBabelHelpers.js","cc","./action.ts","./singleton.ts","./ui.ts","./bind.ts","./local.ts","./save.ts","./msg.ts","./data-structure.ts","./level.ts","./sound.ts","./notify.ts","./GameQuality.ts","./data-core.ts","./ui-base.ts","./game-set.ts","./res-pool.ts"],(function(t){"use strict";var n,i,a,s,e,o,c,u,h,_,f,d,r,l,m,p,v,I,k,g,S;return{setters:[function(t){n=t.inheritsLoose},function(t){i=t.cclegacy,a=t.find,s=t.game},function(t){e=t.Action},function(t){o=t.Singleton},function(t){c=t.UI},function(t){u=t.Bind},function(t){h=t.Local},function(t){_=t.Save},function(t){f=t.Msg},function(t){d=t.Stack},function(t){r=t.Level},function(t){l=t.Sound},function(t){m=t.Notify},function(t){p=t.GameQuality},function(t){v=t.Init,I=t.DataGameInst},function(t){k=t.BindUI},function(t){g=t.GameSet},function(t){S=t.ResPool}],execute:function(){i._RF.push({},"f1830vJHSVDMZH8wMcAcGTl","game",void 0);t("Game",function(t){function i(){for(var n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=t.call.apply(t,[this].concat(a))||this)._action=void 0,n._stack=new d(5),n._nodes={},n._data={},n._isInit=!1,n._totalGameTime=0,n._nextSaveTime=0,n._currentGameNodeName="",n._poolNode=void 0,n.backSafeTime=0,n}n(i,t);var o=i.prototype;return o.init=function(){var t;this._poolNode=null==(t=a("init"))?void 0:t.getChildByName("objects-pool"),v(),S.Instance.initPool(this._poolNode),_.Instance.init(),g.Instance.init(),this._data=I._data,this._action=new e(this._data.action_data),this._nodes=this._data.nodes,p.Instance.init(),l.init(),h.Instance.init(),r.Instance.init(),k.init(),u.Instance.initData(this._data.events),c.Instance.init(),f.on("push",(function(t){i.Instance.push(t)})),f.on("root",(function(t){i.Instance.root(t)})),f.on("next",this.next.bind(this)),f.on("back",this.back.bind(this)),this.push(this._data.start_node),this._isInit=!0,m.Instance.check_notify()},o.next=function(){var t=this._stack.cur(),n=this._nodes[t].next;n&&this.push(n)},o.back=function(){if(!(s.totalTime-this.backSafeTime<50)){this.backSafeTime=s.totalTime;var t=this._stack.pop();this._action.off(t)}},o.root=function(t){for(var n=this._stack.size()-1,i=0;i<n-1;i++){var a=this._stack.pop();this._action.off(a)}},o.push=function(t){if(this._currentGameNodeName=t,!this._nodes[t].is_pop&&this._stack.size()>0){var n=this._stack.pop();this._action.off(n)}this._stack.push(t),this._action.on(t)},o.update=function(t){this._isInit&&(this._totalGameTime+=t,i.Instance._action.update(t),r.Instance.update(t),u.Instance.update(t),this._data.auto_save&&this._totalGameTime>this._nextSaveTime&&(_.Instance.statisticsTime("game",Math.floor(this._data.next_save_time)),this._nextSaveTime+=this._data.next_save_time))},i}(o));i._RF.pop()}}}));

System.register("chunks:///_virtual/GameQuality.ts",["./rollupPluginModLoBabelHelpers.js","cc","./save.ts","./local.ts","./msg.ts","./singleton.ts","./res-cache.ts"],(function(t){"use strict";var e,n,i,a,s,c,u,h;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,i=t.PhysicsSystem},function(t){a=t.Save},function(t){s=t.Local},function(t){c=t.Msg},function(t){u=t.Singleton},function(t){h=t.ResCache}],execute:function(){n._RF.push({},"5d6eaVuIRZE1YiNRD70MqYh","GameQuality",void 0);t("GameQuality",function(t){function n(){for(var e,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))||this).index=0,e.max=2,e._data=Object.create(null),e._map=Object.create(null),e.cur={name:"game_quality_high",level:-1,fps:59.9,maxSubSteps:1,open_ik:!0},e._default=0,e}e(n,t);var u=n.prototype;return u.init=function(){var t=this;this._data=h.Instance.getJson("data-quality").json,this.index=0,this.index<0&&(this.index=0),this.index>=this._data.set.length&&(this.index=this.index=this._data.set.length-1),this._default=this.index,this.cur=this._data.set[this.index],i.instance.maxSubSteps=10,c.on("next_quality",(function(){t.index++,t.index>=t._data.set.length&&(t.index=0),t.cur=t._data.set[t.index],a.Instance._cur.game_quality=t.index,s.Instance.refresh()})),c.on("pre_quality",(function(){t.index--,t.index<0&&(t.index=t._data.set.length-1),t.cur=t._data.set[t.index],a.Instance._cur.game_quality=t.index,s.Instance.refresh()})),c.on("msg_check_change",this.checkChange.bind(this))},u.checkChange=function(){this._default!==this.index&&globalThis.window.location.reload()},u.getShowName=function(){return s.Instance.get(this._data.set[this.index].name)},n}(u));n._RF.pop()}}}));

System.register("chunks:///_virtual/generate-white-box.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,r,n,o,i,a,s,l,c,p,u,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized,i=e.createClass},function(e){a=e.cclegacy,s=e._decorator,l=e.Node,c=e.find,p=e.MeshRenderer,u=e.instantiate,h=e.Component}],execute:function(){var f,g,d,y,m,b,v;a._RF.push({},"8fc34KMtedBrKH+6r3Dy6gl","generate-white-box",void 0);var w=s.ccclass,x=s.property;e("generate_white_box",(f=w("generate_white_box"),g=x(l),d=x(l),f((b=t((m=function(e){function t(){for(var t,r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t=e.call.apply(e,[this].concat(i))||this,n(t,"targetRoot",b,o(t)),n(t,"temp",v,o(t)),t}return r(t,e),t.prototype.doGenerate=function(){var e=this;if(this.temp&&this.targetRoot){var t=c("root",this.node);t||((t=new l("root")).parent=this.node),t.removeAllChildren(),this.targetRoot.getComponentsInChildren(p).forEach((function(r){if(r.model){var n=u(e.temp);n.name=r.node.name;var o=r.model.worldBounds;n.position=o.center,n.setScale(2*o.halfExtents.x,2*o.halfExtents.y,2*o.halfExtents.z),n.parent=t}}))}},i(t,[{key:"generate",get:function(){return!1},set:function(e){this.doGenerate()}}]),t}(h)).prototype,"targetRoot",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=t(m.prototype,"temp",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),t(m.prototype,"generate",[x],Object.getOwnPropertyDescriptor(m.prototype,"generate"),m.prototype),y=m))||y));a._RF.pop()}}}));

System.register("chunks:///_virtual/getGPUVersion.ts",["cc"],(function(e){"use strict";var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){e("getGPUVersion",(function(e){var t,n=(e=e.replace(/\([^)]+\)/,"")).match(/\d+/)||e.match(/(\W|^)([A-Za-z]{1,3})(\W|$)/g);return null!=(t=null==n?void 0:n.join("").replace(/\W|amd/g,""))?t:""})),t._RF.push({},"08a29uaDW1CPYb1Wjm5uE6a","getGPUVersion",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/getLevenshteinDistance.ts",["cc"],(function(e){"use strict";var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){e({getLevenshteinDistance:function(e,t){if(e===t)return 0;var c=e;e.length>t.length&&(e=t,t=c);var i=e.length,o=t.length;for(;i>0&&e.charCodeAt(~-i)===t.charCodeAt(~-o);)i--,o--;var s,a=0;for(;a<i&&e.charCodeAt(a)===t.charCodeAt(a);)a++;if(o-=a,0===(i-=a))return o;var h,u,f=0,v=0,g=0;for(;v<i;)r[v]=e.charCodeAt(a+v),n[v]=++v;for(;g<o;)for(s=t.charCodeAt(a+g),h=g++,f=g,v=0;v<i;v++)u=s===r[v]?h:h+1,h=n[v],f=n[v]=h>f?u>f?f+1:u:u>h?h+1:u;return f},tokenizeForLevenshteinDistance:function(e){return e.split(/[.,()\[\]/\s]/g).sort().filter((function(e,t,n){return 0===t||e!==n[t-1]})).join(" ")}}),t._RF.push({},"68d53MV5/lGybm0hGxk+cme","getLevenshteinDistance",void 0);var n=[],r=[];t._RF.pop()}}}));

System.register("chunks:///_virtual/getWebGLContext.ts",["cc"],(function(e){"use strict";var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){e("getWebGLContext",(function(e,t){void 0===t&&(t=!1);var n={alpha:!1,antialias:!1,depth:!1,failIfMajorPerformanceCaveat:t,powerPreference:"high-performance",stencil:!1};e&&delete n.powerPreference;var r=window.document.createElement("canvas"),c=r.getContext("webgl",n)||r.getContext("experimental-webgl",n);return null!=c?c:void 0})),t._RF.push({},"83771nQxO9HC7cgB6gIeD6z","getWebGLContext",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/gm.ts",["cc","./Electron.ts","./save.ts","./res-cache.ts"],(function(t){"use strict";var n,e,c,i;return{setters:[function(t){n=t.cclegacy},function(t){e=t.default},function(t){c=t.Save},function(t){i=t.ResCache}],execute:function(){n._RF.push({},"6ea61dB+cdC7YvL+4dfxK93","gm",void 0);var a=t("GM",function(){function t(){}return t.init=function(){this._data=i.Instance.getJson("data-gm").json,console.log(this._data),this._dic.clear_data=function(t){c.Instance.clear_data(t[1])},this._dic.delete_all=function(t){c.Instance.deleteAllArchive()},this._dic.clear_by_key=function(t){c.Instance.clearByKey(t[1])},this._dic.set=function(t){c.Instance.set(t[1],t[2])},this._dic.app=function(t){var n=t[1].split(":");e.sendAsync(n[0],n[1])}},t.deleteAll=function(){c.Instance.deleteAllArchive()},t.run=function(t){var n=t.split(" "),e=n[0],c=this._dic[e];c&&c(n)},t.getHelp=function(){var t="GM help:";return this._data.gm_help.forEach((function(n){t+=n+"\n\n"})),console.log(t),t},t}());a._dic={},a._data=Object.create(null),globalThis.GM=a,n._RF.pop()}}}));

System.register("chunks:///_virtual/gpu-mobiles.ts",["cc"],(function(e){"use strict";var a;return{setters:[function(e){a=e.cclegacy}],execute:function(){a._RF.push({},"f75af/JjYtEwp/iLcrj4AFc","gpu-mobiles",void 0);e("GpuMobiles",{adreno:{530:272,540:384,615:196,616:227,618:316,619:330,620:457,630:509,640:848,642:835,650:1171,660:1460,662:824,730:2596,740:3671,"642l":703,"619l":252},immortalis:{g715:3535},apple:{a16:3331,a15:2725,a14:1800,a13:1576,a12:1100,a11:896,a10:300},mali:{g710:2319,g78:1790,g610:1440,g77:1258,g76:625,g57:365,g68:610,g52:190,g72:183},xclipse:{920:1906}});a._RF.pop()}}}));

System.register("chunks:///_virtual/gpu.ts",["./rollupPluginModLoBabelHelpers.js","cc","./index.ts","./gpu-mobiles.ts"],(function(e){"use strict";var r,o,n,t,i,s,a,c;return{setters:[function(e){r=e.asyncToGenerator,o=e.regeneratorRuntime},function(e){n=e.cclegacy,t=e.director,i=e.game,s=e.sys},function(e){a=e.getGPUTier},function(e){c=e.GpuMobiles}],execute:function(){var u;e({RenderQulity:void 0,getGPUVersion:p,getGpuInfo:function(){return g.apply(this,arguments)}}),n._RF.push({},"0e004mHOSRIt6tAOM/83iAb","gpu",void 0),function(e){e[e.Low=0]="Low",e[e.Medium=1]="Medium",e[e.High=2]="High"}(u||(u=e("RenderQulity",{})));var l=function(e){for(var r=0,o=s.isMobile?["adreno","apple","mali","xclipse","immortalis"]:["intel","apple","amd","radeon","nvidia","geforce"];r<o.length;r++){var n=o[r];if(e.includes(n))return n}};function p(e){var r,o=e.match(/[ga]?\d+/)||e.match(/(\W|^)([A-Za-z]{1,3})(\W|$)/g);return null!=(r=null==o?void 0:o.join("").replace(/\W|amd/g,""))?r:""}function g(){return(g=r(o().mark((function e(){var r,n,u,g,d,f,v;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r="",n="",u=0,!t.root||!t.root.device){e.next=21;break}if(g=t.root.device.renderer.toLowerCase(),console.log("renderer: "+g),r=l(g),n=p(g),console.log("gpuType : "+r),console.log("gpuVersion : "+n),!s.isMobile){e.next=14;break}try{u=c[r][n],console.log("gpu : score("+u+")")}catch(e){s.isMobile&&console.warn("Get gpu score failed")}e.next=21;break;case 14:if(!t.root||!i.canvas){e.next=21;break}return d=t.root.device.renderer.toLowerCase(),e.next=18,a({desktopTiers:[0,60,150,300],override:{renderer:d,isMobile:s.isMobile,screenSize:{width:i.canvas.width,height:i.canvas.height}}});case 18:f=e.sent,u=f.fps,console.log(f);case 21:return v={gpuType:r,gpuVersion:n,gpuScore:u},globalThis.gpuInfo=v,e.abrupt("return",v);case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}n._RF.pop()}}}));

System.register("chunks:///_virtual/grandom.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,r,s,n;return{setters:[function(e){t=e.createClass},function(e){r=e.cclegacy,s=e._decorator,n=e.randomRangeInt}],execute:function(){var i;r._RF.push({},"b25e3mXfdBBtYEaNzzQk4uq","grandom",void 0);var a=s.ccclass;s.property,e("GRandom",a("GRandom")(i=function(){function e(e){void 0===e&&(e=-1),this.preValue=0,this.seed=0,this.c=49297,this.a=9301,this.m=233280,this.seed=e,-1===this.seed&&(this.seed=n(0,4294967295)),this.preValue=this.seed}var r=e.prototype;return r.reset=function(){this.preValue=this.seed},r.value=function(){return this.preValue=(this.a*this.preValue+this.c)%this.m,this.preValue},r.range=function(e,t){return e+this.value()%(t-e+1)},r.range1000=function(e,t){var r=this.range(1e3*e,1e3*t);return Math.floor(r/1e3)},t(e,[{key:"value1000",get:function(){return this.range(0,1e3)}}]),e}())||i);r._RF.pop()}}}));

System.register("chunks:///_virtual/graph-data.ts",["cc"],(function(e){"use strict";var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"06b90PpXeBGvI7VHyxf5Vmu","graph-data",void 0);e("default",{last_node_id:26,last_link_id:67,nodes:[{id:17,type:"pipeline/TAAStage",pos:[1353,714],size:{0:228.39999389648438,1:146},flags:{},order:14,mode:0,inputs:[{name:"Camera Output",type:"Camera Output",link:null},{name:"RenderTexture",type:"RenderTexture",link:52},{name:"Custom Size",type:"vec2",link:null}],outputs:[{name:"RenderTexture",type:"RenderTexture",links:[53],slot_index:0}],properties:{showResult:!1,enable:!0,name:"TAA",shadingScale:1,Name:"TAAStage",Enable:!0,CameraOutputType:"Color",Format:"RGBA8",sampleScale:1,feedback:.95,shaowHistoryTexture:!1,clampHistoryTexture:!0,forceRender:!0,dirty:!1}},{id:15,type:"pipeline/Pipeline",pos:[123,144],size:{0:210,1:82},flags:{},order:0,mode:0,outputs:[{name:"Camera Output",type:"Camera Output",links:[34],slot_index:0}],properties:{Name:"forward",Enable:!0}},{id:16,type:"pipeline/RenderToScreen",pos:[951,134],size:{0:140,1:26},flags:{},order:9,mode:0,inputs:[{name:"RenderTexture",type:"RenderTexture",link:56}],properties:{}},{id:5,type:"pipeline/custom.ForwardStage",pos:[402,133],size:{0:228.39999389648438,1:146},flags:{},order:3,mode:0,inputs:[{name:"Camera Output",type:"Camera Output",link:34},{name:"RenderTexture",type:"RenderTexture",link:null},{name:"Custom Size",type:"vec2",link:null}],outputs:[{name:"RenderTexture",type:"RenderTexture",links:[55],slot_index:0}],properties:{showResult:!1,enable:!0,name:"BaseStage",shadingScale:1,Name:"custom.ForwardStage",Enable:!0,CameraOutputType:"Color",Format:"RGBA8",material:"blit-screen",outputName:"ForwardStage"}},{id:19,type:"pipeline/ForwardPostStage",pos:[689,145],size:{0:228.39999389648438,1:146},flags:{},order:6,mode:0,inputs:[{name:"Camera Output",type:"Camera Output",link:null},{name:"RenderTexture",type:"RenderTexture",link:55},{name:"Custom Size",type:"vec2",link:null}],outputs:[{name:"RenderTexture",type:"RenderTexture",links:[56],slot_index:0}],properties:{showResult:!1,enable:!0,name:"ForwardPostStage",shadingScale:1}},{id:20,type:"pipeline/Pipeline",pos:[150,1030],size:{0:210,1:82},flags:{},order:1,mode:0,outputs:[{name:"Camera Output",type:"Camera Output",links:[57],slot_index:0}],properties:{Name:"reflection-probe",Enable:!0}},{id:24,type:"pipeline/RenderToScreen",pos:[1243,1046],size:{0:140,1:26},flags:{},order:12,mode:0,inputs:[{name:"RenderTexture",type:"RenderTexture",link:60}],properties:{}},{id:21,type:"pipeline/DeferredGBufferStage",pos:[420,1029],size:{0:228.39999389648438,1:146},flags:{},order:4,mode:0,inputs:[{name:"Camera Output",type:"Camera Output",link:57},{name:"RenderTexture",type:"RenderTexture",link:null},{name:"Custom Size",type:"vec2",link:null}],outputs:[{name:"RenderTexture",type:"RenderTexture",links:[58],slot_index:0}],properties:{showResult:!1,enable:!0,name:"DeferredGBuffer-rp",shadingScale:1,Name:"DeferredGBufferStage",Enable:!0,CameraOutputType:"Color",Format:"RGBA8",material:"blit-screen"}},{id:22,type:"pipeline/DeferredLightingStage",pos:[714,1034],size:{0:228.39999389648438,1:146},flags:{},order:7,mode:0,inputs:[{name:"Camera Output",type:"Camera Output",link:null},{name:"RenderTexture",type:"RenderTexture",link:58},{name:"Custom Size",type:"vec2",link:null}],outputs:[{name:"RenderTexture",type:"RenderTexture",links:[59],slot_index:0}],properties:{showResult:!1,enable:!0,name:"DeferredLighting-rp",shadingScale:1,Name:"DeferredLightingStage",Enable:!0,CameraOutputType:"Color",Format:"RGBA8",material:"blit-screen"}},{id:23,type:"pipeline/DeferredPostStage",pos:[992,1039],size:{0:228.39999389648438,1:146},flags:{},order:10,mode:0,inputs:[{name:"Camera Output",type:"Camera Output",link:null},{name:"RenderTexture",type:"RenderTexture",link:59},{name:"Custom Size",type:"vec2",link:null}],outputs:[{name:"RenderTexture",type:"RenderTexture",links:[60],slot_index:0}],properties:{showResult:!1,enable:!0,name:"DeferredPost-rp",shadingScale:1,Name:"DeferredPostStage",Enable:!0,CameraOutputType:"Color",Format:"RGBA8",material:"blit-screen"}},{id:14,type:"pipeline/custom.BloomStage",pos:[1088,753],size:{0:228.39999389648438,1:146},flags:{},order:13,mode:0,inputs:[{name:"Camera Output",type:"Camera Output",link:null},{name:"RenderTexture",type:"RenderTexture",link:62},{name:"Custom Size",type:"vec2",link:null,slot_index:2}],outputs:[{name:"RenderTexture",type:"RenderTexture",links:[52],slot_index:0}],properties:{showResult:!1,enable:!0,name:"Bloom",shadingScale:1,Name:"custom.BloomStage",Enable:!0,CameraOutputType:"Color",Format:"RGBA8",material:"blit-screen",threshold:.1,iterations:2,intensity:.8}},{id:11,type:"pipeline/DeferredLightingStage",pos:[745,608],size:{0:228.39999389648438,1:146},flags:{},order:11,mode:0,inputs:[{name:"Camera Output",type:"Camera Output",link:null},{name:"RenderTexture",type:"RenderTexture",link:17},{name:"Custom Size",type:"vec2",link:null}],outputs:[{name:"RenderTexture",type:"RenderTexture",links:[62],slot_index:0}],properties:{showResult:!1,enable:!0,name:"DeferredLighting",shadingScale:1,Name:"DeferredLightingStage",Enable:!0,CameraOutputType:"Color",Format:"RGBA8",material:"blit-screen"}},{id:18,type:"pipeline/FSRStage",pos:[1618,739],size:{0:228.39999389648438,1:170},flags:{},order:15,mode:0,inputs:[{name:"Camera Output",type:"Camera Output",link:null},{name:"RenderTexture",type:"RenderTexture",link:53},{name:"Custom Size",type:"vec2",link:null}],outputs:[{name:"RenderTexture",type:"RenderTexture",links:[64],slot_index:0}],properties:{showResult:!1,enable:!0,name:"FSR",shadingScale:1,sharpness:.2,Name:"FSRStage",Enable:!0,CameraOutputType:"Color",Format:"RGBA8"}},{id:12,type:"pipeline/DeferredPostStage",pos:[2260,762],size:{0:228.39999389648438,1:146},flags:{},order:17,mode:0,inputs:[{name:"Camera Output",type:"Camera Output",link:null},{name:"RenderTexture",type:"RenderTexture",link:65},{name:"Custom Size",type:"vec2",link:null}],outputs:[{name:"RenderTexture",type:"RenderTexture",links:[22],slot_index:0}],properties:{showResult:!1,enable:!0,name:"DeferredPost",shadingScale:1,Name:"DeferredPostStage",Enable:!0,CameraOutputType:"Color",Format:"RGBA8",material:"blit-screen"}},{id:4,type:"pipeline/RenderToScreen",pos:[2534,770],size:{0:140,1:26},flags:{},order:18,mode:0,inputs:[{name:"RenderTexture",type:"RenderTexture",link:22}],properties:{}},{id:25,type:"pipeline/ZoomScreenStage",pos:[1942,742],size:{0:228.39999389648438,1:146},flags:{},order:16,mode:0,inputs:[{name:"Camera Output",type:"Camera Output",link:null},{name:"RenderTexture",type:"RenderTexture",link:64},{name:"Custom Size",type:"vec2",link:null}],outputs:[{name:"RenderTexture",type:"RenderTexture",links:[65],slot_index:0}],properties:{showResult:!1,enable:!0,name:"ZoomScreenStage",shadingScale:1}},{id:1,type:"pipeline/Pipeline",pos:[-223,626],size:{0:210,1:82},flags:{},order:2,mode:0,outputs:[{name:"Camera Output",type:"Camera Output",links:[66],slot_index:0}],properties:{Name:"main",Enable:!0}},{id:26,type:"pipeline/CustomShadowStage",pos:[103,641],size:{0:228.39999389648438,1:170},flags:{},order:5,mode:0,inputs:[{name:"Camera Output",type:"Camera Output",link:66},{name:"RenderTexture",type:"RenderTexture",link:null},{name:"Custom Size",type:"vec2",link:null}],outputs:[{name:"RenderTexture",type:"RenderTexture",links:[67],slot_index:0}],properties:{showResult:!1,enable:!0,name:"CustomShadowStage",shadingScale:1,textureFormat:35}},{id:10,type:"pipeline/DeferredGBufferStage",pos:[444,612],size:{0:228.39999389648438,1:146},flags:{},order:8,mode:0,inputs:[{name:"Camera Output",type:"Camera Output",link:null},{name:"RenderTexture",type:"RenderTexture",link:67},{name:"Custom Size",type:"vec2",link:null}],outputs:[{name:"RenderTexture",type:"RenderTexture",links:[17],slot_index:0}],properties:{showResult:!1,enable:!0,name:"DeferredGBuffer",shadingScale:1,Name:"DeferredGBufferStage",Enable:!0,CameraOutputType:"Color",Format:"RGBA8",material:"blit-screen"}}],links:[[17,10,0,11,1,"RenderTexture"],[22,12,0,4,0,"RenderTexture"],[34,15,0,5,0,"Camera Output"],[52,14,0,17,1,"RenderTexture"],[53,17,0,18,1,"RenderTexture"],[55,5,0,19,1,"RenderTexture"],[56,19,0,16,0,"RenderTexture"],[57,20,0,21,0,"Camera Output"],[58,21,0,22,1,"RenderTexture"],[59,22,0,23,1,"RenderTexture"],[60,23,0,24,0,"RenderTexture"],[62,11,0,14,1,"RenderTexture"],[64,18,0,25,1,"RenderTexture"],[65,25,0,12,1,"RenderTexture"],[66,1,0,26,0,"Camera Output"],[67,26,0,10,1,"RenderTexture"]],groups:[],config:{},extra:{},version:.4});t._RF.pop()}}}));

System.register("chunks:///_virtual/graph.ts",["./rollupPluginModLoBabelHelpers.js","cc","./litegragh-css.ts","./npm.ts","./href-setting.ts","./graph-data.ts"],(function(a){"use strict";var _,n,o,i,e,l,r;return{setters:[function(a){_=a.asyncToGenerator,n=a.regeneratorRuntime},function(a){o=a.cclegacy,i=a.sys},function(a){e=a.css},null,function(a){l=a.HrefSetting},function(a){r=a.default}],execute:function(){a({loadGraph:function(){return p.apply(this,arguments)},saveGraph:function(){},showGraph:c}),o._RF.push({},"fcc5eRAFqlIvLt3e/HnR0kq","graph",void 0);var s=a("lGraph",globalThis.LGraph),h=a("lGraphCanvas",globalThis.LGraphCanvas);a("liteGraph",globalThis.LiteGraph);globalThis.__graph__||(globalThis.__graph__=new s);var t,g=a("graph",globalThis.__graph__);function p(){return(p=_(n().mark((function a(){return n().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:g.clear(),g.configure(JSON.parse(JSON.stringify(r))),g.start(),l.pauseGraphAfterLoad&&setTimeout((function(){g.stop()}),2e3);case 4:case"end":return a.stop()}}),a)})))).apply(this,arguments)}function c(a,_){if(void 0===a&&(a=!0),i.isBrowser){var n=window.document,o=l.graph===t.NewWindow;o&&a&&(globalThis.__graph_window__&&globalThis.__graph_window__.document||(globalThis.__graph_window__=window.open("","newwindow","width=960,height=640"),globalThis.__graph_window__.CanvasRenderingContext2D.prototype.roundRect=window.CanvasRenderingContext2D.prototype.roundRect),(n=globalThis.__graph_window__.document).body.style="background: #181818;overflow:hidden;");var r=n.body;if(a){if(!globalThis.__graph_canvas__){var s=n.createElement("style");s.innerHTML=e,r.appendChild(s);var p=n.createElement("Canvas");p.style="\n                    width:100%;\n                    height:100%;\n                    position:absolute;\n                ",globalThis.__l_graph_canvas__?globalThis.__l_graph_canvas__.setCanvas(p):globalThis.__l_graph_canvas__=new h(p,g),globalThis.__graph_canvas__=p}globalThis.__l_graph_canvas__&&globalThis.__l_graph_canvas__.setDirty(!0,!0);var c=globalThis.__graph_canvas__;c&&(c.width=r.offsetWidth,c.height=r.offsetHeight,r.appendChild(c),globalThis.__graph_window__&&(globalThis.__graph_window__.onresize=function(){c.width=r.offsetWidth,c.height=r.offsetHeight},globalThis.__graph_window__.onbeforeunload=function(){globalThis.__graph_window__=null,globalThis.__graph_canvas__=null,globalThis.__l_graph_canvas__=null,_&&_()}))}else o?globalThis.__graph_window__&&globalThis.__graph_window__.close():globalThis.__graph_canvas__&&r.removeChild(globalThis.__graph_canvas__)}}!function(a){a[a.None=0]="None",a[a.InnerWindow=1]="InnerWindow",a[a.NewWindow=2]="NewWindow"}(t||(t={})),globalThis.showGraph=c,o._RF.pop()}}}));

System.register("chunks:///_virtual/graphics.ts",["cc"],(function(s){"use strict";var t,e;return{setters:[function(s){t=s.cclegacy,e=s.utils}],execute:function(){t._RF.push({},"65ffas2U79Oja3MQe49X56F","graphics",void 0);s("GGraphics",(function(){})),s("GMesh",function(){function s(){}return s.Create=function(){var s={positions:[0,0,0,1,0,0,1,0,1,0,0,1],indices:[0,2,1,0,3,2],uvs:[0,0,1,0,1,1,0,1]};return e.createMesh(s)},s}()),s("GImage",(function(){})),s("MeshBase",(function(){this.vers=[],this.triangles=[],this.uvs=[],this.colors=[],this.trianglesIndex=0}));t._RF.pop()}}}));

System.register("chunks:///_virtual/guide.ts",["./rollupPluginModLoBabelHelpers.js","cc","./save.ts","./singleton.ts","./res-cache.ts","./ui.ts","./msg.ts"],(function(e){"use strict";var i,t,n,u,s,_,d;return{setters:[function(e){i=e.inheritsLoose},function(e){t=e.cclegacy},function(e){n=e.Save},function(e){u=e.Singleton},function(e){s=e.ResCache},function(e){_=e.UI},function(e){d=e.Msg}],execute:function(){t._RF.push({},"e0abe+1xBVJh6+JbU4kWXkb","guide",void 0);e("Guide",function(e){function t(){for(var i,t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return(i=e.call.apply(e,[this].concat(n))||this)._data={},i._cur_index=-1,i._guide_name="",i._cur=null,i._currentGameNodeName="",i._has_guide=!1,i}i(t,e);var u=t.prototype;return u.init=function(){var e=this;this._data=s.Instance.getJson("data-guide").json,d.on("guide_story",(function(){e.set_guide("guide_story")})),d.on("guide_menu",(function(){e.set_guide("guide_menu")})),d.on("guide_build",(function(){e.set_guide("guide_build")})),d.on("guide_keyboard",(function(){e.set_guide("guide_keyboard")})),d.on("guide_gamepad",(function(){e.set_guide("guide_gamepad")})),d.on("guide_set",this.set_guide.bind(this)),d.on("guide_next",this.next.bind(this)),d.on("guide_force_set",this.guide_force_set.bind(this))},u.set_guide=function(e){this._guide_name=e,void 0===n.Instance._cur.guide_info&&(n.Instance._cur.guide_info={}),n.Instance._cur.guide_info[this._guide_name]?console.log("has guide:",this._guide_name):(this._has_guide=!0,this._cur=this._data[this._guide_name],this._cur_index=-1,this.next(),_.Instance.on("uiguide"))},u.guide_force_set=function(e){this._guide_name=e,this._has_guide=!0,this._cur=this._data[this._guide_name],this._cur_index=-1,this.next(),_.Instance.on("uiguide")},u.next=function(){if(this._cur_index++,this._cur_index>=this._cur.length-1){_.Instance.off("uiguide"),n.Instance._cur.guide_info[this._guide_name]=!0,this._has_guide=!1;var e=this._cur[this._cur_index];""!==e&&d.emit(e),d.emit("msg_save_archive")}else this._currentGameNodeName=this._cur[this._cur_index],d.emit("guide_refresh")},t}(u));t._RF.pop()}}}));

System.register("chunks:///_virtual/gun-tracer-pool.ts",["./rollupPluginModLoBabelHelpers.js","cc","./res.ts","./msg.ts"],(function(t){"use strict";var o,e,i,r,n,s,c,l,a,p;return{setters:[function(t){o=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){n=t.cclegacy,s=t._decorator,c=t.CCFloat,l=t.Component},function(t){a=t.Res},function(t){p=t.Msg}],execute:function(){var u,h,d,f,g;n._RF.push({},"b3707XGtb1OgI4JAKVGo7zf","gun-tracer-pool",void 0);var y=s.ccclass,v=s.property;t("GunTracerPool",(u=y("GunTracerPool"),h=v({type:c,tooltip:"The depth of the object pool."}),u((g=o((f=function(t){function o(){for(var o,e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return o=t.call.apply(t,[this].concat(n))||this,i(o,"poolCount",g,r(o)),o.pool=void 0,o.index=0,o}e(o,t);var n=o.prototype;return n.start=function(){this.pool=new Array(this.poolCount);var t=this.node.children[0];this.pool[0]=t;for(var o=1;o<this.poolCount;o++)this.pool[o]=a.instNode(t,this.node),this.pool[o].emit("init");t.emit("init"),p.on("msg_set_tracer",this.setTracer.bind(this))},n.setTracer=function(t){this.pool[this.index].emit("setTracer",t.start,t.end),this.index++,this.index>=this.poolCount&&(this.index=0)},o}(l)).prototype,"poolCount",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 20}}),d=f))||d));n._RF.pop()}}}));

System.register("chunks:///_virtual/halton.ts",["cc"],(function(e){"use strict";var t,n,c;return{setters:[function(e){t=e.cclegacy,n=e.Vec2,c=e.Vec3}],execute:function(){t._RF.push({},"e4b6fSaGodA+5ssbWI7IwWl","halton",void 0);var i=e("HaltonSeq",function(){function e(){}return e.Get=function(e,t){var n=e+"_"+t,c=this.cache.get(n);if(!c){var i=1/t;for(c=0;e>0;)c+=e%t*i,e/=t,i/=t;this.cache.set(n,c)}return c},e}());i.cache=new Map;var s=e("HaltonUtils",function(){function e(){this.sampleIndex=0,this._tempVec2=new n,this._tempVec3=new c}var t=e.prototype;return t.Generate2DRandomOffset=function(e,t){return void 0===e&&(e=8),void 0===t&&(t=this.sampleIndex++),t%=e,this._tempVec2.set(i.Get(1+(1023&t),2)-.5,i.Get(1+(1023&t),3)-.5),this._tempVec2},t.Generate3DRandomOffset=function(e,t){return void 0===e&&(e=8),void 0===t&&(t=this.sampleIndex++),t%=e,this._tempVec3.set(i.Get(1+(1023&t),2)-.5,i.Get(1+(1023&t),3)-.5,i.Get(1+(1023&t),5)-.5),this._tempVec3},e}());s.instance=new s,t._RF.pop()}}}));

System.register("chunks:///_virtual/height-fog.ts",["./rollupPluginModLoBabelHelpers.js","cc","./camera-setting.ts"],(function(t){"use strict";var e,o,i,r,n,a,s,f,g,c,l,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.initializerDefineProperty,i=t.inheritsLoose,r=t.assertThisInitialized,n=t.createClass},function(t){a=t.cclegacy,s=t._decorator,f=t.Vec4,g=t.Color,c=t.clamp,l=t.Component},function(t){p=t.CameraSetting}],execute:function(){var u,y,h,_,D,b,d,m,C,w,H,P,F,O,x,I,z,v;a._RF.push({},"87538/f4rtLtJp8PNcBmYMH","height-fog",void 0);var M=s.ccclass,j=s.property,k=s.type,S=s.executeInEditMode,E=function(){this.Height=0,this.Density=0,this.HeightFalloff=0},B=[new E,new E],T=new f,A=new Array(2).fill(0),L=new g,U=(new Array(4).fill(0),t("fogUBO",{fog_Parameters:new f,fog_Parameters2:new f,fog_Parameters3:new f,fog_ColorParameters:new f,update:function(t){t.setProperty("fog_Parameters",this.fog_Parameters),t.setProperty("fog_Parameters2",this.fog_Parameters2),t.setProperty("fog_Parameters3",this.fog_Parameters3),t.setProperty("fog_ColorParameters",this.fog_ColorParameters)},reset:function(){this.fog_Parameters.w=1e6}})),R=t("SecondExponentialHeightFog",M("SecondExponentialHeightFog")((h=e((y=function(){o(this,"fogDensity",h,this),o(this,"fogHeightFalloff",_,this),o(this,"fogHeightOffset",D,this)}).prototype,"fogDensity",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.02}}),_=e(y.prototype,"fogHeightFalloff",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.2}}),D=e(y.prototype,"fogHeightOffset",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),u=y))||u);t("ExponentialHeightFog",(b=M("ExponentialHeightFog"),d=k(R),m=k(R),b(C=S(((v=function(t){function e(){for(var e,i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))||this)._dirty=!0,o(e,"_fogDensity",H,r(e)),o(e,"_fogHeightFalloff",P,r(e)),o(e,"_secondFogData",F,r(e)),o(e,"_fogInscatteringColor",O,r(e)),o(e,"_fogMaxOpacity",x,r(e)),o(e,"_startDistance",I,r(e)),o(e,"_fogCutoffDistance",z,r(e)),e.inscatteringColorCubemap=null,e.inscatteringTextureTint=new f,e}i(e,t);var a=e.prototype;return a.onEnable=function(){this._dirty=!0,e.instance=this},a.onDisable=function(){e.instance===this&&(e.instance=void 0),U.reset()},a.update=function(){this._dirty&&(this._dirty=!1,this.updateUBO())},a.updateFogData=function(){var t=this.secondFogData;B[0].Height=this.node.worldPosition.z,B[1].Height=B[0].Height+t.fogHeightOffset,B[0].Density=this.fogDensity/10,B[0].HeightFalloff=this.fogHeightFalloff/10,B[1].Density=t.fogDensity/10,B[1].HeightFalloff=t.fogHeightFalloff/10,T=this.inscatteringColorCubemap?this.inscatteringTextureTint:this.fogInscatteringColor},a.updateUBO=function(){this.updateFogData();for(var t=1e6,e=0;e<2;e++)B[e].Density>0&&(t=Math.min(t,B[e].Height+65536));var o=10,i=p.mainCamera;i&&(o=Math.min(i.node.worldPosition.y,t));for(var r=0;r<A.length;r++){var n=c(-B[r].HeightFalloff*(o-B[r].Height),-125,126);A[r]=B[r].Density*Math.pow(2,n)}U.fog_Parameters.set(A[0],B[0].HeightFalloff,t,this.startDistance),U.fog_Parameters2.set(A[1],B[1].HeightFalloff,B[1].Density,B[1].Height),U.fog_Parameters3.set(B[0].Density,B[0].Height,this.inscatteringColorCubemap?1:0,this.fogCutoffDistance),U.fog_ColorParameters.set(T.x,T.y,T.z,1-this.fogMaxOpacity)},n(e,[{key:"fogDensity",get:function(){return this._fogDensity},set:function(t){this._fogDensity=t,this._dirty=!0}},{key:"fogHeightFalloff",get:function(){return this._fogHeightFalloff},set:function(t){this._fogHeightFalloff=t,this._dirty=!0}},{key:"secondFogData",get:function(){return this._secondFogData},set:function(t){this._secondFogData=t,this._dirty=!0}},{key:"fogInscatteringColor",get:function(){return this._fogInscatteringColor},set:function(t){this._fogInscatteringColor=t,this._dirty=!0}},{key:"fogInscatteringColorSetter",get:function(){return L.set(255*this._fogInscatteringColor.x,255*this._fogInscatteringColor.y,255*this._fogInscatteringColor.z,255*this._fogInscatteringColor.w),L},set:function(t){this._fogInscatteringColor.set(t.x,t.y,t.z,t.w),this._dirty=!0}},{key:"fogMaxOpacity",get:function(){return this._fogMaxOpacity},set:function(t){this._fogMaxOpacity=t,this._dirty=!0}},{key:"startDistance",get:function(){return this._startDistance},set:function(t){this._startDistance=t,this._dirty=!0}},{key:"fogCutoffDistance",get:function(){return this._fogCutoffDistance},set:function(t){this._fogCutoffDistance=t,this._dirty=!0}}]),e}(l)).instance=void 0,H=e((w=v).prototype,"_fogDensity",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.02}}),e(w.prototype,"fogDensity",[j],Object.getOwnPropertyDescriptor(w.prototype,"fogDensity"),w.prototype),P=e(w.prototype,"_fogHeightFalloff",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.2}}),e(w.prototype,"fogHeightFalloff",[j],Object.getOwnPropertyDescriptor(w.prototype,"fogHeightFalloff"),w.prototype),F=e(w.prototype,"_secondFogData",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new R}}),e(w.prototype,"secondFogData",[m],Object.getOwnPropertyDescriptor(w.prototype,"secondFogData"),w.prototype),O=e(w.prototype,"_fogInscatteringColor",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new f}}),e(w.prototype,"fogInscatteringColor",[j],Object.getOwnPropertyDescriptor(w.prototype,"fogInscatteringColor"),w.prototype),e(w.prototype,"fogInscatteringColorSetter",[j],Object.getOwnPropertyDescriptor(w.prototype,"fogInscatteringColorSetter"),w.prototype),x=e(w.prototype,"_fogMaxOpacity",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),e(w.prototype,"fogMaxOpacity",[j],Object.getOwnPropertyDescriptor(w.prototype,"fogMaxOpacity"),w.prototype),I=e(w.prototype,"_startDistance",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),e(w.prototype,"startDistance",[j],Object.getOwnPropertyDescriptor(w.prototype,"startDistance"),w.prototype),z=e(w.prototype,"_fogCutoffDistance",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),e(w.prototype,"fogCutoffDistance",[j],Object.getOwnPropertyDescriptor(w.prototype,"fogCutoffDistance"),w.prototype),C=w))||C)||C));a._RF.pop()}}}));

System.register("chunks:///_virtual/href-setting.ts",["cc","./env","./gpu.ts"],(function(e){"use strict";var a,s,n,t,o,r;return{setters:[function(e){a=e.cclegacy,s=e.game,n=e.sys,t=e.profiler},function(e){o=e.JSB},function(e){r=e.getGpuInfo}],execute:function(){a._RF.push({},"a174axjYy5ORbTaQNNrjHse","href-setting",void 0);var i=e("HrefSetting",{settings:0,graph:0,pauseGraphAfterLoad:1,spector:0,shadingScale:1,zoomScreen:0,bloom:1,showFps:1,fps:60,transparent:1,clusterLighting:1,ibl:1,shadow:0,fsr:1,taa:1,fxaa:1,maxEnemies:4,sceneParticles:1});globalThis.HrefSetting=i;var c=e("changedMap",new Map),l=(window&&window.location&&window.location.href).split("?")[1];l&&l.match(/([a-zA-Z]+=[0-9\.]+)/g).forEach((function(e){var a=e.split("="),s=Number.parseFloat(a[1]);"number"==typeof s&&(i[a[0]]=s,c.set(a[0],!0))}));s.canvas&&r().then((function(e){var a=e.gpuScore,r=e.gpuVersion,c=e.gpuType,l=[{score:2e3,shadingScale:Math.min(1240/s.canvas.width,1),bloom:0,fxaa:0},{score:1200,shadingScale:Math.min(1024/s.canvas.width,1)},{score:500,gpu:[["apple","a10"]],fsr:0,taa:0,maxEnemies:2,sceneParticles:0}],g=[{score:1e6,fps:60},{score:400,shadingScale:.7},{score:200,shadingScale:Math.min(1024/s.canvas.width,1),bloom:0},{score:60,fsr:0,fxaa:0,maxEnemies:2,sceneParticles:0}],h=[];h=n.isMobile?l:g;for(var f=0;f<h.length;f++){var p=h[f],u=!1;if(a<p.score&&(u=!0),p.gpu)for(var m=0;m<p.gpu.length;m++){var v=p.gpu[m];if(v[0]===c&&v[1]===r){u=!0,console.log("Force use gpu setting : "+v);break}}if(u)for(var d in p)d in i&&(i[d]=p[d])}n.platform!==n.Platform.IOS&&n.platform!==n.Platform.MACOS||(i.sceneParticles=0),console.log("canvas size "+s.canvas.width+", "+s.canvas.height),console.log("rendering size "+s.canvas.width*i.shadingScale+", "+s.canvas.height*i.shadingScale),s.frameRate=i.fps,i.showFps&&t.showStats(),n.isMobile&&!o&&(i.transparent=0),console.log(i)})),a._RF.pop()}}}));

System.register("chunks:///_virtual/IActorInput.ts",["cc"],(function(){"use strict";var t;return{setters:[function(c){t=c.cclegacy}],execute:function(){t._RF.push({},"4c668DK8NlM14ABpFbNM9A/","IActorInput",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/ik-bone.ts",["./rollupPluginModLoBabelHelpers.js","cc","./math-util.ts","./ik-point.ts"],(function(t){"use strict";var o,n,i,e,r,s,l;return{setters:[function(t){o=t.inheritsLoose,n=t.createClass},function(t){i=t.cclegacy,e=t.Vec3,r=t.Quat},function(t){s=t.default},function(t){l=t.default}],execute:function(){i._RF.push({},"49588gI2E5DAKKyVsZe9hn8","ik-bone",void 0);var u=new e,a=new e,c=new r,f=new r;t("default",function(t){function i(o,n){var i;return void 0===o&&(o=null),void 0===n&&(n=null),(i=t.call(this)||this).length=0,i.sqrMag=0,i.axis=new e(1,0,0),o&&(i.node=o),n&&(i.weight=n),i}o(i,t);var l=i.prototype;return l.swing=function(t,o){if(void 0===o&&(o=1),!(o<=0)){var n;if(e.subtract(u,t,this.node.getWorldPosition()),e.transformQuat(a,this.axis,this.node.getWorldRotation()),s.fromToRotation(c,a,u),o>=1)return r.multiply(c,c,this.node.getWorldRotation()),void(null==(n=this.node)||n.setWorldRotation(c));s.quatLerp(c,r.IDENTITY,c,o),r.multiply(c,c,this.node.getWorldRotation()),this.node.setWorldRotation(c)}},i.solverSwing=function(t,o,n,i){if(void 0===i&&(i=1),!(i<=0))if(e.subtract(u,n,t[o].solverPosition),e.transformQuat(a,t[o].axis,t[o].solverRotation),s.fromToRotation(c,a,u),i>=1)for(var l=o;l<t.length;l++)r.multiply(t[l].solverRotation,c,t[o].solverRotation);else for(var d=o;d<t.length;d++)s.quatLerp(f,r.IDENTITY,c,i),r.multiply(t[d].solverRotation,f,t[o].solverRotation)},l.setToSolverPosition=function(){var t;null==(t=this.node)||t.setWorldPosition(this.solverPosition)},n(i,[{key:"rotationLimit",get:function(){return null},set:function(t){}}]),i}(l));i._RF.pop()}}}));

System.register("chunks:///_virtual/ik-point.ts",["cc"],(function(t){"use strict";var o,i,n;return{setters:[function(t){o=t.cclegacy,i=t.Vec3,n=t.Quat}],execute:function(){o._RF.push({},"bf978Ydm4FC+7w6TwGOem05","ik-point",void 0);t("default",function(){function t(){this.node=null,this.weight=1,this.solverPosition=new i,this.solverRotation=new n,this.defaultLocalPosition=new i,this.defaultLocalRotation=new n}var o=t.prototype;return o.storeDefaultLocalState=function(){var t,o;null==(t=this.node)||t.getPosition(this.defaultLocalPosition),null==(o=this.node)||o.getRotation(this.defaultLocalRotation)},o.fixTransform=function(){var t,o,i,n;null!=(t=this.node)&&t.position.equals(this.defaultLocalPosition)||(null==(i=this.node)||i.setPosition(this.defaultLocalPosition));null!=(o=this.node)&&o.rotation.equals(this.defaultLocalRotation)||(null==(n=this.node)||n.setRotation(this.defaultLocalRotation))},o.updateSolverPosition=function(){var t;null==(t=this.node)||t.getWorldPosition(this.solverPosition)},o.updateSolverState=function(){var t,o;null==(t=this.node)||t.getWorldPosition(this.solverPosition),null==(o=this.node)||o.getWorldRotation(this.solverRotation)},o.updateSolverLocalState=function(){var t,o;null==(t=this.node)||t.getPosition(this.solverPosition),null==(o=this.node)||o.getRotation(this.solverRotation)},t}());o._RF.pop()}}}));

System.register("chunks:///_virtual/ik-solver-aim.ts",["./rollupPluginModLoBabelHelpers.js","cc","./math-util.ts","./ik-solver-heuristic.ts"],(function(t){"use strict";var i,o,e,s,n,a,r,l,h,m,c,p,u;return{setters:[function(t){i=t.applyDecoratedDescriptor,o=t.inheritsLoose,e=t.initializerDefineProperty,s=t.assertThisInitialized,n=t.createClass},function(t){a=t.cclegacy,r=t._decorator,l=t.Vec3,h=t.Quat,m=t.Node,c=t.log},function(t){p=t.default},function(t){u=t.default}],execute:function(){var d,g,f,P,b,W,y,x,A,w,N,T,_,k,v,z,I,K,R,D,S;a._RF.push({},"b50c3ycqQRKUKFzVZHV0Nzn","ik-solver-aim",void 0);var L=r.ccclass,M=r.property,V=new l,q=new l,C=new l,Q=new h;new h,t("default",(d=L("IKSolverAim"),g=M({type:m,tooltip:"The transform that we want to aim at ikPosition."}),f=M({type:m,tooltip:"The transform that we want to aim at ikPosition."}),P=M({tooltip:"The local axis of the Transform that you want to be aimed at ikPosition."}),b=M({tooltip:"Keeps that axis of the Aim Transform directed at the polePosition."}),W=M({tooltip:"The position in world space to keep the pole axis of the Aim Transform directed at"}),y=M({tooltip:"The weight of the Pole."}),x=M({type:m,tooltip:"If assigned, will automatically set polePosition to the position of this Transform."}),A=M({tooltip:"Clamping rotation of the solver. 0 is free rotation, 1 is completely clamped to transform axis."}),w=M({tooltip:"Number of sine smoothing iterations applied to clamping to make it smoother"}),d((_=i((T=function(t){function i(){for(var i,o=arguments.length,n=new Array(o),a=0;a<o;a++)n[a]=arguments[a];return i=t.call.apply(t,[this].concat(n))||this,e(i,"aimNode",_,s(i)),e(i,"rootNode",k,s(i)),e(i,"axis",v,s(i)),e(i,"poleAxis",z,s(i)),e(i,"polePosition",I,s(i)),e(i,"poleWeight",K,s(i)),e(i,"poleTarget",R,s(i)),e(i,"clampWeight",D,s(i)),e(i,"clampSmoothing",S,s(i)),i.minBones=1,i._step=0,i._clampedIKPosition=new l,i._lastNode=null,i._transformPoleAxis=new l,i._transformAxis=new l,i}o(i,t);var a=i.prototype;return a.getAngle=function(){return l.subtract(C,this.ikPosition,this.aimNode.getWorldPosition()),p.radiansToDegrees(l.angle(this.transformAxis,C))},a.onInitiate=function(){this.firstInitiation&&null!=this.aimNode&&(l.add(this.ikPosition,this.aimNode.getWorldPosition(),this.transformAxis.multiplyScalar(3)),l.add(this.polePosition,this.aimNode.getWorldPosition(),this.transformPoleAxis.multiplyScalar(3))),this._step=1/this.bones.length,this.axis.normalize()},a.onUpdate=function(){if(this.axis.equals(l.ZERO))c("IKSolverAim axis is Vector3.zero.");else if(this.poleAxis.equals(l.ZERO)&&this.poleWeight>0)c("IKSolverAim poleAxis is Vector3.zero.");else if(null!=this.target&&this.target.getWorldPosition(this.ikPosition),null!=this.poleTarget&&this.poleTarget.getWorldPosition(this.polePosition),this.XY&&(this.ikPosition.z=this.bones[0].node.getWorldPosition().z),!(this.ikPositionWeight<=0))if(this.ikPositionWeight=p.clamp(this.ikPositionWeight,0,1),this.aimNode!=this._lastNode&&(this._lastNode=this.aimNode),null!=this.aimNode){this.clampWeight=p.clamp(this.clampWeight,0,1),this._clampedIKPosition=this._getClampedIKPosition(),l.subtract(V,this._clampedIKPosition,this.aimNode.getWorldPosition()),l.multiplyScalar(q,this.transformAxis,V.length()),p.sLerp(q,q,V,this.ikPositionWeight),l.add(this._clampedIKPosition,this.aimNode.getWorldPosition(),q);for(var t=0;t<this.maxIterations&&!(t>=1&&this.tolerance>0&&this.getAngle()<this.tolerance);t++)this.lastLocalDirection=l.clone(this.localDirection),this._solve();this.lastLocalDirection=l.clone(this.localDirection)}else c("Aim Transform unassigned in Aim IK solver. Please Assign a Transform (lineal descendant to the last bone in the spine) that you want to be aimed at ikPosition")},a._solve=function(){for(var t=0;t<this.bones.length-1;t++)this._rotateToTarget(this._clampedIKPosition,this.bones[t],this._step*(t+1)*this.ikPositionWeight*this.bones[t].weight);this._rotateToTarget(this._clampedIKPosition,this.bones[this.bones.length-1],this.ikPositionWeight*this.bones[this.bones.length-1].weight)},a._getClampedIKPosition=function(){if(this.clampWeight<=0)return l.clone(this.ikPosition);if(this.clampWeight>=1)return l.subtract(V,this.ikPosition,this.aimNode.getWorldPosition()),l.multiplyScalar(q,this.transformAxis,V.length()),l.add(C,this.aimNode.getWorldPosition(),q),l.clone(C);l.subtract(V,this.ikPosition,this.aimNode.getWorldPosition());for(var t=1-p.radiansToDegrees(l.angle(this.transformAxis,V))/180,i=this.clampWeight>0?p.clamp(1-(this.clampWeight-t)/(1-t),0,1):1,o=this.clampWeight>0?p.clamp(t/this.clampWeight,0,1):1,e=0;e<this.clampSmoothing;e++){var s=o*Math.PI*.5;o=Math.sin(s)}return l.subtract(V,this.ikPosition,this.aimNode.getWorldPosition()),l.multiplyScalar(q,this.transformAxis,10),p.sLerp(q,q,V,o*i),l.add(C,this.aimNode.getWorldPosition(),q),l.clone(C)},a._rotateToTarget=function(t,i,o){if(this.XY){if(o>=0){var e,s=this.transformAxis;l.subtract(V,t,this.aimNode.getWorldPosition());var n=p.radiansToDegrees(Math.atan2(s.x,s.y)),a=p.radiansToDegrees(Math.atan2(V.x,V.y)),r=p.deltaAngle(n,a);p.axisAngle(Q,new l(0,0,-1),r),h.multiply(Q,Q,i.node.getWorldRotation()),null==(e=i.node)||e.setRotation(Q)}}else o>=0&&(l.subtract(V,t,this.aimNode.getWorldPosition()),h.rotationTo(Q,this.transformAxis.normalize(),V.normalize()),o>=1?(h.multiply(Q,Q,i.node.getWorldRotation()),i.node.setWorldRotation(Q)):(p.quatLerp(Q,h.IDENTITY,Q,o),h.multiply(Q,Q,i.node.getWorldRotation()),h.normalize(Q,Q),i.node.setWorldRotation(Q))),this.poleWeight},n(i,[{key:"transformAxis",get:function(){return l.transformQuat(this._transformAxis,this.axis,this.aimNode.getWorldRotation()),l.clone(this._transformAxis)}},{key:"transformPoleAxis",get:function(){return l.transformQuat(this._transformPoleAxis,this.poleAxis,this.aimNode.getWorldRotation())}}]),i}(u)).prototype,"aimNode",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=i(T.prototype,"rootNode",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=i(T.prototype,"axis",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new l(0,0,1)}}),z=i(T.prototype,"poleAxis",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new l(0,1,0)}}),I=i(T.prototype,"polePosition",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new l}}),K=i(T.prototype,"poleWeight",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),R=i(T.prototype,"poleTarget",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=i(T.prototype,"clampWeight",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),S=i(T.prototype,"clampSmoothing",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),N=T))||N));a._RF.pop()}}}));

System.register("chunks:///_virtual/ik-solver-heuristic.ts",["./rollupPluginModLoBabelHelpers.js","cc","./math-util.ts","./ik-bone.ts","./ik-solver.ts"],(function(t){"use strict";var e,n,i,o,s,r,l,a,h,c,u,b,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized,s=t.createClass},function(t){r=t.cclegacy,l=t._decorator,a=t.Vec3,h=t.Quat,c=t.Node},function(t){u=t.default},function(t){b=t.default},function(t){f=t.default}],execute:function(){var g,d,p,v,m,y,P,W,w,D,k;r._RF.push({},"7ac3dMItT1CKKirWhbYCB7s","ik-solver-heuristic",void 0);var x=l.ccclass,L=l.property,z=new a,S=new a,_=new h;new h,t("default",(g=x("IKSolverHeuristic"),d=L({type:c,tooltip:"Reference to the AimIK component."}),p=L({tooltip:"Minimum distance from last reached position. Will stop solving if difference from previous reached position is less than tolerance. If tolerance is zero, will iterate until maxIterations."}),v=L({tooltip:"Max iterations per frame."}),m=L({tooltip:"Solve in 2D?"}),g((W=e((P=function(t){function e(){for(var e,n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return e=t.call.apply(t,[this].concat(s))||this,i(e,"target",W,o(e)),i(e,"tolerance",w,o(e)),i(e,"maxIterations",D,o(e)),i(e,"XY",k,o(e)),e.bones=[],e.lastLocalDirection=null,e.chainLength=0,e._localDirection=new a,e}n(e,t);var r=e.prototype;return r.setChain=function(t,e){null!=this.bones&&this.bones.length==t.length||(this.bones=new Array(t.length));for(var n=0;n<t.length;n++)null==this.bones[n]&&(this.bones[n]=new b),this.bones[n].node=t[n];return this.initiate(e),this.initiated},r.addBone=function(t){for(var e=new Array(this.bones.length+1),n=0;n<this.bones.length;n++)e[n]=this.bones[n].node;e[e.length-1]=t,this.setChain(e,this.root)},r.storeDefaultLocalState=function(){for(var t=0;t<this.bones.length;t++)this.bones[t].storeDefaultLocalState()},r.fixTransforms=function(){if(this.initiated&&!(this.ikPositionWeight<=0))for(var t=0;t<this.bones.length;t++)this.bones[t].fixTransform()},r.getPoints=function(){return this.bones},r.getPoint=function(t){for(var e=0;e<this.bones.length;e++)if(this.bones[e].node==t)return this.bones[e];return null},r.initiateBones=function(){this.chainLength=0;for(var t=0;t<this.bones.length;t++)t<this.bones.length-1?(a.subtract(z,this.bones[t].node.getWorldPosition(),this.bones[t+1].node.getWorldPosition()),this.bones[t].length=z.length(),this.chainLength+=this.bones[t].length,this.bones[t+1].node.getWorldPosition(S),a.subtract(S,S,this.bones[t].node.getWorldPosition()),h.invert(_,this.bones[t].node.getWorldRotation()),a.transformQuat(this.bones[t].axis,S,_)):(a.subtract(z,this.bones[this.bones.length-1].node.getWorldPosition(),this.bones[0].node.getWorldPosition()),h.invert(_,this.bones[t].node.getWorldRotation()),a.transformQuat(this.bones[t].axis,S,_))},r.getSingularityOffset=function(){if(!this._singularityDetected())return a.ZERO;a.subtract(z,this.ikPosition,this.bones[0].node.getWorldPosition()),z.normalize();var t=new a(z.y,z.z,z.x);return a.cross(z,z,t),z.multiplyScalar(.5*this.bones[this.bones.length-2].length).clone()},r._singularityDetected=function(){if(!this.initiated)return!1;a.subtract(z,this.bones[this.bones.length-1].node.getWorldPosition(),this.bones[0].node.getWorldPosition()),a.subtract(S,this.ikPosition,this.bones[0].node.getWorldPosition());var t=z.length();return!(t<S.length())&&(!(t<this.chainLength-.1*this.bones[this.bones.length-2].length)&&void 0)},s(e,[{key:"localDirection",get:function(){return u.directionToNodeSpace(this._localDirection,this.bones[this.bones.length-1].node.getWorldPosition().subtract(this.bones[0].node.getWorldPosition()),this.bones[0].node),this._localDirection.clone()}},{key:"positionOffset",get:function(){return a.lengthSqr(this.localDirection.subtract(this.lastLocalDirection))}}]),e}(f)).prototype,"target",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=e(P.prototype,"tolerance",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),D=e(P.prototype,"maxIterations",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 4}}),k=e(P.prototype,"XY",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),y=P))||y));r._RF.pop()}}}));

System.register("chunks:///_virtual/ik-solver.ts",["cc"],(function(t){"use strict";var i,n,o;return{setters:[function(t){i=t.cclegacy,n=t._decorator,o=t.Vec3}],execute:function(){var s;i._RF.push({},"79994zz3nZCYrBBgcwo1alD","ik-solver",void 0);var e=n.ccclass;n.property,t("default",e("IKSolver")(s=function(){var t=i.prototype;function i(t){this.isFixTransforms=!0,this.initiated=!1,this.root=null,this.firstInitiation=!0,this.ikPosition=new o,this.ikPositionWeight=1,this.root=t}return t.onInitiate=function(){},t.storeDefaultLocalState=function(){},t.onUpdate=function(){},t.fixTransforms=function(){},t.initiate=function(t){this.root=t,this.initiated=!1,this.onInitiate(),this.storeDefaultLocalState(),this.initiated=!0,this.firstInitiation=!1},t.lateUpdate=function(){this.firstInitiation&&this.initiate(this.root),this.initiated&&this.onUpdate()},i.containsDuplicateBone=function(t){for(var i=0;i<t.length;i++)for(var n=0;n<t.length;n++)if(i!=n&&t[i].node==t[n].node)return t[i].node;return null},t.update=function(){this.isFixTransforms&&this.fixTransforms()},i}())||s);i._RF.pop()}}}));

System.register("chunks:///_virtual/index.ts",["./rollupPluginModLoBabelHelpers.js","cc","./blocklistedGPUS.ts","./cleanRenderer.ts","./deobfuscateRenderer.ts","./deviceInfo.ts","./error.ts","./getGPUVersion.ts","./getLevenshteinDistance.ts","./getWebGLContext.ts","./ssr.ts","./util.ts"],(function(e){"use strict";var t,r,n,i,a,u,s,o,c,f,d,p,l,b,v;return{setters:[function(e){t=e.asyncToGenerator,r=e.regeneratorRuntime,n=e.createForOfIteratorHelperLoose},function(e){i=e.cclegacy},function(e){a=e.BLOCKLISTED_GPUS},function(e){u=e.cleanRenderer},function(e){s=e.deobfuscateRenderer},function(e){o=e.deviceInfo},function(e){c=e.OutdatedBenchmarksError},function(e){f=e.getGPUVersion},function(e){d=e.tokenizeForLevenshteinDistance,p=e.getLevenshteinDistance},function(e){l=e.getWebGLContext},function(e){b=e.isSSR},function(e){v=e.isDefined}],execute:function(){i._RF.push({},"659ffrGDstGt48zhgidW5xL","index",void 0);e("getGPUTier",function(){var e=t(r().mark((function e(i){var h,x,g,k,m,L,E,R,w,G,P,S,U,_,A,B,D,M,C,I,y,T,K,N,F,O,W,V,j,z,H,X,q,J,Q,Y,Z,$,ee;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(F=function(){return(F=t(r().mark((function e(t){var i,a,u,s,o,l,b,v,h,x,g,k,m,L,E,R,w,G,P,S,_,B,M,I,T,N,F;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=K(t)){e.next=3;break}return e.abrupt("return");case 3:return s=U[u=(D?"m":"d")+"-"+a+(A?"-ipad":"")+".json"]=null!=(i=U[u])?i:y(u),e.prev=6,e.next=9,s;case 9:o=e.sent,e.next=18;break;case 12:if(e.prev=12,e.t0=e.catch(6),!(e.t0 instanceof c)){e.next=16;break}throw e.t0;case 16:return e.abrupt("return");case 18:if(l=f(t),(b=o.filter((function(e){return e[1]===l}))).length||(b=o.filter((function(e){return e[0].includes(t)}))),0!==(v=b.length)){e.next=25;break}return e.abrupt("return");case 25:for(h=d(t),x=v>1?b.map((function(e){return[e,p(h,e[2])]})).sort((function(e,t){return e[1]-t[1]}))[0][0]:b[0],g=x[0],k=x[4],m=Number.MAX_VALUE,E=window,R=E.devicePixelRatio,w=C.width*R*C.height*R,G=n(k);!(P=G()).done;)S=P.value,_=S[0],B=S[1],M=_*B,(I=Math.abs(w-M))<m&&(m=I,L=S);if(L){e.next=34;break}return e.abrupt("return");case 34:return N=(T=L)[2],F=T[3],e.abrupt("return",[m,N,g,F]);case 36:case"end":return e.stop()}}),e,null,[[6,12]])})))).apply(this,arguments)},N=function(e){return F.apply(this,arguments)},x=(h=void 0===i?{}:i).mobileTiers,g=void 0===x?[0,15,30,60]:x,k=h.desktopTiers,m=void 0===k?[0,15,30,60]:k,L=h.override,E=void 0===L?{}:L,R=h.glContext,w=h.failIfMajorPerformanceCaveat,G=void 0!==w&&w,P=h.benchmarksURL,S=void 0===P?"https://unpkg.com/detect-gpu@5.0.10/dist/benchmarks":P,U={},!b){e.next=6;break}return e.abrupt("return",{tier:0,type:"SSR"});case 6:if(_=E.isIpad,A=void 0===_?!(null==o||!o.isIpad):_,B=E.isMobile,D=void 0===B?!(null==o||!o.isMobile):B,M=E.screenSize,C=void 0===M?window.screen:M,I=E.loadBenchmarks,y=void 0===I?t(r().mark((function e(t){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(S+"/"+t).then((function(e){return e.json()}));case 2:if(n=e.sent,!(parseInt(n.shift().split(".")[0],10)<4)){e.next=6;break}throw new c("Detect GPU benchmark data is out of date. Please update to version 4x");case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))):I,T=E.renderer,K=function(e){for(var t=0,r=D?["adreno","apple","mali-t","mali","nvidia","powervr","samsung"]:["intel","apple","amd","radeon","nvidia","geforce"];t<r.length;t++){var n=r[t];if(e.includes(n))return n}},O=function(e,t,r,n,i){return{device:i,fps:n,gpu:r,isMobile:D,tier:e,type:t}},V="",T){e.next=24;break}if(j=R||l(null==o?void 0:o.isSafari12,G)){e.next=15;break}return e.abrupt("return",O(0,"WEBGL_UNSUPPORTED"));case 15:if((z=j.getExtension("WEBGL_debug_renderer_info"))&&(T=j.getParameter(z.UNMASKED_RENDERER_WEBGL)),T){e.next=19;break}return e.abrupt("return",O(1,"FALLBACK"));case 19:V=T,T=u(T),W=s(j,T,D),e.next=26;break;case 24:T=u(T),W=[T];case 26:return e.next=28,Promise.all(W.map(N));case 28:if((H=e.sent.filter(v).sort((function(e,t){var r=e[0],n=void 0===r?Number.MAX_VALUE:r,i=e[1],a=t[0],u=void 0===a?Number.MAX_VALUE:a,s=t[1];return n===u?i-s:n-u}))).length){e.next=32;break}return X=a.find((function(e){return T.includes(e)})),e.abrupt("return",X?O(0,"BLOCKLISTED",X):O(1,"FALLBACK",T+" ("+V+")"));case 32:if(q=H[0],J=q[1],Q=q[2],Y=q[3],-1!==J){e.next=35;break}return e.abrupt("return",O(0,"BLOCKLISTED",Q,J,Y));case 35:for(Z=D?g:m,$=0,ee=0;ee<Z.length;ee++)J>=Z[ee]&&($=ee);return e.abrupt("return",O($,"BENCHMARK",Q,J,Y));case 39:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());i._RF.pop()}}}));

System.register("chunks:///_virtual/infrared-tracker.ts",["./rollupPluginModLoBabelHelpers.js","cc","./util2.ts","./fx-ray-line.ts"],(function(i){"use strict";var t,e,o,r,n,s,a,c,d,l,h,u,y,p,f;return{setters:[function(i){t=i.applyDecoratedDescriptor,e=i.inheritsLoose,o=i.initializerDefineProperty,r=i.assertThisInitialized},function(i){n=i.cclegacy,s=i._decorator,a=i.CCFloat,c=i.Node,d=i.v3,l=i.geometry,h=i.PhysicsSystem,u=i.Component},function(i){y=i.Util,p=i.UtilVec3},function(i){f=i.FxRayLine}],execute:function(){var v,m,w,P,b,g,k,z;n._RF.push({},"e6e9czpVDlKoKYfnj77c6nw","infrared-tracker",void 0);var L=s.ccclass,C=s.property,R=s.executeInEditMode;i("InfraredTracker",(v=L("InfraredTracker"),m=C([a]),w=C(c),v(P=R((g=t((b=function(i){function t(){for(var t,e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return t=i.call.apply(i,[this].concat(n))||this,o(t,"masks",g,r(t)),o(t,"distance",k,r(t)),o(t,"forwardNode",z,r(t)),t.ray=void 0,t.target=void 0,t.mask=0,t.hit=void 0,t.endPosition=d(0,0,0),t.rayLine=void 0,t.forward=d(0,0,0),t.direction=d(0,0,0),t}e(t,i);var n=t.prototype;return n.onEnable=function(){this.ray=new l.Ray,this.mask=y.calculateMask(this.masks),this.rayLine=this.node.children[0].getComponent(f)},n.update=function(i){var t;p.copy(this.ray.o,this.node.worldPosition),p.copy(this.direction,this.forwardNode.worldPosition),this.direction.subtract(this.node.worldPosition).normalize(),p.copy(this.ray.d,this.direction),this.hit=void 0,this.target=void 0,h.instance.raycastClosest(this.ray,this.mask,this.distance)&&(this.hit=h.instance.raycastClosestResult),void 0!==this.hit?(this.target=this.hit.collider.node,p.copy(this.endPosition,this.hit.hitPoint)):(p.copy(this.endPosition,this.node.worldPosition),p.scaleDirection(this.endPosition,this.direction,this.distance)),null==(t=this.rayLine)||t.setRayLine(this.node.worldPosition,this.endPosition)},t}(u)).prototype,"masks",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),k=t(b.prototype,"distance",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 300}}),z=t(b.prototype,"forwardNode",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=b))||P)||P));n._RF.pop()}}}));

System.register("chunks:///_virtual/init.ts",["./rollupPluginModLoBabelHelpers.js","cc","./game.ts","./res-cache.ts","./res-texture.ts"],(function(e){"use strict";var t,n,o,r,i,s,c,a,u,l,d,f,p;return{setters:[function(e){t=e.inheritsLoose,n=e.asyncToGenerator,o=e.regeneratorRuntime},function(e){r=e.cclegacy,i=e._decorator,s=e.sys,c=e.director,a=e.gfx,u=e.find,l=e.Component},function(e){d=e.Game},function(e){f=e.ResCache},function(e){p=e.loadTextures}],execute:function(){var v;r._RF.push({},"885d1c1vDFAQ6K2Z5YKUBpB","init",void 0);var h=i.ccclass;e("Init",h("Init")(v=function(e){function r(){return e.apply(this,arguments)||this}t(r,e);var i=r.prototype;return i.start=function(){var e;if(s.isBrowser&&(null==c||null==(e=c.root)?void 0:e.device.gfxAPI)==(null==a?void 0:a.API.WEBGL)){var t,r,i=null==(t=u("init"))||null==(r=t.getChildByName("canvas"))?void 0:r.getChildByName("ui_not_support");i&&(i.active=!0)}else c.addPersistRootNode(this.node),f.Instance.load(n(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.time("loadTextures"),e.next=3,p();case 3:console.timeEnd("loadTextures"),d.Instance.init();case 5:case"end":return e.stop()}}),e)}))))},i.update=function(e){d.Instance.update(e)},r}(l))||v);r._RF.pop()}}}));

System.register("chunks:///_virtual/input-base.ts",["./rollupPluginModLoBabelHelpers.js","cc","./actor-input.ts"],(function(t){"use strict";var n,o,r,e,u;return{setters:[function(t){n=t.inheritsLoose},function(t){o=t.cclegacy,r=t._decorator,e=t.Component},function(t){u=t.ActorInput}],execute:function(){var i;o._RF.push({},"10ebf5p0QNHLIIhxm8wLBu1","input-base",void 0);var c=r.ccclass;r.property,t("InputBase",c("InputBase")(i=function(t){function o(){for(var n,o=arguments.length,r=new Array(o),e=0;e<o;e++)r[e]=arguments[e];return(n=t.call.apply(t,[this].concat(r))||this)._actorInput=void 0,n}n(o,t);var r=o.prototype;return r.onStart=function(){},r.onEnd=function(){},r.onEnable=function(){var t;if(this._actorInput=null==(t=this.node.parent)?void 0:t.getComponent(u),void 0===this._actorInput||null===this._actorInput)throw new Error("Not find Actor Input. node is : "+this.node.name)},o}(e))||i);o._RF.pop()}}}));

System.register("chunks:///_virtual/input-equip-select.ts",["./rollupPluginModLoBabelHelpers.js","cc","./msg.ts","./util2.ts"],(function(t){"use strict";var e,n,c,i,r,s,o,u,h;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,c=t._decorator,i=t.Input,r=t.game,s=t.v2,o=t.Component},function(t){u=t.Msg},function(t){h=t.UtilVec2}],execute:function(){var a;n._RF.push({},"c944bVrbhJJYKLc8hW4dY45","input-equip-select",void 0);var p=c.ccclass;c.property,t("InputEquipSelect",p("InputEquipSelect")(a=function(t){function n(){for(var e,n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))||this).center=s(0,0),e.current=s(0,0),e.time_wait=.3,e}e(n,t);var c=n.prototype;return c.start=function(){this.node.on(i.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(i.EventType.MOUSE_MOVE,this.onMouseMove,this)},c.onTouchMove=function(t){this.center.x=r.canvas.width/2,this.center.y=r.canvas.height/2,h.c(this.current,t.getLocation()),this.current.subtract(this.center),u.emit("msg_select_equip",this.current.normalize())},c.onMouseMove=function(t){this.center.x=r.canvas.width/2,this.center.y=r.canvas.height/2,h.c(this.current,t.getLocation()),this.current.subtract(this.center),u.emit("msg_select_equip",this.current.normalize())},n}(o))||a);n._RF.pop()}}}));

System.register("chunks:///_virtual/input-gamepad.ts",["./rollupPluginModLoBabelHelpers.js","cc","./util2.ts","./input-base.ts","./msg.ts"],(function(t){"use strict";var e,n,a,o,i,u,s,p,c,r,_;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,a=t._decorator,o=t.input,i=t.Input,u=t.Vec3,s=t.v2,p=t.v3},function(t){c=t.UtilVec3},function(t){r=t.InputBase},function(t){_=t.Msg}],execute:function(){var l;n._RF.push({},"fb3b2deZNZGCKdwamug0YI8","input-gamepad",void 0);var h=a.ccclass;a.property,t("isGamePad",!1),t("InputGamepad",h("InputGamepad")(l=function(n){function a(){for(var t,e=arguments.length,a=new Array(e),o=0;o<e;o++)a[o]=arguments[o];return(t=n.call.apply(n,[this].concat(a))||this).offset_euler=-45,t.move_a=50,t.move_speed=50,t._v_increase_move=0,t._move=.1,t._dir=p(0,0,0),t._move_v3=p(0,0,0),t._key_count=0,t._curKeyJump=0,t._move_dir=p(0,0,0),t._isChangeEquips=!1,t._checkGamepadTime=2,t}e(a,n);var r=a.prototype;return r.start=function(){o.on(i.EventType.GAMEPAD_INPUT,this.onGamePad_Input,this),this.offset_euler*=Math.PI/180},r.onDestroy=function(){o.off(i.EventType.GAMEPAD_INPUT,this.onGamePad_Input,this)},r.onGamePad_Input=function(e){var n,a,o,i,u,s,p;this._checkGamepadTime=2,t("isGamePad",!0);var c=e.gamepad.leftStick.xAxis.getValue(),r=e.gamepad.leftStick.yAxis.getValue();this.onMove(c,-r);var _=e.gamepad.rightStick.xAxis.getValue(),l=e.gamepad.rightStick.yAxis.getValue();this.onRotation(5*_,5*l),e.gamepad.buttonR1.getValue()&&(null==(n=this._actorInput)||n.onFire()),e.gamepad.buttonR2.getValue()&&(null==(a=this._actorInput)||a.onJump());var h,m=e.gamepad.buttonL2.getValue();(null==(o=this._actorInput)||o.onRun(1===m),e.gamepad.buttonL1.getValue())&&(this._isChangeEquips=null==(h=this._actorInput)?void 0:h.onChangeEquips());e.gamepad.buttonEast.getValue()&&(null==(i=this._actorInput)||i.onReload()),e.gamepad.buttonWest.getValue()&&(null==(u=this._actorInput)||u.onCrouch()),e.gamepad.buttonSouth.getValue()&&(null==(s=this._actorInput)||s.onPick()),e.gamepad.buttonOptions.getValue()&&(null==(p=this._actorInput)||p.onPause())},r.onMove=function(t,e){this._dir.x=t,this._dir.z=e,this._dir.y=0,this.onUpdateMove()},r.onUpdateMove=function(){var t;c.copy(this._move_v3,this._dir),u.rotateY(this._move_v3,this._move_v3,u.ZERO,this.offset_euler),0!==this._move_v3.length()&&c.copy(this._move_dir,this._move_v3),null==(t=this._actorInput)||t.onMove(this._move_v3)},r.onRotation=function(t,e){var n;if(this._isChangeEquips)return console.log("select_equip",t,e),void _.emit("msg_select_equip",s(t,e));null==(n=this._actorInput)||n.onRotation(t,-e)},r.update=function(e){this._checkGamepadTime-=e,this._checkGamepadTime<0&&t("isGamePad",!1)},a}(r))||l);n._RF.pop()}}}));

System.register("chunks:///_virtual/input-handle.ts",["cc","./msg.ts","./res.ts"],(function(n){"use strict";var t,e,c,o;return{setters:[function(n){t=n.cclegacy,e=n._decorator},function(n){c=n.Msg},function(n){o=n.Res}],execute:function(){t._RF.push({},"e30c9OgNPRNCLLrcSW0pXy/","input-handle",void 0);e.ccclass,e.property;n("InputHandle",function(){function n(){}return n.Init=function(){var n=this;o.loadJson("data/input",(function(t,e){e&&(n._map=e.json,console.log(n._map))}))},n.create=function(n){},n.do=function(n,t,e){var o=t+this._map[n];o?c.emit(o,e):console.log("Not defined key"+n)},n}())._map=Object.create(null),t._RF.pop()}}}));

System.register("chunks:///_virtual/input-joystick.ts",["./rollupPluginModLoBabelHelpers.js","cc","./input-base.ts","./msg.ts","./actor-input.ts"],(function(n){"use strict";var t,o,i,u,r,s,c;return{setters:[function(n){t=n.inheritsLoose},function(n){o=n.cclegacy,i=n._decorator,u=n.v2},function(n){r=n.InputBase},function(n){s=n.Msg},function(n){c=n.ActorInput}],execute:function(){var e;o._RF.push({},"18624mKwZVJ0KxnPlwKvPlx","input-joystick",void 0);var a=i.ccclass;i.property,n("InputJoystick",a("InputJoystick")(e=function(n){function o(){for(var t,o=arguments.length,i=new Array(o),u=0;u<o;u++)i[u]=arguments[u];return(t=n.call.apply(n,[this].concat(i))||this)._isRun=!1,t._isChangeEquips=!1,t}t(o,n);var i=o.prototype;return i.start=function(){this.node.on("onAutoFireStart",this.onAutoFireStart,this),this.node.on("onAutoFireEnd",this.onAutoFireEnd,this)},i.onEnable=function(){this._actorInput=c.inst},i.onDestroy=function(){this.node.on("onAutoFireStart",this.onAutoFireStart,this),this.node.on("onAutoFireEnd",this.onAutoFireEnd,this)},i.onChangeEquips=function(){s.emit("push","select_equips")},i.onMove=function(n){var t;null==(t=this._actorInput)||t.onMove(n)},i.onFire=function(){var n;null==(n=this._actorInput)||n.onFire()},i.onAutoFireStart=function(){var n;null==(n=this._actorInput)||n.onAutoFire(!0)},i.onAutoFireEnd=function(){var n;null==(n=this._actorInput)||n.onAutoFire(!1)},i.onFireStart=function(){},i.onFireEnd=function(){},i.onJump=function(){var n;null==(n=this._actorInput)||n.onJump()},i.onCrouch=function(){var n;null==(n=this._actorInput)||n.onCrouch()},i.onProne=function(){},i.onAim=function(){var n;null==(n=this._actorInput)||n.onAim(void 0)},i.onPick=function(){var n;null==(n=this._actorInput)||n.onPick()},i.onDrop=function(){var n;null==(n=this._actorInput)||n.onDrop()},i.onReload=function(){var n;null==(n=this._actorInput)||n.onReload()},i.onRun=function(){var n;this._isRun=!this._isRun,null==(n=this._actorInput)||n.onRun(this._isRun)},i.onPause=function(){s.emit("push","level_pause")},i.onSetRun=function(n){var t;this._isRun=n,null==(t=this._actorInput)||t.onRun(n)},i.onRotation=function(n,t){var o;this._isChangeEquips?s.emit("msg_select_equip",u(n,t)):null==(o=this._actorInput)||o.onRotation(n/5,-t/5)},o}(r))||e);o._RF.pop()}}}));

System.register("chunks:///_virtual/input-keyboard.ts",["./rollupPluginModLoBabelHelpers.js","cc","./msg.ts","./input-base.ts","./fun.ts","./level.ts","./game-set.ts"],(function(e){"use strict";var t,n,o,i,s,r,c,a,_,u,d,h,y,l;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,o=e._decorator,i=e.input,s=e.Input,r=e.game,c=e.KeyCode,a=e.math,_=e.v3},function(e){u=e.Msg},function(e){d=e.InputBase},function(e){h=e.fun},function(e){y=e.Level},function(e){l=e.GameSet}],execute:function(){var p;n._RF.push({},"c8c234sRQdFvKt/kPSa5Xg0","input-keyboard",void 0);var E=o.ccclass;o.property,e("InputKeyboard",E("InputKeyboard")(p=function(e){function n(){for(var t,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))||this).move_a=50,t.move_speed=50,t._dir=_(0,0,0),t.key_count=0,t._pressQ=!1,t.direction_up=0,t.direction_down=0,t.direction_left=0,t.direction_right=0,t._isPause=!1,t.accelerateRotation=0,t.pre_mouse_time=0,t.pre_info="",t}t(n,e);var o=n.prototype;return o.start=function(){i.on(s.EventType.KEY_DOWN,this.onKeyDown,this),i.on(s.EventType.KEY_UP,this.onKeyUp,this),i.on(s.EventType.MOUSE_DOWN,this.onMouseDown,this),i.on(s.EventType.MOUSE_UP,this.onMouseUp,this),i.on(s.EventType.MOUSE_MOVE,this.onMouseMove,this),document.addEventListener("pointerlockchange",this.onPointerChange,!1)},o.onPointerChange=function(){document.pointerLockElement===r.canvas||h.delay((function(){}),2)},o.onDestroy=function(){i.off(s.EventType.KEY_DOWN,this.onKeyDown,this),i.off(s.EventType.KEY_UP,this.onKeyUp,this),i.off(s.EventType.MOUSE_DOWN,this.onMouseDown,this),i.off(s.EventType.MOUSE_MOVE,this.onMouseMove,this),document.removeEventListener("pointerlockchange",this.onPointerChange,!1)},o.hasKey=function(e){return e.keyCode===c.KEY_W||e.keyCode===c.KEY_S||e.keyCode===c.KEY_A||e.keyCode===c.KEY_D||e.keyCode===c.KEY_E||e.keyCode===c.KEY_G||e.keyCode===c.KEY_Q||e.keyCode===c.KEY_C||e.keyCode===c.KEY_N||e.keyCode===c.KEY_R||e.keyCode===c.SPACE||e.keyCode===c.ARROW_UP||e.keyCode===c.ARROW_LEFT||e.keyCode===c.ARROW_RIGHT||e.keyCode===c.ARROW_DOWN||e.keyCode===c.SHIFT_LEFT||e.keyCode===c.ESCAPE||e.keyCode===c.KEY_T},o.onKeyDown=function(e){var t,n,o,i,s,r,a;if(y.Instance.stop)this.clear();else if(this.hasKey(e)){var _;if(this.key_count++,e.keyCode!==c.KEY_W&&e.keyCode!==c.ARROW_UP||(this.direction_up=1),e.keyCode!==c.KEY_S&&e.keyCode!==c.ARROW_DOWN||(this.direction_down=-1),e.keyCode!==c.KEY_A&&e.keyCode!==c.ARROW_LEFT||(this.direction_left=1),e.keyCode!==c.KEY_D&&e.keyCode!==c.ARROW_RIGHT||(this.direction_right=-1),e.keyCode===c.KEY_Q)null==(_=this._actorInput)||_.onChangeEquips(),document.exitPointerLock();e.keyCode===c.SPACE&&(null==(t=this._actorInput)||t.onJump()),e.keyCode===c.KEY_C&&(null==(n=this._actorInput)||n.onCrouch()),e.keyCode===c.KEY_N&&(null==(o=this._actorInput)||o.onAim(void 0)),e.keyCode===c.KEY_E&&(null==(i=this._actorInput)||i.onPick()),e.keyCode===c.KEY_G&&(null==(s=this._actorInput)||s.onDrop()),e.keyCode===c.KEY_R&&(null==(r=this._actorInput)||r.onReload()),e.keyCode===c.SHIFT_LEFT&&(null==(a=this._actorInput)||a.onRun(!0)),e.keyCode===c.KEY_T&&u.emit("msg_change_tps_camera_target",2)}},o.onKeyUp=function(e){var t;if(y.Instance.stop)this.clear();else{if(0===e.keyCode||this.key_count<=0)return this._pressQ=!1,void this.clear();var n;if(this.hasKey(e))if(this.key_count--,e.keyCode!==c.KEY_W&&e.keyCode!==c.ARROW_UP||(this.direction_up=0),e.keyCode!==c.KEY_S&&e.keyCode!==c.ARROW_DOWN||(this.direction_down=0),e.keyCode!==c.KEY_A&&e.keyCode!==c.ARROW_LEFT||(this.direction_left=0),e.keyCode!==c.KEY_D&&e.keyCode!==c.ARROW_RIGHT||(this.direction_right=0),e.keyCode===c.SHIFT_LEFT&&(null==(t=this._actorInput)||t.onRun(!1)),e.keyCode===c.ESCAPE)null==(n=this._actorInput)||n.onPause()}},o.onMouseDown=function(e){var t,n;y.Instance.stop?this.clear():0===e.getButton()&&(null==(t=this._actorInput)||t.onAutoFire(!0),null==(n=this._actorInput)||n.onFire())},o.onMouseUp=function(e){var t;0===e.getButton()&&(null==(t=this._actorInput)||t.onAutoFire(!1))},o.onMouseMove=function(e){var t;if(y.Instance.stop)this.clear();else{var n=e.movementX/r.canvas.width*l.Instance.screen_to_angle,o=e.movementY/r.canvas.width*l.Instance.screen_to_angle,i=Math.sqrt(n*n+o*o),s=0;i>l.Instance.accelerate_point&&(s=i);for(var c=0,_=l.Instance.move_value_list,u=0;u<_.length&&(c=u,!(i<=_[u]));u++);var d=l.Instance.move_accelerate_list[c],h=l.Instance.sensitivity;this.accelerateRotation=a.lerp(this.accelerateRotation,d,10*r.deltaTime);var p=3*l.Instance.sensitivity_a*this.accelerateRotation,E=n*(1+h*s)*p,k=o*(1+h*s)*p;null==(t=this._actorInput)||t.onRotation(E,k)}},o.onMove=function(){var e;this._dir.x=this.direction_left+this.direction_right,this._dir.z=this.direction_up+this.direction_down,this._dir.y=0,null==(e=this._actorInput)||e.onMove(this._dir.normalize())},o.clear=function(){this.direction_up=0,this.direction_down=0,this.direction_left=0,this.direction_right=0},o.update=function(e){this.onMove()},n}(d))||p);n._RF.pop()}}}));

System.register("chunks:///_virtual/input-mouse.ts",["./rollupPluginModLoBabelHelpers.js","cc","./input-base.ts"],(function(t){"use strict";var e,n,o,s,i,r,a,c,u,h,l,p,y,T,_;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,s=t.assertThisInitialized},function(t){i=t.cclegacy,r=t._decorator,a=t.geometry,c=t.v2,u=t.find,h=t.Camera,l=t.input,p=t.Input,y=t.director,T=t.PhysicsSystem},function(t){_=t.InputBase}],execute:function(){var f,v,C;i._RF.push({},"9a0e8C1duBAC7rsIaBb8EZe","input-mouse",void 0);var E=r.ccclass,d=r.property;t("InputMouse",E("InputMouse")((C=e((v=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))||this)._ray=new a.Ray,e._screenPos=c(0,0),e._camera=Object.create(null),o(e,"mask_group",C,s(e)),e}n(e,t);var i=e.prototype;return i.start=function(){var t=u("camera_controller");t?this._camera=t.children[0].children[0].getComponent(h):console.warn("Can not find camera-controller."),l.on(p.EventType.MOUSE_MOVE,this.onMouseMove,this),l.on(p.EventType.TOUCH_MOVE,this.onTouchMove,this),l.on(p.EventType.TOUCH_START,this.onTouchStart,this),l.on(p.EventType.TOUCH_END,this.onTouchEnd,this),l.on(p.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},i.onDestroy=function(){l.off(p.EventType.MOUSE_MOVE,this.onMouseMove,this),l.off(p.EventType.TOUCH_MOVE,this.onTouchMove,this),l.off(p.EventType.TOUCH_START,this.onTouchStart,this),l.off(p.EventType.TOUCH_END,this.onTouchEnd,this),l.off(p.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},i.onTouchStart=function(t){},i.onTouchMove=function(t){var e=1<<this.mask_group;t.getLocation(this._screenPos);var n=y.root.pipeline.pipelineSceneData.shadingScale;if(this._camera.screenPointToRay(this._screenPos.x*n,this._screenPos.y*n,this._ray),T.instance.raycastClosest(this._ray,e,100)){var o=T.instance.raycastClosestResult,s=o.hitPoint;s.subtract(o.collider.node.worldPosition),s.y=0}},i.onMouseMove=function(t){var e=1<<this.mask_group;t.getLocation(this._screenPos);var n=y.root.pipeline.pipelineSceneData.shadingScale;if(this._camera.screenPointToRay(this._screenPos.x*n,this._screenPos.y*n,this._ray),T.instance.raycastClosest(this._ray,e,100)){var o=T.instance.raycastClosestResult,s=o.hitPoint;s.subtract(o.collider.node.worldPosition),s.y=0}},i.onTouchEnd=function(t){},i.onTouchCancel=function(t){},e}(_)).prototype,"mask_group",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),f=v))||f);i._RF.pop()}}}));

System.register("chunks:///_virtual/input-pointer-lock.ts",["./rollupPluginModLoBabelHelpers.js","cc","./fun.ts"],(function(n){"use strict";var o,t,e,i,c,r,u,s,p;return{setters:[function(n){o=n.inheritsLoose},function(n){t=n.cclegacy,e=n._decorator,i=n.input,c=n.Input,r=n.game,u=n.KeyCode,s=n.Component},function(n){p=n.fun}],execute:function(){var a;t._RF.push({},"cd5bdYQYg9MhL56D3JEXVzi","input-pointer-lock",void 0);var l=e.ccclass,h=(e.property,n("_pointerLock",!1));n("InputPointerLock",l("InputPointerLock")(a=function(t){function e(){return t.apply(this,arguments)||this}o(e,t);var s=e.prototype;return s.start=function(){document.addEventListener("pointerlockchange",this.onPointerChange,!1),i.on(c.EventType.MOUSE_DOWN,this.onMouseDown,this),i.on(c.EventType.KEY_DOWN,this.onKeyDown,this)},s.onDestroy=function(){document.removeEventListener("pointerlockchange",this.onPointerChange,!1),i.on(c.EventType.MOUSE_DOWN,this.onMouseDown,this)},s.onPointerChange=function(){document.pointerLockElement===r.canvas?h=n("_pointerLock",!0):p.delay((function(){h=n("_pointerLock",!1)}),2)},s.onMouseDown=function(n){if(h);else try{var o,t;if(null!=(o=r.canvas)&&o.requestPointerLock)null==(t=r.canvas)||t.requestPointerLock()}catch(n){console.warn(n)}},s.onKeyDown=function(n){n.keyCode===u.ESCAPE&&document.exitPointerLock()},e}(s))||a);t._RF.pop()}}}));

System.register("chunks:///_virtual/io.ts",["cc"],(function(e){"use strict";var t,r,n;return{setters:[function(e){t=e.cclegacy,r=e.sys,n=e.native}],execute:function(){t._RF.push({},"e106frdmmZD3ZGChb73ZwRV","io",void 0);e("IO",function(){function e(){}return e.getNum=function(e){var t=this.read(e);if(-1===t.search("."))var r=Number.parseInt(t);else r=Number.parseFloat(t);return r||(r=0),r},e.write=function(e,t){try{r.isNative?n.fileUtils.writeStringToFile(t,e):r.localStorage.setItem(e,t)}catch(e){console.error("can not write:",e)}},e.read=function(e){try{return r.isNative?n.fileUtils.getStringFromFile(e):r.localStorage.getItem(e)}catch(e){return console.error(e),""}},e.delete=function(e){r.localStorage.removeItem(e)},e.exist=function(e){var t=r.localStorage.getItem(e);return t&&t.length>0},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/joystick-auto-hidden.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(i){"use strict";var t,e,o,r,a,n,s,h,l,d;return{setters:[function(i){t=i.applyDecoratedDescriptor,e=i.inheritsLoose,o=i.initializerDefineProperty,r=i.assertThisInitialized},function(i){a=i.cclegacy,n=i._decorator,s=i.Color,h=i.SpriteComponent,l=i.math,d=i.Component}],execute:function(){var c,_,u,p,y;a._RF.push({},"0b7ffMiqihGxIrMWmSyto/F","joystick-auto-hidden",void 0);var f=n.ccclass,m=n.property;i("JoystickAutoHidden",f("JoystickAutoHidden")((u=t((_=function(i){function t(){for(var t,e=arguments.length,a=new Array(e),n=0;n<e;n++)a[n]=arguments[n];return t=i.call.apply(i,[this].concat(a))||this,o(t,"smooth",u,r(t)),o(t,"hidden_delay_time",p,r(t)),o(t,"hidden_alpha",y,r(t)),t._color=new s(0,0,0,1),t._isHidden=!1,t._sprite=void 0,t._alpha=255,t._cur_alpha=255,t._delay=0,t}e(t,i);var a=t.prototype;return a.start=function(){this._sprite=this.getComponent(h),this.node.on("autoHidden",this.autoHidden,this),this._delay=this.hidden_delay_time,this._cur_alpha=this.hidden_alpha,this._color.a=this._cur_alpha,this._sprite.color=this._color},a.update=function(i){this._delay-=i,this._delay<0&&(this._cur_alpha=l.lerp(this._cur_alpha,this._alpha,i*this.smooth),this._color.a=this._cur_alpha,this._sprite.color=this._color)},a.autoHidden=function(i){this._isHidden=i,this._alpha=this._isHidden?this.hidden_alpha:255,this._delay=this._isHidden?this.hidden_delay_time:0},t}(d)).prototype,"smooth",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),p=t(_.prototype,"hidden_delay_time",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),y=t(_.prototype,"hidden_alpha",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),c=_))||c);a._RF.pop()}}}));

System.register("chunks:///_virtual/joystick-move.ts",["./rollupPluginModLoBabelHelpers.js","cc","./input-joystick.ts","./ui.ts","./util2.ts","./fun.ts"],(function(t){"use strict";var o,i,e,n,s,r,c,h,u,a,l,d,p,_,v,f,T;return{setters:[function(t){o=t.applyDecoratedDescriptor,i=t.inheritsLoose,e=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,r=t._decorator,c=t.CCFloat,h=t.CCBoolean,u=t.Node,a=t.v3,l=t.Input,d=t.Vec3,p=t.Component},function(t){_=t.InputJoystick},function(t){v=t.UI},function(t){f=t.UtilVec3},function(t){T=t.fun}],execute:function(){var m,y,C,M,b,E,g,H,w,P,N,O,S;s._RF.push({},"24d580ji/hED5jwcnONfUEr","joystick-move",void 0);var z=r.ccclass,U=r.property;t("JoystickMove",(m=z("JoystickMove"),y=U(c),C=U(c),M=U(h),b=U(c),E=U(u),m((w=o((H=function(t){function o(){for(var o,i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return o=t.call.apply(t,[this].concat(s))||this,e(o,"radius",w,n(o)),e(o,"smooth",P,n(o)),e(o,"autoHidden",N,n(o)),e(o,"runRadius",O,n(o)),o._pos=a(0,0,0),o._movePos=a(0,0,0),o._tempMove=a(0,0,0),o._moveNode=void 0,o._bgNode=void 0,o._input=void 0,o.ui_camera=void 0,o.screenVec3=a(0,0,0),o.screenCenter=a(0,0,0),o.worldPosition=a(0,0,0),o.isStart=!1,e(o,"nodeTestCenter",S,n(o)),o}i(o,t);var s=o.prototype;return s.start=function(){var t=this;this._input=this.node.parent.getComponent(_),this._bgNode=this.node.children[0],this._moveNode=this._bgNode.children[0],this.node.on(l.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(l.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(l.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(l.EventType.TOUCH_CANCEL,this.onTouchCancel,this),this.ui_camera=v.Instance.camera,T.delay((function(){f.copy(t._pos,t.node.worldPosition)}),1)},s.onDestroy=function(){this.node.off(l.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.off(l.EventType.TOUCH_START,this.onTouchStart,this),this.node.off(l.EventType.TOUCH_END,this.onTouchEnd,this),this.node.off(l.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},s.onTouchStart=function(t){var o;this.isStart=!0,null==(o=this.ui_camera)||o.worldToScreen(this.node.worldPosition,this.screenCenter),this.calculateMoveDirection(t),this.autoHidden&&this.node.emit("autoHidden",!1)},s.onTouchMove=function(t){this.calculateMoveDirection(t)},s.onTouchEnd=function(t){this.cancelTouch(t)},s.onTouchCancel=function(t){this.cancelTouch(t)},s.calculateMoveDirection=function(t){var o,i,e;this.isStart=!1,this._pos.x=t.getLocationX(),this._pos.y=t.getLocationY(),this.screenVec3.x=this._pos.x,this.screenVec3.y=this._pos.y,null==(o=this.ui_camera)||o.screenToWorld(this.screenVec3,this._pos),this._pos.subtract(this.node.worldPosition),this._pos.z=0;var n=this._pos.length(),s=n>this.runRadius;n>this.radius&&this._pos.normalize().multiplyScalar(this.radius),f.copy(this._tempMove,this._pos),this._tempMove.z=this._tempMove.y,this._tempMove.y=0,this._tempMove.x=-this._tempMove.x,null==(i=this._input)||i.onSetRun(s),null==(e=this._input)||e.onMove(this._tempMove.normalize()),this._pos.add(this.node.worldPosition)},s.cancelTouch=function(t){var o;f.copy(this._pos,this.node.worldPosition),null==(o=this._input)||o.onMove(d.ZERO),this.autoHidden&&this.node.emit("autoHidden",!0)},s.update=function(t){d.lerp(this._movePos,this._movePos,this._pos,t*this.smooth),this._moveNode.setWorldPosition(this._movePos.x,this._movePos.y,0)},o}(p)).prototype,"radius",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 20}}),P=o(H.prototype,"smooth",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),N=o(H.prototype,"autoHidden",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),O=o(H.prototype,"runRadius",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 80}}),S=o(H.prototype,"nodeTestCenter",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=H))||g));s._RF.pop()}}}));

System.register("chunks:///_virtual/joystick-pad-action.ts",["./rollupPluginModLoBabelHelpers.js","cc","./input-joystick.ts"],(function(t){"use strict";var n,i,o,e,s,r,c,a,u,h;return{setters:[function(t){n=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,e=t.assertThisInitialized},function(t){s=t.cclegacy,r=t._decorator,c=t.Node,a=t.Input,u=t.Component},function(t){h=t.InputJoystick}],execute:function(){var l,p,d,T,f,y,v;s._RF.push({},"687899l+uVAiptGTPqXPzBE","joystick-pad-action",void 0);var g=r.ccclass,C=r.property;t("JoystickPadAction",(l=g("JoystickPadAction"),p=C(c),l((f=n((T=function(t){function n(){for(var n,i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return(n=t.call.apply(t,[this].concat(s))||this)._input=void 0,o(n,"actionNode",f,e(n)),o(n,"startMsg",y,e(n)),o(n,"endMsg",v,e(n)),n}i(n,t);var s=n.prototype;return s.start=function(){this._input=this.node.parent.getComponent(h),this.node.on(a.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(a.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(a.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},s.onDestroy=function(){this.node.off(a.EventType.TOUCH_START,this.onTouchStart,this),this.node.off(a.EventType.TOUCH_END,this.onTouchEnd,this),this.node.off(a.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},s.onTouchStart=function(t){var n;null==(n=this.actionNode)||n.emit(this.startMsg)},s.onTouchEnd=function(t){var n;null==(n=this.actionNode)||n.emit(this.endMsg)},s.onTouchCancel=function(t){var n;null==(n=this.actionNode)||n.emit(this.endMsg)},n}(u)).prototype,"actionNode",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=n(T.prototype,"startMsg",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),v=n(T.prototype,"endMsg",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),d=T))||d));s._RF.pop()}}}));

System.register("chunks:///_virtual/joystick-pad.ts",["./rollupPluginModLoBabelHelpers.js","cc","./input-joystick.ts"],(function(t){"use strict";var n,o,i,e,s,c;return{setters:[function(t){n=t.inheritsLoose},function(t){o=t.cclegacy,i=t._decorator,e=t.Input,s=t.Component},function(t){c=t.InputJoystick}],execute:function(){var u;o._RF.push({},"2bb7cW4fCdAULC7mgJUMf+s","joystick-pad",void 0);var h=i.ccclass;i.property,t("JoystickPad",h("JoystickPad")(u=function(t){function o(){for(var n,o=arguments.length,i=new Array(o),e=0;e<o;e++)i[e]=arguments[e];return(n=t.call.apply(t,[this].concat(i))||this)._input=void 0,n}n(o,t);var i=o.prototype;return i.start=function(){this._input=this.node.parent.getComponent(c),this.node.on(e.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(e.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(e.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},i.onDestroy=function(){this.node.off(e.EventType.TOUCH_START,this.onTouchStart,this),this.node.off(e.EventType.TOUCH_END,this.onTouchEnd,this),this.node.off(e.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},i.onTouchStart=function(t){var n;null==(n=this._input)||n.onStart()},i.onTouchEnd=function(t){var n;null==(n=this._input)||n.onEnd()},i.onTouchCancel=function(t){var n;null==(n=this._input)||n.onEnd()},o}(s))||u);o._RF.pop()}}}));

System.register("chunks:///_virtual/joystick.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){"use strict";var o,t,e,i,s,u,c;return{setters:[function(n){o=n.inheritsLoose},function(n){t=n.cclegacy,e=n._decorator,i=n.input,s=n.Input,u=n.KeyCode,c=n.Component}],execute:function(){var h;t._RF.push({},"7bcedQquhRN4Kxy9y2GprTy","joystick",void 0);var p=e.ccclass;e.property,n("Joystick",p("Joystick")(h=function(n){function t(){return n.apply(this,arguments)||this}o(t,n);var e=t.prototype;return e.start=function(){i.on(s.EventType.KEY_DOWN,this.onKeyDown,this),i.on(s.EventType.KEY_PRESSING,this.onKeyPRESSING,this),i.on(s.EventType.KEY_UP,this.onKeyUp,this),i.on(s.EventType.TOUCH_START,this.onTouchStart,this),i.on(s.EventType.TOUCH_MOVE,this.onTouchMove,this),i.on(s.EventType.TOUCH_END,this.onTouchEnd,this),i.on(s.EventType.TOUCH_CANCEL,this.onTouchCancel,this),i.on(s.EventType.MOUSE_DOWN,this.onMouseDown,this),i.on(s.EventType.MOUSE_MOVE,this.onMouseMove,this),i.on(s.EventType.MOUSE_UP,this.onMouseUp,this),i.on(s.EventType.MOUSE_WHEEL,this.onMouseWheel,this)},e.onKeyDown=function(n){},e.onKeyPRESSING=function(n){n.keyCode===u.KEY_A&&console.log("press right.")},e.onKeyUp=function(n){},e.onTouchStart=function(n){},e.onTouchMove=function(n){},e.onTouchEnd=function(n){},e.onTouchCancel=function(n){},e.onMouseDown=function(n){},e.onMouseUp=function(n){},e.onMouseMove=function(n){},e.onMouseWheel=function(n){},t}(c))||h);t._RF.pop()}}}));

System.register("chunks:///_virtual/joytick-pad-rotation.ts",["./rollupPluginModLoBabelHelpers.js","cc","./input-joystick.ts","./game-set.ts"],(function(t){"use strict";var e,n,o,a,i,c,s,r,u;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator,a=t.Input,i=t.game,c=t.math,s=t.Component},function(t){r=t.InputJoystick},function(t){u=t.GameSet}],execute:function(){var l;n._RF.push({},"6e538WBquZPtId6BFLtJSuY","joytick-pad-rotation",void 0);var h=o.ccclass;o.property,t("JoystickPadRotation",h("JoystickPadRotation")(l=function(t){function n(){for(var e,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))||this)._input=void 0,e.accelerateRotation=0,e}e(n,t);var o=n.prototype;return o.start=function(){this._input=this.node.parent.getComponent(r),this.node.on(a.EventType.TOUCH_MOVE,this.onTouchMove,this)},o.onDestroy=function(){this.node.off(a.EventType.TOUCH_MOVE,this.onTouchMove,this)},o.onTouchMove=function(t){var e,n=t.getDeltaX(),o=t.getDeltaY(),a=n/i.canvas.width*u.Instance.screen_to_angle,s=o/i.canvas.width*u.Instance.screen_to_angle,r=Math.sqrt(a*a+s*s);r<u.Instance.accelerate_point&&(r=0);for(var l=0,h=u.Instance.move_value_list,p=0;p<h.length&&(l=p,!(r<=h[p]));p++);var v=u.Instance.move_accelerate_list[l],_=u.Instance.sensitivity;this.accelerateRotation=c.lerp(this.accelerateRotation,v,10*i.deltaTime);var y=3*u.Instance.sensitivity_a*this.accelerateRotation,d=a*(1+_*r)*y*v,f=s*(1+_*r)*y*v;null==(e=this._input)||e.onRotation(d,f)},n}(s))||l);n._RF.pop()}}}));

System.register("chunks:///_virtual/json-tool.ts",["cc","./io.ts"],(function(t){"use strict";var o,n,c;return{setters:[function(t){o=t.cclegacy,n=t._decorator},function(t){c=t.IO}],execute:function(){o._RF.push({},"bfdd55zDUFPpaXKohsj6Zp5","json-tool",void 0);n.ccclass,n.property,t("JsonTool",function(){function t(){}return t.toJson=function(t){return JSON.stringify(t)},t.toObject=function(t){return JSON.parse(t)},t.toIOObject=function(t){var o=c.read(t+".json");if(o)return this.toObject(o)},t}());o._RF.pop()}}}));

System.register("chunks:///_virtual/jump-points.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var n,s,i,o,e;return{setters:[function(t){n=t.inheritsLoose},function(t){s=t.cclegacy,i=t._decorator,o=t.Label,e=t.Component}],execute:function(){var r;s._RF.push({},"4af39CWanhGFL/xf/7yKj0K","jump-points",void 0);var p=i.ccclass;i.property,t("JumpPoints",p("JumpPoints")(r=function(t){function s(){for(var n,s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return(n=t.call.apply(t,[this].concat(i))||this).label=void 0,n.real_points=0,n.cur_points=0,n.speed=0,n.a=1,n.str="",n}n(s,t);var i=s.prototype;return i.onEnable=function(){var t=this;if(this.label=this.node.getComponent(o),null===this.label)throw new Error("Jump Points not get component Label.");this.node.on("set_points",(function(n,s){void 0===s&&(s="s"),t.str=s,t.cur_points=0,t.real_points=n,t.speed=0,t.a=1}))},i.update=function(t){if(this.cur_points<this.real_points){this.speed+=this.a,this.cur_points+=t*this.speed,this.cur_points>this.real_points&&(this.cur_points=this.real_points);Math.ceil(this.cur_points)}},s}(e))||r);s._RF.pop()}}}));

System.register("chunks:///_virtual/level-enable-play.ts",["./rollupPluginModLoBabelHelpers.js","cc","./game.ts"],(function(e){"use strict";var n,t,o,l,a,r;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy,o=e._decorator,l=e.animation,a=e.Component},function(e){r=e.Game}],execute:function(){var c;t._RF.push({},"35054lAYt9Fs5f8M2SOWyBv","level-enable-play",void 0);var i=o.ccclass;o.property,e("LevelEnablePlay",i("LevelEnablePlay")(c=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t.prototype.onEnable=function(){"level"!==r.Instance._currentGameNodeName&&(this.node.getComponent(l.AnimationController).enabled=!1)},t}(a))||c);t._RF.pop()}}}));

System.register("chunks:///_virtual/level-events-card.ts",["./rollupPluginModLoBabelHelpers.js","cc","./msg.ts","./data-core.ts","./local.ts","./level.ts"],(function(t){"use strict";var e,r,a,n,i,o,s,c,l,u,h,d;return{setters:[function(t){e=t.inheritsLoose},function(t){r=t.cclegacy,a=t._decorator,n=t.randomRange,i=t.random,o=t.randomRangeInt,s=t.Component},function(t){c=t.Msg},function(t){l=t.DataLevelInst,u=t.DataUpgradeCardInst},function(t){h=t.Local},function(t){d=t.Level}],execute:function(){var v;r._RF.push({},"c1692vIathJmq4qFvm5lNbJ","level-events-card",void 0);var _=a.ccclass;a.property,t("LevelEventsCard",_("LevelEventsCard")(v=function(t){function r(){for(var e,r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return(e=t.call.apply(t,[this].concat(a))||this)._interval=.1,e.probability=void 0,e.counter=0,e.groupCounter=void 0,e.currentCards=new Array(3),e.nextCounter=2,e.counterCard=0,e}e(r,t);var a=r.prototype;return a.start=function(){this.probability=l._data.probability_drop_card,this.groupCounter=new Array(l._data.cards.length),this._interval=n(this.probability.interval[0],this.probability.interval[1]),this.nextCounter=u._data.next_show_card_param_a,c.on("msg_kill_enemy",this.checkNextEvent.bind(this))},a.onDestroy=function(){c.off("msg_kill_enemy",this.checkNextEvent.bind(this))},a.nextEvent=function(){this.counterCard++,this.nextCounter+=u._data.next_show_card_param_a*u._data.next_show_card_param_b;for(var t=i(),e=this.probability.weights,r=-1,a=0;a<e.length;a++)if(t<=e[a]){r=a;break}if(-1===r)throw new Error("Error calculate weight level events card. value:"+t);if(this.groupCounter[r]>=this.probability.weights_max[r])this._interval=this.probability.interval_weight_max;else{for(var n=l._data.cards,o=0;o<n.length;o++)3!==o&&(this.currentCards[o]={name:n[o],info:this.calculateCardInfo(n[o])});d.Instance.currentCards=this.currentCards,console.log("Current cards:",this.currentCards),c.emit("push","upgrade_cards"),this.counter++,this.groupCounter[r]++}},a.calculateCardInfo=function(t){for(var e=u._data[t],r=e[o(0,e.length)],a=r.values.length,n=new Array(a),i=h.Instance.get(r.describe),s=0;s<a;s++){var c=r.values[s],l=this.calculateRange(c.isFloat,c.range),d=c.isFloat?100*l+" %":""+l;i=i.replace("##"+s+"##",d),n[s]={name:c.name,isFloat:c.isFloat,value:l}}return{describe:i,values:n}},a.calculateRange=function(t,e){if(2!==e.length)return 0;var r=t?n(e[0],e[1]):o(e[0],e[1]);return t&&(r=Number(r.toFixed(2))),r},a.checkNextEvent=function(t){t>this.nextCounter&&this.nextEvent()},r}(s))||v);r._RF.pop()}}}));

System.register("chunks:///_virtual/level-events-enemy.ts",["./rollupPluginModLoBabelHelpers.js","cc","./msg.ts","./level.ts","./data-core.ts"],(function(e){"use strict";var t,i,n,r,o,s,a,l,u;return{setters:[function(e){t=e.inheritsLoose},function(e){i=e.cclegacy,n=e._decorator,r=e.randomRange,o=e.random,s=e.Component},function(e){a=e.Msg},function(e){l=e.Level},function(e){u=e.DataLevelInst}],execute:function(){var h;i._RF.push({},"272c7kqXmNH0IWBGDY3RmXm","level-events-enemy",void 0);var v=n.ccclass;e("LevelEventsEnemy",v("LevelEventsEnemy")(h=function(e){function i(){for(var t,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this)._interval=.1,t.probability=void 0,t.counter=0,t.groupCounter=void 0,t.killCounter=0,t}t(i,e);var n=i.prototype;return n.start=function(){this.probability=u._data.probability_drop_enemy,globalThis.HrefSetting&&(this.probability.max=globalThis.HrefSetting.maxEnemies),this.groupCounter=new Array(u._data.enemies.length);for(var e=0;e<u._data.enemies.length;e++)this.groupCounter[e]=0;this._interval=r(this.probability.interval[0],this.probability.interval[1]),a.on("msg_remove_enemy",this.remove.bind(this))},n.onDestroy=function(){a.off("msg_remove_enemy",this.remove.bind(this))},n.generateEvent=function(){if(!(this.counter-this.killCounter>=this.probability.max)){for(var e=o(),t=this.probability.weights,i=-1,n=0;n<t.length;n++)if(e<=t[n]){i=n;break}if(-1===i)throw new Error("Error calculate weight on Level events enemy. value:"+e);if(this.groupCounter[i]>=this.probability.weights_max[i])this._interval=this.probability.interval_weight_max;else{var r=this.probability.weights_group[i],s=u._data.enemies[r];a.emit("msg_add_enemy",{res:s,groupID:i}),this.counter++,this.groupCounter[i]++,"boss_0"==s&&a.emit("level_action","warning")}}},n.remove=function(e){if(this.killCounter++,this.groupCounter[e]--,this.groupCounter[e]<0)throw new Error("Multiply remove enemy. group index = "+e);a.emit("msg_kill_enemy",this.killCounter)},n.update=function(e){(l.Instance._isStart||!l.Instance.stop||l.Instance._player)&&(this._interval-=e,this._interval<=0&&(this._interval=r(this.probability.interval[0],this.probability.interval[1]),this.generateEvent()))},i}(s))||h);i._RF.pop()}}}));

System.register("chunks:///_virtual/level-events-items.ts",["./rollupPluginModLoBabelHelpers.js","cc","./msg.ts","./level.ts","./data-core.ts"],(function(t){"use strict";var e,i,r,n,o,s,a,l,u;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,r=t._decorator,n=t.randomRange,o=t.random,s=t.Component},function(t){a=t.Msg},function(t){l=t.Level},function(t){u=t.DataLevelInst}],execute:function(){var v;i._RF.push({},"a92caNpNxdO6r7dE6J7gR+L","level-events-items",void 0);var h=r.ccclass;r.property,t("LevelEventsItems",h("LevelEventsItems")(v=function(t){function i(){for(var e,i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))||this)._interval=.1,e.probability=void 0,e.counter=0,e.groupCounter=void 0,e}e(i,t);var r=i.prototype;return r.start=function(){this.probability=u._data.probability_drop_items,this.groupCounter=new Array(u._data.items.length);for(var t=0;t<u._data.items.length;t++)this.groupCounter[t]=0;this._interval=n(this.probability.interval[0],this.probability.interval[1]),a.on("msg_remove_item",this.remove.bind(this))},r.onDestroy=function(){a.off("msg_remove_item",this.remove.bind(this))},r.nextEvent=function(){if(this._interval=n(this.probability.interval[0],this.probability.interval[1]),!(this.counter>=this.probability.max)){for(var t=o(),e=this.probability.weights,i=-1,r=0;r<e.length;r++)if(t<=e[r]){i=r;break}if(-1===i)throw new Error("Error calculate weight on Level Infinite Events. value:"+t);if(this.groupCounter[i]>=this.probability.weights_max[i])this._interval=this.probability.interval_weight_max;else{var s=this.probability.weights_group[i],l={res:u._data.items[s],pos:void 0,groupIndex:s};a.emit("msg_add_item",l),this.counter++,this.groupCounter[i]++}}},r.remove=function(t){if(this.counter--,this.groupCounter[t]--,this.groupCounter[t]<0)throw new Error("Mutiply remove enemy. group index = "+t)},r.update=function(t){(l.Instance._isStart||!l.Instance.stop||l.Instance._player)&&(this._interval-=t,this._interval<=0&&this.nextEvent())},i}(s))||v);i._RF.pop()}}}));

System.register("chunks:///_virtual/level-events.ts",["./rollupPluginModLoBabelHelpers.js","cc","./level.ts"],(function(t){"use strict";var e,n,i,s,r;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,i=t._decorator,s=t.Component},function(t){r=t.Level}],execute:function(){var c;n._RF.push({},"1bf46/JS3pHI5a7RQxEO5cw","level-events",void 0);var _=i.ccclass;i.property,t("LevelEvents",_("LevelEvents")(c=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))||this)._events={},e._time=0,e._index=0,e._max=0,e._cur=void 0,e}e(n,t);var i=n.prototype;return i.start=function(){},i.init=function(t){this._events=t,this._index=0,this._max=this._events.length,this._cur=this._events[this._index]},i.updateEvent=function(t){this._index>=this._max||(this._time+=t,this._time>this._cur.time&&(r.Instance.addEnemy(this._cur.res),this._index++,this._index<this._max&&(this._cur=this._events[this._index])))},n}(s))||c);n._RF.pop()}}}));

System.register("chunks:///_virtual/level.ts",["./rollupPluginModLoBabelHelpers.js","cc","./action.ts","./save.ts","./msg.ts","./singleton.ts","./res.ts","./res-cache.ts","./actor.ts","./drop-item.ts","./navigation-system.ts","./data-core.ts","./fun.ts","./res-pool.ts"],(function(t){"use strict";var e,i,n,s,a,o,r,c,l,d,_,h,u,p,m,v,f,g;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,n=t._decorator,s=t.find,a=t.v3},function(t){o=t.Action},function(t){r=t.Save},function(t){c=t.Msg},function(t){l=t.Singleton},function(t){d=t.Res},function(t){_=t.ResCache},function(t){h=t.Actor},function(t){u=t.DropItem},function(t){p=t.NavSystem},function(t){m=t.DataNavigationInst,v=t.DataEquipInst},function(t){f=t.fun},function(t){g=t.ResPool}],execute:function(){i._RF.push({},"de76f/v+B1EdKdfUqs0fB0z","level",void 0);n.ccclass,n.property,t("Level",function(t){function i(){for(var e,i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))||this)._action=void 0,e._data={},e._time=0,e._isStart=!1,e._spawn_pos=a(0,2,0),e._scoreRate=0,e._player=void 0,e._enemies=[],e._objectNode=void 0,e.currentCards=new Array(3),e.stop=!1,e}e(i,t);var n=i.prototype;return n.init=function(){var t;this._data=Object.assign(_.Instance.getJson("data-level").json),this._action=new o("action-level"),this._objectNode=null==(t=s("init"))?void 0:t.getChildByName("objects"),c.on("msg_level_start",this.onLevelStart.bind(this)),c.on("level_action",this.levelAction.bind(this)),c.on("level_do",this.do.bind(this)),c.on("msg_add_enemy",this.addEnemy.bind(this)),c.on("msg_add_item",this.addDrop.bind(this)),c.on("msg_replay",this.onReplay.bind(this))},n.do=function(t){this[t]()},n.onLevelStart=function(){this.stop=!1,this._isStart=!0,r.Instance.nextStatistics(),p.Init(m._data),this.levelAction("start")},n.pause=function(){this.stop=!0},n.resume=function(){this.stop=!1},n.onReplay=function(){f.delay((function(){c.emit("push","level")}),2)},n.levelAction=function(t){this._action.on(t)},n.addPlayer=function(){var t=_.Instance.getPrefab(this._data.prefab_player),e=d.inst(t,this._objectNode,this._data.spawn_pos);if(this._player=e.getComponent(h),null===this._player)throw new Error("Level add player can not bind Actor Component.");this._player.bulletBox=5,this._player.isPlayer=!0,this._player.init("data-player"),this._player.updateHP()},n.addEnemy=function(t){var e=p.randomPoint(),i=g.Instance.pop(t.res,e.position);i.name=t.res;var n=i.getComponent(h);if(n)return n._groupIndex=t.groupID,n.init("data-"+t.res),n.bulletBox=9999,n.isReady=!0,this._enemies.push(i),i;console.error("error inst enemy lose actor component. the name is :",t.res)},n.removeEnemy=function(t){for(var e=0;e<this._enemies.length;e++)if(this._enemies[e]===t){this._enemies.splice(e,1);break}},n.addDrop=function(t){if(void 0===t.pos){var e=p.randomPoint();t.pos=e.position}var i=g.Instance.pop("drop_item",t.pos,void 0).getComponent(u),n=v.get(t.res);if(null===i)throw new Error("Drop node can not add component Drop Item.");i.init(t.res,n.drop_effect_index,t.groupIndex)},n.addObj=function(t){var e=p.randomPoint(),i=_.Instance.getPrefab(t);return d.inst(i,this._objectNode,e.position)},n.update=function(t){this._isStart&&(this.stop||(this._time+=t,this._action.update(t),c.emit("msg_update_map")))},n.upgradePlayerAttributes=function(t){for(var e=this.currentCards[t].info.values,i=e.length,n=0;n<i;n++){console.log(e[n]);var s=e[n];this._player._data[s.name]=s.value}},n.getUpgradeCardInfo=function(t){return this.currentCards[t].info.describe},n.gameOver=function(){this.stop=!0,this._isStart=!1,c.emit("msg_stat_time",{key:"play",time:this._time}),this.calculateScore(),this._enemies=[],r.Instance.saveGameOver(this._time,this._scoreRate),this._player=void 0},n.calculateScore=function(){var t=r.Instance.get("day");void 0===t?t=0:t++,r.Instance.setValue("day",t);var e=r.Instance.getStatistics("killedTime"),i=r.Instance.getStatistics("hit_bodyTimes"),n=r.Instance.getStatistics("hit_headTimes"),s=r.Instance.getStatistics("fireTimes"),a=0==s?0:(i+n)/s;r.Instance.setStatistics("hit_rate",Number(a.toFixed(4)));var o=r.Instance.getStatistics("be_hit_bodyTimes")+r.Instance.getStatistics("be_hit_headTimes");r.Instance.setStatistics("be_hit_times",o);var c=Math.max(o,r.Instance.getStatistics("enemy_fireTimes")),l=0==c?0:1-o/c;r.Instance.setStatistics("dodge_rate",Number(l.toFixed(4)));var d=this._data.each_rate_value,_=Math.floor(e*this._data.killed_to_score+a*d+l*d+this._time*this._data.survival_time_to_score);r.Instance.setStatistics("level_score",_);var h=this._data.score_level,u=!0;this._scoreRate=h.length-1;for(var p=0;p<h.length;p++){var m=h[p];for(var v in u=!0,m)if("score"!=v&&r.Instance._currentStatistics[v]<m[v]){u=!1;break}if(u){this._scoreRate=p;break}}r.Instance.setStatistics("score_rate",this._scoreRate)},n.getLevelScore=function(){return this._data.score_level[this._scoreRate].score},i}(l));i._RF.pop()}}}));

System.register("chunks:///_virtual/light-cluster.ts",["./rollupPluginModLoBabelHelpers.js","cc","./editor.ts","./world-cluster.ts"],(function(t){"use strict";var e,i,r,o,n,a,s,l,c,u,d,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){n=t.cclegacy,a=t._decorator,s=t.geometry,l=t.Vec3,c=t.renderer,u=t.director,d=t.MobilityMode},null,function(t){h=t.WorldCluster}],execute:function(){var g,p,f,y;n._RF.push({},"0dd3dIXZQFKXKU5yq3EIf4S","light-cluster",void 0);var v=a.ccclass,b=a.executeInEditMode,m=a.property,L=new s.Sphere,T=(new l,t("LightWorldCluster",v("LightWorldCluster")(g=b(((y=function(t){function e(){for(var e,i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))||this).pixelsPerObjectFloat=4,e.lights=[],e.dirty=!0,r(e,"forceUpdate",f,o(e)),e._dirtyTimeout=void 0,e}i(e,t);var n=e.prototype;return n.onEnable=function(){globalThis.LightWorldCluster.instance=this},n.onDisable=function(){globalThis.LightWorldCluster.instance===this&&(globalThis.LightWorldCluster.instance=void 0)},n.addObjectData=function(t,e){var i=this.dataInfoFloat,r=e*this.dataInfoTextureFloat.width*4,o=t instanceof c.scene.SpotLight,n=t.node.worldPosition;i[r++]=n.x,i[r++]=n.y,i[r++]=n.z,i[r++]=o?1:0;var a=t.color;i[r++]=a.x,i[r++]=a.y,i[r++]=a.z;if(i[r++]=2604165638331324e-20*t.luminance*1e4,o){var s=t,l=Math.clamp(s.size,0,89)*Math.PI/180,u=Math.clamp(s.angle/2,l+.001,89*Math.PI/180+.001),d=Math.cos(u),h=1/(Math.cos(l)-d);i[r++]=t.range,i[r++]=d,i[r++]=h}else i[r++]=t.range,i[r++]=t.size,i[r++]=0;if(i[r++]=0,o){t.update();var g=t.direction;i[r++]=g.x,i[r++]=g.y,i[r++]=g.z,i[r++]=0}},n.getBoundingBox=function(t,e){var i=t.node.worldPosition;s.Sphere.set(L,i.x,i.y,i.z,t.range),L.getBoundary(e.min,e.max),e.radius=t.range,e.center.set(i)},n.findObjects=function(){var t=this.lights;t.length=0;for(var e=0;e<u.root.scenes.length;e++){for(var i=u.root.scenes[e].sphereLights,r=0;r<i.length;r++)i[r].node.activeInHierarchy&&i[r].node.mobility!==d.Static&&t.push(i[r]);for(var o=u.root.scenes[e].spotLights,n=0;n<o.length;n++)o[n].node.activeInHierarchy&&o[n].node.mobility!==d.Static&&t.push(o[n])}return t},n.update=function(e){var i=this;(this.dirty||this.forceUpdate)&&(t.prototype.update.call(this,e),this._dirtyTimeout||(this._dirtyTimeout=setTimeout((function(){i.dirty=!1,i._dirtyTimeout=null}),500)))},e}(h)).instance=void 0,f=e((p=y).prototype,"forceUpdate",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),g=p))||g)||g));globalThis.LightWorldCluster=T,n._RF.pop()}}}));

System.register("chunks:///_virtual/light-flash.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,i,n,r,a,s,o,l;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){a=t.cclegacy,s=t._decorator,o=t.SphereLight,l=t.Component}],execute:function(){var c,u,h,p,g;a._RF.push({},"471dcxAP2VNQJcIMx39HMwZ","light-flash",void 0);var f=s.ccclass,_=s.property;t("light_flash",f("light_flash")((h=e((u=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))||this)._light=null,e._curLuminance=0,e._range=0,e._time=0,n(e,"min",h,r(e)),n(e,"range",p,r(e)),n(e,"speed",g,r(e)),e}i(e,t);var a=e.prototype;return a.start=function(){this._light=this.getComponent(o),this._curLuminance=this.min},a.update=function(t){this._time=this._time+t*this.speed,this._range=Math.sin(this._time)*this.range+this.min,this._light.range=this._range},e}(l)).prototype,"min",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),p=e(u.prototype,"range",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),g=e(u.prototype,"speed",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),c=u))||c);a._RF.pop()}}}));

System.register("chunks:///_virtual/light-flow-camera.ts",["./rollupPluginModLoBabelHelpers.js","cc","./util2.ts"],(function(t){"use strict";var i,e,o,r,a,n,c;return{setters:[function(t){i=t.inheritsLoose},function(t){e=t.cclegacy,o=t._decorator,r=t.find,a=t.v3,n=t.Component},function(t){c=t.UtilVec3}],execute:function(){var s;e._RF.push({},"200b8Q9SMdL7ZiT4PPLfrQJ","light-flow-camera",void 0);var l=o.ccclass;o.property,t("LightFlowCamera",l("LightFlowCamera")(s=function(t){function e(){for(var i,e=arguments.length,o=new Array(e),r=0;r<e;r++)o[r]=arguments[r];return(i=t.call.apply(t,[this].concat(o))||this)._camera=void 0,i._pos=a(0,0,0),i._waitFind=1,i}return i(e,t),e.prototype.update=function(t){if(null===this._camera){if(this._waitFind-=t,this._waitFind<0){this._waitFind=1;var i=r("camera_controller/camera_main");null!==i&&(this._camera=i)}}else c.copy(this._pos,this._camera.worldPosition),this.node.setPosition(this._pos)},e}(n))||s);e._RF.pop()}}}));

System.register("chunks:///_virtual/litegragh-css.ts",["cc"],(function(n){"use strict";var t;return{setters:[function(n){t=n.cclegacy}],execute:function(){t._RF.push({},"b9c4bvVw+5Cv7c+XFnT3AmU","litegragh-css",void 0);n("css",'\n/* this CSS contains only the basic CSS needed to run the app and use it */\n\n.lgraphcanvas {\n    /*cursor: crosshair;*/\n    user-select: none;\n    -moz-user-select: none;\n    -webkit-user-select: none;\n\toutline: none;\n    font-family: Tahoma, sans-serif;\n}\n\n.lgraphcanvas * {\n    box-sizing: border-box;\n}\n\n.litegraph.litecontextmenu {\n    font-family: Tahoma, sans-serif;\n    position: fixed;\n    top: 100px;\n    left: 100px;\n    min-width: 100px;\n    color: #aaf;\n    padding: 0;\n    box-shadow: 0 0 10px black !important;\n    background-color: #2e2e2e !important;\n\tz-index: 10;\n}\n\n.litegraph.litecontextmenu.dark {\n    background-color: #000 !important;\n}\n\n.litegraph.litecontextmenu .litemenu-title img {\n    margin-top: 2px;\n    margin-left: 2px;\n    margin-right: 4px;\n}\n\n.litegraph.litecontextmenu .litemenu-entry {\n    margin: 2px;\n    padding: 2px;\n}\n\n.litegraph.litecontextmenu .litemenu-entry.submenu {\n    background-color: #2e2e2e !important;\n}\n\n.litegraph.litecontextmenu.dark .litemenu-entry.submenu {\n    background-color: #000 !important;\n}\n\n.litegraph .litemenubar ul {\n    font-family: Tahoma, sans-serif;\n    margin: 0;\n    padding: 0;\n}\n\n.litegraph .litemenubar li {\n    font-size: 14px;\n    color: #999;\n    display: inline-block;\n    min-width: 50px;\n    padding-left: 10px;\n    padding-right: 10px;\n    user-select: none;\n    -moz-user-select: none;\n    -webkit-user-select: none;\n    cursor: pointer;\n}\n\n.litegraph .litemenubar li:hover {\n    background-color: #777;\n    color: #eee;\n}\n\n.litegraph .litegraph .litemenubar-panel {\n    position: absolute;\n    top: 5px;\n    left: 5px;\n    min-width: 100px;\n    background-color: #444;\n    box-shadow: 0 0 3px black;\n    padding: 4px;\n    border-bottom: 2px solid #aaf;\n    z-index: 10;\n}\n\n.litegraph .litemenu-entry,\n.litemenu-title {\n    font-size: 12px;\n    color: #aaa;\n    padding: 0 0 0 4px;\n    margin: 2px;\n    padding-left: 2px;\n    -moz-user-select: none;\n    -webkit-user-select: none;\n    user-select: none;\n    cursor: pointer;\n}\n\n.litegraph .litemenu-entry .icon {\n    display: inline-block;\n    width: 12px;\n    height: 12px;\n    margin: 2px;\n    vertical-align: top;\n}\n\n.litegraph .litemenu-entry.checked .icon {\n    background-color: #aaf;\n}\n\n.litegraph .litemenu-entry .more {\n    float: right;\n    padding-right: 5px;\n}\n\n.litegraph .litemenu-entry.disabled {\n    opacity: 0.5;\n    cursor: default;\n}\n\n.litegraph .litemenu-entry.separator {\n    display: block;\n    border-top: 1px solid #333;\n    border-bottom: 1px solid #666;\n    width: 100%;\n    height: 0px;\n    margin: 3px 0 2px 0;\n    background-color: transparent;\n    padding: 0 !important;\n    cursor: default !important;\n}\n\n.litegraph .litemenu-entry.has_submenu {\n    border-right: 2px solid cyan;\n}\n\n.litegraph .litemenu-title {\n    color: #dde;\n    background-color: #111;\n    margin: 0;\n    padding: 2px;\n    cursor: default;\n}\n\n.litegraph .litemenu-entry:hover:not(.disabled):not(.separator) {\n    background-color: #444 !important;\n    color: #eee;\n    transition: all 0.2s;\n}\n\n.litegraph .litemenu-entry .property_name {\n    display: inline-block;\n    text-align: left;\n    min-width: 80px;\n    min-height: 1.2em;\n}\n\n.litegraph .litemenu-entry .property_value {\n    display: inline-block;\n    background-color: rgba(0, 0, 0, 0.5);\n    text-align: right;\n    min-width: 80px;\n    min-height: 1.2em;\n    vertical-align: middle;\n    padding-right: 10px;\n}\n\n.litegraph.litesearchbox {\n    font-family: Tahoma, sans-serif;\n    position: absolute;\n    background-color: rgba(0, 0, 0, 0.5);\n    padding-top: 4px;\n}\n\n.litegraph.litesearchbox input,\n.litegraph.litesearchbox select {\n    margin-top: 3px;\n    min-width: 60px;\n    min-height: 1.5em;\n    background-color: black;\n    border: 0;\n    color: white;\n    padding-left: 10px;\n    margin-right: 5px;\n}\n\n.litegraph.litesearchbox .name {\n    display: inline-block;\n    min-width: 60px;\n    min-height: 1.5em;\n    padding-left: 10px;\n}\n\n.litegraph.litesearchbox .helper {\n    overflow: auto;\n    max-height: 200px;\n    margin-top: 2px;\n}\n\n.litegraph.lite-search-item {\n    font-family: Tahoma, sans-serif;\n    background-color: rgba(0, 0, 0, 0.5);\n    color: white;\n    padding-top: 2px;\n}\n\n.litegraph.lite-search-item.not_in_filter{\n    /*background-color: rgba(50, 50, 50, 0.5);*/\n    /*color: #999;*/\n    color: #B99;\n    font-style: italic;\n}\n\n.litegraph.lite-search-item.generic_type{\n    /*background-color: rgba(50, 50, 50, 0.5);*/\n    /*color: #DD9;*/\n    color: #999;\n    font-style: italic;\n}\n\n.litegraph.lite-search-item:hover,\n.litegraph.lite-search-item.selected {\n    cursor: pointer;\n    background-color: white;\n    color: black;\n}\n\n/* DIALOGs ******/\n\n.litegraph .dialog {\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    margin-top: -150px;\n    margin-left: -200px;\n\n    background-color: #2A2A2A;\n\n    min-width: 400px;\n    min-height: 200px;\n\tbox-shadow: 0 0 4px #111;\n    border-radius: 6px;\n}\n\n.litegraph .dialog.settings {\n\tleft: 10px;\n\ttop: 10px;\n\theight: calc( 100% - 20px );\n\tmargin: auto;\n    max-width: 50%;\n}\n\n.litegraph .dialog.centered {\n    top: 50px;\n    left: 50%;\n    position: absolute;\n    transform: translateX(-50%);\n    min-width: 600px;\n    min-height: 300px;\n    height: calc( 100% - 100px );\n\tmargin: auto;\n}\n\n.litegraph .dialog .close {\n    float: right;\n\tmargin: 4px;\n\tmargin-right: 10px;\n\tcursor: pointer;\n\tfont-size: 1.4em;\n}\n\n.litegraph .dialog .close:hover {\n\tcolor: white;\n}\n\n.litegraph .dialog .dialog-header {\n\tcolor: #AAA;\n\tborder-bottom: 1px solid #161616;\n}\n\n.litegraph .dialog .dialog-header { height: 40px; }\n.litegraph .dialog .dialog-footer { height: 50px; padding: 10px; border-top: 1px solid #1a1a1a;}\n\n.litegraph .dialog .dialog-header .dialog-title {\n    font: 20px "Arial";\n    margin: 4px;\n    padding: 4px 10px;\n    display: inline-block;\n}\n\n.litegraph .dialog .dialog-content, .litegraph .dialog .dialog-alt-content {\n    height: calc(100% - 90px);\n    width: 100%;\n\tmin-height: 100px;\n    display: inline-block;\n\tcolor: #AAA;\n    /*background-color: black;*/\n    overflow: auto;\n}\n\n.litegraph .dialog .dialog-content h3 {\n\tmargin: 10px;\n}\n\n.litegraph .dialog .dialog-content .connections {\n\tflex-direction: row;\n}\n\n.litegraph .dialog .dialog-content .connections .connections_side {\n\twidth: calc(50% - 5px);\n\tmin-height: 100px;\n\tbackground-color: black;\n\tdisplay: flex;\n}\n\n.litegraph .dialog .node_type {\n\tfont-size: 1.2em;\n\tdisplay: block;\n\tmargin: 10px;\n}\n\n.litegraph .dialog .node_desc {\n\topacity: 0.5;\n\tdisplay: block;\n\tmargin: 10px;\n}\n\n.litegraph .dialog .separator {\n\tdisplay: block;\n\twidth: calc( 100% - 4px );\n\theight: 1px;\n\tborder-top: 1px solid #000;\n\tborder-bottom: 1px solid #333;\n\tmargin: 10px 2px;\n\tpadding: 0;\n}\n\n.litegraph .dialog .property {\n\tmargin-bottom: 2px;\n\tpadding: 4px;\n}\n\n.litegraph .dialog .property:hover {\n\tbackground: #545454;\n}\n\n.litegraph .dialog .property_name {\n\tcolor: #737373;\n    display: inline-block;\n    text-align: left;\n    vertical-align: top;\n    width: 160px;\n\tpadding-left: 4px;\n\toverflow: hidden;\n    margin-right: 6px;\n}\n\n.litegraph .dialog .property:hover .property_name {\n    color: white;\n}\n\n.litegraph .dialog .property_value {\n    display: inline-block;\n    text-align: right;\n\tcolor: #AAA;\n\tbackground-color: #1A1A1A;\n    /*width: calc( 100% - 122px );*/\n    max-width: calc( 100% - 162px );\n    min-width: 200px;\n\tmax-height: 300px;\n    min-height: 20px;\n    padding: 4px;\n\tpadding-right: 12px;\n\toverflow: hidden;\n\tcursor: pointer;\n\tborder-radius: 3px;\n}\n\n.litegraph .dialog .property_value:hover {\n\tcolor: white;\n}\n\n.litegraph .dialog .property.boolean .property_value {\n\tpadding-right: 30px;\n    color: #A88;\n    /*width: auto;\n    float: right;*/\n}\n\n.litegraph .dialog .property.boolean.bool-on .property_name{\n    color: #8A8;\n}\n.litegraph .dialog .property.boolean.bool-on .property_value{\n    color: #8A8;\n}\n\n.litegraph .dialog .btn {\n\tborder: 0;\n\tborder-radius: 4px;\n    padding: 4px 20px;\n    margin-left: 0px;\n    background-color: #060606;\n    color: #8e8e8e;\n}\n\n.litegraph .dialog .btn:hover {\n    background-color: #111;\n    color: #FFF;\n}\n\n.litegraph .dialog .btn.delete:hover {\n    background-color: #F33;\n    color: black;\n}\n\n.litegraph .subgraph_property {\n\tpadding: 4px;\n}\n\n.litegraph .subgraph_property:hover {\n\tbackground-color: #333;\n}\n\n.litegraph .subgraph_property.extra {\n    margin-top: 8px;\n}\n\n.litegraph .subgraph_property span.name {\n\tfont-size: 1.3em;\n\tpadding-left: 4px;\n}\n\n.litegraph .subgraph_property span.type {\n\topacity: 0.5;\n\tmargin-right: 20px;\n\tpadding-left: 4px;\n}\n\n.litegraph .subgraph_property span.label {\n\tdisplay: inline-block;\n\twidth: 60px;\n\tpadding:  0px 10px;\n}\n\n.litegraph .subgraph_property input {\n\twidth: 140px;\n\tcolor: #999;\n\tbackground-color: #1A1A1A;\n\tborder-radius: 4px;\n\tborder: 0;\n\tmargin-right: 10px;\n\tpadding: 4px;\n\tpadding-left: 10px;\n}\n\n.litegraph .subgraph_property button {\n\tbackground-color: #1c1c1c;\n\tcolor: #aaa;\n\tborder: 0;\n\tborder-radius: 2px;\n\tpadding: 4px 10px;\n\tcursor: pointer;\n}\n\n.litegraph .subgraph_property.extra {\n\tcolor: #ccc;\n}\n\n.litegraph .subgraph_property.extra input {\n\tbackground-color: #111;\n}\n\n.litegraph .bullet_icon {\n\tmargin-left: 10px;\n\tborder-radius: 10px;\n\twidth: 12px;\n\theight: 12px;\n\tbackground-color: #666;\n\tdisplay: inline-block;\n\tmargin-top: 2px;\n\tmargin-right: 4px;\n    transition: background-color 0.1s ease 0s;\n    -moz-transition: background-color 0.1s ease 0s;\n}\n\n.litegraph .bullet_icon:hover {\n\tbackground-color: #698;\n\tcursor: pointer;\n} \n\n/* OLD */\n\n.graphcontextmenu {\n    padding: 4px;\n    min-width: 100px;\n}\n\n.graphcontextmenu-title {\n    color: #dde;\n    background-color: #222;\n    margin: 0;\n    padding: 2px;\n    cursor: default;\n}\n\n.graphmenu-entry {\n    box-sizing: border-box;\n    margin: 2px;\n    padding-left: 20px;\n    user-select: none;\n    -moz-user-select: none;\n    -webkit-user-select: none;\n    transition: all linear 0.3s;\n}\n\n.graphmenu-entry.event,\n.litemenu-entry.event {\n    border-left: 8px solid orange;\n    padding-left: 12px;\n}\n\n.graphmenu-entry.disabled {\n    opacity: 0.3;\n}\n\n.graphmenu-entry.submenu {\n    border-right: 2px solid #eee;\n}\n\n.graphmenu-entry:hover {\n    background-color: #555;\n}\n\n.graphmenu-entry.separator {\n    background-color: #111;\n    border-bottom: 1px solid #666;\n    height: 1px;\n    width: calc(100% - 20px);\n    -moz-width: calc(100% - 20px);\n    -webkit-width: calc(100% - 20px);\n}\n\n.graphmenu-entry .property_name {\n    display: inline-block;\n    text-align: left;\n    min-width: 80px;\n    min-height: 1.2em;\n}\n\n.graphmenu-entry .property_value,\n.litemenu-entry .property_value {\n    display: inline-block;\n    background-color: rgba(0, 0, 0, 0.5);\n    text-align: right;\n    min-width: 80px;\n    min-height: 1.2em;\n    vertical-align: middle;\n    padding-right: 10px;\n}\n\n.graphdialog {\n    position: absolute;\n    top: 10px;\n    left: 10px;\n    min-height: 2em;\n    background-color: #333;\n    font-size: 1.2em;\n    box-shadow: 0 0 10px black !important;\n\tz-index: 10;\n}\n\n.graphdialog.rounded {\n    border-radius: 12px;\n    padding-right: 2px;\n}\n\n.graphdialog .name {\n    display: inline-block;\n    min-width: 60px;\n    min-height: 1.5em;\n    padding-left: 10px;\n}\n\n.graphdialog input,\n.graphdialog textarea,\n.graphdialog select {\n    margin: 3px;\n    min-width: 60px;\n    min-height: 1.5em;\n    background-color: black;\n    border: 0;\n    color: white;\n    padding-left: 10px;\n    outline: none;\n}\n\n.graphdialog textarea {\n\tmin-height: 150px;\n}\n\n.graphdialog button {\n    margin-top: 3px;\n    vertical-align: top;\n    background-color: #999;\n\tborder: 0;\n}\n\n.graphdialog button.rounded,\n.graphdialog input.rounded {\n    border-radius: 0 12px 12px 0;\n}\n\n.graphdialog .helper {\n    overflow: auto;\n    max-height: 200px;\n}\n\n.graphdialog .help-item {\n    padding-left: 10px;\n}\n\n.graphdialog .help-item:hover,\n.graphdialog .help-item.selected {\n    cursor: pointer;\n    background-color: white;\n    color: black;\n}\n\n.litegraph .dialog {\n    min-height: 0;\n}\n.litegraph .dialog .dialog-content {\ndisplay: block;\n}\n.litegraph .dialog .dialog-content .subgraph_property {\npadding: 5px;\n}\n.litegraph .dialog .dialog-footer {\nmargin: 0;\n}\n.litegraph .dialog .dialog-footer .subgraph_property {\nmargin-top: 0;\ndisplay: flex;\nalign-items: center;\npadding: 5px;\n}\n.litegraph .dialog .dialog-footer .subgraph_property .name {\nflex: 1;\n}\n.litegraph .graphdialog {\ndisplay: flex;\nalign-items: center;\nborder-radius: 20px;\npadding: 4px 10px;\nposition: fixed;\n}\n.litegraph .graphdialog .name {\npadding: 0;\nmin-height: 0;\nfont-size: 16px;\nvertical-align: middle;\n}\n.litegraph .graphdialog .value {\nfont-size: 16px;\nmin-height: 0;\nmargin: 0 10px;\npadding: 2px 5px;\n}\n.litegraph .graphdialog input[type="checkbox"] {\nwidth: 16px;\nheight: 16px;\n}\n.litegraph .graphdialog button {\npadding: 4px 18px;\nborder-radius: 20px;\ncursor: pointer;\n}\n  \n\n');t._RF.pop()}}}));

System.register("chunks:///_virtual/load-default-pipeline.ts",["cc"],(function(){"use strict";var e,i,n,t,a,l,_;return{setters:[function(s){e=s.cclegacy,i=s.director,n=s.game,t=s.Game,a=s.assetManager,l=s.instantiate,_=s.CCObject}],execute:function(){e._RF.push({},"c8278Rxe0JEMqz3sJVBF3Qg","load-default-pipeline",void 0),i.__runSceneImmediate||(i.__runSceneImmediate=i.runSceneImmediate),i.runSceneImmediate=function(e,n,t){globalThis.__pipeline__.parent=null,i.__runSceneImmediate.call(this,e,n,t),!globalThis.pipelineAssets&&globalThis.__pipeline__&&(globalThis.__pipeline__.parent=i.getScene())},n.on(t.EVENT_GAME_INITED,(function(){globalThis.__pipeline__||a.loadAny("223548d6-e1d4-462a-99e1-f4046b1d0647",(function(e,i){if(e)return console.error(e);var n=l(i);n.name="pipeline-default-persist",n.hideFlags|=_.Flags.DontSave,globalThis.__pipeline__=n}))})),e._RF.pop()}}}));

System.register("chunks:///_virtual/local-label.ts",["./rollupPluginModLoBabelHelpers.js","cc","./msg.ts","./util2.ts","./local.ts"],(function(e){"use strict";var t,n,o,s,r,l,c,i;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,o=e._decorator,s=e.Label,r=e.Component},function(e){l=e.Msg},function(e){c=e.UtilNode},function(e){i=e.Local}],execute:function(){var a;n._RF.push({},"fab76mfQ8NBRqQEPZXamO3u","local-label",void 0);var u=o.ccclass;o.property,e("LocalLabel",u("LocalLabel")(a=function(e){function n(){for(var t,n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(t=e.call.apply(e,[this].concat(o))||this).label=void 0,t.key="",t}t(n,e);var o=n.prototype;return o.start=function(){l.bind("refresh_local",this.refresh,this),this.label=c.getComponent(this.node,s),this.key=this.node.name.slice(6),this.refresh()},o.onDestroy=function(){l.off("refresh_local",this.refresh)},o.refresh=function(){this.label.string=i.Instance.get(this.key)},n}(r))||a);n._RF.pop()}}}));

System.register("chunks:///_virtual/local.ts",["./rollupPluginModLoBabelHelpers.js","cc","./save.ts","./msg.ts","./singleton.ts","./res-cache.ts"],(function(e){"use strict";var n,t,a,i,s,o;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy},function(e){a=e.Save},function(e){i=e.Msg},function(e){s=e.Singleton},function(e){o=e.ResCache}],execute:function(){t._RF.push({},"593c2Gv5lpB/7Edb63mhm2g","local",void 0);e("Local",function(e){function t(){for(var n,t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];return(n=e.call.apply(e,[this].concat(a))||this).index=1,n.max=2,n._data=Object.create(null),n._map=Object.create(null),n}n(t,e);var s=t.prototype;return s.init=function(){var e=this;if(this._data=o.Instance.getJson("local").json,this.max=this._data.language.length,this.index=a.Instance._cur.languageIndex,-1===this.index){var n=window.navigator.language.toLocaleLowerCase();n=n.replace("-","_"),console.log(n);for(var s=0;s<this._data.language.length;s++){var r=this._data.language[s];if(n.includes(r)){this.index=s;break}}-1===this.index&&(this.index=2)}i.on("next_language",(function(){e.index++,e.index>=e.max&&(e.index=0),i.emit("msg_save_set",{key:"languageIndex",value:e.index}),t.Instance.refresh()})),i.on("pre_language",(function(){e.index--,e.index<0&&(e.index=e.max-1),i.emit("msg_save_set",{key:"languageIndex",value:e.index}),t.Instance.refresh()})),this.refresh()},s.get=function(e){var n=this._map[e];return n||e},s.getShowName=function(){return this._data.show_name[this.index]},s.refresh=function(){var e=this._data.language[this.index];this._map=o.Instance.getJson(e).json,i.emit("refresh_local")},t}(s));t._RF.pop()}}}));

System.register("chunks:///_virtual/log.ts",["cc"],(function(n){"use strict";var o;return{setters:[function(n){o=n.cclegacy}],execute:function(){o._RF.push({},"c4df3A9q5lAjoQvwRuVAAFl","log",void 0);n("Log",function(){function n(){}return n.Init=function(){},n.info=function(n){console.info(n)},n.debug=function(n){console.log(n)},n.error=function(n){console.error(n)},n.warn=function(n){console.warn(n)},n}());o._RF.pop()}}}));

System.register("chunks:///_virtual/logo.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(o){"use strict";var t,e,n,r;return{setters:[function(o){t=o.inheritsLoose},function(o){e=o.cclegacy,n=o._decorator,r=o.Component}],execute:function(){var c;e._RF.push({},"1a1264ux6tKUpHijpjonNf7","logo",void 0);var s=n.ccclass;n.type,n.property,o("logo",s("logo")(c=function(o){function e(){return o.apply(this,arguments)||this}return t(e,o),e}(r))||c);e._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./test-ghost.ts","./action.ts","./actor-base.ts","./actor-task-go-target.ts","./actor-tasks.ts","./astar.ts","./brain.ts","./steering-basic.ts","./steering-behaviors.ts","./steering-seek.ts","./Electron.ts","./music-compose-random.ts","./music-compose-state.ts","./music-compose-value.ts","./sound-actor.ts","./sound-enable-play.ts","./sound.ts","./data-base.ts","./fx-actor-fall-point.ts","./fx-auto-remove.ts","./fx-base.ts","./fx-group.ts","./fx-init.ts","./fx.ts","./light-flash.ts","./graphics.ts","./guide.ts","./aim-control.ts","./aim-ik.ts","./ik-bone.ts","./ik-point.ts","./ik-solver-aim.ts","./ik-solver-heuristic.ts","./ik-solver.ts","./math-util.ts","./weapon-aim.ts","./IActorInput.ts","./input-base.ts","./input-equip-select.ts","./input-gamepad.ts","./input-handle.ts","./input-joystick.ts","./input-keyboard.ts","./input-mouse.ts","./input-pointer-lock.ts","./joystick-auto-hidden.ts","./joystick-move.ts","./joystick-pad-action.ts","./joystick-pad.ts","./joystick.ts","./joytick-pad-rotation.ts","./touch-cancel.ts","./io.ts","./json-tool.ts","./log.ts","./notify.ts","./local-label.ts","./local.ts","./msg.ts","./singleton.ts","./render-tool.ts","./res-cache.ts","./res-destroy.ts","./res-editor-cache.ts","./res-pool.ts","./res-texture.ts","./res.ts","./g-scene.ts","./sensor-actions.ts","./sensor-anig.ts","./sensor-audio.ts","./sensor-effect.ts","./sensor-ground.ts","./sensor-msg.ts","./sensor-probe.ts","./sensor-ray-node-to-node.ts","./sensor-rays-angle.ts","./sensor-rays.ts","./sensor-slope.ts","./task.ts","./fil-smooth.ts","./slider-2d.ts","./ui-auto-hidden.ts","./ui-base.ts","./ui-display-by-state-auto-hidden.ts","./ui-display-by-state.ts","./ui-enable-play-anim.ts","./ui-enable-play-animation.ts","./ui-enable-play.ts","./ui-fadein.ts","./ui.ts","./MsgPlayAnimation.ts","./collider-group.ts","./data-structure.ts","./debug-util.ts","./delay-show-node.ts","./destroy-settings.ts","./force-area.ts","./fun.ts","./g-math.ts","./grandom.ts","./light-flow-camera.ts","./msg-events.ts","./stretched-billboard.ts","./ui-roller.ts","./util2.ts","./dev.ts","./gm.ts","./actor-animation-graph-group.ts","./actor-animation-graph.ts","./actor-animator-contorller.ts","./actor-axe.ts","./actor-bag.ts","./actor-brain.ts","./actor-crossbow.ts","./actor-enemy-gun.ts","./actor-equip-base.ts","./actor-equipment.ts","./actor-face.ts","./actor-follow-path-move.ts","./actor-grenade.ts","./actor-handgun.ts","./actor-input-brain.ts","./actor-input.ts","./actor-interface.ts","./actor-items.ts","./actor-lookat.ts","./actor-machine-gun.ts","./actor-main.ts","./actor-melee-weapon.ts","./actor-move-slope.ts","./actor-move.ts","./actor-part.ts","./actor-physical-skin.ts","./actor-piranha.ts","./actor-sensor-drop-item.ts","./actor-shotgun.ts","./actor-sound.ts","./actor-statistics.ts","./actor.ts","./animationgraph-move.ts","./damage-core.ts","./infrared-tracker.ts","./level-enable-play.ts","./projectile-grenade.ts","./camera-auto-bind-occlusion.ts","./camera-controller.ts","./camera-fps.ts","./camera-move-target.ts","./camera-msg.ts","./camera-tps.ts","./smooth-local-z.ts","./GameQuality.ts","./achievement.ts","./bind.ts","./buff.ts","./data-camera.ts","./data-core.ts","./data-equip.ts","./data-game-set.ts","./data-game.ts","./data-level.ts","./data-navigation.ts","./data-pool.ts","./data-sound.ts","./data-upgrade-card.ts","./game-set.ts","./game-type.ts","./game.ts","./save.ts","./fx-bullet-tracer.ts","./fx-car-random-move.ts","./fx-fly-car.ts","./fx-ghost-vertex.ts","./fx-ghost.ts","./fx-light-flash.ts","./fx-ray-line.ts","./gun-tracer-pool.ts","./sfx-heart.ts","./init.ts","./preload.ts","./check-auto-pick.ts","./drop-item.ts","./substance-core.ts","./level-events-card.ts","./level-events-enemy.ts","./level-events-items.ts","./level-events.ts","./level.ts","./spwans-group.ts","./logo.ts","./navigation-debugger.ts","./navigation-map.ts","./navigation-point.ts","./navigation-points.ts","./navigation-region.ts","./navigation-system.ts","./jump-points.ts","./ui-aim-range.ts","./ui-animation.ts","./ui-fx.ts","./ui-grp-picked-tips.ts","./ui-guide-platform.ts","./ui-loading.ts","./ui-move-show.ts","./ui-svc-reset-pos.ts","./delay-play.ts","./delay_play_animation.ts","./test-move-target.ts","./test-steering-init.ts","./tap-play.ts","./test-actor-move.ts","./test-amoy-animation.ts","./test-anig.ts","./test-camera-debug.ts","./test-collider-mesh-switch.ts","./test-forward.ts","./test-gun-fire.ts","./test-gun-tracer.ts","./test-ik.ts","./test-mouse-move.ts","./test-normal.ts","./test-rigidbody-vector.ts","./test-slope-direction.ts","./test-slope-move.ts","./test-slope-vector.ts","./test-stairs.ts","./test-stretched-billboard.ts","./test-ui.ts","./disable-update-ubo.ts","./switch-probe.ts","./animation-to-oribit.ts","./generate-white-box.ts","./move-camera-x.ts","./test-reflect.ts","./test-taa.ts","./camera-setting.ts","./bloom.ts","./light-cluster.ts","./reflection-cluster.ts","./utils.ts","./world-cluster.ts","./delay-active.ts","./height-fog.ts","./static-occlusion-area.ts","./static-occlusion-block.ts","./static-occlusion-culling.ts","./halton.ts","./pool.ts","./raycast-gpu.ts","./raycast.ts","./utils3.ts","./pipeline-assets.ts","./reflection-probe-utils.ts","./scene-particles.ts","./sky.ts","./save-gltf.ts","./static-area-batch.ts","./static-batch-comp.ts","./static-culling.ts","./taa.ts","./disable-probe-update-runtime.ts","./graph-data.ts","./graph.ts","./litegragh-css.ts","./output-texture.ts","./pipeline.ts","./render-to-screen.ts","./router.ts","./stage.ts","./vec2.ts","./pipeline-graph.ts","./start.ts","./nodes.ts","./index.ts","./blocklistedGPUS.ts","./cleanRenderer.ts","./deobfuscateAppleGPU.ts","./deobfuscateRenderer.ts","./deviceInfo.ts","./error.ts","./getGPUVersion.ts","./getLevenshteinDistance.ts","./getWebGLContext.ts","./ssr.ts","./util.ts","./webgl-constants.ts","./load-default-pipeline.ts","./pipeline-manager.ts","./gpu-mobiles.ts","./gpu.ts","./href-setting.ts","./spector.ts","./base-stage.ts","./blit-stage.ts","./bloom-stage.ts","./deferred-gbuffer-stage.ts","./deferred-lighting-stage.ts","./deferred-post-stage.ts","./forward-post-stage.ts","./forward-stage.ts","./fsr-stage.ts","./fxaa-stage.ts","./setting.ts","./shadow-stage.ts","./taa-stage.ts","./zoom-screen-stage.ts","./test-custom.ts","./ubo.ts","./debug.ts","./editor-camera-placer.ts","./editor.ts","./event.ts","./math.ts","./npm.ts","./orbit-camera.ts","./pass-utils.ts","./utils2.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/math-util.ts",["cc"],(function(t){"use strict";var e,r,n,a,o,i,u;return{setters:[function(t){e=t.cclegacy,r=t._decorator,n=t.Quat,a=t.Vec3,o=t.Mat4,i=t.geometry,u=t.game}],execute:function(){var c;e._RF.push({},"deef428f9JOPLejXO+uNHyr","math-util",void 0);var l=r.ccclass,s=(r.property,new n),y=new a,f=new a,d=new o,z=new o,m=new a(0,0,1);new i.Ray,t("default",l("MathUtil")(c=function(){function t(){}return t.degreesToRadians=function(t){return t*(Math.PI/180)},t.radiansToDegrees=function(t){return t*(180/Math.PI)},t.clamp01=function(t){return t<0?0:t>1?1:t},t.clampDegrees=function(t,e,r){for(void 0===e&&(e=-180),void 0===r&&(r=180);t<e;)t+=360;for(;t>r;)t-=360;return t},t.transformDegreesToNear=function(t,e){if(Math.abs(t-e)<180)return t;if(t<e){for(;t<e;)t+=360;return t}for(;t>e;)t-=360;return t},t.clamp=function(t,e,r){return t<e?e:t>r?r:t},t.inverseLerp=function(e,r,n){var a=r-e;return Math.abs(a)<1e-6?0:(n=(n-e)/a,t.clamp01(n))},t.remap=function(t,e,r,n,a){return n+(t-e)/(r-e)*(a-n)},t.convertToNodeSpace=function(t,e,r){return r.getWorldMatrix(d),o.invert(z,d),a.transformMat4(t,e,z)},t.convertToWorldSpace=function(t,e,r){return r.getWorldMatrix(d),a.transformMat4(t,e,d)},t.randomInt=function(t,e){return t>e?-1:t+Math.round((e-t)*Math.random())},t.directionToNodeSpace=function(e,r,n){return n.getWorldPosition(y),y.add(r),t.convertToNodeSpace(e,y,n),e},t.getWorldLine=function(t,e,r,o){t.getWorldPosition(y),e.getWorldPosition(f),a.lerp(o,y,f,.5),f.subtract(y);var i=f.length();return f.normalize(),n.rotationTo(r,m,f),i},t.getWorldLineByPos=function(t,e,r,o){a.copy(y,t),a.copy(f,e),a.lerp(o,y,f,.5),f.subtract(y);var i=f.length();return f.normalize(),n.rotationTo(r,m,f),i},t.distance=function(t,e){return t.getWorldPosition(y),e.getWorldPosition(f),a.distance(y,f)},t.hDistance=function(t,e){return a.copy(y,t),a.copy(f,e),y.y=0,f.y=0,a.distance(y,f)},t.getMoveDirectionByCameraDirection=function(t,e,r,n){var o=e.x,i=e.y,u=Math.atan2(-i,o)-.5*Math.PI;return a.rotateY(t,r,a.ZERO,u),t},t.getLocalDegree=function(e,r,n){var o=e.x,i=e.y,u=Math.atan2(-i,o)-.5*Math.PI;return a.rotateY(y,r,a.ZERO,u),n.getWorldPosition(f),f.add(y),t.convertToNodeSpace(y,f,n),y.y=0,y.normalize(),t.radiansToDegrees(Math.atan2(y.x,y.z))},t.smoothDamp=function(e,r,n,a,o){void 0===o&&(o=100);var i=2/(a=Math.max(1e-4,a)),c=i*u.deltaTime,l=1/(1+c+.479999989271164*c*c+.234999999403954*c*c*c),s=e-r,y=r,f=o*a,d=t.clamp(s,-f,f);r=e-d;var z=(n.value+i*d)*u.deltaTime;n.value=(n.value-i*z)*l;var m=r+(d+z)*l;return y-e>0==m>y&&(m=y,n.value=(m-y)/u.deltaTime),m},t.fromToRotation=function(t,e,r){if(e.equals(a.ZERO)||r.equals(a.ZERO))return n.IDENTITY;var o=Math.abs(e.x);o=(o=o>Math.abs(e.y)?o:Math.abs(e.y))>Math.abs(e.z)?o:Math.abs(e.z),e=e.multiplyScalar(1/o),o=(o=(o=Math.abs(r.x))>Math.abs(r.y)?o:Math.abs(r.y))>Math.abs(r.z)?o:Math.abs(r.z),r=r.multiplyScalar(1/o);var i=.001;e.x=Math.abs(e.x)<=i?0:e.x,e.y=Math.abs(e.y)<=i?0:e.y,e.z=Math.abs(e.z)<=i?0:e.z,r.x=Math.abs(r.x)<=i?0:r.x,r.y=Math.abs(r.y)<=i?0:r.y,r.z=Math.abs(r.z)<=i?0:r.z,a.normalize(y,r),a.normalize(f,e),a.add(y,y,f);var u=new a;if(a.normalize(u,y),u.equals(a.ZERO)){if(0!=e.x&&0==e.y&&0==e.z)return new n(0,1,0,0);if(0==e.x&&0!=e.y&&0==e.z)return new n(1,0,0,0);if(0==e.x&&0==e.y&&0!=e.z)return new n(1,0,0,0);if(0==e.x&&0!=e.y&&0!=e.z)return new n(1,0,0,0);if(0!=e.x&&0==e.y&&0!=e.z){a.normalize(y,r),a.normalize(f,e);var c=y.z,l=f.x;return c+l<0||c+l==0&&c<0?new n(-c,0,-l,0):new n(c,0,l,0)}if(0!=e.x&&0!=e.y&&0==e.z){a.normalize(y,r),a.normalize(f,e);var s=y.y,d=f.x;return s+d<0||s+d==0&&s<0?new n(-s,-d,0,0):new n(s,d,0,0)}u.y=e.z,u.z=r.y,u.normalize()}return a.normalize(y,r),a.normalize(f,u),n.multiply(t,new n(-y.x,-y.y,-y.z,0),new n(f.x,f.y,f.z,0)),t},t.deltaAngle=function(t,e){return(e%=360)-(t%=360)>180?t-e:e-t},t.axisAngle=function(t,e,r){var a=Math.sin(r/2);return new n(e.x*a,e.y*a,e.z*a,Math.cos(r/2))},t.quatLerp=function(e,r,a,o){return n.dot(r,a)<0?s.set(-a.x,-a.y,-a.z,-a.w):s.set(a),n.lerp(e,r,s,t.clamp01(o)),n.normalize(e,e),e},t.sLerp=function(t,e,r,n){a.subtract(y,r,e),a.multiplyScalar(y,y,n),a.add(f,e,y);var o=e.length()/f.length();return a.multiplyScalar(t,f,o),t},t.orthoNormalize=function(t,e,r,n){a.normalize(y,r),a.rotateY(t,y,n,90),a.cross(e,t,y)},t.clampVec3=function(t,e,r){return void 0===e&&(e=null),void 0===r&&(r=null),e&&(t.x<e.x&&(t.x=e.x),t.y<e.y&&(t.y=e.z),t.z<e.y&&(t.z=e.z)),r&&(t.x>r.x&&(t.x=r.x),t.y>r.y&&(t.y=r.z),t.z>r.y&&(t.z=r.z)),t},t}())||c);e._RF.pop()}}}));

System.register("chunks:///_virtual/math.ts",["cc"],(function(t){"use strict";var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){t({RGBE2Linear:function(t,n){var r=Math.pow(2,t.w-128)/255;n.x*=r,n.y*=r,n.z*=r,n.w=1},lerp:function(t,n,r,a){void 0===a&&(a=.01);var e=t+(n-t)*r;Math.abs(n-e)<=a&&(e=n);return e},powerOfTwo:function(t){var n=1;for(;n<t;)n*=2;return n},roundUp:function(t,n){return 0===n?t:Math.ceil(t/n)*n},sRGB2Linear:function(t){return t/=255,t=Math.pow(t,2.2)},vec3_ceil:function(t,n){return t.x=Math.ceil(n.x),t.y=Math.ceil(n.y),t.z=Math.ceil(n.z),t},vec3_floor:function(t,n){return t.x=Math.floor(n.x),t.y=Math.floor(n.y),t.z=Math.floor(n.z),t},vec3_max:function(t,n,r){return t.x=Math.max(n.x,r.x),t.y=Math.max(n.y,r.y),t.z=Math.max(n.z,r.z),t},vec3_min:function(t,n,r){return t.x=Math.min(n.x,r.x),t.y=Math.min(n.y,r.y),t.z=Math.min(n.z,r.z),t}}),n._RF.push({},"c9667xadYhBUZ/AstRYtfMf","math",void 0);var r,a;t("toHalf16",(r=new Float32Array(1),a=new Int32Array(r.buffer),function(t){r[0]=t;var n=a[0],e=n>>16&32768,o=n>>12&2047,c=n>>23&255;return c<103?e:c>142?(e|=31744,e|=(255==c?0:1)&&8388607&n):c<113?e|=((o|=2048)>>114-c)+(o>>113-c&1):(e|=c-112<<10|o>>1,e+=1&o)}));n._RF.pop()}}}));

System.register("chunks:///_virtual/move-camera-x.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,r,n,i,o,a,s,c,u,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,s=e.input,c=e.Input,u=e.KeyCode,p=e.Component}],execute:function(){var l,f,v;o._RF.push({},"e7e17QFrg5Os5Tcfn68mMit","move-camera-x",void 0);var d=a.ccclass,y=a.property;e("move_camera_x",d("move_camera_x")((v=t((f=function(e){function t(){for(var t,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,n(t,"speed",v,i(t)),t._run=!1,t}r(t,e);var o=t.prototype;return o.start=function(){var e=this;s.on(c.EventType.KEY_DOWN,(function(t){t.keyCode===u.KEY_M&&(e._run=!0)}))},o.update=function(e){if(this._run){var t=this.node.position;this.node.setPosition(t.x+e*this.speed,t.y,t.z)}},t}(p)).prototype,"speed",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),l=f))||l);o._RF.pop()}}}));

System.register("chunks:///_virtual/msg-events.ts",["./rollupPluginModLoBabelHelpers.js","cc","./msg.ts"],(function(t){"use strict";var e,n,i,r,s,o,c,a;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){s=t.cclegacy,o=t._decorator,c=t.Component},function(t){a=t.Msg}],execute:function(){var u,l,p;s._RF.push({},"55111opCcxJ47T+RlZB1BDC","msg-events",void 0);var g=o.ccclass,v=o.property;t("MsgEvents",g("MsgEvents")((p=e((l=function(t){function e(){for(var e,n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return e=t.call.apply(t,[this].concat(s))||this,i(e,"msg",p,r(e)),e}n(e,t);var s=e.prototype;return s.start=function(){a.bind(this.msg,this.setActive,this)},s.setActive=function(t){this.node.active=t},e}(c)).prototype,"msg",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),u=l))||u);s._RF.pop()}}}));

System.register("chunks:///_virtual/msg.ts",["cc"],(function(t){"use strict";var i;return{setters:[function(t){i=t.cclegacy}],execute:function(){i._RF.push({},"67a38mOSWNH2YAjqnIAO/fp","msg",void 0),t("Msg",function(){function t(){}return t.on=function(t,i){this._map[t]||(this._map[t]=[]),this._map[t].push(i)},t.bind=function(t,i,n){i=i.bind(n),this._map[t]||(this._map[t]=[]),this._map[t].push(i)},t.off=function(t,i){if(null===i)this._map[t]=[];else{var n=this._map[t].indexOf(i);this._map[t].splice(n,1)}},t.emit=function(t,i){var n=this._map[t];n&&n.forEach((function(t){t(i)}))},t}())._map={},i._RF.pop()}}}));

System.register("chunks:///_virtual/MsgPlayAnimation.ts",["./rollupPluginModLoBabelHelpers.js","cc","./msg.ts"],(function(n){"use strict";var i,t,a,e,o,r,s,l,c,u;return{setters:[function(n){i=n.applyDecoratedDescriptor,t=n.inheritsLoose,a=n.initializerDefineProperty,e=n.assertThisInitialized},function(n){o=n.cclegacy,r=n._decorator,s=n.CCString,l=n.Animation,c=n.Component},function(n){u=n.Msg}],execute:function(){var m,p,g,f,y,h;o._RF.push({},"dd954Tk32ZHXJiMMOc2fI8e","MsgPlayAnimation",void 0);var v=r.ccclass,d=r.property;n("MsgPlayAnimation",(m=v("MsgPlayAnimation"),p=d(s),m((y=i((f=function(n){function i(){for(var i,t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];return i=n.call.apply(n,[this].concat(o))||this,a(i,"animName",y,e(i)),a(i,"msg",h,e(i)),i.animation=void 0,i}return t(i,n),i.prototype.start=function(){var n=this;this.animation=this.getComponent(l),u.on(this.msg,(function(){var i,t;null==(i=n.animation)||i.stop(),null==(t=n.animation)||t.play(n.animName)}))},i}(c)).prototype,"animName",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"animation"}}),h=i(f.prototype,"msg",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"msg_play_animation"}}),g=f))||g));o._RF.pop()}}}));

System.register("chunks:///_virtual/music-compose-random.ts",["./rollupPluginModLoBabelHelpers.js","cc","./sound.ts"],(function(t){"use strict";var i,e,o,r,s,n,a,l,u,c,p,h,m;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){s=t.cclegacy,n=t._decorator,a=t.AudioClip,l=t.CCFloat,u=t.AudioSource,c=t.math,p=t.randomRangeInt,h=t.Component},function(t){m=t.Sound}],execute:function(){var d,f,_,b,y,g,v,z,C,w;s._RF.push({},"5c45c/8MHVK0I2YuVganX/d","music-compose-random",void 0);var M=n.ccclass,P=n.property;t("MusicComposeRandom",(d=M("MusicComposeRandom"),f=P([a]),_=P([l]),d((g=i((y=function(t){function i(){for(var i,e=arguments.length,s=new Array(e),n=0;n<e;n++)s[n]=arguments[n];return i=t.call.apply(t,[this].concat(s))||this,o(i,"clips",g,r(i)),o(i,"probability",v,r(i)),o(i,"time",z,r(i)),o(i,"least_count",C,r(i)),o(i,"smooth",w,r(i)),i._selects=[],i._curs=[],i._t=0,i._audios=[],i}e(i,t);var s=i.prototype;return s.start=function(){for(var t=0;t<this.clips.length;t++){var i=this.node.addComponent(u);i.clip=this.clips[t],i.volume=0,i.loop=!0,i.play(),this._audios.push(i),this._curs.push(0),this._selects.push(1)}this.randomPlay()},s.update=function(t){this._t>this.time&&(this._t-=this.time,this.randomPlay()),this._t+=t;for(var i=0;i<this._audios.length;i++)this._curs[i]=c.lerp(this._curs[i],this._selects[i],t*this.smooth),this._audios[i].volume=this._curs[i]*m.volume},s.randomPlay=function(){for(var t=0,i=0;i<this.clips.length;i++)Math.random()<this.probability[i]?(this._selects[i]=1,t++):this._selects[i]=0;if(0===t){var e=p(0,this.clips.length);this._selects[e]=1}},i}(h)).prototype,"clips",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),v=i(y.prototype,"probability",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),z=i(y.prototype,"time",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),C=i(y.prototype,"least_count",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),w=i(y.prototype,"smooth",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),b=y))||b));s._RF.pop()}}}));

System.register("chunks:///_virtual/music-compose-state.ts",["./rollupPluginModLoBabelHelpers.js","cc","./sound.ts"],(function(t){"use strict";var e,i,o,s,r,n,u,c,a,l,p,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,s=t.assertThisInitialized},function(t){r=t.cclegacy,n=t._decorator,u=t.AudioClip,c=t.CCFloat,a=t.AudioSource,l=t.math,p=t.Component},function(t){h=t.Sound}],execute:function(){var f,m,d,v,y,_,b,g;r._RF.push({},"12b52kXv5JPY6UG2G1Y0KyH","music-compose-state",void 0);var C=n.ccclass,z=n.property;t("MusicComposeState",(f=C("MusicComposeState"),m=z([u]),d=z(c),f((_=e((y=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];return e=t.call.apply(t,[this].concat(r))||this,o(e,"clips",_,s(e)),o(e,"smooth",b,s(e)),o(e,"selects",g,s(e)),e._curs=[],e._audios=[],e}i(e,t);var r=e.prototype;return r.start=function(){for(var t=0;t<this.clips.length;t++){var e=this.node.addComponent(a);e.clip=this.clips[t],e.volume=0,e.loop=!0,e.play(),this._audios.push(e),this._curs.push(0)}},r.update=function(t){for(var e=0;e<this._audios.length;e++)this._curs[e]=l.lerp(this._curs[e],this.selects[e],t*this.smooth),this._audios[e].volume=this._curs[e]*h.volume},e}(p)).prototype,"clips",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),b=e(y.prototype,"smooth",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),g=e(y.prototype,"selects",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),v=y))||v));r._RF.pop()}}}));

System.register("chunks:///_virtual/music-compose-value.ts",["./rollupPluginModLoBabelHelpers.js","cc","./msg.ts","./sound.ts"],(function(e){"use strict";var t,i,s,o,r,u,n,l,c,a,p,h,_;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,s=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,u=e._decorator,n=e.AudioClip,l=e.CCFloat,c=e.AudioSource,a=e.math,p=e.Component},function(e){h=e.Msg},function(e){_=e.Sound}],execute:function(){var f,m,d,v,y,b,g,w;r._RF.push({},"0abe6myLSpHe5xkiK8Qe1jO","music-compose-value",void 0);var C=u.ccclass,z=u.property;e("MusicComposeValue",(f=C("MusicComposeValue"),m=z([n]),d=z([l]),f((b=t((y=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),u=0;u<i;u++)r[u]=arguments[u];return t=e.call.apply(e,[this].concat(r))||this,s(t,"clips",b,o(t)),s(t,"weight",g,o(t)),s(t,"smooth",w,o(t)),t._selects=[],t._curs=[],t._audios=[],t._value=0,t}i(t,e);var r=t.prototype;return r.start=function(){h.on("music_level_by_speed",this.setValue.bind(this));for(var e=0;e<this.clips.length;e++){var t=this.node.addComponent(c);t.clip=this.clips[e],t.volume=0,t.loop=!0,t.play(),this._audios.push(t),this._curs.push(0),this._selects.push(1)}},r.onDestroy=function(){h.off("music_level_by_speed",this.setValue.bind(this))},r.setValue=function(e){this._value=e;for(var t=0;t<this.clips.length;t++)this.weight[t]<=this._value?this._selects[t]=1:this._selects[t]=0},r.update=function(e){for(var t=0;t<this._audios.length;t++)this._curs[t]=a.lerp(this._curs[t],this._selects[t],e*this.smooth),this._audios[t].volume=this._curs[t]*_.volume},t}(p)).prototype,"clips",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),g=t(y.prototype,"weight",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),w=t(y.prototype,"smooth",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),v=y))||v));r._RF.pop()}}}));

System.register("chunks:///_virtual/navigation-debugger.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,n,r,o,i,u,c;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,r=e._decorator,o=e.director,i=e.v3,u=e.Color,c=e.Component}],execute:function(){var a;n._RF.push({},"8cffeNbpr1GWIViXLS9wnvF","navigation-debugger",void 0);var s=r.ccclass,d=(r.property,r.executeInEditMode);e("navigation_debugger",s("navigation_debugger")(a=d(a=function(e){function n(){return e.apply(this,arguments)||this}t(n,e);var r=n.prototype;return r.start=function(){},r.update=function(e){},r.editorUpdate=function(){var e,t=null==(e=o.root)?void 0:e.pipeline.geometryRenderer;null==t||t.addLine(i(0,0,0),i(3,0,3),u.GREEN,!1)},n}(c))||a)||a);n._RF.pop()}}}));

System.register("chunks:///_virtual/navigation-map.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){"use strict";var t,o,i,e;return{setters:[function(n){t=n.inheritsLoose},function(n){o=n.cclegacy,i=n._decorator,e=n.Component}],execute:function(){var a;o._RF.push({},"79294q72uBLCbRGlepQJ9Dg","navigation-map",void 0);var r=i.ccclass,c=(i.property,i.executeInEditMode);n("NavigationMap",r("NavigationMap")(a=c(a=function(n){function o(){for(var t,o=arguments.length,i=new Array(o),e=0;e<o;e++)i[e]=arguments[e];return(t=n.call.apply(n,[this].concat(i))||this).points=[],t}t(o,n);var i=o.prototype;return i.__preload=function(){},i.update=function(n){},i.updateEditModel=function(){console.log("navigation edit"),this.linkChildNode(this.node)},i.linkChildNode=function(n){for(var t=n.children,o=0;o<t.length-1;o++){var i=t[o],e=t[o+1];i.position,e.position}},o}(e))||a)||a);o._RF.pop()}}}));

System.register("chunks:///_virtual/navigation-point.ts",["./rollupPluginModLoBabelHelpers.js","cc","./util2.ts"],(function(e){"use strict";var i,t,n,r,o,a,u,l,c;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,u=e.Node,l=e.CCFloat,c=e.Component},null],execute:function(){var s,p,f,b,g,y,d,v,h,m;o._RF.push({},"54e2emPbVxIXpWxKORiO631","navigation-point",void 0);var w=a.ccclass,z=a.property,N=a.executeInEditMode;e("NavigationPoint",(s=w("NavigationPoint"),p=z([u]),f=z([l]),s(b=N((y=i((g=function(e){function i(){for(var i,t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];return i=e.call.apply(e,[this].concat(o))||this,n(i,"linkNodes",y,r(i)),n(i,"weights",d,r(i)),n(i,"radius",v,r(i)),n(i,"showRay",h,r(i)),n(i,"segment",m,r(i)),i._rays=void 0,i}t(i,e);var o=i.prototype;return o.onEnable=function(){},o.update=function(e){},i}(c)).prototype,"linkNodes",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),d=i(g.prototype,"weights",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),v=i(g.prototype,"radius",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),h=i(g.prototype,"showRay",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),m=i(g.prototype,"segment",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 20}}),b=g))||b)||b));o._RF.pop()}}}));

System.register("chunks:///_virtual/navigation-points.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var n,o,i,e;return{setters:[function(t){n=t.inheritsLoose},function(t){o=t.cclegacy,i=t._decorator,e=t.Component}],execute:function(){var r;o._RF.push({},"8f399fec+dJ96YEwmhKIlR4","navigation-points",void 0);var s=i.ccclass;i.property,t("navigation_points",s("NavigationPoints")(r=function(t){function o(){return t.apply(this,arguments)||this}n(o,t);var i=o.prototype;return i.start=function(){},i.update=function(t){},o}(e))||r);o._RF.pop()}}}));

System.register("chunks:///_virtual/navigation-region.ts",["./rollupPluginModLoBabelHelpers.js","cc","./json-tool.ts","./util2.ts","./navigation-point.ts","./navigation-system.ts"],(function(t){"use strict";var i,e,n,o,a,r,s,l,c,u,h,p,d,f,g,m,b,v,y;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){a=t.cclegacy,r=t._decorator,s=t.Node,l=t.game,c=t.geometry,u=t.v3,h=t.Vec3,p=t.PhysicsSystem,d=t.Color,f=t.Component},function(t){g=t.JsonTool},function(t){m=t.UtilVec3,b=t.Gizmo},function(t){v=t.NavigationPoint},function(t){y=t.NavSystem}],execute:function(){var P,w,k,x,z,N,B,D,F,M,C,R,E,H;a._RF.push({},"5a2dcZcWU9Iiru9JcsXaF7F","navigation-region",void 0);var I=r.ccclass,S=r.property,X=r.executeInEditMode;t("NavigationRegion",(P=I("NavigationRegion"),w=S(s),P(k=X((z=i((x=function(t){function i(){for(var i,e=arguments.length,a=new Array(e),r=0;r<e;r++)a[r]=arguments[r];return i=t.call.apply(t,[this].concat(a))||this,n(i,"maxDistance",z,o(i)),n(i,"height",N,o(i)),n(i,"maxHeight",B,o(i)),n(i,"slopHeight",D,o(i)),n(i,"slopDistance",F,o(i)),n(i,"mapBlockX",M,o(i)),n(i,"mapBlockY",C,o(i)),n(i,"mapBlockZ",R,o(i)),n(i,"testPath",E,o(i)),n(i,"testNode",H,o(i)),i.findPaths=Array(),i}e(i,t);var a=i.prototype;return a.onEnable=function(){},a.refreshMapPoints=function(){for(var t=this.node.children,i={blockX:this.mapBlockX,blockY:this.mapBlockY,blockZ:this.mapBlockZ,count:t.length,nodeMap:{},nodes:[],links:[],weights:[]},e=0;e<t.length;e++){var n=t[e];n.name="point_"+e;var o=n.getComponent(v);o||n.addComponent(v);var a=n.worldPosition,r={x:Number(a.x.toFixed(3)),y:Number(a.y.toFixed(3)),z:Number(a.z.toFixed(3)),id:n.getSiblingIndex(),radius:null==o?void 0:o.radius},s=Math.floor(r.x/this.mapBlockX)+","+Math.floor(r.y/this.mapBlockY)+","+Math.floor(r.z/this.mapBlockZ);void 0===i.nodeMap[s]&&(i.nodeMap[s]=[]),i.nodeMap[s].push(n.getSiblingIndex()),i.nodes.push(r);var c=this.calculateCircleLink(n);i.links.push(c.links),i.weights.push(c.weights)}if(console.log(g.toJson(i)),this.testPath){y.Init(i);for(var u=l.totalTime,h=0;h<1e4;h++)this.testFindPath();console.log("run ",1e4," time:",l.totalTime-u," ms")}},a.calculateCircleLink=function(t){var i=this.node.children,e=t.worldPosition,n=new c.Ray;n.o=t.worldPosition;for(var o=u(0,0,0),a=[],r=[],s=[],l=0;l<i.length;l++){var d=i[l];if(d!==t){m.copy(o,d.worldPosition),n.d=o.subtract(e).normalize();var f=h.distance(e,d.worldPosition);if(!(f>this.maxDistance)){var g=Math.abs(e.y-d.worldPosition.y);g>this.maxHeight||g>this.slopHeight&&f>this.slopDistance||p.instance.raycastClosest(n,void 0,f)||(a.push(d),s.push(d.getSiblingIndex()),r.push(Number(f.toFixed(3))))}}}var b=t.getComponent(v);return b.linkNodes=a,b.weights=r,{links:s,weights:r}},a.update=function(t){},a.testFindPaths=function(){if(!(this.findPaths.length<=0)){var t=u(0,0,0),i=u(0,0,0);b.drawBox(this.findPaths[0],h.ONE,d.WHITE);for(var e=1;e<this.findPaths.length;e++){var n=this.findPaths[e-1],o=this.findPaths[e];m.copy(t,n),m.copy(i,o),t.y+=.1,i.y+=.1,e===this.findPaths.length-1?b.drawBox(i,h.ONE,d.RED):b.drawCircle(i,1,d.RED),b.drawLine(t,i,d.RED)}}},a.testRandomPath=function(){var t,i=y.randomPoint();null==(t=this.testNode)||t.setWorldPosition(i.position),y.randomPaths(this.findPaths,this.testNode.worldPosition,20,i.closestNavigationPon)},a.testFindPath=function(){var t=y.randomPoint(),i=y.randomPoint();y.findPaths(this.findPaths,t.position,-1,i.position)},i}(f)).prototype,"maxDistance",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 15}}),N=i(x.prototype,"height",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),B=i(x.prototype,"maxHeight",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),D=i(x.prototype,"slopHeight",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),F=i(x.prototype,"slopDistance",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 7}}),M=i(x.prototype,"mapBlockX",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 15}}),C=i(x.prototype,"mapBlockY",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),R=i(x.prototype,"mapBlockZ",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 15}}),E=i(x.prototype,"testPath",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),H=i(x.prototype,"testNode",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=x))||k)||k));a._RF.pop()}}}));

System.register("chunks:///_virtual/navigation-system.ts",["cc"],(function(n){"use strict";var r,t,e,o,i,a;return{setters:[function(n){r=n.cclegacy,t=n._decorator,e=n.randomRangeInt,o=n.v3,i=n.randomRange,a=n.Vec3}],execute:function(){n("NavSystem",void 0),r._RF.push({},"6d9eehPRgpNnpasDFvliTrC","navigation-system",void 0);var u;t.ccclass,t.property,t.executeInEditMode;!function(n){var r;function t(n){for(var t=r.nodes.length,e=Number.MAX_VALUE,o=-1,i=0;i<t;i++){var u=r.nodes[i],s=a.distance(n,u);s<e&&(o=i,e=s)}if(-1===o)throw new Error("'can not find target node.");return o}function u(n){return null==r?(console.warn(" Navigation data not init."),0):t(n)}n.Init=function(n){r=n},n.nodePosition=function(n){return r.nodes[n]},n.randomPoint=function(n){void 0===n&&(n=.5);var t=e(0,r.count),a=r.nodes[t],u=a.radius-n;return{closestNavigationPon:t,position:o(a.x+i(-u,u),a.y,a.z+i(-u,u))}},n.randomPaths=function(n,t,o,i){return void 0===i&&(i=-1),n.length=0,-1===i&&(i=u(t)),-1===i?[]:(function(n,t,o){if(null==r)return console.warn(" Navigation data not init."),0;n[0]=r.nodes[t];for(var i=t,a=1;a<o;a++){var u=r.links[i];i=u[e(0,u.length)],n[a]=r.nodes[i]}}(n,i,o),n)},n.randomFirePath=function(n,t){n.length=0;for(var a=e(5,11),u=r.nodes[t],s=0;s<a;s++){var d=o(u.x+i(-u.radius,u.radius),u.y,u.z+i(-u.radius,u.radius));n[s]={x:d.x,y:d.y,z:d.z,id:u.id,radius:u.radius}}return n},n.findNearest=t,n.findPaths=function(n,t,e,o){void 0===e&&(e=-1),n.length=0;var i=[],s=[];-1===e&&(e=u(t),i.push({node:e,g:0,h:0,f:0,parent:void 0}));var d=u(o);if(e===d)return n.push(r.nodes[e]),n;for(var f,v=function(n){for(var r=0;r<i.length;r++)if(i[r].node===n)return!0;return!1},c=function(n){for(var r=0;r<s.length;r++)if(s[r].node===n)return!0;return!1},l=function(n,e){var u=r.nodes[n];if(u.id==d)return{node:n,g:0,h:0,f:0,parent:e};var s=a.distance(t,u),f=a.distance(u,o),v=s+f;i.push({node:n,f:v,g:s,h:f,parent:e})},h=function(){var n=function(){if(i.length<=0)return-1;for(var n=Number.MAX_VALUE,r=-1,t=0;t<i.length;t++){var e=i[t];e.f<n&&(r=t,n=e.f)}return r}();if(-1==n)return null;var t=i[n];i.splice(n,1),s.push(t);var e=function(n){for(var t=r.links[n.node],e=0;e<t.length;e++){var o=t[e];if(!c(o)&&!v(o)){var i=l(o,n);if(i)return i}}return!1}(t);return e||void 0},g=-1;!(++g>112)&&void 0===(f=h()););return f&&(n.push(r.nodes[d]),function t(e){var o=e.parent;if(null!=o){var i=r.nodes[o.node];n.push(i),t(o)}}(f),n.reverse()),n}}(u||(u=n("NavSystem",{}))),r._RF.pop()}}}));

System.register("chunks:///_virtual/nodes.ts",["cc"],(function(t){"use strict";var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){t("updateNextNodes",(function(t,e,n,o){void 0===n&&(n=0);if(!(o=o||t.getOutputNodes(n)))return;o.sort((function(t,e){return t.pos[1]-e.pos[1]}));for(var u=0;u<o.length;u++){var r=o[u];r.onUpdateStage&&r.onUpdateStage(t,e)}})),e._RF.push({},"989c9cFlLdCZZuSYOOEi2k9","nodes",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/notify.ts",["./rollupPluginModLoBabelHelpers.js","cc","./game.ts","./msg.ts","./singleton.ts","./data-structure.ts"],(function(t){"use strict";var n,i,u,e,c,s;return{setters:[function(t){n=t.inheritsLoose},function(t){i=t.cclegacy},function(t){u=t.Game},function(t){e=t.Msg},function(t){c=t.Singleton},function(t){s=t.Queue}],execute:function(){i._RF.push({},"12630emi6VP7bUT1a2ng/CZ","notify",void 0);t("Notify",function(t){function i(){for(var n,i=arguments.length,u=new Array(i),e=0;e<i;e++)u[e]=arguments[e];return(n=t.call.apply(t,[this].concat(u))||this).queue=new s,n.cur=null,n.counter=0,n}n(i,t);var c=i.prototype;return c.push=function(t,n,i){void 0===i&&(i=null),this.queue.push({title:t,info:n,call:i}),this.counter++,u.Instance._isInit&&this.check_notify(),e.on("msg_check_notify",this.check_notify.bind(this))},c.check_notify=function(){null!==this.cur&&null!==this.cur.call&&this.cur.call(),0!==this.counter&&(this.queue.empty()?(this.counter=0,this.cur=null):(this.cur=this.queue.pop(),e.emit("push","notify")))},i}(c));i._RF.pop()}}}));

System.register("chunks:///_virtual/npm.ts",["./rollupPluginModLoBabelHelpers.js","cc","./env"],(function(e){"use strict";var r,n,t,a,s,u,c;return{setters:[function(e){r=e.asyncToGenerator,n=e.regeneratorRuntime},function(e){t=e.cclegacy,a=e.resources,s=e.assetManager,u=e.path},function(e){c=e.EDITOR}],execute:function(){e({getAssetPath:m,loadResource:function(e,r){return b.apply(this,arguments)},loadResources:function(e){return w.apply(this,arguments)},readFile:function(e){try{return p.readFileSync(e,"utf8")}catch(e){console.error(e)}},saveJson:function(e,r){return x.apply(this,arguments)},saveString:function(e,r){return g.apply(this,arguments)}}),t._RF.push({},"72fa1I8cXVJ6ZoMbd3O3NZf","npm",void 0);var i=globalThis.electron,o=e("GAME_VIEW",cc.GAME_VIEW),p=e("fse",i&&globalThis.require("fs-extra")),f=e("path",i&&globalThis.require("path")),l=e("Editor",i&&globalThis.Editor),h=(e("projectPath",c),e("projectAssetPath",c),e("globby",i&&globalThis.require("globby"))),y=e("InPlayMode",o||!c),d=e("resUrl","db://pipeline/resources/");function b(){return(b=r(n().mark((function e(r,t){var c;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(r);case 2:return c=e.sent,e.abrupt("return",new Promise((function(e,n){function i(r,a){r?n(r):(t&&t(a),e(a))}if(y)r=u.changeExtname(r,""),a.load(r,i);else{var o=c+".meta";try{var f=p.readFileSync(o,"utf8");f=JSON.parse(f),s.loadAny([f.uuid],i)}catch(e){}}})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return v.apply(this,arguments)}function v(){return(v=r(n().mark((function e(r){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.Message.request("asset-db","query-path",d+r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(){return(x=r(n().mark((function e(r,t){var a,s;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(r);case 2:a=e.sent,s=JSON.stringify(t,null,4),p.ensureDirSync(f.dirname(a)),p.writeFileSync(a,s);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(){return(g=r(n().mark((function e(r,t){var a;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(r);case 2:a=e.sent,p.ensureDirSync(f.dirname(a)),p.writeFileSync(a,t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(){return(w=r(n().mark((function e(t){var u,c;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y){e.next=11;break}return e.next=3,m(t);case 3:if(u=e.sent,!(c=h.sync(u+"/**/*.meta"))){e.next=9;break}return e.next=8,Promise.all(c.map(r(n().mark((function e(r){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var t=p.readFileSync(r,"utf8");t=JSON.parse(t),s.loadAny([t.uuid],(function(r,t){if(r)return n(r);e(t)}))})));case 1:case"end":return e.stop()}}),e)})))));case 8:return e.abrupt("return",e.sent);case 9:e.next=14;break;case 11:return e.next=13,new Promise((function(e,r){a.loadDir(t,(function(n,t){if(n)return r(n);e(t)}))}));case 13:return e.abrupt("return",e.sent);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t._RF.pop()}}}));

System.register("chunks:///_virtual/orbit-camera.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var o,e,i,n,r,a,s,u,c,h,l,p,R;return{setters:[function(t){o=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized,r=t.createClass},function(t){a=t.cclegacy,s=t._decorator,u=t.Vec3,c=t.Quat,h=t.input,l=t.Input,p=t.Component,R=t.Vec2}],execute:function(){var g,_,f,y,d,b;a._RF.push({},"b3832Lkx/dOBZ7+Tok0/UO4","orbit-camera",void 0);var T=s.ccclass,x=s.property,v=(s.type,new u,new u,new c);new u(0,0,1),t("default",T("OrbitCamera")((f=o((_=function(t){function o(){for(var o,e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return o=t.call.apply(t,[this].concat(r))||this,i(o,"enableTouch",f,n(o)),i(o,"rotateSpeed",y,n(o)),i(o,"xRotationRange",d,n(o)),i(o,"_startRotation",b,n(o)),o._touched=!1,o._targetRotation=new u,o._rotation=new c,o}e(o,t);var a=o.prototype;return a.start=function(){this.enableTouch&&(h.on(l.EventType.TOUCH_START,this.onTouchStart,this),h.on(l.EventType.TOUCH_MOVE,this.onTouchMove,this),h.on(l.EventType.TOUCH_END,this.onTouchEnd,this)),this._targetRotation.set(this.node.eulerAngles),this._rotation.set(this.node.rotation),this.limitRotation()},a.onTouchStart=function(){this._targetRotation.set(this.node.eulerAngles),this._rotation.set(this.node.rotation),this._touched=!0},a.onTouchMove=function(t){var o=t.getDelta();c.fromEuler(v,this._targetRotation.x,this._targetRotation.y,this._targetRotation.z),c.rotateX(v,v,.005*o.y),c.rotateAround(v,v,u.UP,.005*-o.x),c.toEuler(this._targetRotation,v),this.limitRotation()},a.onTouchEnd=function(){this._touched=!1},a.limitRotation=function(){var t=this._targetRotation;t.x<this.xRotationRange.x?t.x=this.xRotationRange.x:t.x>this.xRotationRange.y&&(t.x=this.xRotationRange.y),t.z=0},a.update=function(t){var o=this._targetRotation;c.fromEuler(v,o.x,o.y,o.z),c.slerp(this._rotation,this._rotation,v,7*t*this.rotateSpeed),this.node.rotation=this._rotation},r(o,[{key:"targetRotation",get:function(){return this._startRotation.set(this._targetRotation),this._startRotation},set:function(t){this._targetRotation.set(t),this._startRotation.set(t)}}]),o}(p)).prototype,"enableTouch",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),y=o(_.prototype,"rotateSpeed",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),d=o(_.prototype,"xRotationRange",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new R(5,70)}}),o(_.prototype,"targetRotation",[x],Object.getOwnPropertyDescriptor(_.prototype,"targetRotation"),_.prototype),b=o(_.prototype,"_startRotation",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new u}}),g=_))||g);a._RF.pop()}}}));

System.register("chunks:///_virtual/output-texture.ts",["cc","./graph.ts"],(function(e){"use strict";var t,u;return{setters:[function(e){t=e.cclegacy},function(e){u=e.liteGraph}],execute:function(){function r(){var e=this;e.addInput("RenderTexture","RenderTexture"),e.addProperty("OutputName","",void 0),e.addWidget("text","OutputName","","OutputName"),this.onUpdateStage=function(e,t){e.stage},e.size=e.computeSize()}e("OutputTexture",r),t._RF.push({},"bbbc3oRsgRNlqN8FfWh1qOm","output-texture",void 0),delete u.registered_node_types["pipeline/OutputTexture"],u.registerNodeType("pipeline/OutputTexture",r),t._RF.pop()}}}));

System.register("chunks:///_virtual/pass-utils.ts",["cc","./setting.ts"],(function(t){"use strict";var s,e,i,a;return{setters:[function(t){s=t.cclegacy,e=t.rendering,i=t.gfx},function(t){a=t.settings}],execute:function(){s._RF.push({},"39afbIbkWxEqKruoABsAaX6","pass-utils",void 0);var r=e.RasterView,h=e.AttachmentType,n=e.AccessType,o=e.ResourceResidency,p=(e.LightInfo,e.SceneFlags),d=e.QueueHint,l=e.ComputeView,c=(i.Format,i.LoadOp),u=i.StoreOp,R=i.ClearFlagBit,E=(i.Color,i.Viewport);t("passUtils",new(function(){function t(){this.clearFlag=i.ClearFlagBit.COLOR,this.clearColor=new i.Color,this.clearDepthColor=new i.Color,this.ppl=void 0,this.camera=void 0,this.material=void 0,this.pass=void 0,this.rasterWidth=0,this.rasterHeight=0,this.layoutName=""}var s=t.prototype;return s.version=function(){a.passPathName+="_"+this.pass.name+"_"+this.layoutName,this.pass.setVersion(a.passPathName,a.passVersion)},s.addRasterPass=function(t,s,e,i){var a=this.ppl.addRasterPass(t,s,e);return a.name=i,this.pass=a,this.rasterWidth=t,this.rasterHeight=s,this.layoutName=e,this},s.setViewport=function(t,s,e,i){return this.pass.setViewport(new E(t,s,e,i)),this},s.addRasterView=function(t,s,e,a){void 0===e&&(e=!0),this.ppl.containsResource(t)||(s===i.Format.DEPTH_STENCIL?this.ppl.addDepthStencil(t,s,this.rasterWidth,this.rasterHeight,o.MANAGED):e?this.ppl.addRenderTarget(t,s,this.rasterWidth,this.rasterHeight,a||o.MANAGED):this.ppl.addRenderTexture(t,s,this.rasterWidth,this.rasterHeight,this.camera.window)),s!==i.Format.DEPTH_STENCIL?e?this.ppl.updateRenderTarget(t,this.rasterWidth,this.rasterHeight):this.ppl.updateRenderWindow(t,this.camera.window):this.ppl.updateDepthStencil(t,this.rasterWidth,this.rasterHeight);var p,d=c.CLEAR;return this.clearFlag===R.NONE&&(d=c.LOAD),p=s===i.Format.DEPTH_STENCIL?new r("_",n.WRITE,h.DEPTH_STENCIL,d,u.STORE,this.clearFlag,this.clearDepthColor):new r("_",n.WRITE,h.RENDER_TARGET,d,u.STORE,this.clearFlag,this.clearColor),this.pass.addRasterView(t,p),this},s.setPassInput=function(t,s){if(this.ppl.containsResource(t)){var e=new l;e.name=s,this.pass.addComputeView(t,e)}return this},s.blitScreen=function(t){return void 0===t&&(t=0),this.pass.addQueue(d.RENDER_TRANSPARENT).addCameraQuad(this.camera,this.material,t,p.NONE),this},t}()));s._RF.pop()}}}));

System.register("chunks:///_virtual/pipeline-assets.ts",["./rollupPluginModLoBabelHelpers.js","cc","./graph.ts"],(function(e){"use strict";var t,a,i,r,s,n,l,o,p,c,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized,s=e.createClass},function(e){n=e.cclegacy,l=e._decorator,o=e.Material,p=e.path,c=e.Component},function(e){u=e.loadGraph}],execute:function(){var h,m,f,y,g,M;n._RF.push({},"18607fs9EVCRqm7WHMLFwTW","pipeline-assets",void 0);var d=l.ccclass,b=l.property,v=l.executeInEditMode;e("PipelineAssets",(h=d("PipelineAssets"),m=b(o),f=b(o),h(y=v((M=t((g=function(e){function t(){for(var t,a=arguments.length,s=new Array(a),n=0;n<a;n++)s[n]=arguments[n];return t=e.call.apply(e,[this].concat(s))||this,i(t,"_materials",M,r(t)),t.materialNames=[],t.materialMap=new Map,t}a(t,e);var n=t.prototype;return n.getMaterial=function(e){return this.materialMap.get(e)},n.updateMaterials=function(){var e=this;this.materialMap.clear(),this.materialNames=this.materials.map((function(t){if(t){var a=p.basename(t.effectName);return e.materialMap.set(a,t),a}})),this.materials.map((function(e){}))},n.onEnable=function(){globalThis.pipelineAssets=this,this.updateMaterials();try{u()}catch(e){}},n.onDisable=function(){globalThis.pipelineAssets===this&&(globalThis.pipelineAssets=void 0)},s(t,[{key:"materials",get:function(){return this._materials},set:function(e){this._materials=e,this.updateMaterials()}}]),t}(c)).prototype,"_materials",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),t(g.prototype,"materials",[f],Object.getOwnPropertyDescriptor(g.prototype,"materials"),g.prototype),y=g))||y)||y));n._RF.pop()}}}));

System.register("chunks:///_virtual/pipeline-graph.ts",["./rollupPluginModLoBabelHelpers.js","cc","./env","./graph.ts","./editor.ts"],(function(e){"use strict";var t,i,n,r,o,c,a,s,p,u,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized,o=e.createClass},function(e){c=e.cclegacy,a=e._decorator,s=e.sys,p=e.Component},function(e){u=e.EDITOR},function(e){l=e.showGraph},null],execute:function(){var d,h,f;c._RF.push({},"3eb72YG65ZEiYl17GAdaqYq","pipeline-graph",void 0);var g=a.ccclass,y=a.property,v=a.executeInEditMode;e("PiepelineGraph",g("custom.PiepelineGraph")(d=v((f=t((h=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];return t=e.call.apply(e,[this].concat(o))||this,n(t,"_edit",f,r(t)),t}i(t,e);var c=t.prototype;return c.start=function(){this.onEditChanged()},c.onEditChanged=function(){var e=this;if(s.isBrowser&&u){var t=this._edit;l(t,(function(){e._edit=!1,globalThis.cce&&globalThis.cce.Node.emit("change",e.node)}))}},c.update=function(){},o(t,[{key:"edit",get:function(){return this._edit},set:function(e){this._edit=e,this.onEditChanged()}}]),t}(p)).prototype,"_edit",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),t(h.prototype,"edit",[y],Object.getOwnPropertyDescriptor(h.prototype,"edit"),h.prototype),d=h))||d)||d);c._RF.pop()}}}));

System.register("chunks:///_virtual/pipeline-manager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./camera-setting.ts","./pass-utils.ts","./setting.ts","./href-setting.ts","./taa-stage.ts","./shadow-stage.ts","./utils2.ts"],(function(e){"use strict";var a,t,n,r,i,o,s,c,d,m,l,g,u,p,f,h,v,P,S,w;return{setters:[function(e){a=e.createClass},function(e){t=e.cclegacy,n=e.ReflectionProbeManager,r=e.Node,i=e.CCObject,o=e.director,s=e.ReflectionProbe,c=e.renderer,d=e.Mat4,m=e.gfx,l=e.rendering,g=e.game,u=e.Game},function(e){p=e.CameraSetting},function(e){f=e.passUtils},function(e){h=e.settings},function(e){v=e.HrefSetting},function(e){P=e.TAAStage},function(e){S=e.CustomShadowStage},function(e){w=e.getCameraUniqueID}],execute:function(){t._RF.push({},"cd2dfC7AGtO66cmENnWM2Q3","pipeline-manager",void 0);var C=[],b=e("CustomPipelineBuilder",function(){function e(){this._shadowStage=void 0}e.registerStages=function(e,a){this.pipelines.set(e,a)},e.unregisterStages=function(e){this.pipelines.set(e,null)};var t=e.prototype;return t.setupReflectionProbe=function(e,a){if(void 0!==n)for(var t=n.probeManager.getProbes(),o=0;o<t.length;o++){var s=t[o];if(s.needRender){h.outputRGBE=!0,h.bakingReflection=!0;var c=s.cameraNode,d=s.camera,m=d.name;if(!s.cameras||!s.cameras.length){s.cameras=[];for(var l=0;l<6;l++){s._camera=null;var g=new r(s.node.name+" Camera "+l);g.hideFlags|=i.Flags.DontSave|i.Flags.HideInHierarchy,g.parent=s.node;var u=s._createCamera(g);u._name=m+l,s.cameras.push(u)}}for(var p=0;p<6;p++){var v=s.cameras[p];v.attachToScene(s.node.scene.renderScene);var P=s.bakedCubeTextures[p].window;v.changeTargetWindow(P),v.setFixedSize(P.width,P.height),v.update(),f.camera=v,s._camera=v,s.cameraNode=v.node,s.updateCameraDir(p),this.renderCamera(v,a,"main");var S=e.indexOf(v);-1!==S&&e.splice(S,1)}s._camera=d,s.cameraNode=c,s.needRender=!1,h.outputRGBE=!1,h.bakingReflection=!1}}},t.setup=function(e,a){if(globalThis.pipelineAssets){o.root.pipeline.pipelineSceneData.shadingScale=v.shadingScale,h.renderProfiler=!1,f.ppl=a;for(var t=0;t<e.length;t++){var n=e[t];n.scene&&(n.node.getComponent(s)||(t===e.length-1&&(h.renderProfiler=!0),f.camera=n,this.renderCamera(n,a)))}}},t.renderCamera=function(a,t,n){if(void 0===n&&(n=""),!C.includes(a.name)){h.tonemapped=!1,h.shadowStage=void 0,h.gbufferStage=!1,h.passPathName="";var r=a.node.getComponent(p);n||(n="forward",r?n=r.pipeline:"Editor Camera"===a.name&&(n=a.projectionType===c.scene.CameraProjection.ORTHO?"forward":"main"));var i=e.pipelines.get(n);if(i){var o=i.find((function(e){return e instanceof P}));o&&o.checkEnable()&&(a._isProjDirty=!0,a.update(!0),a.matProj.m12+=globalThis.TAASetting.instance.sampleOffset.x,a.matProj.m13+=globalThis.TAASetting.instance.sampleOffset.y,d.invert(a.matProjInv,a.matProj),d.multiply(a.matViewProj,a.matProj,a.matView),d.invert(a.matViewProjInv,a.matViewProj),a.frustum.update(a.matViewProj,a.matViewProjInv)),h.passPathName+=w(a);for(var s=void 0,m=0;m<i.length;m++){var l=i[m];l.checkEnable()&&(l.lastStage=s,l.render(a,t),s=l)}}}},a(e,[{key:"shadowStage",get:function(){return this._shadowStage||(this._shadowStage=new S),this._shadowStage}}]),e}());b.pipelines=new Map,o.root&&o.root.device&&o.root.device.gfxAPI!==m.API.WEBGL&&l.setCustomPipeline("Deferred",new b),g.on(u.EVENT_RENDERER_INITED,(function(){o.root.pipeline.setMacroInt("CC_PIPELINE_TYPE",1)})),t._RF.pop()}}}));

System.register("chunks:///_virtual/pipeline.ts",["cc","./pipeline-manager.ts","./graph.ts","./nodes.ts"],(function(){"use strict";var e,t,i,n;return{setters:[function(t){e=t.cclegacy},function(e){t=e.CustomPipelineBuilder},function(e){i=e.liteGraph},function(e){n=e.updateNextNodes}],execute:function(){e._RF.push({},"a6363+LSghOI6H6d1ONOM/f","pipeline",void 0),delete i.registered_node_types["pipeline/Pipeline"],i.registerNodeType("pipeline/Pipeline",(function(){var e=this;e.addOutput("Camera Output","Camera Output");var i=this.stages=[],a="Pipeline_"+Date.now();t.registerStages(a,i),e.addProperty("Name",a,void 0),e.addWidget("text","Name",a,"Name"),e.addProperty("Enable",!0,void 0),e.addWidget("toggle","Enable",!1,"Enable"),e.onPropertyChanged=function(e,n,a){"Name"===e&&(t.unregisterStages(a),t.registerStages(n,i))},e.onExecute=function(){i.length=0,e.properties.Enable&&n(e,i)},e.size=e.computeSize()})),e._RF.pop()}}}));

System.register("chunks:///_virtual/pool.ts",["cc"],(function(t){"use strict";var o,e,c,n,r,i;return{setters:[function(t){o=t.cclegacy,e=t.Vec2,c=t.Vec3,n=t.Vec4,r=t.Quat,i=t.Mat4}],execute:function(){o._RF.push({},"853590lOw9FE7+DhNoAzrtR","pool",void 0);var u=t("PrivatePool",function(){function t(t){this._pool=[],this._ctor=void 0,this._ctor=t}var o=t.prototype;return o.get=function(){var t=this._pool.pop();return t||(t=new this._ctor),t},o.put=function(t){this._pool.push(t)},t}());t("Pool",{Vec2:new u(e),Vec3:new u(c),Vec4:new u(n),Quat:new u(r),Mat4:new u(i)});o._RF.pop()}}}));

System.register("chunks:///_virtual/preload.ts",["./rollupPluginModLoBabelHelpers.js","cc","./game.ts","./msg.ts","./res-cache.ts","./g-scene.ts"],(function(e){"use strict";var r,n,t,i,o,a,s,c,u,l,p,f,m,h,d,g,b,v,w,y,P,k,x,L;return{setters:[function(e){r=e.applyDecoratedDescriptor,n=e.inheritsLoose,t=e.initializerDefineProperty,i=e.assertThisInitialized,o=e.asyncToGenerator,a=e.regeneratorRuntime},function(e){s=e.cclegacy,c=e._decorator,u=e.CCString,l=e.Node,p=e.JsonAsset,f=e.ProgressBar,m=e.Label,h=e.lerp,d=e.Component,g=e.setDisplayStats,b=e.director,v=e.resources,w=e.instantiate,y=e.UITransform},function(e){P=e.Game},function(e){k=e.Msg},function(e){x=e.ResCache},function(e){L=e.GScene}],execute:function(){var T,z,I,R,G,S,_,D,C,j,W,A,B,E,M,F,H,J,N;s._RF.push({},"59e03flVchPcYI+RuBOA7xg","preload",void 0);var O=c.ccclass,U=c.type,V=c.property;e("Preload",(T=O("Preload"),z=U(u),I=U(l),R=U(l),G=V(p),S=U(f),_=U(m),D=U(u),T((W=r((j=function(e){function r(){for(var r,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return r=e.call.apply(e,[this].concat(o))||this,t(r,"initGame",W,i(r)),t(r,"prefabToLoad",A,i(r)),t(r,"prefabRoot",B,i(r)),t(r,"removeWhenLoaded",E,i(r)),t(r,"savejson",M,i(r)),t(r,"progress",F,i(r)),t(r,"progressInfo",H,i(r)),t(r,"ui",J,i(r)),t(r,"inst_actions",N,i(r)),r.progressTarget=0,r.tasks=[],r.startTime=0,r}n(r,e);var s=r.prototype;return s.initGameTasks=function(){var e,r,n;this.initGame&&(this.startTime=performance.now(),L.isPreload=!0,P.Instance.preInit(this.savejson),this.tasks.push({name:"Loading Resources",task:(n=o(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.time("Load Resources"),e.next=3,new Promise((function(e){x.Instance.load((function(){P.Instance.init(),g(!1),console.timeEnd("Load Resources"),e(null)}))}));case 3:case"end":return e.stop()}}),e)}))),function(){return n.apply(this,arguments)})},{name:"Preload Scene",task:(r=o(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(["scene-menu","scene-editor","scene-map"].map((function(e){return new Promise((function(r){b.preloadScene(e,(function(){r(null)}))}))})));case 2:case"end":return e.stop()}}),e)}))),function(){return r.apply(this,arguments)})},{name:"Preload Material",task:(e=o(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){v.loadDir("materials",(function(){e(null)}))}));case 2:return e.next=4,new Promise((function(e){v.loadDir("preload_prefabs",(function(r,n){n.forEach((function(e){var r=w(e);r.parent=b.getScene(),r.parent=null})),e(null)}))}));case 4:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)})}))},s.load=function(){var e=o(a().mark((function e(){var r,n,t=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return L.isPreload=!0,this.progress&&(this.progress.getComponent(y),this.progress.progress=0),this.initGameTasks(),this.tasks,r=[],e.next=7,new Promise((function(e){var r=setInterval((function(){1-t.progress.progress<.01&&(e(null),clearInterval(r))}))}));case 7:for(r.forEach((function(e){e.node.active=!0})),n=0;n<this.removeWhenLoaded.length;n++)this.removeWhenLoaded[n].active=!1;return L.isPreload=!1,L.isLoadScene=!1,e.next=13,new Promise((function(e){setTimeout((function(){e(null)}),1e3)}));case 13:this.initGame&&k.emit("preload-inited-game",this.startTime);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),s.start=function(){var e=o(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),s.update=function(e){this.progress&&(this.progress.progress=h(this.progress.progress,this.progressTarget,e))},r}(d)).prototype,"initGame",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),A=r(j.prototype,"prefabToLoad",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),B=r(j.prototype,"prefabRoot",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=r(j.prototype,"removeWhenLoaded",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),M=r(j.prototype,"savejson",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=r(j.prototype,"progress",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=r(j.prototype,"progressInfo",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),J=r(j.prototype,"ui",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),N=r(j.prototype,"inst_actions",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),C=j))||C));s._RF.pop()}}}));

System.register("chunks:///_virtual/projectile-grenade.ts",["./rollupPluginModLoBabelHelpers.js","cc","./damage-core.ts","./sound.ts"],(function(e){"use strict";var i,t,o,n,r,l,a,d,s,c,u,p,h,g;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,o=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){r=e.cclegacy,l=e._decorator,a=e.CCFloat,d=e.Vec3,s=e.Collider,c=e.RigidBody,u=e.v3,p=e.Component},function(e){h=e.calculateDamageNode},function(e){g=e.Sound}],execute:function(){var f,y,b,v,x,z,_,m,E,T,F;r._RF.push({},"b56c0MoOdlHyKrrs0ShL+YC","projectile-grenade",void 0);var w=l.ccclass,S=l.property;e("ProjectileGrenade",(f=w("ProjectileGrenade"),y=S(a),b=S(d),v=S(s),x=S(c),f((m=i((_=function(e){function i(){for(var i,t=arguments.length,r=new Array(t),l=0;l<t;l++)r[l]=arguments[l];return(i=e.call.apply(e,[this].concat(r))||this)._data=void 0,i._size=u(1,1,1),o(i,"explodeTime",m,n(i)),o(i,"endSize",E,n(i)),o(i,"collider",T,n(i)),o(i,"rigidbody",F,n(i)),i.updateFunction=void 0,i.actor=void 0,i}t(i,e);var r=i.prototype;return r.onThrow=function(e,i,t){var o;this._data=e,this.actor=t,null==(o=this.rigidbody)||o.applyImpulse(i),this.updateFunction=this.waitExplode},r.onExplode=function(){this.collider.isTrigger=!0,this.rigidbody.useGravity=!1,this.updateFunction=this.exploding,this.collider.on("onTriggerEnter",this.onTriggerEnter,this),g.on(this._data.sound_explode)},r.onExplodeEnd=function(){this.updateFunction=void 0,this.collider.off("onTriggerEnter",this.onTriggerEnter,this),this.node.active=!1},r.onTriggerEnter=function(e){var i=e.otherCollider.node.getWorldPosition();h(this._data,e.otherCollider.node,i,this.actor)},r.waitExplode=function(e){this.explodeTime-=e,this.explodeTime<=0&&this.onExplode()},r.exploding=function(e){d.lerp(this._size,this._size,this.endSize,5*e),this.node.setWorldScale(this._size),Math.abs(this._size.x-this.endSize.x)<.1&&this.onExplodeEnd()},r.update=function(e){void 0!==this.updateFunction&&this.updateFunction(e)},i}(p)).prototype,"explodeTime",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),E=i(_.prototype,"endSize",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return u(6,6,6)}}),T=i(_.prototype,"collider",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=i(_.prototype,"rigidbody",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=_))||z));r._RF.pop()}}}));

System.register("chunks:///_virtual/raycast-gpu.ts",["cc"],(function(n){"use strict";var t,e;return{setters:[function(n){t=n.Mat4,e=n.cclegacy}],execute:function(){function r(n){var t=n[0]*n[0]+n[1]*n[1]+n[2]*n[2];return t=1/Math.sqrt(t),[n[0]*t,n[1]*t,n[2]*t]}function o(n,t){var e=n[0],r=n[1],o=n[2],u=t[0],a=t[1],i=t[2];return[r*i-o*a,o*u-e*i,e*a-r*u]}function u(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function a(n){return Math.sqrt(n[0]*n[0]+n[1]*n[1]+n[2]*n[2])}function i(n,t,e){return[n,t,e]}function c(n,t){return[n[0]-t[0],n[1]-t[1],n[2]-t[2]]}function f(n,t){return[n[0]+t[0],n[1]+t[1],n[2]+t[2]]}function s(n,t,e,r){var o=1/t[0],u=1/t[1],a=1/t[2],i=(e[0]-n[0])*o,c=(r[0]-n[0])*o,f=(e[1]-n[1])*u,s=(r[1]-n[1])*u,h=(e[2]-n[2])*a,l=(r[2]-n[2])*a,d=Math.max(Math.max(Math.min(i,c),Math.min(f,s)),Math.min(h,l)),g=Math.min(Math.min(Math.max(i,c),Math.max(f,s)),Math.max(h,l));return g<0||d>g?0:d>0?d:g}function h(n,t){return[n[0]*t,n[1]*t,n[2]*t]}function l(n,t){return[n[0]*t[0],n[1]*t[1],n[2]*t[2]]}function d(n,t,e,r,a){var i=1e-5,f=c(r,e),s=c(a,e),h=o(t,s),l=u(f,h);if(l<i&&
/*!doubleSided ||*/
l>-1e-5)return 0;var d=1/l,g=c(n,e),v=u(g,h)*d;if(v<-1e-5||v>1.00001)return 0;var p=o(g,f),M=u(t,p)*d;if(M<-1e-5||v+M>1.00001)return 0;var m=u(s,p)*d;return m<0?0:m}function g(n,t,e,r,o,u,a,i,c,f,s,h,l,d,g,v){var p=n*u-t*o,M=n*a-e*o,m=n*i-r*o,x=t*a-e*u,b=t*i-r*u,F=e*i-r*a,y=c*d-f*l,_=c*g-s*l,I=c*v-h*l,B=f*g-s*d,C=f*v-h*d,E=s*v-h*g,w=p*E-M*C+m*B+x*I-b*_+F*y;if(0===w)return[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]];w=1/w;var z=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]];return z[0][0]=(u*E-a*C+i*B)*w,z[0][1]=(e*C-t*E-r*B)*w,z[0][2]=(d*F-g*b+v*x)*w,z[0][3]=(s*b-f*F-h*x)*w,z[1][0]=(a*I-o*E-i*_)*w,z[1][1]=(n*E-e*I+r*_)*w,z[1][2]=(g*m-l*F-v*M)*w,z[1][3]=(c*F-s*m+h*M)*w,z[2][0]=(o*C-u*I+i*y)*w,z[2][1]=(t*I-n*C-r*y)*w,z[2][2]=(l*b-d*m+v*p)*w,z[2][3]=(f*m-c*b-h*p)*w,z[3][0]=(u*_-o*B-a*y)*w,z[3][1]=(n*B-t*_+e*y)*w,z[3][2]=(d*M-l*x-g*p)*w,z[3][3]=(c*x-f*M+s*p)*w,z}function v(){return[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]]}function p(n,t){for(var e=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],r=0;r<4;r++)for(var o=0;o<4;o++)e[r][o]=n[o+4*r+t];return e}function M(n,t,e,r,o,u,a,c,f,s,h,l,d,v,p,M,m){var x=g(t,e,r,o,u,a,c,f,s,h,l,d,v,p,M,m),b=n[0],F=n[1],y=n[2],_=x[0][3]*b+x[1][3]*F+x[2][3]*y+x[3][3];return _=0!==_?Math.abs(1/_):1,i((x[0][0]*b+x[1][0]*F+x[2][0]*y+x[3][0])*_,(x[0][1]*b+x[1][1]*F+x[2][1]*y+x[3][1])*_,(x[0][2]*b+x[1][2]*F+x[2][2]*y+x[3][2])*_)}var m,x,b;e._RF.push({},"bb282UvgvBGcLg+YL3yYbAL","raycast-gpu",void 0);var F=0;n("default",{createKernel:function(n,t,e){for(var b=[],y=0;y<n.length;y++)for(var _=n[y],I=0;I<_.subModels.length;++I)b.push(_.subModels[I]);F=b.length;var B=Math.floor(Math.sqrt(t))+1,C=[B,B,e],E=(m||((m=new GPU({})).addFunction(i),m.addFunction(c),m.addFunction(f),m.addFunction(v),m.addFunction(p),m.addFunction(g),m.addFunction(M),m.addFunction(d),m.addFunction(h),m.addFunction(l),m.addFunction(s),m.addFunction(u),m.addFunction(r),m.addFunction(a),m.addFunction(o)),m);if(x=E.createKernel((function(n,t,e,o){var u=3*this.thread.z,h=i(t[u+0],t[u+1],t[u+2]),g=3*(this.thread.x+this.thread.y*this.constants.threadXCount),v=i(e[g],e[g+1],e[g+2]),m=c(v,h);m=r(m);for(var x=1e7,b=-1,F=0,y=-1,_=0,I=-1,B=0;_<o;)for(;_<o;){var C=n[F++],E=(n[F++],n[F++]),w=n[F++],z=n[F++],O=n[F++],k=p(n,O);O+=16;var q=i(n[O++],n[O++],n[O++]),A=i(n[O++],n[O++],n[O++]),L=i(n[O++],n[O++],n[O++]);if(s(h,m,c(A,L),f(A,L))<=0)_++;else{y=-2;var Y=M(h,k[0][0],k[0][1],k[0][2],k[0][3],k[1][0],k[1][1],k[1][2],k[1][3],k[2][0],k[2][1],k[2][2],k[2][3],k[3][0],k[3][1],k[3][2],k[3][3]),G=M(v,k[0][0],k[0][1],k[0][2],k[0][3],k[1][0],k[1][1],k[1][2],k[1][3],k[2][0],k[2][1],k[2][2],k[2][3],k[3][0],k[3][1],k[3][2],k[3][3]),K=a(l(G=r(G=c(G,Y)),q));for(I=Math.max(I,w),B=0;B<w;)for(;B<w;){var R=3*n[E+B],S=3*n[E+B+1],U=3*n[E+B+2],X=d(Y,G,i(n[C+R],n[C+R+1],n[C+R+2]),i(n[C+S],n[C+S+1],n[C+S+2]),i(n[C+U],n[C+U+1],n[C+U+2]));(X*=K)>0&&(y=-3,X<x&&(x=X,b=z)),B+=3}_++}}return y=-I,b<0&&(b=y),b}),{constants:{threadXCount:C[0],threadYCount:C[1],cornersCount:e},output:C}),this.createMeshBuffer(n),!m._hacked){m._hacked=!0;var w=function(){if("function"==typeof m.context[z]){var n=m.context[z];m.context[z]=function(){var t=n.apply(m.context,arguments);return t}}};for(var z in m.context)w()}},createMeshBuffer:function(n){console.time("prepare buffers");for(var e=[],r=[],o=0,u=[],a=[],i=0;i<n.length;i++){for(var c=n[i],f=0;f<c.subModels.length;++f){e.push(c.subModels[f]);var s=c.subModels[f].subMesh,h=s,l=r.indexOf(s);-1===l&&(l=r.length,r.push(s),h._vbOffset=o,h._vbCount=s.geometricInfo.positions.length,o+=s.geometricInfo.positions.length,h._ibOffset=o,h._ibCount=s.geometricInfo.indices.length,o+=s.geometricInfo.indices.length),u.push(h._vbOffset),u.push(h._vbCount),u.push(h._ibOffset),u.push(h._ibCount),u.push(i),u.push(a.length)}t.toArray(a,c.node.worldMatrix,a.length);var d=c.node.worldScale;a.push(d.x,d.y,d.z);var g=c.worldBounds.center,v=c.worldBounds.halfExtents;a.push(g.x,g.y,g.z),a.push(v.x,v.y,v.z)}b=new Float32Array(1+o+a.length+u.length);for(var p=0;p<u.length;p+=6)u[p]+=u.length+a.length,u[p+2]+=u.length+a.length,u[p+5]+=u.length;b.set(u),b.set(a,u.length);var M=0;r.forEach((function(n){b.set(n.geometricInfo.positions,M+u.length+a.length),M+=n.geometricInfo.positions.length,b.set(n.geometricInfo.indices,M+u.length+a.length),M+=n.geometricInfo.indices.length,n.geometricInfo.indices.length/3})),console.timeEnd("prepare buffers"),console.log("submodelBuffers.length : "+u.length),console.log("modelBuffers.length : "+a.length),console.log("_meshBuffer.length : "+b.length)},raycastModels:function(n,t,e){var r=[];if(!x)return r;var o=[];e.forEach((function(n){return o.push(n.x,n.y,n.z)}));var u=[];return t.forEach((function(n){return u.push(n.x,n.y,n.z)})),x(b,u,o,F).forEach((function(t){t.forEach((function(t){t.forEach((function(t){var e=n[t];e&&-1===r.indexOf(e)&&r.push(e)}))}))})),r}});e._RF.pop()}}}));

System.register("chunks:///_virtual/raycast.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var r,o,t,n,a,i,d,s;return{setters:[function(e){r=e.createForOfIteratorHelperLoose},function(e){o=e.Layers,t=e.renderer,n=e.Mat4,a=e.Vec3,i=e.cclegacy,d=e.geometry,s=e.gfx}],execute:function(){i._RF.push({},"660470/Qm1MiZ+cla3ojBaJ","raycast",void 0);var l=d.intersect,c=d.Ray,u=d.Triangle,f=[],v=new n,m=new c,M=u.create(),g=new a,y=1/0,p=function(e,r,o,t,n){if(void 0===n&&(n=1/0),y=n,o===s.PrimitiveMode.TRIANGLE_LIST)for(var i=r.length,d=0;d<i;d+=3){var c=3*r[d],u=3*r[d+1],f=3*r[d+2];a.set(M.a,e[c],e[c+1],e[c+2]),a.set(M.b,e[u],e[u+1],e[u+2]),a.set(M.c,e[f],e[f+1],e[f+2]);var v=l.rayTriangle(m,M,t);v<=0||v>=y||(y=v)}else if(o===s.PrimitiveMode.TRIANGLE_STRIP)for(var g=r.length-2,p=0,h=0;h<g;h+=1){var b=3*r[h-p],T=3*r[h+p+1],A=3*r[h+2];a.set(M.a,e[b],e[b+1],e[b+2]),a.set(M.b,e[T],e[T+1],e[T+2]),a.set(M.c,e[A],e[A+1],e[A+2]),p=~p;var B=l.rayTriangle(m,M,t);B<=0||B>=y||(y=B)}else if(o===s.PrimitiveMode.TRIANGLE_FAN){var I=r.length-1,L=3*r[0];a.set(M.a,e[L],e[L+1],e[L+2]);for(var w=1;w<I;w+=1){var E=3*r[w],F=3*r[w+1];a.set(M.b,e[E],e[E+1],e[E+2]),a.set(M.c,e[F],e[F+1],e[F+2]);var S=l.rayTriangle(m,M,t);S<=0||S>=y||(y=S)}}};e("default",{raycastAllModels:function(e,i,d,s){void 0===d&&(d=o.Enum.DEFAULT),void 0===s&&(s=1/0),f.length=0;for(var c,u=r(e.models);!(c=u()).done;){var M=c.value,h=M.transform;if(h&&M.enabled&&M.node.layer&d&&M.worldBounds){var b=l.rayAABB(i,M.worldBounds);if(!(b<=0||b>=s)){if(M.type===t.scene.ModelType.DEFAULT){n.invert(v,h.getWorldMatrix(v)),a.transformMat4(m.o,i.o,v),a.normalize(m.d,a.transformMat4Normal(m.d,i.d,v)),b=1/0;for(var T=0;T<M.subModels.length;++T){var A=M.subModels[T].subMesh;if(A&&A.geometricInfo){var B=A.geometricInfo,I=B.positions,L=B.indices,w=B.doubleSided;p(I,L,A.primitiveMode,w,s),b=Math.min(b,y*a.multiply(g,m.d,h.worldScale).length())}}}b<s&&f.push({node:M.node,distance:b})}}}return f.sort((function(e,r){return e.distance-r.distance})),f},raycastModels:function(e,i,d,s,c){void 0===d&&(d=o.Enum.DEFAULT),void 0===s&&(s=1/0),void 0===c&&(c=!1),f.length=0;for(var u,M=r(e);!(u=M()).done;){var h=u.value,b=h.transform;if(b&&(c||h.enabled)&&h.node.layer&d&&h.worldBounds){var T=l.rayAABB(i,h.worldBounds);if(!(T<=0||T>=s)){if(h.type===t.scene.ModelType.DEFAULT){n.invert(v,b.getWorldMatrix(v)),a.transformMat4(m.o,i.o,v),a.normalize(m.d,a.transformMat4Normal(m.d,i.d,v)),T=1/0;for(var A=0;A<h.subModels.length;++A){var B=h.subModels[A].subMesh;if(B&&B.geometricInfo){var I=B.geometricInfo,L=I.positions,w=I.indices,E=I.doubleSided;p(L,w,B.primitiveMode,E,s),T=Math.min(T,y*a.multiply(g,m.d,b.worldScale).length())}}}T<s&&f.push({node:h.node,distance:T})}}}return f.sort((function(e,r){return e.distance-r.distance})),f},raycastModel:function(e,r,o){void 0===o&&(o=1/0);var i=e.transform,d=l.rayAABB(r,e.worldBounds);if(d<=0||d>=o)return null;if(e.type===t.scene.ModelType.DEFAULT){n.invert(v,i.getWorldMatrix(v)),a.transformMat4(m.o,r.o,v),a.normalize(m.d,a.transformMat4Normal(m.d,r.d,v)),d=1/0;for(var s=0;s<e.subModels.length;++s){var c=e.subModels[s].subMesh;if(c&&c.geometricInfo){var u=c.geometricInfo,f=u.positions,M=u.indices,h=u.doubleSided;p(f,M,c.primitiveMode,h,o),d=Math.min(d,y*a.multiply(g,m.d,i.worldScale).length())}}}return d<o?{node:e.node,distance:d}:null}});i._RF.pop()}}}));

System.register("chunks:///_virtual/reflection-cluster.ts",["./rollupPluginModLoBabelHelpers.js","cc","./utils.ts","./world-cluster.ts"],(function(t){"use strict";var e,s,i,r,a,o,n,l,c,u,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,s=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){a=t.cclegacy,o=t._decorator,n=t.Vec3,l=t.director,c=t.ReflectionProbe},function(t){u=t.packCubemapAtlas},function(t){f=t.WorldCluster}],execute:function(){var d,h,p;a._RF.push({},"74d5ezDh51Hd4NATqD2io/i","reflection-cluster",void 0);var b=o.ccclass,v=o.property,y=new n;t("ReflectionWorldCluster",b("sync.ReflectionWorldCluster")((p=e((h=function(t){function e(){for(var e,s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))||this)._atlas=void 0,e.pixelsPerObjectFloat=3,i(e,"forceUpdateAtlas",p,r(e)),e.dirty=!0,e.probes=[],e}s(e,t);var a=e.prototype;return a.findObjects=function(){if(this.probes=l.getScene().getComponentsInChildren(c),!this._atlas||this.forceUpdateAtlas){var t=this.probes.map((function(t){return t._cubemap}));this._atlas=u(t),this.forceUpdateAtlas=!1}return this.probes},a.update=function(e){this.dirty&&(this.dirty=!1,t.prototype.update.call(this,e))},a.updateClusters=function(){this.clustersCounts.fill(0),this.clustersData.fill(0),this.clustersDistances.fill(1/0);for(var t=this._cells.x,e=this._cells.y,s=this._cells.z,i=this.clustersCounts,r=this.clustersDistances,a=this._maxCellObjectCount,o=this.clustersData,l=this._pixelsPerCellCount,c=this._usedObjects,u=1;u<c.length;u++){var f=c[u].object;f&&this.addObjectData(f,u)}for(var d=0;d<e;d++)for(var h=0;h<s;h++)for(var p=0;p<t;p++)for(var b=p+t*(h+d*s),v=y.set(this.boundsDelta).multiply3f((p+.5)/t,(d+.5)/e,(h+.5)/s).add(this.boundsMin),x=i[b],z=1;z<c.length;z++){var _=c[z],m=n.squaredDistance(v,_.center);if(x<a)o[l*b*4+x]=c.indexOf(_),i[b]=x,r[b]=m,x++;else for(var C=a;C>=0;C--){var D=l*b*4+C;if(m<r[D]){o[D]=c.indexOf(_),r[D]=m;break}}}},a.addObjectData=function(t,e){var s=this.dataInfoFloat,i=e*this.dataInfoTextureFloat.width*4,r=t.node.worldPosition,a=Math.max(t.size.x,t.size.y,t.size.z);s[i++]=r.x,s[i++]=r.y,s[i++]=r.z,s[i++]=a;var o=this._atlas.cubemaps.indexOf(t.cubemap),n=this._atlas.offsets[o];n&&(s[i++]=n[0],s[i++]=n[1],s[i++]=n[2],s[i++]=n[3])},a.getBoundingBox=function(t,e){var s=Math.max(t.size.x,t.size.y,t.size.z),i=t.node.worldPosition;e.min.set(i.x-s,i.y-s,i.z-s),e.max.set(i.x+s,i.y+s,i.z+s),e.radius=s,e.center.set(i)},a.drawObjects=function(){},e}(f)).prototype,"forceUpdateAtlas",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),d=h))||d);a._RF.pop()}}}));

System.register("chunks:///_virtual/reflection-probe-utils.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,r,o,i,n;return{setters:[function(e){t=e.inheritsLoose},function(e){r=e.cclegacy,o=e._decorator,i=e.ReflectionProbe,n=e.Component}],execute:function(){var p;r._RF.push({},"b32cf5stuhFQIY+C5NC8FIp","reflection-probe-utils",void 0);var s=o.ccclass,c=(o.property,o.executeInEditMode),u=e("ReflectionProbes",{probes:[]});e("ReflectionProbeUtils",s("ReflectionProbeUtils")(p=c(p=function(e){function r(){for(var t,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))||this).probe=void 0,t.capturing=!1,t}t(r,e);var o=r.prototype;return o.onEnable=function(){this.probe=this.getComponent(i),-1===u.probes.indexOf(this.probe)&&u.probes.push(this.probe)},o.onDisable=function(){var e=u.probes.indexOf(this.probe);-1!==e&&u.probes.splice(e,1)},o.runtimeCapture=function(e){if(void 0===e&&(e=!0),this.capturing=e,e){if(!this.probe)return;this.probe.probe||this.probe._createProbe(),this.probe.probe.captureCubemap()}},o.update=function(){this.capturing&&(this.probe.probe._needRender=!0)},r}(n))||p)||p);r._RF.pop()}}}));

System.register("chunks:///_virtual/render-to-screen.ts",["cc","./graph.ts"],(function(e){"use strict";var t,r;return{setters:[function(e){t=e.cclegacy},function(e){r=e.liteGraph}],execute:function(){function n(){var e=this;e.addInput("RenderTexture","RenderTexture"),this.onUpdateStage=function(e){var t=e.stage;t&&(t.renderToScreen=!0)},e.size=e.computeSize()}e("RenderToScreen",n),t._RF.push({},"50de7eq/mtO9bc2m7Zytn2t","render-to-screen",void 0),delete r.registered_node_types["pipeline/RenderToScreen"],r.registerNodeType("pipeline/RenderToScreen",n),t._RF.pop()}}}));

System.register("chunks:///_virtual/render-tool.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,n,r,i,o,c;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,r=e._decorator,i=e.EffectAsset,o=e.Material,c=e.Component}],execute:function(){var u;n._RF.push({},"626fePm0ulBBpiiJXvBNrQQ","render-tool",void 0);var a=r.ccclass;r.property,e("RenderTool",a("RenderTool")(u=function(e){function n(){return e.apply(this,arguments)||this}return t(n,e),n.createMat=function(e){i.get(e);var t=new o;return t.initialize({effectName:e}),t},n.changeEffect=function(e,t){i.get(e);t.initialize({effectName:e})},n}(c))||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/res-cache.ts",["./rollupPluginModLoBabelHelpers.js","cc","./singleton.ts","./res.ts","./msg.ts","./fx-auto-remove.ts"],(function(n){"use strict";var t,e,o,r,a,c,s,i,u,f;return{setters:[function(n){t=n.inheritsLoose,e=n.asyncToGenerator,o=n.regeneratorRuntime},function(n){r=n.cclegacy,a=n._decorator,c=n.Vec3},function(n){s=n.Singleton},function(n){i=n.Res},function(n){u=n.Msg},function(n){f=n.FxAutoRemove}],execute:function(){var d;r._RF.push({},"4a886JebGhDUZ9A8gI6mcjO","res-cache",void 0);var h=a.ccclass;a.property,n("ResCache",h("ResCache")(d=function(n){function r(){for(var t,e=arguments.length,o=new Array(e),r=0;r<e;r++)o[r]=arguments[r];return(t=n.call.apply(n,[this].concat(o))||this)._json={},t._prefab={},t._txt={},t._sprite={},t._sound={},t._callback=void 0,t.msg=void 0,t}t(r,n);var a=r.prototype;return a.load=function(){var n=e(o().mark((function n(t){var a=this;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:this._callback=t,u.on("msg_check_res_cache_end",this.checkEnd.bind(this)),i.loadJson("data/data-res-cache",e(o().mark((function n(t,e){var c;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t){n.next=3;break}return console.error("Load cache res error:",t),n.abrupt("return");case 3:if(a.msg={id:1,action:"load cache",current:"resource",wait_count:1,count:1},e&&e.json){n.next=7;break}return console.error("resource cache data is null",e),n.abrupt("return");case 7:(c=e.json.prefab)&&r.Instance.loadPrefab(c),r.Instance.loadJson(e.json.json),r.Instance.loadSprite(e.json.sprite),r.Instance.loadSound(e.json.sound),u.emit("msg_loading",a.msg);case 13:case"end":return n.stop()}}),n)}))));case 3:case"end":return n.stop()}}),n,this)})));return function(t){return n.apply(this,arguments)}}(),a.addLoad=function(){this.msg.wait_count++,this.msg.count++},a.removeLoad=function(){this.msg.wait_count--},a.getJson=function(n){var t=this._json[n];return t||(console.error("Res cache not find json res:",n),null)},a.getPrefab=function(n){var t=this._prefab[n];return t||void console.error("Res cache not find prefab res:",n)},a.getTxt=function(n){var t=this._txt[n];if(t)return t;console.error("Res cache not find text res:",n)},a.getSprite=function(n){var t=this._sprite[n];if(void 0!==t)return t;console.error("Res cache not find sprite res:",n)},a.getSound=function(n){var t=this._sound[n];if(void 0!==t)return t;console.error("Res cache not find sound res:",n)},a.setJson=function(n){var t=this;n.forEach((function(n){t._json[n.name]=n}))},a.preloadFxShader=function(n){n.name.includes("fx_")&&i.inst(n,void 0,c.ZERO).addComponent(f)},a.setPrefab=function(n){var t=this;n.forEach((function(n){t._prefab[n.name]=n}))},a.setText=function(n){var t=this;n.forEach((function(n){t._txt[n.name]=n}))},a.setSprite=function(n){var t=this;n.forEach((function(n){t._sprite[n.name]=n}))},a.setSound=function(n){var t=this;n.forEach((function(n){t._sound[n.name]=n}))},a.loadJson=function(n){var t=this;n.forEach((function(n){t.addLoad(),i.loadDirJson(n,(function(n,e){e&&(r.Instance.setJson(e),t.removeLoad())}))}))},a.loadPrefab=function(n){var t=this;n.forEach((function(n){t.addLoad(),i.loadDirPrefab(n,(function(n,e){e&&(r.Instance.setPrefab(e),t.removeLoad())}))}))},a.loadText=function(n){var t=this;n.forEach((function(n){t.addLoad(),i.loadDirText(n,(function(n,e){e&&(r.Instance.setText(e),t.removeLoad())}))}))},a.loadSprite=function(n){var t=this;n.forEach((function(n){t.addLoad(),i.loadDirSprite(n,(function(n,e){e&&(r.Instance.setSprite(e),t.removeLoad())}))}))},a.loadSound=function(n){var t=this;n.forEach((function(n){t.addLoad(),i.loadDirSound(n,(function(n,e){e&&(r.Instance.setSprite(e),t.removeLoad())}))}))},a.checkEnd=function(){this._callback&&i.count<=0&&(this._callback(),this._callback=void 0)},r}(s))||d);r._RF.pop()}}}));

System.register("chunks:///_virtual/res-destroy.ts",["./rollupPluginModLoBabelHelpers.js","cc","./msg.ts"],(function(s){"use strict";var t,e,o,r,n;return{setters:[function(s){t=s.inheritsLoose},function(s){e=s.cclegacy,o=s._decorator,r=s.Component},function(s){n=s.Msg}],execute:function(){var i;e._RF.push({},"d03933Pia1K3KIbUS6vPnB8","res-destroy",void 0);var c=o.ccclass;o.property,s("ResDestroy",c("ResDestroy")(i=function(s){function e(){for(var t,e=arguments.length,o=new Array(e),r=0;r<e;r++)o[r]=arguments[r];return(t=s.call.apply(s,[this].concat(o))||this).isDestroy=!1,t.msg=void 0,t}t(e,s);var o=e.prototype;return o.start=function(){var s=this;n.bind("msg_destroy_res",(function(){s.isDestroy=!0;var t=s.node.children.length-1;s.msg={id:0,action:"destroy",current:" objects node. ",wait_count:t,count:t},n.emit("msg_loading",s.msg),globalThis.ppSettings&&(globalThis.ppSettings.passVersion++,console.log("msg_destroy_res: passVersion - "+globalThis.ppSettings.passVersion))}),this)},o.update=function(s){if(this.isDestroy){var t=this.node.children.length-1;if(this.msg.wait_count=t,t<=-1)return this.isDestroy=!1,void console.log("res is destroy");this.node.children[t].destroy()}},e}(r))||i);e._RF.pop()}}}));

System.register("chunks:///_virtual/res-editor-cache.ts",["./rollupPluginModLoBabelHelpers.js","cc","./res-cache.ts"],(function(e){"use strict";var t,r,s,i,n,o,c,a,u,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,s=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){n=e.cclegacy,o=e._decorator,c=e.JsonAsset,a=e.Prefab,u=e.Component},function(e){p=e.ResCache}],execute:function(){var l,f,h,b,y,d,g;n._RF.push({},"e457eyimp1BeIQqii83QS/s","res-editor-cache",void 0);var v=o.ccclass,m=o.property;e("ResEditorCache",(l=v("ResEditorCache"),f=m(c),h=m(a),l((d=t((y=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return t=e.call.apply(e,[this].concat(n))||this,s(t,"jsonAssets",d,i(t)),s(t,"prefabs",g,i(t)),t}return r(t,e),t.prototype.init=function(){p.Instance.setJson(this.jsonAssets),p.Instance.setPrefab(this.prefabs)},t}(u)).prototype,"jsonAssets",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),g=t(y.prototype,"prefabs",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),b=y))||b));n._RF.pop()}}}));

System.register("chunks:///_virtual/res-pool.ts",["./rollupPluginModLoBabelHelpers.js","cc","./msg.ts","./singleton.ts","./res.ts","./res-cache.ts","./data-core.ts"],(function(t){"use strict";var i,o,e,s,n,r,a,h;return{setters:[function(t){i=t.inheritsLoose},function(t){o=t.cclegacy,e=t._decorator},function(t){s=t.Msg},function(t){n=t.Singleton},function(t){r=t.Res},function(t){a=t.ResCache},function(t){h=t.DataPoolInst}],execute:function(){var _;o._RF.push({},"b49ebXJauNL7piZ4hUve25/","res-pool",void 0);var c=e.ccclass,l=(t("ResPool",c("ResPool")(_=function(t){function o(){for(var i,o=arguments.length,e=new Array(o),s=0;s<o;s++)e[s]=arguments[s];return(i=t.call.apply(t,[this].concat(e))||this)._root=void 0,i._pool={},i}i(o,t);var e=o.prototype;return e.init=function(){},e.initPool=function(t){for(var i in this._root=t,s.on("msg_pool_recycle",this.pool_recycle.bind(this)),h._data){var o=h._data[i];this.newPool(i,o)}},e.pool_recycle=function(){for(var t in this._pool)this._pool[t].recycle()},e.pop=function(t,i,o){if(!this._pool[t])throw new Error("Can not find pool: "+t);var e=this._pool[t].pop();return o&&(e.parent=o),e.setWorldPosition(i),e.active=!0,e},e.push=function(t){this._pool[t.name].push(t)},e.pushByName=function(t,i){console.log(t,i),this._pool[t].push(i)},e.newPool=function(t,i){var o=new l(t,this._root,i);this._pool[t]=o},o}(n))||_),t("pool",function(){function t(t,i,o){this._index=0,this._items=new Array,this._state=new Array,this._max=0,this._realMax=0,this._name="",this._prefab=void 0,this._root=void 0,this._max=o,this._name=t,this._prefab=a.Instance.getPrefab(this._name),this._root=i;for(var e=0;e<this._max;e++){var s=r.inst(this._prefab,this._root);s.pool_index=e,this._items[e]=s,this._state[e]=1,s.active=!1}}var i=t.prototype;return i.recycle=function(){for(var t=0;t<this._max;t++)this._state[t]=1,this._items[t].active=!1,this._items[t].setPosition(1e4,1e4,1e4)},i.pop=function(){for(var t=0;t<this._max;t++){if(1==this._state[this._index]){var i=this._items[this._index];return this._state[this._index]=2,i.active=!0,this.next(),i}this.next()}return this.increaseRes()},i.next=function(){this._index++,this._index>=this._max&&(this._index=0)},i.push=function(t){t.active=!1;var i=t.pool_index;this._state[i]=1,t.parent=this._root},i.increaseRes=function(){var t=r.inst(this._prefab,this._root);return this._index=this._max,this._max++,void 0!==t.pool_index&&console.log("pool create error."),t.pool_index=this._index,this._items[this._index]=t,this._state[this._index]=1,t},t}()));o._RF.pop()}}}));

System.register("chunks:///_virtual/res-texture.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(_){"use strict";var e,o,i,r;return{setters:[function(_){e=_.asyncToGenerator,o=_.regeneratorRuntime},function(_){i=_.cclegacy,r=_.loader}],execute:function(){_("loadTextures",l),i._RF.push({},"0aad6yySg5JDryy0LMn9k/v","res-texture",void 0);var a=["CyborgEnemy01_BC","CyborgEnemy01_N","CyborgEnemy01_ORM","CyborgEnemy02_BC","CyborgEnemy02_N","CyborgEnemy02_ORM","DefaultMaterial_BaseColor","DefaultMaterial_MetallicRoughness","DefaultMaterial_Normal","MI_AirConditioners01_BaseColor","MI_AirConditioners01_MetallicRoughness","MI_AirConditioners01_Normal","MI_AirConditioners01_Occlusion","MI_AirConditioner_Decal01_BaseColor","MI_AirConditioner_Decal01_MetallicRoughness","MI_AirConditioner_Decal01_Normal","MI_AirConditioningPipe_01_BaseColor","MI_AirConditioningPipe_01_MetallicRoughness","MI_AirConditioningPipe_01_Normal","MI_AirConditioningPipe_01_Occlusion","MI_AirConditioning_01_BaseColor","MI_AirConditioning_01_MetallicRoughness","MI_AirConditioning_01_Normal","MI_AirConditioning_01_Occlusion","MI_CarsEmissive_Emissive","MI_ContainerP4_01_BaseColor","MI_ContainerP4_01_MetallicRoughness","MI_ContainerP4_01_Normal","MI_ContainerP4_01_Occlusion","MI_EnvirAssets_01_Emissive","MI_Fence_01_BaseColor","MI_Fence_01_MetallicRoughness","MI_Fence_01_Normal","MI_Fence_01_Occlusion","MI_FrontConcrete01_BaseColor","MI_FrontConcrete01_MetallicRoughness","MI_FrontConcrete01_Normal","MI_FrontConcrete02_BaseColor","MI_FrontConcrete02_MetallicRoughness","MI_FrontConcrete02_Normal","MI_FrontConDec03_BaseColor","MI_FrontConDec03_MetallicRoughness","MI_FrontConDec04_BaseColor","MI_Glass03_BaseColor","MI_Glass_02_BaseColor","MI_LampSet02_Emissive","MI_MetalBeam01_BaseColor","MI_MetalBeam01_MetallicRoughness","MI_MetalBeam01_Normal","MI_MetalBeam01_Occlusion","MI_MetalBeam_Painted01_BaseColor","MI_MetalBumpers_BaseColor","MI_MetalBumpers_MetallicRoughness","MI_MetalBumpers_Normal","MI_MetalBumpers_Occlusion","MI_MetalWallPart_01_BaseColor","MI_MetalWallPart_01_MetallicRoughness","MI_MetalWallPart_01_Normal","MI_MetalWallPart_01_Occlusion","MI_MetalWallPart_Painted_01_BaseColor","MI_PaperBoxes_01_BaseColor","MI_PaperBoxes_02_BaseColor","MI_PillarWithBreckets_BaseColor","MI_PillarWithBreckets_MetallicRoughness","MI_PillarWithBreckets_Normal","MI_PillarWithBreckets_Occlusion","MI_Pipes_square_01_BaseColor","MI_Pipes_square_01_MetallicRoughness","MI_Pipes_square_01_Normal","MI_Pipes_square_01_Occlusion","MI_Platform01_BaseColor","MI_Platform01_MetallicRoughness","MI_Platform01_Normal","MI_Platform01_Occlusion","MI_Platform02_BaseColor","MI_Platform02_MetallicRoughness","MI_Platform02_Normal","MI_Platform02_Occlusion","MI_PlatformRailing_01_BaseColor","MI_PlatformRailing_01_MetallicRoughness","MI_PlatformRailing_01_Normal","MI_PlatformRailing_01_Occlusion","MI_Platform_01_BaseColor","MI_Platform_01_MetallicRoughness","MI_Platform_01_Normal","MI_Platform_01_Occlusion","MI_PowderStorage_01_BaseColor","MI_PowderStorage_01_MetallicRoughness","MI_PowderStorage_01_Normal","MI_PowderStorage_01_Occlusion","MI_PropsSetEm01_BaseColor","MI_PropsSetEm01_Emissive","MI_PropsSetEm01_MetallicRoughness","MI_PropsSetEm01_Normal","MI_PropsSetEm01_Occlusion","MI_Round_Pipes_01_BaseColor","MI_Round_Pipes_01_MetallicRoughness","MI_Round_Pipes_01_Normal","MI_Round_Pipes_01_Occlusion","MI_Signboards02_Emissive","MI_SignboardText02_Emissive","MI_Stair_01_Painted_BaseColor","MI_Stair_02_BaseColor","MI_Stair_02_MetallicRoughness","MI_Stair_02_Normal","MI_Stair_02_Occlusion","MI_WGS_01_Emissive","MI_WGS_03_Emissive","M_AnimBoard01_BaseColor","M_AnimBoard01_Emissive","M_Building08_Emissive","M_Hair_Alpha_BaseColor","M_LampSet_01_Emissive","M_Signboards01_Emissive","M_SignboardsAnim03_Emissive","M_Sky_Panning_Clouds2_Inst_Sky_BaseColor","M_WindowsEmissive01_Emissive","T_Asphalt03_BC","T_Asphalt03_Normal","T_Asphalt03_ORM","T_Asphalt_BC","T_Asphalt_Normal","T_Asphalt_ORM","T_BackgroundBuildingTrim01_BC","T_BackgroundBuildingTrim01_N","T_BackgroundBuildingTrim01_ORM","T_BrokenAsphalt_BC","T_BrokenAsphalt_N","T_BrokenAsphalt_ORM","T_Building05_BC","T_Building05_N","T_Building05_ORM","T_Building07_BC","T_Building07_BC_1","T_Building07_N","T_Building07_N_1","T_Building07_ORM","T_Building07_ORM_1","T_Building08_BC","T_Building08_N","T_Building08_ORM","T_Building09_BC","T_Building09_N","T_Building09_ORM","T_Building10_BC","T_Building10_N","T_Building10_ORM","T_Building12_BC","T_Building12_N","T_Building12_ORM","T_Building13_BC","T_Building13_N","T_Building13_ORM","T_Building4_BC","T_Building4_N","T_Building4_ORM","T_car_BC","T_car_Emiss","T_car_N","T_car_ORM","T_Concrete_Poured_D","T_Concrete_Poured_N","T_CornerBuilding01_BC","T_CornerBuilding01_N","T_CornerBuilding01_ORM","T_CyberSignBoards_BC_sRGB","T_CyberSignBoards_N","T_CyberSignBoards_ORM","T_EnvirAssets01_BC_sRGB","T_EnvirAssets01_N","T_EnvirAssets01_ORM","T_FactoryConcreteFloor01_BC","T_FloorMats01_BC","T_FloorMats01_N","T_FloorMats01_ORM","T_GarbageBag02_BC","T_GarbageBag02_N","T_GarbageBag02_ORM","T_gun01_BC_sRGB","T_gun01_N","T_gun01_ORM","T_gun03_BC","T_gun03_N","T_gun03_ORM","T_Hair_BC","T_Hair_N","T_Hair_ORM","T_Hero_Body_BC","T_Hero_Body_N","T_Hero_Body_ORM","T_Hero_Head_BC","T_Hero_Head_N","T_Hero_Head_ORM","T_LampSet02_BC","T_LampSet02_N","T_LampSet02_ORM","T_LampSet_01_BC","T_LampSet_01_N","T_LampSet_01_ORM","T_Metalbeam01_N","T_Metalbeam01_ORM","T_NeonSign02_BC","T_NeonSign02_N","T_NeonSign02_ORM","T_PaperBoxes_01_N","T_PaperBoxes_01_ORM","T_PaperBoxes_02_N","T_PaperBoxes_02_ORM","T_PaperBoxes_03_BC","T_PaperBoxes_03_N","T_PaperBoxes_03_ORM","T_Pavement01_BC","T_Pavement01_N","T_Pavement01_ORM","T_PavementDetails01_BC","T_PavementDetails01_N","T_PavementDetails01_ORM","T_PropsSet01_BC","T_PropsSet01_N","T_PropsSet01_ORM","T_Roof01_BC","T_Roof01_N","T_Roof01_ORM","T_SignboardText01_BC","T_SignboardText01_N","T_SignboardText01_ORM","T_Stairs_02_N","T_Stairs_02_ORM","T_TiledGexGround01_BC","T_TiledGexGround01_N","T_TiledGexGround01_ORM","T_TrashBox01_BC","T_TrashBox01_N","T_TrashBox01_ORM","T_TrimSet02_BC","T_TrimSet02_N","T_TrimSet02_ORM","T_TrimSheet01_BC","T_TrimSheet01_N","T_TrimSheet01_ORM","T_WallTile01_BC","T_WallTile01_N","T_WallTile01_ORM","T_Wall_01_N","T_Wall_01_ORM","T_WGS_01_BC_sRGB","T_WGS_01_N","T_WGS_01_ORM","T_WGS_02_BC_sRGB","T_WGS_02_N","T_WGS_02_ORM","T_WGS_03_BC_sRGB","T_WGS_03_N","T_WGS_03_ORM","T_WGS_04_BC_sRGB","T_WGS_04_N","T_WGS_04_ORM","T_WindowsSet01_BC","T_WindowsSet01_N","T_WindowsSet01_ORM","Wall03_BC","Wall03_Normal","Wall03_ORM","WorldGridMaterial_BaseColor","WorldGridMaterial_MetallicRoughness","WorldGridMaterial_Normal"];function l(){return n.apply(this,arguments)}function n(){return(n=e(o().mark((function _(){var i;return o().wrap((function(_){for(;;)switch(_.prev=_.next){case 0:return i=a.splice(0,10),_.next=3,Promise.all(i.map(e(o().mark((function _(e){return o().wrap((function(_){for(;;)switch(_.prev=_.next){case 0:e="textures/"+e,new Promise((function(_){r.loadRes(e,(function(e,o){_(null)}))}));case 2:case"end":return _.stop()}}),_)})))));case 3:if(!a.length){_.next=8;break}return _.next=6,new Promise((function(_){setTimeout((function(){_(null)}),60)}));case 6:return _.next=8,l();case 8:case"end":return _.stop()}}),_)})))).apply(this,arguments)}i._RF.pop()}}}));

System.register("chunks:///_virtual/res.ts",["cc","./msg.ts"],(function(t){"use strict";var o,i,n,e,s,a,d,c,l,r,u,f,h,m,S,_,g,D,v,p,A;return{setters:[function(t){o=t.cclegacy,i=t.resources,n=t.error,e=t.JsonAsset,s=t.TextAsset,a=t.Prefab,d=t.Texture2D,c=t.ImageAsset,l=t.SpriteFrame,r=t.SpriteAtlas,u=t.EffectAsset,f=t.AudioClip,h=t.AnimationClip,m=t.Mesh,S=t.Material,_=t.Skeleton,g=t.SceneAsset,D=t.Vec3,v=t.instantiate,p=t.director},function(t){A=t.Msg}],execute:function(){o._RF.push({},"746d90hQc1HQ5mGBCnQ2+fK","res",void 0),t("Res",function(){function t(){}return t.load=function(o,e,s){this.count++,i.load(o,e,(function(i,e){i&&(n(o,i.message||i),A.emit("msg_res_error")),s&&s(i,e),t.count--,A.emit("msg_check_res_cache_end")}))},t.loadJson=function(t,o){this.load(t,e,o)},t.loadTxt=function(t,o){this.load(t,s,o)},t.loadPrefab=function(t,o){this.load(t,a,o)},t.loadTex2D=function(t,o){this.load(t,d,o)},t.loadImage=function(t,o){this.load(t,c,o)},t.loadSprite=function(t,o){this.load(t,l,o)},t.loadSpriteAtlas=function(t,o){this.load(t,r,o)},t.loadEffect=function(t,o){this.load(t,u,o)},t.loadAudio=function(t,o){this.load(t,f,o)},t.loadAnimationClip=function(t,o){this.load(t,h,o)},t.loadMesh=function(t,o){this.load(t,m,o)},t.loadMateiral=function(t,o){this.load(t,S,o)},t.loadSkeleton=function(t,o){this.load(t,_,o)},t.loadScene=function(t,o){this.load(t,g,o)},t.inst=function(t,o,i){void 0===o&&(o=void 0),void 0===i&&(i=D.ZERO);var n,e=v(t);void 0===o?null==(n=p.getScene())||n.addChild(e):e.setParent(o);return e.setPosition(i),e.setScale(D.ONE),e},t.instNode=function(t,o,i){void 0===o&&(o=void 0),void 0===i&&(i=D.ZERO);var n,e=v(t);void 0===o?null==(n=p.getScene())||n.addChild(e):e.setParent(o);return e.setPosition(i),e.setScale(D.ONE),e},t.loadDir=function(o,e,s){this.count++,i.loadDir(o,e,(function(o,i){o&&(n(o.message||o),A.emit("msg_res_error")),s&&s(o,i),t.count--,A.emit("msg_check_res_cache_end")}))},t.loadDirJson=function(t,o){this.loadDir(t,e,o)},t.loadDirPrefab=function(t,o){this.loadDir(t,a,o)},t.loadDirText=function(t,o){this.loadDir(t,s,o)},t.loadDirSprite=function(t,o){this.loadDir(t,l,o)},t.loadDirSound=function(t,o){this.loadDir(t,f,o)},t}()).count=0,o._RF.pop()}}}));

System.register("chunks:///_virtual/router.ts",["cc","./graph.ts","./nodes.ts"],(function(e){"use strict";var t,r,u;return{setters:[function(e){t=e.cclegacy},function(e){r=e.liteGraph},function(e){u=e.updateNextNodes}],execute:function(){function n(){var e=this;e.addInput("RenderTexture 1","RenderTexture"),e.addInput("RenderTexture 2","RenderTexture"),e.addInput("RenderTexture 3","RenderTexture"),e.addOutput("Output","RenderTexture"),this.onUpdateStage=function(t,r){e.stage=t.stage,u(e,r)},e.size=e.computeSize()}e("Router",n),t._RF.push({},"f6269jbCQFAmbxj9N6NSgcY","router",void 0),delete r.registered_node_types["input/Router"],r.registerNodeType("input/Router",n),t._RF.pop()}}}));

System.register("chunks:///_virtual/save-gltf.ts",["./rollupPluginModLoBabelHelpers.js","cc","./editor.ts","./npm.ts"],(function(e){"use strict";var t,n,r,s,o,i,a,u,c;return{setters:[function(e){t=e.asyncToGenerator,n=e.regeneratorRuntime},function(e){r=e.cclegacy,s=e.Vec3,o=e.assetManager},function(e){i=e.base642arraybuffer},function(e){a=e.fse,u=e.path,c=e.Editor}],execute:function(){e({saveGltf:function(e,t,n){return m.apply(this,arguments)},toGltfMesh:function(e,t){var n={asset:{generator:"Khronos glTF Blender I/O v1.2.75",version:"2.0"},scene:0,scenes:[{name:"Scene",nodes:[0]}],nodes:[{mesh:0,name:"Mesh"}],meshes:[{name:e,primitives:[]}],accessors:[],bufferViews:[],buffers:[]},r=n.meshes[0],o=0,a=t,u={indices:-1,attributes:{},mode:4};r.primitives.push(u);var c=0,f=n.bufferViews;for(var y in p){var m=a[y];if(m&&m.length){var l=p[y];l===p.indices?u.indices=o:u.attributes[l.attr]=o;var h={bufferView:o,componentType:l.componentType,count:m.length/l.count,type:l.type};l===p.vertices&&(h.min=s.toArray([],t.min),h.max=s.toArray([],t.max)),n.accessors.push(h);var b=m.length*l.bytesPerElement;f.push({buffer:0,byteOffset:c,byteLength:b}),c+=b,o++}}var v=new ArrayBuffer(c),d=new Float32Array(v,0,f[u.indices].byteOffset/4),E=new Uint16Array(v);for(var g in p){var T=a[g];if(T&&T.length){var O=p[g],w=void 0;w=O===p.indices?u.indices:u.attributes[O.attr],2===O.bytesPerElement?E.set(T,f[w].byteOffset/2):4===O.bytesPerElement&&d.set(T,f[w].byteOffset/4)}}return n.buffers.push({byteLength:c,uri:"data:application/octet-stream;base64,"+i.encode(v)}),n}}),r._RF.push({},"e13ff+XpahLU5jlboeVustC","save-gltf",void 0);var p={vertices:{attr:"POSITION",componentType:5126,count:3,bytesPerElement:4,type:"VEC3"},normals:{attr:"NORMAL",componentType:5126,count:3,bytesPerElement:4,type:"VEC3"},colors:{attr:"COLOR_0",componentType:5126,count:4,bytesPerElement:4,type:"VEC4"},uv:{attr:"TEXCOORD_0",componentType:5126,count:2,bytesPerElement:4,type:"VEC2"},uv1:{attr:"TEXCOORD_1",componentType:5126,count:2,bytesPerElement:4,type:"VEC2"},boneWeights:{attr:"WEIGHTS_0",componentType:5126,count:4,bytesPerElement:4,type:"VEC4"},joints:{attr:"JOINTS_0",componentType:5126,count:4,bytesPerElement:4,type:"VEC4"},indices:{componentType:5123,count:1,bytesPerElement:2,type:"SCALAR"}};e("MeshData",(function(){this.vertices=[],this.uv=[],this.uv1=[],this.normals=[],this.colors=[],this.boneWeights=[],this.tangents=[],this.joints=[],this.indices=[],this.min=new s(1/0,1/0,1/0),this.max=new s(-1/0,-1/0,-1/0)}));function f(e,t){return y.apply(this,arguments)}function y(){return(y=t(n().mark((function e(t,r){var s;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===r&&(r=10),e.next=3,c.Message.request("asset-db","query-uuid",t);case 3:return s=e.sent,e.abrupt("return",new Promise((function(e,n){if(!s)return console.error("Can not find uuid for : "+t),e(null);setTimeout((function(){o.loadAny(s,(function(t,n){if(t)return console.error(t),e(null);e(n)}))}),r)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(){return(m=t(n().mark((function e(t,r,s){var o;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Message.request("asset-db","query-path",r);case 2:return o=e.sent,a.ensureDirSync(u.dirname(o)),a.writeJSONSync(o,t),e.next=7,c.Message.request("asset-db","refresh-asset",r);case 7:return e.next=9,f(s,100);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}r._RF.pop()}}}));

System.register("chunks:///_virtual/save.ts",["./rollupPluginModLoBabelHelpers.js","cc","./singleton.ts","./g-math.ts","./io.ts","./util2.ts","./json-tool.ts","./msg.ts","./res-cache.ts"],(function(t){"use strict";var i,s,e,c,r,n,h,u,a,o;return{setters:[function(t){i=t.inheritsLoose,s=t.createClass},function(t){e=t.cclegacy},function(t){c=t.Singleton},function(t){r=t.GMath},function(t){n=t.IO},function(t){h=t.UtilArray},function(t){u=t.JsonTool},function(t){a=t.Msg},function(t){o=t.ResCache}],execute:function(){e._RF.push({},"370a3Db3ktMC5T5vTd5RopR","save",void 0);t("Save",function(t){function e(){for(var i,s=arguments.length,e=new Array(s),c=0;c<s;c++)e[c]=arguments[c];return(i=t.call.apply(t,[this].concat(e))||this)._uuid="",i._cur={},i._uuidKey="uuid",i._archiveKey="archive_list",i._archiveList=void 0,i._saveJson=void 0,i._backup_counter=0,i._currentStatistics={},i}i(e,t);var c=e.prototype;return c.init=function(){var t=this;this._saveJson=o.Instance.getJson("data-save").json,n.exist(this._archiveKey+".json")?(this._archiveList=u.toIOObject(this._archiveKey),this._uuid=this._archiveList[0],this.loadArchive(this._uuid),this._uuid=n.read(this._uuidKey+".json")):(this._archiveList=[],this.newArchive()),a.on("msg_save_set",(function(i){t.set(i.key,i.value)})),a.on("msg_stat_times",this.statisticsTimes.bind(this)),a.on("msg_stat_time",this.statisticsTime.bind(this)),a.on("msg_stat_distance",this.statisticsDistance.bind(this)),a.on("msg_save_archive",this.saveArchive.bind(this))},c.backup=function(){this._backup_counter--,this._backup_counter>0||(this._backup_counter=5)},c.saveArchiveList=function(){n.write(this._archiveKey+".json",u.toJson(this._archiveList))},c.saveArchive=function(){try{var t=u.toJson(this._cur);n.write(this._uuid+".json",t),this.backup()}catch(t){console.error("save archive error.")}},c.hasArchive=function(){return this._archiveList.length>0},c.newArchive=function(){this._cur=this._saveJson,this._uuid=r.uuid(),this._archiveList.push(this._uuid),n.write(this._uuidKey+".json",this._uuid),this.saveArchive(),this.saveArchiveList()},c.loadArchive=function(t){this._uuid=t,n.write(this._uuidKey+".json",this._uuid);var i=n.read(t+".json");void 0===i?(console.error("can not read data uuid key:",this._uuid),this._cur=Object.assign(this._saveJson)):this._cur=u.toObject(i),void 0===this._cur.input_index&&(this._cur.input_index=0)},c.loadBackup=function(t){this._uuid=t;var i=n.read(t+"_b0.json");this._cur=u.toObject(i)},c.deleteArchive=function(t){h.remove(this._archiveList,t),this.saveArchiveList(),n.delete(t+".json")},c.deleteAllArchive=function(){this._archiveList&&(this._archiveList.forEach((function(t){n.delete(t+".json")})),this._archiveList=void 0),n.delete(this._archiveKey+".json"),n.delete(this._uuid+".json")},c.get=function(t){try{return this._cur[t]}catch(i){throw new Error("Save not find key's value. The key is : "+t)}},c.set=function(t,i){this._cur[t]=i,this.saveArchive()},c.setValue=function(t,i){this._cur[t]=i},c.setStatistics=function(t,i){this._currentStatistics[t]=i},c.getStatistics=function(t){var i=this._currentStatistics[t];return void 0===i?0:i},c.saveGameOver=function(){this.statisticsFinalScore()},c.clearByKey=function(t){this._cur[t]={},this.saveArchive()},c.statisticsTimes=function(t){var i=t+"Times";void 0===this._currentStatistics[i]&&(this._currentStatistics[i]=0),this._currentStatistics[i]+=1},c.statisticsTime=function(t){var i=t.key+"Time";void 0===this._currentStatistics[i]&&(this._currentStatistics[i]=0),this._currentStatistics[i]+=t.time},c.statisticsDistance=function(t){var i=t.key+"Distance";void 0===this._currentStatistics[i]&&(this._currentStatistics[i]=0),this._currentStatistics[i]+=t.distance},c.statisticsValue=function(t){return this._currentStatistics[t]},c.statisticsFinalScore=function(){for(var t in this._currentStatistics)this._cur.statistics[t]+=this._currentStatistics[t]},c.nextStatistics=function(){void 0===this._cur.history_index&&(this._cur.history_index=-1),this._cur.history_index++,this._cur.history_index>30&&(this._cur.history_index=0),void 0===this._cur.history&&(this._cur.history=[]),this._cur.history_index>=this._cur.history.length&&this._cur.history.push({}),this._currentStatistics=this._cur.history[this._cur.history_index]},s(e,[{key:"PlayerID",get:function(){return void 0===this._cur.player_id&&(this._cur.player_id=27),this._cur.player_id}}]),e}(c));e._RF.pop()}}}));

System.register("chunks:///_virtual/scene-particles.ts",["./rollupPluginModLoBabelHelpers.js","cc","./href-setting.ts"],(function(e){"use strict";var t,n,r,c,s;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,r=e._decorator,c=e.Component},function(e){s=e.HrefSetting}],execute:function(){var i;n._RF.push({},"d06b3tLbEhJPrVhEOTmjCrY","scene-particles",void 0);var o=r.ccclass;e("SceneParticles",o("SceneParticles")(i=function(e){function n(){return e.apply(this,arguments)||this}return t(n,e),n.prototype.start=function(){s.sceneParticles||this.node.removeFromParent()},n}(c))||i);n._RF.pop()}}}));

System.register("chunks:///_virtual/sensor-actions.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var n,o,s,r;return{setters:[function(t){n=t.inheritsLoose},function(t){o=t.cclegacy,s=t._decorator,r=t.Component}],execute:function(){var e;o._RF.push({},"3ba35uF7IZGq57bXY7w0h7U","sensor-actions",void 0);var c=s.ccclass;s.property,t("SensorActions",c("SensorActions")(e=function(t){function o(){return t.apply(this,arguments)||this}return n(o,t),o.prototype.start=function(){},o}(r))||e);o._RF.pop()}}}));

System.register("chunks:///_virtual/sensor-anig.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){"use strict";var i,t,e,r,o,l,s,a,c;return{setters:[function(n){i=n.applyDecoratedDescriptor,t=n.inheritsLoose,e=n.initializerDefineProperty,r=n.assertThisInitialized},function(n){o=n.cclegacy,l=n._decorator,s=n.animation,a=n.Collider,c=n.Component}],execute:function(){var u,p,h,g,y,f;o._RF.push({},"60403ZFtTFG0p3UJdPkKLiL","sensor-anig",void 0);var d=l.ccclass,v=l.property;n("SensorAnig",(u=d("SensorAnig"),p=v(s.AnimationController),u((y=i((g=function(n){function i(){for(var i,t=arguments.length,o=new Array(t),l=0;l<t;l++)o[l]=arguments[l];return(i=n.call.apply(n,[this].concat(o))||this)._collider=null,e(i,"graph",y,r(i)),e(i,"key",f,r(i)),i}t(i,n);var o=i.prototype;return o.start=function(){this._collider=this.getComponent(a),this._collider.on("onTriggerEnter",this.onTriggerEnter,this),this._collider.on("onCollisionEnter",this.onCollisionEnter,this)},o.onTriggerEnter=function(n){this.play(this.key,!0)},o.onCollisionEnter=function(n){this.play(this.key,!0)},o.play=function(n,i){var t;null==(t=this.graph)||t.setValue(n,i)},i}(c)).prototype,"graph",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=i(g.prototype,"key",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),h=g))||h));o._RF.pop()}}}));

System.register("chunks:///_virtual/sensor-audio.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var o,r,e,n;return{setters:[function(t){o=t.inheritsLoose},function(t){r=t.cclegacy,e=t._decorator,n=t.Component}],execute:function(){var s;r._RF.push({},"bb019sTpbJHNKTd1iatEsWd","sensor-audio",void 0);var i=e.ccclass;e.property,t("SensorAudio",i("SensorAudio")(s=function(t){function r(){return t.apply(this,arguments)||this}return o(r,t),r.prototype.start=function(){},r}(n))||s);r._RF.pop()}}}));

System.register("chunks:///_virtual/sensor-effect.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,r,n,o;return{setters:[function(t){e=t.inheritsLoose},function(t){r=t.cclegacy,n=t._decorator,o=t.Component}],execute:function(){var s;r._RF.push({},"01389zdX6JEQIIUN0yJ/6JF","sensor-effect",void 0);var c=n.ccclass;n.property,t("SensorEffect",c("SensorEffect")(s=function(t){function r(){return t.apply(this,arguments)||this}return e(r,t),r.prototype.start=function(){},r}(o))||s);r._RF.pop()}}}));

System.register("chunks:///_virtual/sensor-ground.ts",["./rollupPluginModLoBabelHelpers.js","cc","./actor.ts","./util2.ts"],(function(t){"use strict";var i,r,o,n,e,s,a,c,l,u,h,d,y,_,p;return{setters:[function(t){i=t.applyDecoratedDescriptor,r=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){e=t.cclegacy,s=t._decorator,a=t.CCFloat,c=t.Vec3,l=t.geometry,u=t.v3,h=t.Collider,d=t.PhysicsSystem,y=t.Component},function(t){_=t.Actor},function(t){p=t.UtilVec3}],execute:function(){var f,g,m,v,k,b,G,C,w;e._RF.push({},"bf45fM2hwNNIr8TzJOa0XCl","sensor-ground",void 0);var z=s.ccclass,D=s.property;t("SensorGround",(f=z("SensorGround"),g=D(a),m=D([c]),v=D([a]),f((G=i((b=function(t){function i(){for(var i,r=arguments.length,e=new Array(r),s=0;s<r;s++)e[s]=arguments[s];return(i=t.call.apply(t,[this].concat(e))||this)._collider=void 0,i._actor=void 0,i._isGround=!1,i._ray=new l.Ray,i._velocity=u(0,0,0),i._rigid=void 0,o(i,"checkDistance",G,n(i)),o(i,"original",C,n(i)),o(i,"masks",w,n(i)),i._mask=0,i.pos=u(0,0,0),i}r(i,t);var e=i.prototype;return e.start=function(){this._collider=this.getComponent(h),this._ray.d.x=0,this._ray.d.y=-1,this._ray.d.z=0,this._actor=this.node.getComponent(_);for(var t=0;t<this.masks.length;t++)this._mask=this._mask|1<<this.masks[t]},e.update=function(t){this.checkGroundRays()},e.checkGroundRays=function(){for(var t,i=0;i<this.original.length;i++)if(p.copy(this._ray.o,this.node.worldPosition),this._ray.o.add(this.original[i]),d.instance.raycastClosest(this._ray,this._mask,this.checkDistance)){var r;d.instance.raycastClosestResult;return this._isGround||null==(r=this._actor)||r.onGround(),void(this._isGround=!0)}this._isGround&&(null==(t=this._actor)||t.offGround()),this._isGround=!1},i}(y)).prototype,"checkDistance",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.2}}),C=i(b.prototype,"original",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),w=i(b.prototype,"masks",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),k=b))||k));e._RF.pop()}}}));

System.register("chunks:///_virtual/sensor-msg.ts",["./rollupPluginModLoBabelHelpers.js","cc","./msg.ts"],(function(i){"use strict";var t,e,o,r,n,s,l,a,h,c,u;return{setters:[function(i){t=i.applyDecoratedDescriptor,e=i.inheritsLoose,o=i.initializerDefineProperty,r=i.assertThisInitialized},function(i){n=i.cclegacy,s=i._decorator,l=i.CCString,a=i.Collider,h=i.game,c=i.Component},function(i){u=i.Msg}],execute:function(){var m,g,d,f,_,p,x,C,E,b;n._RF.push({},"921f4aN2JlDAKMS1fApt6Y4","sensor-msg",void 0);var T=s.ccclass,v=s.property;i("SensorMsg",(m=T("SensorMsg"),g=v([l]),m((_=t((f=function(i){function t(){for(var t,e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return(t=i.call.apply(i,[this].concat(n))||this)._collider=null,o(t,"msg",_,r(t)),o(t,"data",p,r(t)),o(t,"exit_msg",x,r(t)),o(t,"exit_data",C,r(t)),o(t,"isHitRemove",E,r(t)),o(t,"filter",b,r(t)),t._safeTime=500,t._curTime=0,t}e(t,i);var n=t.prototype;return n.onEnable=function(){this._collider=this.getComponent(a),this.init()},n.onDisable=function(){this._collider.off("onTriggerEnter",this.onCollisionEnter,this),this._collider.off("onCollisionEnter",this.onCollisionEnter,this),this.exit_msg.length>0&&(this._collider.off("onTriggerExit",this.onTriggerExit,this),this._collider.off("onCollisionExit",this.onCollisionExit,this))},n.init=function(){if(""===this.msg){var i=this.node.name.split("#");this.msg=i[0],i.length>=2&&(this.data=i[1])}this._collider.on("onTriggerEnter",this.onTriggerEnter,this),this._collider.on("onCollisionEnter",this.onCollisionEnter,this),this.exit_msg.length>0&&(this._collider.on("onTriggerExit",this.onTriggerExit,this),this._collider.on("onCollisionExit",this.onCollisionExit,this)),this._curTime=h.totalTime},n.onTriggerEnter=function(i){this.checkFilter(i.otherCollider.name)||("actor_event"===this.msg?i.otherCollider.node.emit("do",this.data):(u.emit(this.msg,this.data),i.otherCollider.emit("do",this.data)),this.isHitRemove&&(this.node.active=!1))},n.onTriggerExit=function(i){this.checkFilter(i.otherCollider.name)||("actor_event"===this.exit_msg?i.otherCollider.node.emit("do",this.exit_data):(u.emit(this.exit_msg,this.exit_data),i.otherCollider.emit("do",this.exit_data)))},n.onCollisionEnter=function(i){this.checkFilter(i.otherCollider.name)||("actor_event"===this.msg?i.otherCollider.node.emit("do",this.data):u.emit(this.msg,this.data),this.isHitRemove&&(this.node.active=!1))},n.onCollisionExit=function(i){this.checkFilter(i.otherCollider.name)||("actor_event"===this.exit_msg?i.otherCollider.node.emit("do",this.exit_data):u.emit(this.exit_msg,this.exit_data))},n.unSafeEnter=function(){h.totalTime,this._curTime;return!(h.totalTime-this._curTime>this._safeTime)||(this._curTime=h.totalTime,!1)},n.checkFilter=function(i){for(var t=0;t<this.filter.length;t++){var e=this.filter[t];if(i.includes(e))return!0}return!1},t}(c)).prototype,"msg",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),p=t(f.prototype,"data",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),x=t(f.prototype,"exit_msg",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),C=t(f.prototype,"exit_data",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),E=t(f.prototype,"isHitRemove",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),b=t(f.prototype,"filter",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),d=f))||d));n._RF.pop()}}}));

System.register("chunks:///_virtual/sensor-probe.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(o){"use strict";var e,n,t,r,i;return{setters:[function(o){e=o.inheritsLoose},function(o){n=o.cclegacy,t=o._decorator,r=o.Collider,i=o.Component}],execute:function(){var l;n._RF.push({},"fdcf6g/V0JAx4JtAlpB7Yeq","sensor-probe",void 0);var s=t.ccclass;t.property,o("SensorProbe",s("SensorProbe")(l=function(o){function n(){for(var e,n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];return(e=o.call.apply(o,[this].concat(t))||this)._collider=void 0,e}e(n,o);var t=n.prototype;return t.start=function(){this._collider=this.getComponent(r),this._collider.on("onCollisionEnter",this.onCollisionEnter,this)},t.onCollisionEnter=function(o){console.log("on collision enter:",o.otherCollider.name),this.node.emit("onHit",o.otherCollider.name)},n}(i))||l);n._RF.pop()}}}));

System.register("chunks:///_virtual/sensor-ray-node-to-node.ts",["./rollupPluginModLoBabelHelpers.js","cc","./util2.ts"],(function(t){"use strict";var e,i,o,r,n,s,a,c,l,h,u,d,y,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){n=t.cclegacy,s=t._decorator,a=t.Node,c=t.CCFloat,l=t.v3,h=t.geometry,u=t.PhysicsSystem,d=t.Vec3,y=t.Component},function(t){p=t.UtilVec3}],execute:function(){var _,m,f,b,P,N,g,k,v,w;n._RF.push({},"4e0eeac2SVGPrWQmkdCyeFe","sensor-ray-node-to-node",void 0);var z=s.ccclass,R=s.property;t("SensorRayNodeToNode",(_=z("SensorRayNodeToNode"),m=R(a),f=R(a),b=R([c]),_((g=e((N=function(t){function e(){for(var e,i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return e=t.call.apply(t,[this].concat(n))||this,o(e,"startNode",g,r(e)),o(e,"endNode",k,r(e)),o(e,"masks",v,r(e)),o(e,"check_time",w,r(e)),e._mask=0,e._time=0,e._direction=l(0,0,0),e._ray=new h.Ray,e.hitPoint=l(0,0,0),e}i(e,t);var n=e.prototype;return n.start=function(){for(var t=0;t<this.masks.length;t++)this._mask=this._mask|1<<this.masks[t]},n.update=function(t){if(this._time-=t,this._time<0){p.copy(this._ray.o,this.startNode.worldPosition),p.copy(this._direction,this.endNode.worldPosition),this._direction.subtract(this.startNode.worldPosition);var e=this._direction.length();if(this._direction.normalize(),p.copy(this._ray.d,this._direction),u.instance.raycastClosest(this._ray,this._mask,e)){var i;p.copy(this.hitPoint,u.instance.raycastClosestResult.hitPoint),null==(i=this.hitPoint)||i.subtract(this._direction);this.hitPoint.clone().subtract(this.startNode.worldPosition).length()}else p.copy(this.hitPoint,d.ZERO)}},e}(y)).prototype,"startNode",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=e(N.prototype,"endNode",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=e(N.prototype,"masks",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),w=e(N.prototype,"check_time",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),P=N))||P));n._RF.pop()}}}));

System.register("chunks:///_virtual/sensor-rays-angle.ts",["./rollupPluginModLoBabelHelpers.js","cc","./util2.ts"],(function(t){"use strict";var i,e,r,n,s,a,o,c,h,l,u,d,y,g,m,p;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,r=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,a=t._decorator,o=t.Vec3,c=t.CCFloat,h=t.geometry,l=t.v3,u=t.math,d=t.PhysicsSystem,y=t.randomRangeInt,g=t.Component},function(t){m=t.UtilVec3,p=t.UtilNode}],execute:function(){var f,_,v,b,k,R,D,w,S,z,C,P,A;s._RF.push({},"2154dIBOBFE8akijr2j3PV8","sensor-rays-angle",void 0);var E=a.ccclass,H=a.property,F=a.executeInEditMode;t("SensorRaysAngle",(f=E("SensorRaysAngle"),_=H([o]),v=H(c),b=H(c),k=H([c]),f(R=F((w=i((D=function(t){function i(){for(var i,e=arguments.length,s=new Array(e),a=0;a<e;a++)s[a]=arguments[a];return i=t.call.apply(t,[this].concat(s))||this,r(i,"dir",w,n(i)),r(i,"angle",S,n(i)),r(i,"segment",z,n(i)),r(i,"masks",C,n(i)),r(i,"check_time",P,n(i)),r(i,"distance",A,n(i)),i._ray=new h.Ray,i.checked=!1,i.checkedNode=void 0,i.hitPoint=l(0,0,0),i._time=0,i._mask=0,i._curDir=l(0,0,0),i._dirs=void 0,i.hitStates=void 0,i.notHitCount=0,i}e(i,t);var s=i.prototype;return s.onEnable=function(){for(var t=0;t<this.masks.length;t++)this._mask=this._mask|1<<this.masks[t];var i=this.dir.length*this.segment;this._dirs=new Array(i),this.hitStates=new Array(i);for(var e=this.angle/this.segment,r=l(0,0,0),n=0;n<this.dir.length;n++)for(var s=this.dir[n],a=-this.angle/2,c=0;c<this.segment;c++){a+=e;var h=l(s.x,s.y,s.z);o.rotateY(h,h,r,u.toRadian(a));var d=n*this.segment+c;this._dirs[d]=h}},s.update=function(t){if(this._time-=t,this._time<0){this._time=this.check_time,m.copy(this._ray.o,this.node.worldPosition);for(var i=p.getWorldEulerAngles(this.node),e=u.toRadian(i.y),r=0;r<this._dirs.length;r++)if(m.copy(this._curDir,this._dirs[r]),o.rotateY(this._curDir,this._curDir,o.ZERO,e),m.copy(this._ray.d,this._curDir),this.hitStates[r]=d.instance.raycastClosest(this._ray,this._mask,this.distance),this.notHitCount=0,this.hitStates[r]){var n=d.instance.raycastClosestResult;m.copy(this.hitPoint,n.hitPoint),this.checked=!0,this.checkedNode=n.collider.node}else this.checkedNode=void 0,this.checked=!1,this.notHitCount++}},s.getRandomWalkableDirection=function(){for(var t=y(0,this.notHitCount),i=-1,e=0;e<this.hitStates.length&&(0==this.hitStates[e]&&i++,i!==t);e++);if(-1!==i){this._curDir=this.dir[i];var r=p.getWorldEulerAngles(this.node),n=u.toRadian(r.y);return o.rotateY(this._curDir,this._curDir,o.ZERO,n)}},i}(g)).prototype,"dir",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),S=i(D.prototype,"angle",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 30}}),z=i(D.prototype,"segment",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),C=i(D.prototype,"masks",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),P=i(D.prototype,"check_time",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),A=i(D.prototype,"distance",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),R=D))||R)||R));s._RF.pop()}}}));

System.register("chunks:///_virtual/sensor-rays.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(i){"use strict";var t,e,r,s,o,n,a,c,h,u,l,d;return{setters:[function(i){t=i.applyDecoratedDescriptor,e=i.inheritsLoose,r=i.initializerDefineProperty,s=i.assertThisInitialized},function(i){o=i.cclegacy,n=i._decorator,a=i.Vec3,c=i.CCFloat,h=i.geometry,u=i.v3,l=i.PhysicsSystem,d=i.Component}],execute:function(){var y,_,p,m,f,k,b,g,v,z,w;o._RF.push({},"ee6c5/PncFApKo6tEquK38K","sensor-rays",void 0);var D=n.ccclass,P=n.property;i("SensorRays",(y=D("SensorRays"),_=P([a]),p=P([a]),m=P([c]),y((b=t((k=function(i){function t(){for(var t,e=arguments.length,o=new Array(e),n=0;n<e;n++)o[n]=arguments[n];return t=i.call.apply(i,[this].concat(o))||this,r(t,"dir",b,s(t)),r(t,"origin",g,s(t)),r(t,"masks",v,s(t)),r(t,"check_time",z,s(t)),r(t,"distance",w,s(t)),t._ray=new h.Ray,t.checked=!1,t.checkedNode=void 0,t._time=0,t._mask=0,t._curDir=u(0,0,0),t}e(t,i);var o=t.prototype;return o.start=function(){for(var i=0;i<this.masks.length;i++)this._mask=this._mask|1<<this.masks[i]},o.update=function(i){if(this._time-=i,this._time<0){this._time=this.check_time;for(var t=0;t<this.dir.length;t++){if(a.transformMat4(this._curDir,this.dir[t],this.node.worldMatrix),this._curDir=this._curDir.subtract(this.node.worldPosition).normalize(),this._ray.d.x=this._curDir.x,this._ray.d.y=this._curDir.y,this._ray.d.z=this._curDir.z,this._ray.o.x=this.origin[t].x+this.node.worldPosition.x,this._ray.o.y=this.origin[t].y+this.node.worldPosition.y,this._ray.o.z=this.origin[t].z+this.node.worldPosition.z,l.instance.raycastClosest(this._ray,this._mask,this.distance)){var e=l.instance.raycastClosestResult;return this.checked=!0,void(this.checkedNode=e.collider.node)}this.checkedNode=void 0}this.checked=!1}},t}(d)).prototype,"dir",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),g=t(k.prototype,"origin",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),v=t(k.prototype,"masks",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),z=t(k.prototype,"check_time",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),w=t(k.prototype,"distance",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),f=k))||f));o._RF.pop()}}}));

System.register("chunks:///_virtual/sensor-slope.ts",["./rollupPluginModLoBabelHelpers.js","cc","./util2.ts"],(function(t){"use strict";var i,e,o,r,s,n,a,c,l,h,p,u,y;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){s=t.cclegacy,n=t._decorator,a=t.CCFloat,c=t.Vec3,l=t.geometry,h=t.v3,p=t.PhysicsSystem,u=t.Component},function(t){y=t.UtilVec3}],execute:function(){var d,f,m,_,b,v,P,S,g,k,w;s._RF.push({},"f435bDe2jxF178IPHmyzwrp","sensor-slope",void 0);var z=n.ccclass,R=n.property;t("SensorSlope",(d=z("SensorSlope"),f=R([a]),m=R(a),_=R(c),b=R(c),d((S=i((P=function(t){function i(){for(var i,e=arguments.length,s=new Array(e),n=0;n<e;n++)s[n]=arguments[n];return i=t.call.apply(t,[this].concat(s))||this,o(i,"masks",S,r(i)),o(i,"distance",g,r(i)),o(i,"direction",k,r(i)),i._mask=0,i._ray=new l.Ray,i.hitPoint=h(.5,0,.5),o(i,"vectorSlop",w,r(i)),i}e(i,t);var s=i.prototype;return s.start=function(){for(var t=0;t<this.masks.length;t++)this._mask=this._mask|1<<this.masks[t]},s.checkSlope=function(t){return y.copy(this.direction,t),this.direction.y=0,this.direction.normalize(),y.copy(this._ray.o,this.direction),this._ray.o.multiplyScalar(.1),this._ray.o.add(this.node.worldPosition),this._ray.o.y+=.3,this._ray.d.y=-1,this._ray.d.x=0,this._ray.d.z=0,p.instance.raycastClosest(this._ray,this._mask,this.distance)?(y.copy(this.hitPoint,p.instance.raycastClosestResult.hitPoint),Math.abs(this.hitPoint.y-this.node.worldPosition.y)>.05&&(y.copy(this.vectorSlop,this.hitPoint),this.vectorSlop.subtract(this.node.worldPosition),!0)):(y.copy(this.hitPoint,c.ZERO),y.copy(this.vectorSlop,c.ZERO),!1)},i}(u)).prototype,"masks",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),g=i(P.prototype,"distance",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),k=i(P.prototype,"direction",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return h(0,0,1)}}),w=i(P.prototype,"vectorSlop",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return h(0,0,0)}}),v=P))||v));s._RF.pop()}}}));

System.register("chunks:///_virtual/setting.ts",["cc"],(function(t){"use strict";var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"a1279LA9ZZEfZ0llw/MjKiJ","setting",void 0);var s=t("settings",{bakingReflection:!1,outputRGBE:!1,tonemapped:!1,shadowStage:void 0,gbufferStage:void 0,renderProfiler:!1,passPathName:"",passVersion:0});globalThis.ppSettings=s,e._RF.pop()}}}));

System.register("chunks:///_virtual/sfx-heart.ts",["./rollupPluginModLoBabelHelpers.js","cc","./msg.ts","./level.ts","./sound.ts"],(function(e){"use strict";var t,o,s,u,i,n,r,l,c;return{setters:[function(e){t=e.inheritsLoose},function(e){o=e.cclegacy,s=e._decorator,u=e.AudioSource,i=e.math,n=e.Component},function(e){r=e.Msg},function(e){l=e.Level},function(e){c=e.Sound}],execute:function(){var h;o._RF.push({},"e5186zh4vhAxY8zIRm0AZcA","sfx-heart",void 0);var a=s.ccclass;s.property,e("SfxHeart",a("SfxHeart")(h=function(e){function o(){for(var t,o=arguments.length,s=new Array(o),u=0;u<o;u++)s[u]=arguments[u];return(t=e.call.apply(e,[this].concat(s))||this)._sfxAudio=void 0,t.volume=0,t.currentVolume=0,t.sceneVolume=1,t.currentSceneVolume=1,t.isLow=!1,t}t(o,e);var s=o.prototype;return s.onEnable=function(){null==this._sfxAudio&&(this._sfxAudio=this.getComponent(u)),this._sfxAudio.volume=0,this._sfxAudio.loop=!0,this._sfxAudio.play()},s.onDisable=function(){var e;null==(e=this._sfxAudio)||e.stop()},s.update=function(e){var t,o=l.Instance._player;o&&(o&&null!=o&&null!=(t=o._data)&&t.is_low_hp&&!o.is_dead?(0==this.isLow&&(this.isLow=!0,r.emit("msg_ui_fx_open","effect_low_hp")),this.currentVolume=c.volumeSound,this.currentSceneVolume=.1):(this.isLow&&(this.isLow=!1,r.emit("msg_ui_fx_close","effect_low_hp")),this.currentVolume=0,this.currentSceneVolume=1),this.volume=i.lerp(this.volume,this.currentVolume,e),this.sceneVolume=i.lerp(this.sceneVolume,this.currentSceneVolume,e),this._sfxAudio.volume=this.volume,c.sceneMusicPercent=this.sceneVolume,c.updateBGM())},o}(n))||h);o._RF.pop()}}}));

System.register("chunks:///_virtual/shadow-stage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./base-stage.ts","./utils2.ts","./setting.ts","./href-setting.ts"],(function(e){"use strict";var t,a,i,r,n,s,o,d,h,c,l,u,p,w,S;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){n=e.cclegacy,s=e.pipeline,o=e.renderer,d=e.gfx,h=e.rendering,c=e._decorator},function(e){l=e.BaseStage},function(e){u=e.getRenderArea,p=e.getCameraUniqueID},function(e){w=e.settings},function(e){S=e.HrefSetting}],execute:function(){var g,f,m,R,L,D;n._RF.push({},"3dc5e7S4Y1LHrD2V8FfkMCz","shadow-stage",void 0);var E=s.supportsR32FloatTexture,v=o.scene,A=v.ShadowType,C=(v.LightType,v.SKYBOX_FLAG,v.CSMLevel,d.Format),T=d.LoadOp,y=d.StoreOp,b=d.ClearFlagBit,_=d.Color,F=d.Viewport,P=h.RasterView,N=h.AttachmentType,I=h.AccessType,O=h.ResourceResidency,x=h.LightInfo,H=h.SceneFlags,V=h.QueueHint,z=(h.ComputeView,c.ccclass),M=c.property;e("CustomShadowStage",(g=z("CustomShadowStage"),f=M({override:!0}),g((L=t((R=function(e){function t(){for(var t,a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(t=e.call.apply(e,[this].concat(n))||this)._materialName="blit-screen",i(t,"name",L,r(t)),i(t,"textureFormat",D,r(t)),t.mainLightShadows=[],t}a(t,e);var n=t.prototype;return n.buildShadowPass=function(e,t,a,i,r,n,s){var o=t.device,h=e;if(!t.containsResource(h)){var c=E(o)?C.R32F:C.RGBA8;t.addRenderTarget(h,c,n,s,O.MANAGED),t.addDepthStencil(h+"Depth",C.DEPTH_STENCIL,n,s,O.MANAGED)}var l=t.addRasterPass(n,s,"default");l.name=e,l.addRasterView(h,new P("_",I.WRITE,N.RENDER_TARGET,T.CLEAR,y.STORE,b.COLOR,new _(1,1,1,a.clearColor.w))),l.addRasterView(h+"Depth",new P("_",I.WRITE,N.DEPTH_STENCIL,T.CLEAR,y.DISCARD,b.DEPTH_STENCIL,new _(a.clearDepth,a.clearStencil,0,0)));var p=u(new d.Rect,a,n,s,i,r);l.setViewport(new F(p.x,p.y,p.width,p.height)),l.addQueue(V.RENDER_OPAQUE).addSceneOfCamera(a,new x(i,r),H.SHADOW_CASTER),w.passPathName+=e,l.setVersion(w.passPathName,0)},n.render=function(e,t){if(S.shadow){w.shadowStage=this;var a=t,i=a.pipelineSceneData.shadows,r=t.pipelineSceneData.shadows;if(i.enabled&&i.type===A.ShadowMap){this.mainLightShadows.length=0;var n=p(e),s=e.scene.mainLight,o=r.size.x,d=r.size.y;if(s&&s.shadowEnabled){var h="MainLightShadow"+n;if(this.mainLightShadows[0]=h,s.shadowFixedArea)this.buildShadowPass(this.mainLightShadows[0],t,e,s,0,o,d);else for(var c=a.pipelineSceneData.csmSupported?s.csmLevel:1,l=0;l<c;l++)this.mainLightShadows[l]=h,this.buildShadowPass(this.mainLightShadows[l],t,e,s,l,o,d)}}}},t}(l)).prototype,"name",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"CustomShadowStage"}}),D=t(R.prototype,"textureFormat",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return d.Format.RGBA8}}),m=R))||m));n._RF.pop()}}}));

System.register("chunks:///_virtual/singleton.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){"use strict";var t,e;return{setters:[function(n){t=n.createClass},function(n){e=n.cclegacy}],execute:function(){e._RF.push({},"f3e08OCtCBKXY83CjMmxlQC","singleton",void 0),n("Singleton",function(){function n(){}var e=n.prototype;return e.init=function(){},e.clear=function(){n._instance=null},t(n,null,[{key:"Instance",get:function(){return this._instance||(this._instance=new this),this._instance}}]),n}())._instance=null,e._RF.pop()}}}));

System.register("chunks:///_virtual/sky.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,r,n,o,s,c;return{setters:[function(e){t=e.inheritsLoose},function(e){r=e.cclegacy,n=e._decorator,o=e.MeshRenderer,s=e.director,c=e.Component}],execute:function(){var i;r._RF.push({},"8d02agJKzZCQ4Bli+ytrP6R","sky",void 0);var u=n.ccclass,a=n.executeInEditMode;e("Sky",u("custom.Sky")(i=a(i=function(e){function r(){return e.apply(this,arguments)||this}return t(r,e),r.prototype.start=function(){var e=this.getComponent(o),t=s.getScene().globals.skybox;e.material.setProperty("envMap",t.reflectionMap||t.envmap)},r}(c))||i)||i);r._RF.pop()}}}));

System.register("chunks:///_virtual/slider-2d.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var i,s,h,e,n,o,r,p;return{setters:[function(t){i=t.inheritsLoose},function(t){s=t.cclegacy,h=t._decorator,e=t.Node,n=t.UITransform,o=t.v3,r=t.v2,p=t.Component}],execute:function(){var c;s._RF.push({},"1c7fcAGirFNIJ7X24Ejpnf0","slider-2d",void 0);var a=h.ccclass;h.property,t("Slider2D",a("Slider2D")(c=function(t){function s(){for(var i,s=arguments.length,h=new Array(s),e=0;e<s;e++)h[e]=arguments[e];return(i=t.call.apply(t,[this].concat(h))||this).pos=o(0,0,0),i.uipos=r(0,0),i.point=Object.create(null),i.uitran=Object.create(null),i.size=r(0,0),i.halfx=0,i.halfy=0,i.px=0,i.py=0,i.children=Object.create(null),i}i(s,t);var h=s.prototype;return h.start=function(){this.node.on(e.EventType.TOUCH_MOVE,this.onMove,this),this.point=this.node.children[0].children[0],this.children=this.point.children,this.uitran=this.node.getComponent(n),this.size.x=this.uitran.contentSize.x,this.size.y=this.uitran.contentSize.y,this.halfx=this.size.x/2,this.halfy=this.size.y/2,this.set({x:Math.random(),y:Math.random()})},h.set=function(t){this.pos.x=this.size.x*t.x-this.halfx,this.pos.y=this.size.y*t.y-this.halfy,this.point.setPosition(this.pos)},h.onMove=function(t){var i=t.getUIDelta(),s=i.x,h=i.y;this.pos.x+=s,this.pos.y+=h,this.pos.x+=this.halfx,this.pos.y+=this.halfy,this.pos.x%=this.size.x,this.pos.y%=this.size.y,this.px=this.pos.x/this.size.x,this.py=this.pos.y/this.size.y,this.px=this.px<0?1+this.px:this.px,this.py=this.py<0?1+this.py:this.py,this.pos.x-=this.halfx,this.pos.y-=this.halfy,this.point.setPosition(this.pos)},h.getPercent=function(){return{x:this.px,y:this.py}},s}(p))||c);s._RF.pop()}}}));

System.register("chunks:///_virtual/smooth-local-z.ts",["./rollupPluginModLoBabelHelpers.js","cc","./msg.ts","./util2.ts"],(function(t){"use strict";var i,o,s,e,n,r,c,h,f,a,u;return{setters:[function(t){i=t.applyDecoratedDescriptor,o=t.inheritsLoose,s=t.initializerDefineProperty,e=t.assertThisInitialized},function(t){n=t.cclegacy,r=t._decorator,c=t.v3,h=t.Vec3,f=t.Component},function(t){a=t.Msg},function(t){u=t.UtilVec3}],execute:function(){var l,p,m,y;n._RF.push({},"74de3MEYBhD5q52b9G2UUCm","smooth-local-z",void 0);var g=r.ccclass,d=r.property;t("SmoothLocalZ",g("SmoothLocalZ")((m=i((p=function(t){function i(){for(var i,o=arguments.length,n=new Array(o),r=0;r<o;r++)n[r]=arguments[r];return i=t.call.apply(t,[this].concat(n))||this,s(i,"smooth",m,e(i)),s(i,"wait",y,e(i)),i.pos=c(0,0,0),i.cur=c(0,0,0),i.offset=0,i.offset_x=0,i.original=c(0,0,0),i}o(i,t);var n=i.prototype;return n.init=function(){u.copy(this.pos,this.node.position),u.copy(this.original,this.pos),this.pos.z=this.offset+this.original.z,u.copy(this.cur,this.pos),this.cur.z=30,this.pos.z=30,this.node.setPosition(this.cur),a.on("set_offset_x",this.setOffsetX.bind(this))},n.onDestroy=function(){a.off("set_offset_x",this.setOffset.bind(this))},n.setOffset=function(t){this.offset=t,this.pos.z=this.offset+this.original.z},n.setOffsetX=function(t){this.pos.x=t+this.original.x},n.lateUpdate=function(t){this.wait>0?this.wait-=t:this.smoothLerp(t)},n.smoothLerp=function(t){h.lerp(this.cur,this.cur,this.pos,t*this.smooth),this.node.setPosition(this.cur)},i}(f)).prototype,"smooth",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),y=i(p.prototype,"wait",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),l=p))||l);n._RF.pop()}}}));

System.register("chunks:///_virtual/sound-actor.ts",["./rollupPluginModLoBabelHelpers.js","cc","./sound.ts"],(function(t){"use strict";var n,e,r,o,i,a,c,s,u;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,r=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){i=t.cclegacy,a=t._decorator,c=t.CCString,s=t.Component},function(t){u=t.Sound}],execute:function(){var l,p,f,d,h;i._RF.push({},"5127fk5a+hOWLZrpg8oBF9u","sound-actor",void 0);var y=a.ccclass,g=a.property;t("SoundActor",(l=y("SoundActor"),p=g(c),l((h=n((d=function(t){function n(){for(var n,e=arguments.length,i=new Array(e),a=0;a<e;a++)i[a]=arguments[a];return n=t.call.apply(t,[this].concat(i))||this,r(n,"sfx_name",h,o(n)),n}return e(n,t),n.prototype.onEnable=function(){u.addSfx(this.node,this.sfx_name)},n}(s)).prototype,"sfx_name",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=d))||f));i._RF.pop()}}}));

System.register("chunks:///_virtual/sound-enable-play.ts",["./rollupPluginModLoBabelHelpers.js","cc","./sound.ts"],(function(e){"use strict";var i,t,n,o,r,a,u,l,s,c;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,u=e.CCString,l=e.AudioSource,s=e.Component},function(e){c=e.Sound}],execute:function(){var h,_,d,p,m,f,b,y,g,x,v;r._RF.push({},"aaf92cB+ZNOXYISejst2Bd5","sound-enable-play",void 0);var S=a.ccclass,w=a.property;e("SoundEnablePlay",(h=S("SoundEnablePlay"),_=w(u),h((m=i((p=function(e){function i(){for(var i,t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return i=e.call.apply(e,[this].concat(r))||this,n(i,"sfx_name",m,o(i)),n(i,"enable_distance",f,o(i)),n(i,"max_distance",b,o(i)),n(i,"max_sound",y,o(i)),n(i,"min_sound",g,o(i)),n(i,"relate_height",x,o(i)),n(i,"max_height",v,o(i)),i._audioSource=Object.create(null),i._distance_percent=1,i._volume=1,i}t(i,e);var r=i.prototype;return r.__preload=function(){if(this._audioSource=this.node.addComponent(l),c.addSfx(this.node,this.sfx_name),this.relate_height){var e=this.node.worldPosition.y;e>this.max_height&&(e=this.max_height),this._volume=e/this.max_height,this._volume>this.max_sound&&(this._volume=this.max_sound),this._volume<this.min_sound&&(this._volume=this.min_sound)}},r.onEnable=function(){this._audioSource.play()},r.onDisable=function(){this._audioSource.stop()},r.update=function(e){},i}(s)).prototype,"sfx_name",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=i(p.prototype,"enable_distance",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),b=i(p.prototype,"max_distance",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 6}}),y=i(p.prototype,"max_sound",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),g=i(p.prototype,"min_sound",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),x=i(p.prototype,"relate_height",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),v=i(p.prototype,"max_height",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),d=p))||d));r._RF.pop()}}}));

System.register("chunks:///_virtual/sound.ts",["cc","./save.ts","./msg.ts","./res.ts","./game.ts","./res-cache.ts"],(function(o){"use strict";var i,t,n,u,s,e,l;return{setters:[function(o){i=o.cclegacy,t=o.AudioSource},function(o){n=o.Save},function(o){u=o.Msg},function(o){s=o.Res},function(o){e=o.Game},function(o){l=o.ResCache}],execute:function(){i._RF.push({},"89c79RmqFxGcJ3YiE3Q/7K+","sound",void 0);var d=o("Sound",function(){function o(){}return o.init=function(){var o,i,d=l.Instance.getPrefab("sound"),c=s.inst(d,e.Instance._poolNode);this._sfxAudio=null==(o=c.getChildByName("sfx"))?void 0:o.getComponent(t),this._bgmAudio=null==(i=c.getChildByName("bgm"))?void 0:i.getComponent(t),this._poolRoot=c.getChildByName("pool_root"),this._templateSource=c.getChildByName("template");for(var m=0;m<this._sourcePoolCount;m++)this.addPool();var a=n.Instance.get("sfx_volume");void 0===a&&(a=1),this.volumeSound=a;var h=n.Instance.get("sfx_volume_music");void 0===h&&(h=1),this.volumeMusic=h,this.Refresh(),u.on("sli_sound",this.setVolume.bind(this)),u.on("sli_music",this.setVolumeMusic.bind(this)),u.bind("sound_load",this.onLoad,this),u.bind("sound_load_end",this.onLoadEnd,this)},o.addPool=function(){var o=s.instNode(this._templateSource,this._poolRoot);this._pool.push(o.getComponent(t))},o.setVolume=function(o){this.volumeSound=o,this._sfxAudio.volume=this.volumeSound,n.Instance.set("sfx_volume",o)},o.setVolumeMusic=function(o){this.volumeMusic=o,this._bgmAudio.volume=this.volumeMusic,n.Instance.set("sfx_volume_music",o)},o.Refresh=function(){this._sfxAudio.volume=this.volumeSound,this._bgmAudio.volume=this.volumeMusic},o.playLoop=function(o,i){var t=this;void 0===i&&(i=1);for(var n=-1,u=0;u<this._pool.length;u++)if(null===this._pool[u].clip){n=u;break}return-1===n&&(this.addPool(),n=this._pool.length-1),s.loadAudio("sound/"+o,(function(u,s){if(u)throw new Error("Can not find sound resource : sound/"+o);s&&(t._pool[n].clip=s,t._pool[n].volume=t.volumeSound*i,t._pool[n].loop=!0,t._pool[n].play())})),n},o.offing=function(o){this._pool[o].stop(),this._pool[o].loop=!1,this._pool[o].clip=null},o.on=function(o,i){var t=this;void 0===i&&(i=1),s.loadAudio("sound/"+o,(function(o,n){n&&t._sfxAudio.playOneShot(n,t.volumeSound*i*t.sceneMusicPercent)}))},o.addSfx=function(o,i,n){var u=this;void 0===n&&(n=1),s.loadAudio("sound/"+i,(function(s,e){if(s)throw new Error("Can not find sound resource : sound/"+i);if(e){if(!o.isValid)return;var l=o.getComponent(t);l.clip=e,l.loop=!0,l.volume=n*u._volumeLoad}}))},o.off=function(o){},o.onBGM=function(o){var i=this;this.currentBGMName!=o&&(this.currentBGMName=o,s.loadAudio("sound/"+o,(function(t,n){if(t)throw new Error("Can not find sound resource : sound/"+o);n&&(i._bgmAudio.stop(),i._bgmAudio.clip=n,i._bgmAudio.loop=!0,i._bgmAudio.volume=i.volumeMusic,i._bgmAudio.play())})))},o.offBGM=function(o){this._bgmAudio.stop(),this._bgmAudio.clip=null,this._bgmAudio.loop=!1,this.currentBGMName=""},o.updateBGM=function(){this._bgmAudio.volume=this.volumeMusic*this.sceneMusicPercent},o.pauseBGM=function(){this._bgmAudio.pause()},o.onLoad=function(){this._volumeLoad=0},o.onLoadEnd=function(){this._volumeLoad=1},o}());d._sfxAudio=void 0,d._bgmAudio=void 0,d.volumeSound=.5,d.volumeMusic=1,d.sceneMusicPercent=1,d._volumeLoad=1,d._sourcePoolCount=30,d._pool=[],d._templateSource=void 0,d._poolRoot=void 0,d.currentBGMName="",i._RF.pop()}}}));

System.register("chunks:///_virtual/spector.ts",["./rollupPluginModLoBabelHelpers.js","cc","./href-setting.ts"],(function(){"use strict";var e,t,n,o,r,a,i,c,u;return{setters:[function(n){e=n.asyncToGenerator,t=n.regeneratorRuntime},function(e){n=e.cclegacy,o=e.game,r=e.input,a=e.Input,i=e.KeyCode,c=e.Game},function(e){u=e.HrefSetting}],execute:function(){if(n._RF.push({},"05e76hplqRPUaior27cZIz0","spector",void 0),u.spector){var s,p=function(){var n=e(t().mark((function e(){var n;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([new Promise((function(e){s.Loader.onReady((function(){e(null)}))})),new Promise((function(e){o.on(c.EVENT_GAME_INITED,(function(){e(null)}))}))]);case 2:!0,(n=new globalThis.SPECTOR.Spector).fullCapture=true,n.timeSpy.spyRequestAnimationFrame("requestAnimationFrame",window),n.displayUI(void 0,void 0,!1,!1),n.spyCanvas(o.canvas),globalThis.SPECTOR.Spector.getFirstAvailable3dContext(o.canvas),globalThis.spector=n,globalThis.rAF=window.requestAnimationFrame,o._pacer._rAF=globalThis.rAF,n.capture=function(){o.frameRate;o.frameRate=60,n.captureCanvas(o.canvas,void 0,void 0,true)},r.on(a.EventType.KEY_DOWN,(function(e){e.keyCode===i.KEY_H&&n.capture()}));case 14:case"end":return e.stop()}}),e)})));return function(){return n.apply(this,arguments)}}();!function(e){var t=new(function(){var e,t,n="http://"+location.host.split(":")[0];function o(){e=[],t=null}return o.prototype.dequeue=function(){if(0==e.length)return t&&t(),void console.log("Scripts loaded");var n=e.shift(),o=document.getElementsByTagName("head")[0],r=document.createElement("script");r.type="text/javascript",r.src=n;var a=this;r.onload=function(){a.dequeue()},o.appendChild(r)},o.prototype.loadScript=function(t){e.push(t)},o.prototype.loadSPECTORScripts=function(){this.loadScript(n+":1337/.temp/spector.bundle.js")},o.prototype.onReady=function(e){return t=e,this},o.prototype.load=function(e){var t=this;if(t.loadScript(n+":35729/livereload.js?snipver=1"),t.loadSPECTORScripts(),e)for(var o=0;o<e.length;o++){var r=e[o];t.loadScript(r)}t.dequeue()},o}());e.Loader=t}(s||(s={})),s.Loader.load(),p()}n._RF.pop()}}}));

System.register("chunks:///_virtual/spwans-group.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){"use strict";var t,e,r,o,s;return{setters:[function(n){t=n.inheritsLoose},function(n){e=n.cclegacy,r=n._decorator,o=n.MeshRenderer,s=n.Component}],execute:function(){var u;e._RF.push({},"aa3b7bN4C1NW7tPeG9UruSw","spwans-group",void 0);var c=r.ccclass;r.property,n("SpawnsGroup",c("SpawnsGroup")(u=function(n){function e(){return n.apply(this,arguments)||this}t(e,n);var r=e.prototype;return r.onEnable=function(){this.node.children.forEach((function(n){var t=n.getComponent(o);t&&(t.enabled=!1)}))},r.start=function(){},r.update=function(n){},e}(s))||u);e._RF.pop()}}}));

System.register("chunks:///_virtual/ssr.ts",["cc"],(function(e){"use strict";var s;return{setters:[function(e){s=e.cclegacy}],execute:function(){s._RF.push({},"de2987Mo1VBm59OZcYDhZX/","ssr",void 0);e("isSSR","undefined"==typeof window);s._RF.pop()}}}));

System.register("chunks:///_virtual/stage.ts",["cc","./base-stage.ts","./blit-stage.ts","./graph.ts","./utils2.ts","./nodes.ts","./forward-stage.ts","./deferred-gbuffer-stage.ts","./deferred-lighting-stage.ts","./deferred-post-stage.ts","./bloom-stage.ts","./taa-stage.ts","./fsr-stage.ts","./forward-post-stage.ts","./zoom-screen-stage.ts","./shadow-stage.ts"],(function(e){"use strict";var t,r,a,o,u,n,s,i,d,f,g,c,p,l,m,h,v,x;return{setters:[function(e){t=e.cclegacy,r=e.js,a=e.gfx},function(e){o=e.BaseStage},function(e){u=e.BlitStage},function(e){n=e.liteGraph},function(e){s=e.readPixels},function(e){i=e.updateNextNodes},function(e){d=e.ForwardStage},function(e){f=e.DeferredGBufferStage},function(e){g=e.DeferredLightingStage},function(e){c=e.DeferredPostStage},function(e){p=e.BloomStage},function(e){l=e.TAAStage},function(e){m=e.FSRStage},function(e){h=e.ForwardPostStage},function(e){v=e.ZoomScreenStage},function(e){x=e.CustomShadowStage}],execute:function(){function S(e){var t=r.getClassName(e);function o(){var t=this;t.addInput("Camera Output","Camera Output"),t.addInput("RenderTexture","RenderTexture"),t.addInput("Custom Size","vec2"),t.addOutput("RenderTexture","RenderTexture");var r=new Map,o=new e;this.stage=o,t.addProperty("showResult",!1,"bool"),r.set("material",(function(e){}));var u=e.__props__,n=e.__attrs__;function d(e){var r,u,n,i;return void 0===e&&(e=0),function(d,f){var g=t.size[0],c=g*o.outputTexture.height/o.outputTexture.width,p=o.outputTexture.width,l=o.outputTexture.height;if(r||((u=document.createElement("canvas")).width=p,u.height=l,n=u.getContext("2d"),r=n.getImageData(0,0,p,l)),f.format===a.Format.R32F){i||(i=new Float32Array(p*l)),s(o.outputTexture,i,e);for(var m=0;m<p;m++)for(var h=0;h<l;h++){var v=4*(m+h*p);r.data[v]=255*i[m+h*p],r.data[v+1]=0,r.data[v+2]=0,r.data[v+3]=255}}else if(f.format===a.Format.RGBA32F){i||(i=new Float32Array(p*l*4)),s(o.outputTexture,i,e);for(var x=0;x<p;x++)for(var S=0;S<l;S++){var w=4*(x+S*p);r.data[w]=255*i[w],r.data[w+1]=255*i[w+1],r.data[w+2]=255*i[w+2],r.data[w+3]=255*i[w+3]}}else s(o.outputTexture,r.data,e);n.putImageData(r,0,0);var T=o.outputTexture.window.framebuffer.colorTextures;d.save(),d.scale(1,-1),d.drawImage(u,0,0,p,l,0,-t.size[1]+c*(T.length-1-e),g,c),d.restore()}}u.forEach((function(e){if(!e.startsWith("_")&&"inputType"!==e&&"renderToScreen"!==e){var a,u=o[e];if("Enum"===n[e+"$_$type"]){var s=n[e+"$_$enumList"].map((function(e){return e.name}));t.addWidget("combo",e,s[u],e,{values:s}),r.set(e,(function(t){o[e]=s.indexOf(t)}))}else"string"==typeof u?a=t.addWidget("text",e,u,e):"number"==typeof u?a=t.addWidget("number",e,u,e):"boolean"==typeof u&&(a=t.addWidget("toggle",e,u,e));a&&t.addProperty(e,a.value,a.type)}})),t.onPropertyChanged=function(e,t,a){var u=r.get(e);u?u(t,a):o[e]=t},this.onUpdateStage=function(e,r){if(o.renderToScreen=!1,o.checkEnable()){var a=t.getInputData(2);a?(o.useCustomSize=!0,o.customSize.x=a[0],o.customSize.y=a[1]):o.useCustomSize=!1,r.push(o),i(t,r)}else i(e,r,0,t.getOutputNodes(0))},t.onDrawBackground=function(e,r){if(function(){var e=t.computeSize()[1];if(t.size[1]=e,o.outputTexture){var r=t.size[0]*o.outputTexture.height/o.outputTexture.width;r*=o.outputTexture.window.framebuffer.colorTextures.length,t.properties.showResult&&(t.size[1]=e+r+5)}}(),t.properties.showResult&&o.outputTexture)for(var a=o.outputTexture.window.framebuffer.colorTextures,u=0;u<a.length;u++){var n="draw_color_"+u;t[n]||(t[n]=d(u)),t[n](e,a[u])}},t.onRemoved=function(){o.destroy()},t.size=t.computeSize()}o.title=t,delete n.registered_node_types["pipeline/"+t],n.registerNodeType("pipeline/"+t,o)}e("createStageGraph",S),t._RF.push({},"44cbbHN6SNG9Z7jrxDUJKW6","stage",void 0),S(o),S(u),S(d),S(h),S(f),S(g),S(c),S(p),S(l),S(m),S(v),S(x),t._RF.pop()}}}));

System.register("chunks:///_virtual/start.ts",["cc","./href-setting.ts","./graph.ts"],(function(){"use strict";var t,n,e,i,s,o;return{setters:[function(s){t=s.cclegacy,n=s.sys,e=s.game,i=s.Game},function(t){s=t.HrefSetting},function(t){o=t.showGraph}],execute:function(){t._RF.push({},"31d6apd60BOOpnR3EwV07Ur","start",void 0),n.isBrowser&&e.on(i.EVENT_GAME_INITED,(function(){if(s.graph){var t=!1,n=document.createElement("button");n.innerHTML="show",n.onclick=function(){t=!t,n.innerHTML=t?"hide":"show",o(t)},n.style="\n                position:absolute;\n                top: 0px;\n                right: 0px;\n                z-index: 999;\n            ",document.body.appendChild(n)}})),t._RF.pop()}}}));

System.register("chunks:///_virtual/static-area-batch.ts",["./rollupPluginModLoBabelHelpers.js","cc","./math.ts","./save-gltf.ts","./static-batch-comp.ts"],(function(e){"use strict";var t,r,n,o,a,i,s,c,u,l,p,h,f,b,d,m,g,y,w,v,k,x,C,M;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.createClass,n=e.inheritsLoose,o=e.initializerDefineProperty,a=e.assertThisInitialized,i=e.asyncToGenerator,s=e.regeneratorRuntime,c=e.createForOfIteratorHelperLoose},function(e){u=e.cclegacy,l=e._decorator,p=e.Vec3,h=e.Node,f=e.Component,b=e.geometry,d=e.Vec4,m=e.Mat4,g=e.gfx,y=e.MeshRenderer,w=e.director},function(e){v=e.powerOfTwo},function(e){k=e.MeshData,x=e.toGltfMesh,C=e.saveGltf},function(e){M=e.StaticBatchComp}],execute:function(){var S,O,_,z,A,T,B,D,R,P,j,E,I,L,N;u._RF.push({},"d7239uj5aNLBJGJBD1rTayB","static-area-batch",void 0);var G=l.ccclass,F=l.executeInEditMode,H=l.property,J=G("SubMeshRenderer")(S=function(e,t){this.index=void 0,this.mr=void 0,this.index=e,this.mr=t})||S,V=G("StaticAreaBatchBlock")((z=t((_=function(){function e(){this.name="",this.aabb=new b.AABB,this.renderers=new Map,o(this,"_totalCount",z,this),this._materialCount=0}return r(e,[{key:"totalCount",get:function(){return this._totalCount}},{key:"materialCount",get:function(){return this._materialCount}}]),e}()).prototype,"_totalCount",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),t(_.prototype,"totalCount",[H],Object.getOwnPropertyDescriptor(_.prototype,"totalCount"),_.prototype),t(_.prototype,"materialCount",[H],Object.getOwnPropertyDescriptor(_.prototype,"materialCount"),_.prototype),O=_))||O,X=new p;e("StaticAreaBatch",(A=G("StaticAreaBatch"),T=H(h),B=H(V),A(D=F((P=t((R=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return t=e.call.apply(e,[this].concat(n))||this,o(t,"root",P,a(t)),o(t,"blockSize",j,a(t)),o(t,"offset",E,a(t)),o(t,"maxLightMapSize",I,a(t)),t.blockMap=new Map,o(t,"blocks",L,a(t)),t.totalRenderers=[],o(t,"_totalCount",N,a(t)),t}n(t,e);var u=t.prototype;return u.doClear=function(){this.root.active=!0,this.node.removeAllChildren(),this.blocks.length=0,this.blockMap.clear()},u.doRevert=function(){this.root.active=!this.root.active;for(var e=this.node.children,t=0;t<e.length;t++)e[t].active=!this.root.active},u.doMerge=function(){var e=i(s().mark((function e(){var t,r,n,o,a,u,l,f,b,S,O=this;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.doSearch();case 2:t=0,r=this._totalCount,n=Date.now(),o=new p,a=new p,u=new d,l=new m,this.node.removeAllChildren(),f=s().mark((function e(){var f,b,_,z,A,T,B;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f=S.value,b=f[1],_=b.aabb.center,(z=new h(b.name)).parent=O.node,z.position=_,z.active=!1,A=s().mark((function e(){var c,f,S,A,T,D,R,P,j,E,I,L,N,G,F,H,J,V,Y,q,K,Q,U,W,Z,$,ee,te;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=B.value,f=c[1],S=Math.ceil(Math.pow(f.length,.5)),A=0,T=new k,D=new p(1/0,1/0,1/0),R=new p(-1/0,-1/0,-1/0),P=0,j=0,E=function(){var e=i(s().mark((function e(){var t,r,n,o,a,i,u,l;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return T.min.set(D).subtract(_),T.max.set(R).subtract(_),t=c[0],r=b.name+"_"+t.name,n=x(r,T),o="db://assets/"+w.getScene().name+"/merged-meshes/"+r+".gltf",a=o+"/"+r+".mesh",e.next=9,C(n,o,a);case 9:i=e.sent,u=new h(t.name+j++),(l=u.addComponent(y)).mesh=i,l.material=t,u.addComponent(M),l.bakeSettings.bakeable=!0,l.bakeSettings.castShadow=!0,l.bakeSettings.receiveShadow=!0,l.bakeSettings.lightmapSize=Math.min(O.maxLightMapSize,v(P)),u.parent=z;case 20:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=0;case 11:if(!(I<f.length)){e.next=48;break}if(N=f[I].mr,G=f[I].index,F=N.mesh.readAttribute(G,g.AttributeName.ATTR_POSITION),!((T.vertices.length+F.length)/3>65535)){e.next=24;break}return console.warn(b.name+"-"+c[0].name+" vertex count overflow 65535"),e.next=20,E();case 20:A=0,T=new k,D=new p(1/0,1/0,1/0),R=new p(-1/0,-1/0,-1/0);case 24:for(H=0;H<F.length;H+=3)X.set(F[H],F[H+1],F[H+2]),p.transformMat4(X,X,N.node.worldMatrix),T.vertices.push(X.x-_.x,X.y-_.y,X.z-_.z);for(J=N.mesh.readAttribute(G,g.AttributeName.ATTR_TEX_COORD),(L=T.uv).push.apply(L,J),m.inverseTranspose(l,N.node.worldMatrix),V=N.mesh.readAttribute(G,g.AttributeName.ATTR_NORMAL),Y=0;Y<V.length;Y+=3)u.set(V[Y],V[Y+1],V[Y+2],0),d.transformMat4(u,u,l),u.normalize(),T.normals.push(u.x,u.y,u.z);for(N.model.worldBounds.getBoundary(o,a),p.min(D,D,o),p.max(R,R,a),q=N.mesh.readAttribute(G,g.AttributeName.ATTR_TEX_COORD1),K=I%S,Q=Math.floor(I/S),U=0;U<q.length;U+=2)T.uv1.push((K+q[U])/S,(Q+q[U+1])/S);for(W=N.mesh.readIndices(G),Z=0;Z<W.length;Z++)T.indices.push(W[Z]+A);A+=F.length/3,P+=N.bakeSettings.lightmapSize,$=++t/r,ee=(Date.now()-n)/1e3,te=Math.floor(ee/$*(1-$)),console.log("static merge progress : "+$+", leftTime: "+te+"s");case 45:I++,e.next=11;break;case 48:return e.next=50,E();case 50:case"end":return e.stop()}}),e)})),T=c(b.renderers);case 9:if((B=T()).done){e.next=13;break}return e.delegateYield(A(),"t0",11);case 11:e.next=9;break;case 13:case"end":return e.stop()}}),e)})),b=c(this.blockMap);case 12:if((S=b()).done){e.next=16;break}return e.delegateYield(f(),"t0",14);case 14:e.next=12;break;case 16:this.doRevert(),console.log("finished static merge progress.");case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),u.doSearch=function(){var e=i(s().mark((function e(){var t,r,n,o,a=this;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.root){e.next=2;break}return e.abrupt("return");case 2:return this.root.active=!0,globalThis.cce.Engine.repaintInEditMode(),e.next=6,new Promise((function(e){setTimeout(e,500)}));case 6:t=(t=this.root.getComponentsInChildren(y)).filter((function(e){return e.enabledInHierarchy})),this.totalRenderers=t,r=this.blockSize,(n=this.blockMap).clear(),(o=this.blocks).length=0,t.forEach((function(e){var t=e.model.worldBounds.center,i=Math.floor((t.x+a.offset.x)/r.x),s=Math.floor((t.y+a.offset.y)/r.y),c=Math.floor((t.z+a.offset.z)/r.z),u=i+"_"+s+"_"+c,l=n.get(u);l||((l=new V).aabb.halfExtents.multiply(r).multiplyScalar(.5),l.aabb.center.set(i,s,c).multiply(r),l.aabb.center.add(l.aabb.halfExtents),l.aabb.center.subtract(a.offset),l.name=u,n.set(u,l),o.push(l)),e.sharedMaterials.forEach((function(t,r){var n=new J(r,e);if(t){if(e.model.subModels[r]){var o=l.renderers.get(t);o||(o=[],l._materialCount++,l.renderers.set(t,o)),l._totalCount++,a._totalCount++,o.push(n)}}else console.warn(e.model.node.name+" material "+r+" is empty")}))}));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),r(t,[{key:"merge",get:function(){return!1},set:function(e){this.doMerge()}},{key:"search",get:function(){return!1},set:function(e){this.doSearch()}},{key:"revert",get:function(){return!1},set:function(e){this.doRevert()}},{key:"clear",get:function(){return!1},set:function(e){this.doClear()}},{key:"totalBatch",get:function(){var e=0;return this.blocks.forEach((function(t){e+=t.materialCount})),e}},{key:"totalCount",get:function(){return this._totalCount}}]),t}(f)).prototype,"root",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),t(R.prototype,"merge",[H],Object.getOwnPropertyDescriptor(R.prototype,"merge"),R.prototype),t(R.prototype,"search",[H],Object.getOwnPropertyDescriptor(R.prototype,"search"),R.prototype),t(R.prototype,"revert",[H],Object.getOwnPropertyDescriptor(R.prototype,"revert"),R.prototype),t(R.prototype,"clear",[H],Object.getOwnPropertyDescriptor(R.prototype,"clear"),R.prototype),j=t(R.prototype,"blockSize",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new p(30,30,30)}}),E=t(R.prototype,"offset",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new p(-15,-15,-15)}}),I=t(R.prototype,"maxLightMapSize",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1024}}),t(R.prototype,"totalBatch",[H],Object.getOwnPropertyDescriptor(R.prototype,"totalBatch"),R.prototype),L=t(R.prototype,"blocks",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),N=t(R.prototype,"_totalCount",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),t(R.prototype,"totalCount",[H],Object.getOwnPropertyDescriptor(R.prototype,"totalCount"),R.prototype),D=R))||D)||D));u._RF.pop()}}}));

System.register("chunks:///_virtual/static-batch-comp.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,r,c,n,o,a;return{setters:[function(t){e=t.inheritsLoose},function(t){r=t.cclegacy,c=t._decorator,n=t.MeshRenderer,o=t.renderer,a=t.Component}],execute:function(){var i;r._RF.push({},"05f80qLK7tC04BolmJwrKOp","static-batch-comp",void 0);var s=c.ccclass;c.property,c.executeInEditMode,t("StaticBatchComp",s("StaticBatchComp")(i=function(t){function r(){return t.apply(this,arguments)||this}return e(r,t),r.prototype.start=function(){var t=this.getComponent(n),e=new o.MaterialInstance({parent:t.material});e.recompileShaders({USE_INSTANCING:!1}),t.material=e},r}(a))||i);r._RF.pop()}}}));

System.register("chunks:///_virtual/static-culling.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var n,e,c,i,o;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,c=t._decorator,i=t.MeshRenderer,o=t.Component}],execute:function(){var u;e._RF.push({},"b68edupTklC4aG6s/2VtgcP","static-culling",void 0);var r=c.ccclass;c.executeInEditMode,t("StaticCulling",r("StaticCulling")(u=function(t){function e(){return t.apply(this,arguments)||this}n(e,t);var c=e.prototype;return c.start=function(){var t=this;setTimeout((function(){t.hack()}),1500)},c.hack=function(){this.node.getComponentsInChildren(i).forEach((function(t){t.model.updateUBOs=function(){}}))},e}(o))||u);e._RF.pop()}}}));

System.register("chunks:///_virtual/static-occlusion-area.ts",["./rollupPluginModLoBabelHelpers.js","cc","./static-occlusion-block.ts"],(function(t){"use strict";var e,o,r,i,n,l,c,a,s,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,r=t.initializerDefineProperty,i=t.assertThisInitialized,n=t.createClass},function(t){l=t.cclegacy,c=t._decorator,a=t.Component,s=t.Vec3},function(t){u=t.CullingBlock}],execute:function(){var p,f,b,k,y,h,g,d,z;l._RF.push({},"5f769CpuqVCs4IY+zx3fpd9","static-occlusion-area",void 0);var v=c.ccclass,S=(c.type,c.property);t("StaticOcclusionArea",(p=v("sync.StaticOcclusionArea"),f=S(u),p((y=e((k=function(t){function e(){for(var e,o=arguments.length,n=new Array(o),l=0;l<o;l++)n[l]=arguments[l];return(e=t.call.apply(t,[this].concat(n))||this).culling=null,r(e,"blockCells",y,i(e)),r(e,"blocks",h,i(e)),r(e,"blockSize",g,i(e)),r(e,"useSelfBlockSize",d,i(e)),r(e,"discardCulling",z,i(e)),e}return o(e,t),e.prototype.initBlocks=function(){var t=this.culling.blockSize;this.useSelfBlockSize&&(t=this.blockSize);var e=t/2,o=this.blocks;o.length=0;var r=this.node.worldPosition,i=this.node.getWorldScale(),n=Math.floor(i.x/t),l=Math.floor(i.y/t),c=Math.floor(i.z/t);this.blockCells.set(n,l,c);for(var a=0;a<n;a++)for(var s=0;s<l;s++)for(var p=0;p<c;p++){var f=a*l*c+s*c+p,b=o[f]=new u;b.blockIdx=f,b.center.set(r).add3f(a*t,s*t,p*t).add3f(e,e,e).subtract3f(i.x/2,i.y/2,i.z/2),b.halfExtents.set(e,e,e)}},n(e,[{key:"blockCount",get:function(){return this.blocks.length}},{key:"bake",get:function(){return!1},set:function(t){if(this.culling){var e=this.culling.areas.indexOf(this);-1!==e&&this.culling._startBake(e,e+1)}}}]),e}(a)).prototype,"blockCells",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new s}}),h=e(k.prototype,"blocks",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),e(k.prototype,"blockCount",[S],Object.getOwnPropertyDescriptor(k.prototype,"blockCount"),k.prototype),e(k.prototype,"bake",[S],Object.getOwnPropertyDescriptor(k.prototype,"bake"),k.prototype),g=e(k.prototype,"blockSize",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),d=e(k.prototype,"useSelfBlockSize",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),z=e(k.prototype,"discardCulling",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),b=k))||b));l._RF.pop()}}}));

System.register("chunks:///_virtual/static-occlusion-block.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,n,r,i,o,a,s;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.createForOfIteratorHelperLoose,r=e.createClass,i=e.initializerDefineProperty},function(e){o=e.cclegacy,a=e._decorator,s=e.Vec3}],execute:function(){var l,c,u,d,p,f,h,b;o._RF.push({},"59faamDpapJep4tj/Qe3q7n","static-occlusion-block",void 0);var g=a.ccclass,k=a.property;e("CullingBlock",(l=g("sync.CullingBlock"),c=k({visible:!1}),l((p=t((d=function(){function e(){i(this,"center",p,this),i(this,"halfExtents",f,this),i(this,"modelIndices",h,this),this.renderers=[],this.bakedInstances=!1,this.instances=new Set,i(this,"blockIdx",b,this),this.bakingTotalCount=0,this.bakingDirections=[]}return e.prototype.bakeInstances=function(){if(!this.bakedInstances){var e=this.instances;e.clear();for(var t=this.renderers,r=0;r<t.length;r++){var i=t[r];if(i){var o=i.enabled;i.enabled=!0,i.node.updateWorldTransform(),i.model._localDataUpdated=!0,i.model.updateUBOs(0);for(var a=i.model.subModels,s=0;s<a.length;s++)for(var l=a[s].passes,c=0;c<l.length;c++){var u=l[c].getInstancedBuffer(1e3+this.blockIdx);u.merge(a[s],c),e.add(u)}i.enabled=o,this.bakedInstances=!0}}for(var d,p=function(){var e=d.value;e.originClear=e.clear,e.clear=function(){};var t=e.uploadBuffers;e.uploadBuffers=function(e){this.uploaded||(this.uploaded=!0,t.call(this,e))}},f=n(e);!(d=f()).done;)p()}},r(e,[{key:"rendererCount",get:function(){return this.modelIndices.length}},{key:"bakingProcess",get:function(){return 0===this.bakingTotalCount?this.modelIndices.length?1:0:(this.bakingTotalCount-this.bakingDirections.length)/this.bakingTotalCount}}]),e}()).prototype,"center",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new s}}),f=t(d.prototype,"halfExtents",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new s}}),h=t(d.prototype,"modelIndices",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),t(d.prototype,"rendererCount",[k],Object.getOwnPropertyDescriptor(d.prototype,"rendererCount"),d.prototype),b=t(d.prototype,"blockIdx",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),u=d))||u));o._RF.pop()}}}));

System.register("chunks:///_virtual/static-occlusion-culling.ts",["./rollupPluginModLoBabelHelpers.js","cc","./pool.ts","./raycast.ts","./raycast-gpu.ts","./static-occlusion-area.ts","./utils3.ts","./debug.ts"],(function(e){"use strict";var t,n,r,i,o,a,s,l,c,u,d,h,f,p,g,m,b,_,y,k,v,x,C,B;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,i=e.assertThisInitialized,o=e.createClass},function(e){a=e.cclegacy,s=e._decorator,l=e.geometry,c=e.ccenum,u=e.Node,d=e.Camera,h=e.Vec3,f=e.MeshRenderer,p=e.Color,g=e.Mat4,m=e.Component,b=e.Vec2},function(e){_=e.Pool},function(e){y=e.default},function(e){k=e.default},function(e){v=e.StaticOcclusionArea},function(e){x=e.sphereDirections,C=e.modelPoints},function(e){B=e.getGeometryRenderer}],execute:function(){var D,w,z,O,I,M,E,P,S,R,L,A,F,T,N,K,j,G,U,H,V,W,q,J,Q;a._RF.push({},"cf7e8OV8rRGq6r1drFcWWry","static-occlusion-culling",void 0);var X,Y=s.ccclass,Z=s.property,$=s.type,ee=s.executeInEditMode,te=new l.OBB,ne=new l.Ray,re=new Map;!function(e){e[e.Center=0]="Center",e[e.Corner8_Center=1]="Corner8_Center",e[e.Seprate_Corner8_Center=2]="Seprate_Corner8_Center"}(X||(X={})),c(X);e("StaticOcclusionCulling",(D=Y("sync.StaticOcclusionCulling"),w=$(u),z=$(d),O=Z({visible:!1}),I=$(X),D(M=ee(((Q=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,r(t,"root",P,i(t)),r(t,"camera",S,i(t)),r(t,"_blockSize",R,i(t)),r(t,"updateModelNames",L,i(t)),r(t,"modelNames",A,i(t)),r(t,"rendererCount",F,i(t)),r(t,"shouldFastBack",T,i(t)),r(t,"sphereBakeCount",N,i(t)),r(t,"renderBlocks",K,i(t)),r(t,"renderRaycast",j,i(t)),r(t,"renderRaycastLength",G,i(t)),r(t,"_enabledCulling",U,i(t)),r(t,"useGpu",H,i(t)),t._cornerType=X.Corner8_Center,r(t,"bakeInstances",V,i(t)),t.renderers=[],t.models=[],t._loadCompeleted=!1,t._currentLocatedBlock=null,t._lastLocatedBlock=null,t.areas=[],t.instances=void 0,t._isBaking=!1,t._bakingAreaIndex=0,t._bakingAreaEndIndex=0,t._bakingBlockIndex=new h,t._bakingDirections=[],r(t,"_maxDirectionsOneFrame",W,i(t)),r(t,"_maxModelCount",q,i(t)),r(t,"_modelRange",J,i(t)),t._gpuKernelDirty=!0,t._startTime=0,t}n(t,e);var a=t.prototype;return a._updateAreas=function(){this.areas=this.getComponentsInChildren(v);for(var e=0;e<this.areas.length;e++)this.areas[e].culling=this},a.onEnable=function(){t.instance=this},a.onDisable=function(){for(var e=this.renderers,n=0;n<e.length;n++)e[n].model&&(e[n].model.enabled=!0);this._lastLocatedBlock=null,t.instance===this&&(t.instance=void 0)},a.start=function(){this._init()},a._init=function(){if(this._updateAreas(),this.root){this.renderers=this.root.getComponentsInChildren(f),this.renderers=this.renderers.filter((function(e){return e.enabledInHierarchy})),this.models=this.renderers.map((function(e){return e.model}));var e=new Map;this.renderers.forEach((function(t){e.set(t.node.name,t)}));var t=this.modelNames;this.areas.forEach((function(n){n.blocks.forEach((function(n){n.renderers=n.modelIndices.map((function(n){return e.get(t[n])}))}))}))}var n=this.renderers;if(this._enabledCulling&&this.bakeInstances)for(var r=0;r<n.length;r++){var i=n[r].model;i&&(i.enabled=!1)}n.forEach((function(e){e.model&&!e.model._originUpdateUBOs&&(e.model._originUpdateUBOs=e.model.updateUBOs,e.model._uboDirty=!0,e.model.updateUBOs=function(t){e.model&&!e.model._uboDirty||(this._originUpdateUBOs(t),e.model&&(e.model._uboDirty=!1))})})),this._loadCompeleted=!0},a.calcCulling=function(){if(this.camera&&this._loadCompeleted&&!this._isBaking&&this.camera.node){this._currentLocatedBlock=null;for(var e=this.renderers,t=this.camera.node.worldPosition,n=this.areas,r=0;r<n.length;r++){var i=n[r];te.center.set(i.node.worldPosition);var o=i.node.getWorldScale();if(te.halfExtents.set(o.x/2,o.y/2,o.z/2),l.intersect.obbPoint(te,t)){if(i.discardCulling){this._currentLocatedBlock=null;for(var a=0;a<e.length;a++){var s=e[a].model;s&&(s.enabled=!0)}return}var c=this.blockSize;i.useSelfBlockSize&&(c=i.blockSize);var u=Math.floor((t.x-(te.center.x-te.halfExtents.x))/c),d=Math.floor((t.y-(te.center.y-te.halfExtents.y))/c),h=Math.floor((t.z-(te.center.z-te.halfExtents.z))/c),f=(Math.floor(o.x/c),Math.floor(o.y/c)),p=Math.floor(o.z/c),g=i.blocks[u*f*p+d*p+h];if(g){this._currentLocatedBlock=g;break}}}if(this._lastLocatedBlock!==this._currentLocatedBlock){if(this._currentLocatedBlock){var m=this._currentLocatedBlock;if(this.bakeInstances)m.bakeInstances(),this.instances=m.instances,this.camera.camera.instances=this.instances;else{for(var b=0;b<e.length;b++){var _=e[b].model;_&&(_.enabled=!1)}for(var y=0;y<m.renderers.length;y++){var k=m.renderers[y]&&m.renderers[y].model;k&&(k.enabled||(k._uboDirty=!0),k.enabled=!0)}}}else for(var v=0;v<e.length;v++){var x=e[v]&&e[v].model;x&&(x.enabled=!0)}this._lastLocatedBlock=this._currentLocatedBlock}}},a.update=function(){this._updateAreas(),this._enabledCulling&&this.calcCulling()},a._startBake=function(e,t){if(void 0===e&&(e=0),void 0===t&&(t=1/0),!this._isBaking){this._startTime=Date.now(),re.clear(),this._isBaking=!0,this._bakingAreaIndex=e,this._bakingAreaEndIndex=Math.min(t,this.areas.length),this._bakingBlockIndex=new h,this.renderers=this.root.getComponentsInChildren(f),this.renderers=this.renderers.filter((function(e){return e.enabledInHierarchy})),this.renderers.sort((function(e,t){return e.name.localeCompare(t.name)})),this.models=this.renderers.map((function(e){return e.model}));var n=this.renderers.map((function(e){return e.node.name}));if(this.modelNames&&this.modelNames.length){for(var r=this.modelNames,i=!1,o=0;o<n.length;o++)n[o]!==r[o]&&(i=!0);i&&(this.areas.forEach((function(e){e.blocks.forEach((function(e){var t=[];e.modelIndices.forEach((function(e){var i=n.indexOf(r[e]);-1!==i&&t.push(i)})),e.modelIndices=t}))})),this.modelNames=n)}else this.modelNames=n;for(var a=[],s=Math.max(0,this._modelRange.x),l=Math.min(this._modelRange.y,this.models.length);s<l;s++)a.push(this.models[s]);this.models=a,this.models.length=Math.min(this.models.length,this.maxModelCount),this.rendererCount=this.renderers.length;for(var c=this._bakingAreaIndex;c<this._bakingAreaEndIndex;c++)this.areas[c].initBlocks();if(console.log("--------------------------------"),console.time("create bakingDirections"),this.shouldFastBack?this._bakingDirections=x(this.sphereBakeCount):this._bakingDirections=C(this.models),console.timeEnd("create bakingDirections"),this.useGpu){console.time("raycastGpu.createKernel");var u=1;if(this._cornerType===X.Corner8_Center&&(u=9),this._gpuKernelDirty){var d=Math.min(this.maxDirectionsOneFrame,this._bakingDirections.length);k.createKernel(this.models,d,u),this._gpuKernelDirty=!1}console.timeEnd("raycastGpu.createKernel")}}},a.initBlocks=function(){for(var e=0;e<this.areas.length;e++){this.areas[e].initBlocks()}},a._bake=function(){if(this.root){for(var e=0,t=this._bakingAreaIndex;t<this._bakingAreaEndIndex;){for(var n=this.areas[t],r=n.blocks,i=n.blockCells.x,o=n.blockCells.y,a=n.blockCells.z,s=n.blockCount,l=this._bakingBlockIndex.x;l<i;){for(var c=this._bakingBlockIndex.y;c<o;){for(var u=this._bakingBlockIndex.z;u<a;){if(e>=1)return;var d=l*o*a+c*a+u,h=r[d];h.bakingProcess||(h.bakingDirections=this._bakingDirections.concat(),h.bakingTotalCount=h.bakingDirections.length),console.time("do raycasting");var f=h.bakingDirections.splice(0,this.maxDirectionsOneFrame);this.shouldFastBack?this._raycastDirections(h,f):this._raycastPoints(h,f),console.timeEnd("do raycasting");var p=(d+h.bakingProcess)/s;console.log("baking process : area - "+t+",  block "+d+" - "+h.bakingProcess+", total - "+p);var g=(Date.now()-this._startTime)/1e3/p*(1-p);console.log("left time : "+g+" s");for(var m=0;m<f.length;m++)_.Vec3.put(f[m]);if(h.bakingDirections.length)return;this._bakingBlockIndex.z=++u,e++}this._bakingBlockIndex.z=0,this._bakingBlockIndex.y=++c}this._bakingBlockIndex.y=0,this._bakingBlockIndex.z=0,this._bakingBlockIndex.x=++l}this._bakingAreaIndex=++t,this._bakingBlockIndex.set(0,0,0)}this._isBaking=!1,console.log("bake static culling : "+(Date.now()-this._startTime)/1e3+" s")}},a._raycastDirections=function(e,t){var n=this,r=this.models;ne.o.set(e.center);for(var i=0;i<t.length;i++){ne.d.set(t[i]);var o=y.raycastModels(r,ne,void 0,void 0,!0);if(o.length>0){var a=o[0].node.getComponent(f);a&&-1===e.renderers.indexOf(a)&&e.renderers.push(a)}}e.modelIndices=e.renderers.map((function(e){return n.models.indexOf(e.model)}))},a._forEachCorner=function(e,t){for(var n=[e.center],r=-1;r<=1;r+=2)for(var i=-1;i<=1;i+=2)for(var o=-1;o<=1;o+=2)n.push(new h(e.center).add3f(e.halfExtents.x*r,e.halfExtents.y*i,e.halfExtents.z*o));for(var a=0;a<n.length;a++)t(n[a])},a._raycastPoints=function(e,t){var n=this,r=this.models,i=[e.center];if(this._cornerType===X.Corner8_Center||this._cornerType===X.Seprate_Corner8_Center)for(var o=-1;o<=1;o+=2)for(var a=-1;a<=1;a+=2)for(var s=-1;s<=1;s+=2)i.push(new h(e.center).add3f(e.halfExtents.x*o,e.halfExtents.y*a,e.halfExtents.z*s));if(this.useGpu)if(this._cornerType===X.Seprate_Corner8_Center)for(var l=0;l<i.length;l++){var c=i[l],u=c.x+"_"+c.y+"_"+c.z,d=re.get(u),p=void 0;if(d&&d._baked)p=d;else{d||(d=[],re.set(u,d)),e.bakingProcess>=1&&(d._baked=!0),p=k.raycastModels(r,[c],t);for(var g=0;g<p.length;g++)-1===d.indexOf(p[g])&&d.push(p[g])}p.forEach((function(t){var n=t.node.getComponent(f);n&&-1===e.renderers.indexOf(n)&&e.renderers.push(n)}))}else k.raycastModels(r,i,t).forEach((function(t){var n=t.node.getComponent(f);n&&-1===e.renderers.indexOf(n)&&e.renderers.push(n)}));else for(var m=0;m<i.length;m++)for(var b=0;b<t.length;b++){ne.o.set(i[m]),ne.d.set(t[b]).subtract(ne.o).normalize();var _=y.raycastModels(r,ne,void 0,void 0,!0);if(_.length>0){var v=_[0].node.getComponent(f);v&&-1===e.renderers.indexOf(v)&&e.renderers.push(v)}}e.modelIndices=e.renderers.map((function(e){return n.models.indexOf(e.model)}))},a.debugDraw=function(){var e=B();if(e)for(var t=new p(0,0,0,100),n=(new p(255,0,0,20),new p(0,0,255,20),new g,new l.AABB(0,0,0,.5,.5,.5)),r=0;r<this.areas.length;r++){var i=this.areas[r];i.enabledInHierarchy&&e.addBoundingBox(n,t,!1,!1,void 0,!0,i.node.worldMatrix)}},o(t,[{key:"blockSize",get:function(){return this._blockSize},set:function(e){this._blockSize=e,this.initBlocks()}},{key:"bake",get:function(){return!1},set:function(e){this._startBake()}},{key:"stop",get:function(){return!1},set:function(e){this._isBaking=!1}},{key:"enabledCulling",get:function(){return this._enabledCulling},set:function(e){if(this._enabledCulling=e,!e)for(var t=this.renderers,n=0;n<t.length;n++)t[n].model.enabled=!0;this._lastLocatedBlock=null}},{key:"cornerType",get:function(){return this._cornerType},set:function(e){this._cornerType=e,this._gpuKernelDirty=!0}},{key:"maxDirectionsOneFrame",get:function(){return this._maxDirectionsOneFrame},set:function(e){this._maxDirectionsOneFrame=e,this._gpuKernelDirty=!0}},{key:"maxModelCount",get:function(){return this._maxModelCount},set:function(e){this._maxModelCount=e,this._gpuKernelDirty=!0}},{key:"modelRange",get:function(){return this._modelRange},set:function(e){this._modelRange=e,this._gpuKernelDirty=!0}}]),t}(m)).instance=void 0,P=t((E=Q).prototype,"root",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=t(E.prototype,"camera",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(E.prototype,"_blockSize",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),t(E.prototype,"blockSize",[Z],Object.getOwnPropertyDescriptor(E.prototype,"blockSize"),E.prototype),L=t(E.prototype,"updateModelNames",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),A=t(E.prototype,"modelNames",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),F=t(E.prototype,"rendererCount",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),t(E.prototype,"bake",[Z],Object.getOwnPropertyDescriptor(E.prototype,"bake"),E.prototype),t(E.prototype,"stop",[Z],Object.getOwnPropertyDescriptor(E.prototype,"stop"),E.prototype),T=t(E.prototype,"shouldFastBack",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),N=t(E.prototype,"sphereBakeCount",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 6e3}}),K=t(E.prototype,"renderBlocks",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),j=t(E.prototype,"renderRaycast",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),G=t(E.prototype,"renderRaycastLength",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),U=t(E.prototype,"_enabledCulling",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),t(E.prototype,"enabledCulling",[Z],Object.getOwnPropertyDescriptor(E.prototype,"enabledCulling"),E.prototype),H=t(E.prototype,"useGpu",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),t(E.prototype,"cornerType",[I],Object.getOwnPropertyDescriptor(E.prototype,"cornerType"),E.prototype),V=t(E.prototype,"bakeInstances",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),W=t(E.prototype,"_maxDirectionsOneFrame",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1e4}}),t(E.prototype,"maxDirectionsOneFrame",[Z],Object.getOwnPropertyDescriptor(E.prototype,"maxDirectionsOneFrame"),E.prototype),q=t(E.prototype,"_maxModelCount",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1e4}}),t(E.prototype,"maxModelCount",[Z],Object.getOwnPropertyDescriptor(E.prototype,"maxModelCount"),E.prototype),J=t(E.prototype,"_modelRange",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new b(0,1e5)}}),t(E.prototype,"modelRange",[Z],Object.getOwnPropertyDescriptor(E.prototype,"modelRange"),E.prototype),M=E))||M)||M));a._RF.pop()}}}));

System.register("chunks:///_virtual/steering-basic.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,r,c,i,n;return{setters:[function(e){t=e.inheritsLoose},function(e){r=e.cclegacy,c=e._decorator,i=e.v3,n=e.Component}],execute:function(){var o;r._RF.push({},"12bba6qAJVF9KUl2UJ6BBWu","steering-basic",void 0);var s=c.ccclass;c.property,e("SteeringBasic",s("SteeringBasic")(o=function(e){function r(){for(var t,r=arguments.length,c=new Array(r),n=0;n<r;n++)c[n]=arguments[n];return(t=e.call.apply(e,[this].concat(c))||this).moveVelocity=i(0,0,0),t.desiredVelocity=i(0,0,0),t.target=void 0,t}return t(r,e),r}(n))||o);r._RF.pop()}}}));

System.register("chunks:///_virtual/steering-behaviors.ts",["./rollupPluginModLoBabelHelpers.js","cc","./util2.ts"],(function(e){"use strict";var t,i,r,o,n,s;return{setters:[function(e){t=e.inheritsLoose},function(e){i=e.cclegacy,r=e._decorator,o=e.v3,n=e.Component},function(e){s=e.UtilVec3}],execute:function(){var c;i._RF.push({},"c08e7bK2PNJA6GsiSX8MXXh","steering-behaviors",void 0);var u=r.ccclass;r.property,e("SteeringBehaviors",u("SteeringBehaviors")(c=function(e){function i(){for(var t,i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];return(t=e.call.apply(e,[this].concat(r))||this).moveVelocity=o(0,0,0),t.desiredVelocity=o(0,0,0),t}t(i,e);var r=i.prototype;return r.start=function(){},r.update=function(e){},r.Seek=function(e){return s.copy(this.desiredVelocity,e),this.desiredVelocity.subtract(this.node.worldPosition),this.desiredVelocity.subtract(this.moveVelocity)},i}(n))||c);i._RF.pop()}}}));

System.register("chunks:///_virtual/steering-seek.ts",["./rollupPluginModLoBabelHelpers.js","cc","./util2.ts","./steering-basic.ts"],(function(e){"use strict";var t,i,n,r,s,o,c;return{setters:[function(e){t=e.inheritsLoose},function(e){i=e.cclegacy,n=e._decorator,r=e.v3,s=e.Component},function(e){o=e.UtilVec3},function(e){c=e.SteeringBasic}],execute:function(){var u;i._RF.push({},"28c76uWY+lEg6tvKcunJ0CP","steering-seek",void 0);var a=n.ccclass;n.property,e("SteeringSeek",a("SteeringSeek")(u=function(e){function i(){for(var t,i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return(t=e.call.apply(e,[this].concat(n))||this).moveVelocity=r(0,0,0),t.desiredVelocity=r(0,0,0),t.steeringBasic=void 0,t}t(i,e);var n=i.prototype;return n.start=function(){this.steeringBasic=this.getComponent(c)},n.update=function(e){},n.SeekToward=function(){},n.Seek=function(e){var t,i=null==(t=this.steeringBasic)?void 0:t.target;return o.copy(this.desiredVelocity,i.position),this.desiredVelocity.subtract(this.node.worldPosition),this.desiredVelocity.subtract(this.moveVelocity)},i}(s))||u);i._RF.pop()}}}));

System.register("chunks:///_virtual/stretched-billboard.ts",["./rollupPluginModLoBabelHelpers.js","cc","./camera-setting.ts","./g-math.ts"],(function(t){"use strict";var e,r,o,i,n,a;return{setters:[function(t){e=t.inheritsLoose},function(t){r=t.cclegacy,o=t._decorator,i=t.Component},function(t){n=t.CameraSetting},function(t){a=t.GMath}],execute:function(){var s;r._RF.push({},"22d11P1lh9N5I87WTz6jjKR","stretched-billboard",void 0);var l=o.ccclass;o.property,t("StretchedBillboard",l("StretchedBillboard")(s=function(t){function r(){for(var e,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))||this).target=void 0,e}return e(r,t),r.prototype.update=function(t){var e,r;void 0===this.target&&(this.target=null==(e=n.main)||null==(r=e.camera)?void 0:r.node);if(void 0!==this.target){var o=a.StretchedBillboardAngle(this.node.up,this.node.worldPosition,this.target.worldPosition,this.node.forward);if(o){var i=this.node.eulerAngles;this.node.setRotationFromEuler(i.x,i.y,o)}}},r}(i))||s);r._RF.pop()}}}));

System.register("chunks:///_virtual/substance-core.ts",["./rollupPluginModLoBabelHelpers.js","cc","./singleton.ts"],(function(e){"use strict";var n,t,r,c;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy,r=e._decorator},function(e){c=e.Singleton}],execute:function(){var o;e("SubstanceType",void 0),t._RF.push({},"619bbvH0qNCa43dr3czCnLm","substance-core",void 0);var u,s=r.ccclass;r.property,e("SubstanceCore",s("SubstanceCore")(o=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t.prototype.checkNodeType=function(e){for(var n in u)if(e.name.includes(n))return n;return u.GROUND},t}(c))||o);!function(e){e.None="none",e.GROUND="ground",e.METAL="metal",e.WALL="wall",e.WATER="water"}(u||(u=e("SubstanceType",{}))),t._RF.pop()}}}));

System.register("chunks:///_virtual/switch-probe.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var r,t,o,n,i,s,c,u,p,a;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,o=e.initializerDefineProperty,n=e.assertThisInitialized,i=e.createClass},function(e){s=e.cclegacy,c=e._decorator,u=e.MeshRenderer,p=e.ReflectionProbeType,a=e.Component}],execute:function(){var l,h,b;s._RF.push({},"fd67airPCVM8p6VTrrI3O9S","switch-probe",void 0);var f=c.ccclass,P=c.executeInEditMode,y=c.property;e("SwitchProbe",f("SwitchProbe")(l=P((b=r((h=function(e){function r(){for(var r,t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return r=e.call.apply(e,[this].concat(i))||this,o(r,"_useProbe",b,n(r)),r}return t(r,e),i(r,[{key:"useProbe",get:function(){return this._useProbe},set:function(e){this._useProbe=e;for(var r=this.node.children,t=0;t<r.length;t++)r[t].getComponents;this.node.getComponentsInChildren(u).forEach((function(r){r.reflectionProbe=e?p.BAKED_CUBEMAP:p.NONE}))}}]),r}(a)).prototype,"_useProbe",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),r(h.prototype,"useProbe",[y],Object.getOwnPropertyDescriptor(h.prototype,"useProbe"),h.prototype),l=h))||l)||l);s._RF.pop()}}}));

System.register("chunks:///_virtual/taa-stage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./href-setting.ts","./pass-utils.ts","./utils2.ts","./base-stage.ts","./setting.ts"],(function(e){"use strict";var t,a,r,i,s,n,o,l,c,u,f,g,p,h,d,T;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.inheritsLoose,r=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){s=e.cclegacy,n=e._decorator,o=e.Vec4,l=e.Mat4,c=e.gfx,u=e.renderer,f=e.rendering},function(e){g=e.HrefSetting},function(e){p=e.passUtils},function(e){h=e.getCameraUniqueID},function(e){d=e.BaseStage},function(e){T=e.settings}],execute:function(){var A,m,v,P,b;s._RF.push({},"412ffaHIINGLpn4VWnV8zTB","taa-stage",void 0);var S=n.ccclass,x=n.property,w=new o,y=["TAA_First","TAA_Second"];e("TAAStage",(A=S("TAAStage"),m=x({override:!0}),A((b=t((P=function(e){function t(){for(var t,a=arguments.length,s=new Array(a),n=0;n<a;n++)s[n]=arguments[n];return(t=e.call.apply(e,[this].concat(s))||this)._materialName="deferred-taa",t.materialMap=new Map,t.prevMatViewProj=new l,r(t,"name",b,i(t)),t.firstRender=!0,t}a(t,e);var s=t.prototype;return s.checkEnable=function(){return!T.bakingReflection&&(this.enable&&globalThis.TAASetting&&globalThis.TAASetting.instance&&globalThis.TAASetting.instance.enable&&!!g.taa)},s.slotName=function(e,t){if(void 0===t&&(t=0),!this.checkEnable())return this.lastStage.slotName(e,t);var a=globalThis.TAASetting.instance;return a.taaTextureIndex<0?y[0]:y[(a.taaTextureIndex+1)%2]},s.render=function(e,t){if(this.checkEnable()){var a=globalThis.TAASetting.instance,r=h(e),i=this.getRenderArea(e),s=i.width,n=i.height;p.clearFlag=c.ClearFlagBit.COLOR,o.set(p.clearColor,0,0,0,1);var l=this.materialMap.get(e);l&&l.parent===this.material||(l=new u.MaterialInstance({parent:this.material}),this.materialMap.set(e,l)),p.material=l;var g=this.firstRender;g&&(this.prevMatViewProj.set(e.matViewProj),this.firstRender=!1),l.setProperty("taaParams1",w.set(a.sampleOffset.x,a.sampleOffset.y,a.feedback,0)),l.setProperty("taaTextureSize",w.set(1/s,1/n,1/s,1/n)),l.setProperty("taaPrevViewProj",this.prevMatViewProj),this.prevMatViewProj.set(e.matViewProj);var d=this.lastStage.slotName(e,0),A=y[a.taaTextureIndex%2];g&&(A=d);var m=this.slotName(e,0),v="gBufferPosition";T.gbufferStage&&(v=T.gbufferStage.slotName(e,3)),p.addRasterPass(s,n,"DeferredTAA"+(a.taaTextureIndex<0?-1:a.taaTextureIndex%2),"CameraTAAPass"+r).setViewport(i.x,i.y,s,n).setPassInput(d,"inputTexture").setPassInput(v,"posTex").setPassInput(A,"taaPrevTexture").addRasterView(m,c.Format.RGBA16F,!0,f.ResourceResidency.PERSISTENT).blitScreen(0).version()}},t}(d)).prototype,"name",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"TAAStage"}}),v=P))||v));s._RF.pop()}}}));

System.register("chunks:///_virtual/taa.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,n,i,a,r,l,o,s,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){r=e.cclegacy,l=e._decorator,o=e.Vec2,s=e.game,c=e.Component}],execute:function(){var u,p,f,h,b,w,d,m,y,g;r._RF.push({},"20b0dTocaRF2ou2Z6iizPPW","taa",void 0);var x=l.ccclass,T=l.property,v=l.executeInEditMode,A=[new o(.5,1/3),new o(.25,2/3),new o(.75,1/9),new o(.125,4/9),new o(.625,7/9),new o(.375,2/9),new o(.875,5/9),new o(.0625,8/9)];A.forEach((function(e){e.x-=.5,e.y-=.5}));var S={x2:[new o(-.25,-.25),new o(.25,.25)],x3:[new o(-2/3,-2/3),new o(2/3,0),new o(0,2/3)],x4:[new o(-2/16,-6/16),new o(6/16,-2/16),new o(2/16,6/16),new o(-6/16,2/16)],x5:[new o(0,-.5),new o(.5,0),new o(0,.5),new o(-.5,0)],halton8:A},z=e("TAASetting",x("TAASetting")(u=v(((g=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return t=e.call.apply(e,[this].concat(r))||this,i(t,"enable",f,a(t)),i(t,"sampleScale",h,a(t)),i(t,"feedback",b,a(t)),i(t,"shaowHistoryTexture",w,a(t)),i(t,"clampHistoryTexture",d,a(t)),i(t,"forceRender",m,a(t)),i(t,"dirty",y,a(t)),t.sampleOffset=new o,t.taaTextureIndex=-2,t.samples=S.halton8,t.sampleIndex=-1,t}n(t,e);var r=t.prototype;return r.onEnable=function(){globalThis.TAASetting.instance=this},r.onDisable=function(){globalThis.TAASetting.instance===this&&(globalThis.TAASetting.instance=void 0)},r.updateSample=function(e,t){(this.dirty||this.forceRender)&&(this.sampleIndex++,this.taaTextureIndex++,this.dirty=!1);var n=this.samples[this.sampleIndex%this.samples.length];-1===this.sampleIndex&&(n=o.ZERO),this.sampleOffset.x=n.x*this.sampleScale/e,this.sampleOffset.y=n.y*this.sampleScale/t},r.lateUpdate=function(e){this.updateSample(s.canvas.width,s.canvas.height)},t}(c)).instance=void 0,f=t((p=g).prototype,"enable",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),h=t(p.prototype,"sampleScale",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),b=t(p.prototype,"feedback",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.95}}),w=t(p.prototype,"shaowHistoryTexture",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),d=t(p.prototype,"clampHistoryTexture",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),m=t(p.prototype,"forceRender",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),y=t(p.prototype,"dirty",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),u=p))||u)||u);globalThis.TAASetting=z,r._RF.pop()}}}));

System.register("chunks:///_virtual/tap-play.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,n,o,r,p,u,c,s;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator,r=t.game,p=t.input,u=t.Input,c=t.KeyCode,s=t.Component}],execute:function(){var a;n._RF.push({},"28ec1JHVrVAfoPTrWOJr0Oz","tap-play",void 0);var i=o.ccclass;o.property,t("TapPlay",i("TapPlay")(a=function(t){function n(){return t.apply(this,arguments)||this}return e(n,t),n.prototype.start=function(){r.pause(),p.on(u.EventType.KEY_UP,(function(t){t.keyCode===c.SPACE&&r.resume(),t.keyCode,c.KEY_R}),this)},n}(s))||a);n._RF.pop()}}}));

System.register("chunks:///_virtual/task.ts",["cc"],(function(t){"use strict";var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"cfb92JEgqREVYJb6JPkB9TR","task",void 0);t("TaskRuner",(function(){this._queue=[],this._active=0}));e._RF.pop()}}}));

System.register("chunks:///_virtual/test-actor-move.ts",["./rollupPluginModLoBabelHelpers.js","cc","./actor-move.ts"],(function(e){"use strict";var o,t,i,n,r,c,s,d,_,h,u,a;return{setters:[function(e){o=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){r=e.cclegacy,c=e._decorator,s=e.v3,d=e.input,_=e.Input,h=e.KeyCode,u=e.Component},function(e){a=e.ActorMove}],execute:function(){var y,p,v,l,f;r._RF.push({},"f1cc2YQpdtCPoKUwJo+pOG5","test-actor-move",void 0);var M=c.ccclass,R=c.property;e("TestActorMove",(y=M("TestActorMove"),p=R({type:a,tooltip:" Reference Actor Move Slope."}),y((f=o((l=function(e){function o(){for(var o,t=arguments.length,r=new Array(t),c=0;c<t;c++)r[c]=arguments[c];return o=e.call.apply(e,[this].concat(r))||this,i(o,"actorMove",f,n(o)),o._dir=s(0,0,0),o.direction_up=0,o.direction_down=0,o.direction_left=0,o.direction_right=0,o}t(o,e);var r=o.prototype;return r.start=function(){d.on(_.EventType.KEY_DOWN,this.onKeyDown,this),d.on(_.EventType.KEY_UP,this.onKeyUp,this),d.on(_.EventType.MOUSE_DOWN,this.onMouseDown,this),d.on(_.EventType.MOUSE_MOVE,this.onMouseMove,this)},r.onKeyDown=function(e){var o;e.keyCode!==h.KEY_W&&e.keyCode!==h.ARROW_UP||(this.direction_up=-1),e.keyCode!==h.KEY_S&&e.keyCode!==h.ARROW_DOWN||(this.direction_down=1),e.keyCode!==h.KEY_A&&e.keyCode!==h.ARROW_LEFT||(this.direction_left=-1),e.keyCode!==h.KEY_D&&e.keyCode!==h.ARROW_RIGHT||(this.direction_right=1),e.keyCode==h.SPACE&&(null==(o=this.actorMove)||o.jump()),this.onMove()},r.onKeyUp=function(e){e.keyCode!==h.KEY_W&&e.keyCode!==h.ARROW_UP||(this.direction_up=0),e.keyCode!==h.KEY_S&&e.keyCode!==h.ARROW_DOWN||(this.direction_down=0),e.keyCode!==h.KEY_A&&e.keyCode!==h.ARROW_LEFT||(this.direction_left=0),e.keyCode!==h.KEY_D&&e.keyCode!==h.ARROW_RIGHT||(this.direction_right=0),this.onMove()},r.onMouseDown=function(e){},r.onMouseMove=function(e){var o;null==(o=this.actorMove)||o.onRotation(e.movementX/5,e.movementY/10)},r.onMove=function(){var e;this._dir.x=this.direction_left+this.direction_right,this._dir.z=this.direction_up+this.direction_down,this._dir.y=0,null==(e=this.actorMove)||e.moveDirection(this._dir.normalize())},o}(u)).prototype,"actorMove",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=l))||v));r._RF.pop()}}}));

System.register("chunks:///_virtual/test-amoy-animation.ts",["./rollupPluginModLoBabelHelpers.js","cc","./actor-animation-graph.ts","./msg.ts"],(function(e){"use strict";var i,t,o,n,a,r,l,s,h,_,c,d,p,y,u,g,m;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,o=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){a=e.cclegacy,r=e._decorator,l=e.Node,s=e.RigidBody,h=e.v3,_=e.input,c=e.Input,d=e.KeyCode,p=e.Vec3,y=e.math,u=e.Component},function(e){g=e.ActorAnimationGraph},function(e){m=e.Msg}],execute:function(){var R,v,f,k,C,b,E,A,V;a._RF.push({},"a7be801KZBAg71N+w894EgY","test-amoy-animation",void 0);var K=r.ccclass,Y=r.property;e("TestAmoyAnimation",(R=K("TestAmoyAnimation"),v=Y(l),f=Y(s),R((b=i((C=function(e){function i(){for(var i,t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return(i=e.call.apply(e,[this].concat(a))||this)._animationGraph=void 0,i.bool_crouch=!1,i.bool_iron_sights=!1,i.direction_up=0,i.direction_down=0,i.direction_left=0,i.direction_right=0,i.cameraTargetIndex=0,o(i,"moveSpeedRate",b,n(i)),o(i,"angleSpeedRate",E,n(i)),i.angleVelocity=h(0,0,0),i.linearVelocity=h(0,0,0),i.moveSpeed=1,o(i,"view",A,n(i)),o(i,"targetRigid",V,n(i)),i}t(i,e);var a=i.prototype;return a.start=function(){var e;this._animationGraph=null==(e=this.view)?void 0:e.getComponent(g),_.on(c.EventType.KEY_DOWN,this.keyDown,this),_.on(c.EventType.KEY_UP,this.keyUp,this),_.on(c.EventType.MOUSE_DOWN,this.onMouseDown,this)},a.lateUpdate=function(e){this.updateMove()},a.keyDown=function(e){var i,t,o,n,a,r,l,s;(e.keyCode!==d.KEY_W&&e.keyCode!==d.ARROW_UP||(this.direction_up=-1),e.keyCode!==d.KEY_S&&e.keyCode!==d.ARROW_DOWN||(this.direction_down=1),e.keyCode!==d.KEY_A&&e.keyCode!==d.ARROW_LEFT||(this.direction_left=-1),e.keyCode!==d.KEY_D&&e.keyCode!==d.ARROW_RIGHT||(this.direction_right=1),e.keyCode==d.KEY_I)&&(this.bool_iron_sights=!this.bool_iron_sights,console.log(this.bool_iron_sights),null==(i=this._animationGraph)||i.play("bool_iron_sights",this.bool_iron_sights),this.cameraTargetIndex=this.bool_iron_sights?1:0,m.emit("msg_change_tps_camera_target",this.cameraTargetIndex));e.keyCode==d.KEY_C&&(this.bool_crouch=!this.bool_crouch,null==(t=this._animationGraph)||t.play("bool_crouch",this.bool_crouch),m.emit("msg_change_tps_camera_height",this.bool_crouch?1:1.377));e.keyCode==d.SPACE&&(null==(o=this._animationGraph)||o.play("trigger_jump",!0),null==(n=this._animationGraph)||n.setValue("num_jump_speed",.8));e.keyCode===d.KEY_D&&(null==(a=this._animationGraph)||a.play("trigger_draw",!0));e.keyCode===d.KEY_R&&(null==(r=this._animationGraph)||r.play("trigger_reload",!0));e.keyCode===d.KEY_E&&(null==(l=this._animationGraph)||l.play("trigger_reload_empty",!0));e.keyCode===d.KEY_H&&(null==(s=this._animationGraph)||s.play("trigger_hit",!0));if(e.keyCode==d.KEY_Z){if(1===this.cameraTargetIndex)return;this.cameraTargetIndex=0===this.cameraTargetIndex?2:0,m.emit("msg_change_tps_camera_target",this.cameraTargetIndex)}},a.onMouseDown=function(e){var i;null==(i=this._animationGraph)||i.play("trigger_fire",!0)},a.keyUp=function(e){e.keyCode!==d.KEY_W&&e.keyCode!==d.ARROW_UP||(this.direction_up=0),e.keyCode!==d.KEY_S&&e.keyCode!==d.ARROW_DOWN||(this.direction_down=0),e.keyCode!==d.KEY_A&&e.keyCode!==d.ARROW_LEFT||(this.direction_left=0),e.keyCode!==d.KEY_D&&e.keyCode!==d.ARROW_RIGHT||(this.direction_right=0)},a.updateMove=function(){var e,i,t;this.targetRigid.getLinearVelocity(this.linearVelocity),this.targetRigid.getAngularVelocity(this.angleVelocity),this.linearVelocity.y=0;var o=this.linearVelocity.length(),n=this.targetRigid.node.eulerAngles.y;p.rotateY(this.linearVelocity,this.linearVelocity,p.ZERO,y.toRadian(-n));var a=this.linearVelocity.x,r=this.linearVelocity.z;this.moveSpeed=o*this.moveSpeedRate,this.direction_up+this.direction_left+this.direction_right+this.direction_down==0&&Math.abs(this.angleVelocity.y)>1&&(this.moveSpeed=this.angleVelocity.y*this.angleSpeedRate,a=this.angleVelocity.y/10),null==(e=this._animationGraph)||e.setValue("num_velocity_x",a),null==(i=this._animationGraph)||i.setValue("num_velocity_y",-r),null==(t=this._animationGraph)||t.setValue("num_move_speed",this.moveSpeed)},i}(u)).prototype,"moveSpeedRate",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.7}}),E=i(C.prototype,"angleSpeedRate",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.3}}),A=i(C.prototype,"view",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=i(C.prototype,"targetRigid",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=C))||k));a._RF.pop()}}}));

System.register("chunks:///_virtual/test-anig.ts",["./rollupPluginModLoBabelHelpers.js","cc","./actor-animation-graph-group.ts"],(function(t){"use strict";var n,i,a,e,r,o,p,s;return{setters:[function(t){n=t.inheritsLoose},function(t){i=t.cclegacy,a=t._decorator,e=t.input,r=t.Input,o=t.KeyCode,p=t.Component},function(t){s=t.ActorAnimationGraphGroup}],execute:function(){var l;i._RF.push({},"454cbIMSGBMN5BT5nW5F9ji","test-anig",void 0);var u=a.ccclass;a.property,t("TestAnimationGraph",u("TestAnimationGraph")(l=function(t){function i(){for(var n,i=arguments.length,a=new Array(i),e=0;e<i;e++)a[e]=arguments[e];return(n=t.call.apply(t,[this].concat(a))||this)._animationGraph=void 0,n}n(i,t);var a=i.prototype;return a.start=function(){var t=this.node.getChildByName("view");this._animationGraph=t.addComponent(s),e.on(r.EventType.KEY_DOWN,this.keyDown,this)},a.keyDown=function(t){var n,i,a,e,r;t.keyCode===o.KEY_D&&(null==(n=this._animationGraph)||n.play("trigger_draw",!0));t.keyCode===o.KEY_F&&(null==(i=this._animationGraph)||i.play("trigger_fire",!0));t.keyCode===o.KEY_R&&(null==(a=this._animationGraph)||a.play("trigger_reload",!0));t.keyCode===o.KEY_E&&(null==(e=this._animationGraph)||e.play("trigger_reload_empty",!0));t.keyCode===o.KEY_H&&(null==(r=this._animationGraph)||r.play("trigger_holster",!0))},a.update=function(t){},i}(p))||l);i._RF.pop()}}}));

System.register("chunks:///_virtual/test-camera-debug.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,o,r,n;return{setters:[function(t){e=t.inheritsLoose},function(t){o=t.cclegacy,r=t._decorator,n=t.Component}],execute:function(){var c;o._RF.push({},"4175bLazyRLxo5ia1UGb/9Y","test-camera-debug",void 0);var s=r.ccclass;r.property,t("test_camera_debug",s("test_camera_debug")(c=function(t){function o(){return t.apply(this,arguments)||this}e(o,t);var r=o.prototype;return r.start=function(){},r.update=function(t){console.log(this.node.worldPosition)},o}(n))||c);o._RF.pop()}}}));

System.register("chunks:///_virtual/test-collider-mesh-switch.ts",["./rollupPluginModLoBabelHelpers.js","cc","./data-core.ts"],(function(e){"use strict";var t,r,n,i,s,o,a,c,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){s=e.cclegacy,o=e._decorator,a=e.MeshRenderer,c=e.Component},function(e){l=e.DataGameInst}],execute:function(){var h,u,d;s._RF.push({},"cd636V2SHdJgI0Yu7mqT0QT","test-collider-mesh-switch",void 0);var p=o.ccclass,f=o.property;e("TestColliderMeshSwitch",p("TestColliderMeshSwitch")((d=t((u=function(e){function t(){for(var t,r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return t=e.call.apply(e,[this].concat(s))||this,n(t,"meshRenderState",d,i(t)),t}return r(t,e),t.prototype.start=function(){this.meshRenderState=l._data.show_collider;for(var e=this.getComponentsInChildren(a),t=0;t<e.length;t++)e[t].enabled=this.meshRenderState},t}(c)).prototype,"meshRenderState",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),h=u))||h);s._RF.pop()}}}));

System.register("chunks:///_virtual/test-custom.ts",["cc","./utils2.ts"],(function(e){"use strict";var a,r,t,i,n,s,d,o;return{setters:[function(e){a=e.cclegacy,r=e.rendering,t=e.gfx,i=e.Material},function(e){n=e.getCameraUniqueID,s=e.getRenderArea,d=e.SRGBToLinear,o=e.getLoadOpOfClearFlag}],execute:function(){e({buildDeferred:function(e,a){if(!e.scene)return;var r=_(e,a),t=P(e,a,r);O(e,a,t.rtName)},buildGBufferPass:_,buildLightingPass:P,buildPostprocessPass:O}),a._RF.push({},"887a1YxhGlKlK2cbFmBo6eM","test-custom",void 0);var l=r.RasterView,R=r.AttachmentType,c=r.AccessType,E=r.ResourceResidency,u=r.LightInfo,w=r.SceneFlags,g=r.QueueHint,T=r.ComputeView,f=t.Format,p=t.LoadOp,h=t.StoreOp,C=t.ClearFlagBit,m=t.Color,A=t.Viewport,N=e("GBufferInfo",(function(){}));function _(e,a){var r=n(e),t=s(e,e.window.width,e.window.height),i=t.width,o=t.height,T="gBufferPassColorCamera",_="gBufferPassNormal",D="gBufferPassEmissive",S="gBufferPassDSCamera";if(!a.containsResource(T)){var P=f.RGBA16F;a.addRenderTarget(T,P,i,o,E.MANAGED),a.addRenderTarget(_,P,i,o,E.MANAGED),a.addRenderTarget(D,P,i,o,E.MANAGED),a.addDepthStencil(S,f.DEPTH_STENCIL,i,o,E.MANAGED)}var L=a.addRasterPass(i,o,"Geometry");L.name="CameraGBufferPass"+r,L.setViewport(new A(t.x,t.y,t.width,t.height));var v=new m(0,0,0,0);e.clearFlag&C.COLOR&&(a.pipelineSceneData.isHDR?d(v,e.clearColor):(v.x=e.clearColor.x,v.y=e.clearColor.y,v.z=e.clearColor.z));var O=new l("_",c.WRITE,R.RENDER_TARGET,p.CLEAR,h.STORE,e.clearFlag,v),M=new l("_",c.WRITE,R.RENDER_TARGET,p.CLEAR,h.STORE,e.clearFlag,new m(0,0,0,0)),G=new l("_",c.WRITE,R.RENDER_TARGET,p.CLEAR,h.STORE,e.clearFlag,new m(0,0,0,0)),I=new l("_",c.WRITE,R.DEPTH_STENCIL,p.CLEAR,h.STORE,e.clearFlag,new m(e.clearDepth,e.clearStencil,0,0));L.addRasterView(T,O),L.addRasterView(_,M),L.addRasterView(D,G),L.addRasterView(S,I),L.addQueue(g.RENDER_OPAQUE).addSceneOfCamera(e,new u,w.OPAQUE_OBJECT|w.CUTOUT_OBJECT|w.DRAW_INSTANCING);var F=new N;return F.color=T,F.normal=_,F.emissive=D,F.ds=S,F}var D=function(){function e(){this._init()}return e.prototype._init=function(){this.deferredLightingMaterial=new i,this.deferredLightingMaterial.name="builtin-deferred-material",this.deferredLightingMaterial.initialize({effectName:"pipeline/deferred-lighting",defines:{CC_RECEIVE_SHADOW:1}});for(var e=0;e<this.deferredLightingMaterial.passes.length;++e)this.deferredLightingMaterial.passes[e].tryCompile()},e}(),S=null;function P(e,a,r){S||(S=new D);var t=n(e),i=s(e,e.window.width,e.window.height),d=i.width,o=i.height,N="deferredLightingPassRTName",_="deferredLightingPassDS";a.containsResource(N)||(a.addRenderTarget(N,f.RGBA8,d,o,E.MANAGED),a.addDepthStencil(_,f.DEPTH_STENCIL,d,o,E.MANAGED));var P=a.addRasterPass(d,o,"Lighting");if(P.name="CameraLightingPass"+t,P.setViewport(new A(i.x,i.y,d,o)),a.containsResource(r.color)){var L=new T;L.name="gbuffer_albedoMap",P.addComputeView(r.color,L);var v=new T;v.name="gbuffer_normalMap",P.addComputeView(r.normal,v);var O=new T;O.name="gbuffer_emissiveMap",P.addComputeView(r.emissive,O);var M=new T;M.name="depth_stencil",P.addComputeView(r.ds,M)}var G=new m(0,0,0,0);e.clearFlag&C.COLOR&&(G.x=e.clearColor.x,G.y=e.clearColor.y,G.z=e.clearColor.z),G.w=0;var I=new l("_",c.WRITE,R.RENDER_TARGET,p.CLEAR,h.STORE,e.clearFlag,G);P.addRasterView(N,I);var F=globalThis.pipelineAssets.getMaterial("deferred-lighting")||S.deferredLightingMaterial;return P.addQueue(g.RENDER_TRANSPARENT).addCameraQuad(e,F,0,w.VOLUMETRIC_LIGHTING),P.addQueue(g.RENDER_TRANSPARENT).addSceneOfCamera(e,new u,w.TRANSPARENT_OBJECT|w.PLANAR_SHADOW|w.GEOMETRY),{rtName:N,dsName:_}}var L=function(){function e(){this._init()}return e.prototype._init=function(){this.postMaterial=new i,this.postMaterial.name="builtin-post-process-material",this.postMaterial.initialize({effectName:"pipeline/post-process",defines:{ANTIALIAS_TYPE:0}});for(var e=0;e<this.postMaterial.passes.length;++e)this.postMaterial.passes[e].tryCompile()},e}(),v=null;function O(e,a,r){v||(v=new L);var t=n(e),i=s(e,e.window.width,e.window.height),d=i.width,p=i.height,N="postprocessPassRTName"+t,_="postprocessPassDS"+t;a.containsResource(N)||(a.addRenderTexture(N,f.RGBA8,d,p,e.window),a.addDepthStencil(_,f.DEPTH_STENCIL,d,p,E.MANAGED)),a.updateRenderWindow(N,e.window);var D=a.addRasterPass(d,p,"Postprocess");if(D.name="CameraPostprocessPass"+t,D.setViewport(new A(i.x,i.y,i.width,i.height)),a.containsResource(r)){var S=new T;S.name="outputResultMap",D.addComputeView(r,S)}var P=new m(0,0,0,e.clearColor.w);e.clearFlag&C.COLOR&&(P.x=e.clearColor.x,P.y=e.clearColor.y,P.z=e.clearColor.z);var O=new l("_",c.WRITE,R.RENDER_TARGET,o(e.clearFlag,R.RENDER_TARGET),h.STORE,e.clearFlag,P),M=new l("_",c.WRITE,R.DEPTH_STENCIL,o(e.clearFlag,R.DEPTH_STENCIL),h.STORE,e.clearFlag,new m(e.clearDepth,e.clearStencil,0,0));return D.addRasterView(N,O),D.addRasterView(_,M),D.addQueue(g.NONE).addFullscreenQuad(v.postMaterial,0,w.NONE),D.addQueue(g.RENDER_TRANSPARENT).addSceneOfCamera(e,new u,w.UI|w.PROFILER),{rtName:N,dsName:_}}a._RF.pop()}}}));

System.register("chunks:///_virtual/test-forward.ts",["./rollupPluginModLoBabelHelpers.js","cc","./util2.ts"],(function(t){"use strict";var e,r,n,o;return{setters:[function(t){e=t.inheritsLoose},function(t){r=t.cclegacy,n=t._decorator,o=t.Component},null],execute:function(){var s;r._RF.push({},"eb9295i0PhGOLESqCIdDSSn","test-forward",void 0);var u=n.ccclass,c=(n.property,n.executeInEditMode);t("test_forward",u("test_forward")(s=c(s=function(t){function r(){return t.apply(this,arguments)||this}e(r,t);var n=r.prototype;return n.onEnable=function(){},n.update=function(t){},r}(o))||s)||s);r._RF.pop()}}}));

System.register("chunks:///_virtual/test-ghost.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var i,s,e,o,n,r,c,a,h,u,d,l;return{setters:[function(t){i=t.inheritsLoose},function(t){s=t.cclegacy,e=t._decorator,o=t.SkinnedMeshRenderer,n=t.input,r=t.Input,c=t.clamp01,a=t.Vec3,h=t.KeyCode,u=t.v4,d=t.v3,l=t.Component}],execute:function(){var p;s._RF.push({},"91dcecdLxdLX4U2wOSNwoNm","test-ghost",void 0);var f=e.ccclass;e.executeInEditMode,t("SolderController",f("SolderController")(p=function(t){function s(){for(var i,s=arguments.length,e=new Array(s),o=0;o<s;o++)e[o]=arguments[o];return(i=t.call.apply(t,[this].concat(e))||this).materials=[],i.directionUniform=u(),i.direction=d(),i.currentPosition=d(0,0,0),i.lastPosition=d(0,0,0),i.t=0,i.xAxis=0,i.zAxis=0,i.speed=10,i}i(s,t);var e=s.prototype;return e.start=function(){var t=this;this.currentPosition=this.node.position.clone(),this.lastPosition=this.currentPosition.clone(),this.node.getComponentsInChildren(o).forEach((function(i){t.materials.push(i.material)})),n.on(r.EventType.KEY_DOWN,this.onKeyDown,this),n.on(r.EventType.KEY_UP,this.onKeyUp,this)},e.update=function(t){var i=this;this.currentPosition.x+=this.speed*t*this.xAxis,this.currentPosition.z+=this.speed*t*this.zAxis,this.node.setPosition(this.currentPosition),this.currentPosition.equals(this.lastPosition)&&(this.t=0),this.t+=t,this.t=c(this.t),a.lerp(this.lastPosition,this.lastPosition,this.currentPosition,this.t),a.subtract(this.direction,this.lastPosition,this.currentPosition),this.materials.forEach((function(t){var s=t.passes[0].getHandle("direction");t.passes[0].getUniform(s,i.directionUniform),i.directionUniform.set(i.direction.x,i.direction.y,i.direction.z,i.directionUniform.w),t.passes[0].setUniform(s,i.directionUniform)}))},e.onKeyDown=function(t){switch(t.keyCode){case h.KEY_A:this.xAxis=-1;break;case h.KEY_D:this.xAxis=1;break;case h.KEY_W:this.zAxis=-1;break;case h.KEY_S:this.zAxis=1}},e.onKeyUp=function(t){switch(t.keyCode){case h.KEY_A:case h.KEY_D:this.xAxis=0;break;case h.KEY_W:case h.KEY_S:this.zAxis=0}},s}(l))||p);s._RF.pop()}}}));

System.register("chunks:///_virtual/test-gun-fire.ts",["./rollupPluginModLoBabelHelpers.js","cc","./test-anig.ts"],(function(t){"use strict";var n,e,r,i,o;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,r=t._decorator,i=t.Component},function(t){o=t.TestAnimationGraph}],execute:function(){var s;e._RF.push({},"887bczrxrNJlpbQxk/M1zDy","test-gun-fire",void 0);var c=r.ccclass;r.property,t("test_gun_fire",c("test_gun_fire")(s=function(t){function e(){return t.apply(this,arguments)||this}n(e,t);var r=e.prototype;return r.start=function(){for(var t=0;t<this.node.children.length;t++){this.node.children[t].addComponent(o)}},r.update=function(t){},e}(i))||s);e._RF.pop()}}}));

System.register("chunks:///_virtual/test-gun-tracer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./msg.ts"],(function(t){"use strict";var e,n,r,o,s,u,c,i,a,p,f;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,r=t._decorator,o=t.input,s=t.Input,u=t.KeyCode,c=t.Vec3,i=t.v3,a=t.randomRange,p=t.Component},function(t){f=t.Msg}],execute:function(){var y;n._RF.push({},"9ae652i2EdG3LuuhHG9D6Gq","test-gun-tracer",void 0);var d=r.ccclass;r.property,t("TestGunTracer",d("TestGunTracer")(y=function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var r=n.prototype;return r.start=function(){o.on(s.EventType.KEY_DOWN,this.keyDown,this)},r.keyDown=function(t){if(t.keyCode===u.KEY_R){var e=c.ZERO,n=i(a(0,30),1,a(0,30));f.emit("msg_set_tracer",{start:e,end:n})}},r.update=function(t){},n}(p))||y);n._RF.pop()}}}));

System.register("chunks:///_virtual/test-ik.ts",["./rollupPluginModLoBabelHelpers.js","cc","./actor-animation-graph.ts","./aim-control.ts"],(function(t){"use strict";var i,e,o,n,r,a,l,s,h,g,p,u,c;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,l=t.Node,s=t.input,h=t.Input,g=t.KeyCode,p=t.Component},function(t){u=t.ActorAnimationGraph},function(t){c=t.default}],execute:function(){var d,_,y,m,b,f,k,C,v,E,I;r._RF.push({},"df315rKC7tE5alpkOkPqTOP","test-ik",void 0);var x=a.ccclass,G=a.property;t("TestIk",(d=x("TestIk"),_=G(l),y=G(l),m=G(l),b=G(l),d((C=i((k=function(t){function i(){for(var i,e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return i=t.call.apply(t,[this].concat(r))||this,o(i,"anim",C,n(i)),o(i,"targetRoot",v,n(i)),o(i,"ikNode",E,n(i)),o(i,"target",I,n(i)),i.aimControl=void 0,i.animationGraph=void 0,i.targetIndex=0,i.bool_iron_sights=!1,i}e(i,t);var r=i.prototype;return r.start=function(){var t,i;this.aimControl=null==(t=this.ikNode)?void 0:t.getComponent(c),this.animationGraph=null==(i=this.anim)?void 0:i.getComponent(u),s.on(h.EventType.KEY_DOWN,this.keyDown,this)},r.keyDown=function(t){var i,e;t.keyCode===g.KEY_I&&(this.bool_iron_sights=!this.bool_iron_sights,null==(i=this.animationGraph)||i.play("bool_iron_sights",this.bool_iron_sights),console.log("bool_iron_sights:",this.bool_iron_sights));t.keyCode===g.KEY_F&&(null==(e=this.animationGraph)||e.play("trigger_fire",!0));t.keyCode===g.KEY_N&&this.nextTarget(),t.keyCode===g.KEY_R&&this.animationGraph.play("trigger_reload",!0),t.keyCode===g.KEY_E&&this.animationGraph.play("trigger_reload_empty",!0),t.keyCode===g.KEY_H&&this.animationGraph.play("trigger_holster",!0),t.keyCode===g.SPACE&&this.animationGraph.play("trigger_jump",!0)},r.nextTarget=function(){var t,i,e=this.targetRoot.children[this.targetIndex].getWorldPosition();null==(t=this.aimControl.target)||t.setWorldPosition(e),null==(i=this.target)||i.setWorldPosition(e),console.log("current target index:",this.targetIndex),this.targetIndex++,this.targetIndex>=this.targetRoot.children.length&&(this.targetIndex=0)},i}(p)).prototype,"anim",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=i(k.prototype,"targetRoot",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=i(k.prototype,"ikNode",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=i(k.prototype,"target",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=k))||f));r._RF.pop()}}}));

System.register("chunks:///_virtual/test-mouse-move.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,o,n,s,i,r,u;return{setters:[function(e){t=e.inheritsLoose},function(e){o=e.cclegacy,n=e._decorator,s=e.input,i=e.Input,r=e.game,u=e.Component}],execute:function(){var c;o._RF.push({},"19815VnhH5PMbyUZEF7Ro5Z","test-mouse-move",void 0);var m=n.ccclass;n.property,e("test_mouse_move",m("test_mouse_move")(c=function(e){function o(){for(var t,o=arguments.length,n=new Array(o),s=0;s<o;s++)n[s]=arguments[s];return(t=e.call.apply(e,[this].concat(n))||this).pre_mouse_time=0,t.pre_info="",t}t(o,e);var n=o.prototype;return n.start=function(){s.on(i.EventType.MOUSE_MOVE,this.onMouseMove,this)},n.update=function(e){},n.onMouseMove=function(e){var t=r.totalTime-this.pre_mouse_time,o="time: "+r.totalTime+" mouse move delta time:  "+t+"  engine delta time: "+r.deltaTime;t>20&&(console.log("pre:",this.pre_info),console.log("cur:",o)),this.pre_info=o,this.pre_mouse_time=r.totalTime},o}(u))||c);o._RF.pop()}}}));

System.register("chunks:///_virtual/test-move-target.ts",["./rollupPluginModLoBabelHelpers.js","cc","./actor-brain.ts"],(function(t){"use strict";var e,r,i,n,o,a,s,c;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){o=t.cclegacy,a=t._decorator,s=t.Component},function(t){c=t.ActorBrain}],execute:function(){var l,u,p,f,v;o._RF.push({},"48d70TzkaFPvLUrKsdNHJzH","test-move-target",void 0);var d=a.ccclass,g=a.property;t("test_move_target",(l=d("test_move_target"),u=g({type:c}),l((v=e((f=function(t){function e(){for(var e,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o))||this,i(e,"brain",v,n(e)),e}r(e,t);var o=e.prototype;return o.start=function(){},o.lateUpdate=function(t){this.node.setWorldPosition(this.brain.targetPosition)},e}(s)).prototype,"brain",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p=f))||p));o._RF.pop()}}}));

System.register("chunks:///_virtual/test-normal.ts",["./rollupPluginModLoBabelHelpers.js","cc","./util2.ts"],(function(t){"use strict";var i,o,n,s,e,a,r,c,l,d,h,y,p,u;return{setters:[function(t){i=t.applyDecoratedDescriptor,o=t.inheritsLoose,n=t.initializerDefineProperty,s=t.assertThisInitialized},function(t){e=t.cclegacy,a=t._decorator,r=t.v3,c=t.geometry,l=t.PhysicsSystem,d=t.Color,h=t.Vec3,y=t.Component},function(t){p=t.UtilVec3,u=t.Gizmo}],execute:function(){var v,w,L;e._RF.push({},"53f33cIeq5D/LxcgXsZE/Dx","test-normal",void 0);var m=a.ccclass,P=a.property,f=a.executeInEditMode;t("TestNormal",m("TestNormal")(v=f((L=i((w=function(t){function i(){for(var i,o=arguments.length,e=new Array(o),a=0;a<o;a++)e[a]=arguments[a];return(i=t.call.apply(t,[this].concat(e))||this).direction=r(0,0,0),i.normal=r(0,0,0),i.startPos=r(0,0,0),n(i,"moveDirection",L,s(i)),i.ray=new c.Ray,i.p0=r(0,0,0),i}o(i,t);var e=i.prototype;return e.start=function(){},e.update=function(t){},e.calculateSlopeDirection=function(){var t=this.ray,i=(r(0,0,0),r(0,0,0),r(0,-1,0)),o=this.node.position.clone();if(o.add(i),p.copy(t.o,this.node.position),t.d=r(0,-1,0),u.drawLine(t.o,o),l.instance.raycastClosest(t,void 0,.4)){var n=l.instance.raycastClosestResult,s=n.hitPoint.clone(),e=n.hitPoint.clone();console.log(n.hitNormal),u.drawLine(n.hitPoint,s.add(n.hitNormal).multiplyScalar(2),d.RED),u.drawLine(this.node.worldPosition,e,d.GREEN),t.o.z=.03,t.o.x=.03;var a=t.o.clone();if(u.drawLine(t.o,a.add(i)),l.instance.raycastClosest(t,void 0,.4)){var c=l.instance.raycastClosestResult,y=(c.hitPoint.clone(),c.hitPoint.clone());u.drawLine(this.node.worldPosition,y,d.YELLOW),p.copy(this.direction,y),this.direction.subtract(e).normalize(),h.cross(this.normal,e.subtract(this.node.worldPosition),y.subtract(this.node.worldPosition));var v=r(0,0,0);p.copy(v,this.node.worldPosition),v.add(this.normal),u.drawLine(this.node.worldPosition,v,d.CYAN)}}},e.calculateSlopNormal=function(){var t=this.ray,i=(r(0,0,0),r(0,0,0)),o=r(0,0,0),n=r(0,-1,0),s=this.node.position.clone();if(s.add(n),p.copy(t.o,this.node.position),t.d=r(0,-1,0),u.drawLine(t.o,s),l.instance.raycastClosest(t,void 0,.4)){var e=l.instance.raycastClosestResult.hitPoint.clone();u.drawLine(this.node.worldPosition,e,d.GREEN),t.o.z=.03,t.o.x=.03;t.o.clone();if(l.instance.raycastClosest(t,void 0,.4)){var a=l.instance.raycastClosestResult;u.drawLine(t.o,a.hitPoint),p.copy(i,a.hitPoint),u.drawLine(this.node.worldPosition,t.o,d.YELLOW)}if(t.o.z=-.03,t.o.x=-.03,l.instance.raycastClosest(t,void 0,.4)){var c=l.instance.raycastClosestResult;p.copy(o,c.hitPoint),u.drawLine(t.o,c.hitPoint),u.drawLine(this.node.worldPosition,t.o,d.YELLOW),u.drawLine(e,i,d.RED),u.drawLine(e,o,d.RED),h.cross(this.normal,i.subtract(e),o.subtract(e));var y=r(0,0,0);p.copy(y,e),y.add(this.normal),u.drawLine(e,y,d.RED),p.copy(this.startPos,e)}}},e.calculateSlopDirection=function(){var t=this.moveDirection.length();if(console.log(t),void 0===this.ray&&(this.ray=new c.Ray),p.copy(this.ray.o,this.node.worldPosition),p.copy(this.direction,this.moveDirection),this.ray.d=r(0,-1,0),l.instance.raycastClosest(this.ray,void 0,1)){var i=l.instance.raycastClosestResult;if(p.copy(this.p0,i.hitPoint),u.drawLine(this.ray.o,this.p0,d.YELLOW),this.ray.o.add(this.moveDirection),u.drawLine(this.p0,this.p0.clone().add(this.moveDirection),d.YELLOW),l.instance.raycastClosest(this.ray,void 0,1)){var o=l.instance.raycastClosestResult;u.drawLine(this.ray.o,o.hitPoint,d.GREEN),p.copy(this.direction,o.hitPoint),this.direction.subtract(this.p0).normalize().multiplyScalar(t),u.drawLine(this.p0,this.p0.clone().add(this.direction),d.GREEN)}}},i}(y)).prototype,"moveDirection",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return r(0,0,0)}}),v=w))||v)||v);e._RF.pop()}}}));

System.register("chunks:///_virtual/test-reflect.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,r,i,o,n,a,s,p,c,l,u,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized,n=e.createClass},function(e){a=e.cclegacy,s=e._decorator,p=e.ReflectionProbe,c=e.Material,l=e.MeshRenderer,u=e.renderer,f=e.Component}],execute:function(){var h,b,y,m,_,g,d,v,w;a._RF.push({},"bb015ccmppAUo2gqVi764ql","test-reflect",void 0);var M=s.ccclass,P=s.property,D=s.executeInEditMode;e("test_reflect",(h=M("test_reflect"),b=P(p),y=P(p),m=P(c),_=P(c),h(g=D((v=t((d=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return t=e.call.apply(e,[this].concat(n))||this,i(t,"_probe",v,o(t)),i(t,"_material",w,o(t)),t}r(t,e);var a=t.prototype;return a.refresh=function(){if(this.material&&this.probe){var e=this.getComponent(l),t=new u.MaterialInstance({parent:this.material});t.setProperty("mainTexture",this.probe._cubemap),e.setMaterialInstance(t,0)}},a.start=function(){this.refresh()},a.create=function(){},a.update=function(e){},n(t,[{key:"probe",get:function(){return this._probe},set:function(e){this._probe=e,this.refresh()}},{key:"material",get:function(){return this._material},set:function(e){this._material=e,this.refresh()}}]),t}(f)).prototype,"_probe",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),t(d.prototype,"probe",[y],Object.getOwnPropertyDescriptor(d.prototype,"probe"),d.prototype),w=t(d.prototype,"_material",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),t(d.prototype,"material",[_],Object.getOwnPropertyDescriptor(d.prototype,"material"),d.prototype),g=d))||g)||g));a._RF.pop()}}}));

System.register("chunks:///_virtual/test-rigidbody-vector.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var i,e,o,r,n,c,s,l,a,d;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){n=t.cclegacy,c=t._decorator,s=t.RigidBody,l=t.Vec3,a=t.Component,d=t.v3}],execute:function(){var u,p,y,g,h,v,f;n._RF.push({},"1ed65Hxm/5PM6pKmZnOJe1A","test-rigidbody-vector",void 0);var b=c.ccclass,m=c.property;t("TestRigidBodyVector",(u=b("TestRigidBodyVector"),p=m(s),y=m(l),u((v=i((h=function(t){function i(){for(var i,e=arguments.length,n=new Array(e),c=0;c<e;c++)n[c]=arguments[c];return i=t.call.apply(t,[this].concat(n))||this,o(i,"rigid",v,r(i)),o(i,"velocity",f,r(i)),i}e(i,t);var n=i.prototype;return n.start=function(){},n.lateUpdate=function(t){this.node.setWorldPosition(this.rigid.node.worldPosition),this.rigid.getLinearVelocity(this.velocity),this.velocity.length()>.5&&(this.velocity.add(this.node.worldPosition),this.node.lookAt(this.velocity))},i}(a)).prototype,"rigid",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=i(h.prototype,"velocity",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return d(0,0,0)}}),g=h))||g));n._RF.pop()}}}));

System.register("chunks:///_virtual/test-slope-direction.ts",["./rollupPluginModLoBabelHelpers.js","cc","./util2.ts","./test-normal.ts","./test-slope-vector.ts"],(function(e){"use strict";var t,i,o,r,n,l,c,s,a,u,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,o=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){n=e.cclegacy,l=e._decorator,c=e.Vec3,s=e.v3,a=e.Component},null,function(e){u=e.TestNormal},function(e){p=e.TestSlopeVector}],execute:function(){var f,d,y,b,v,m,D,g,h;n._RF.push({},"e5fb3ZKGlFNUL8ucHOfA/bk","test-slope-direction",void 0);var z=l.ccclass,T=l.property,w=l.executeInEditMode;e("TestSlopeDirection",(f=z("TestSlopeDirection"),d=T(u),y=T(c),b=T(p),f(v=w((D=t((m=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),l=0;l<i;l++)n[l]=arguments[l];return t=e.call.apply(e,[this].concat(n))||this,o(t,"playerNode",D,r(t)),o(t,"moveDirection",g,r(t)),o(t,"slopeDirection",h,r(t)),t.endPosition=s(0,0,0),t}return i(t,e),t.prototype.update=function(e){},t}(a)).prototype,"playerNode",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=t(m.prototype,"moveDirection",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return s(0,0,0)}}),h=t(m.prototype,"slopeDirection",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=m))||v)||v));n._RF.pop()}}}));

System.register("chunks:///_virtual/test-slope-move.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,o,s,n;return{setters:[function(t){e=t.inheritsLoose},function(t){o=t.cclegacy,s=t._decorator,n=t.Component}],execute:function(){var r;o._RF.push({},"ddfffHzXzZEZ6spcXcxRIkt","test-slope-move",void 0);var c=s.ccclass;s.property,t("TestSlopeMove",c("TestSlopeMove")(r=function(t){function o(){return t.apply(this,arguments)||this}e(o,t);var s=o.prototype;return s.start=function(){},s.update=function(t){},o}(n))||r);o._RF.pop()}}}));

System.register("chunks:///_virtual/test-slope-vector.ts",["./rollupPluginModLoBabelHelpers.js","cc","./util2.ts"],(function(e){"use strict";var t,r,i,n,o,a,s,c,l,u,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,s=e.CCFloat,c=e.Vec3,l=e.geometry,u=e.v3,p=e.Component},null],execute:function(){var f,d,y,m,b,h,v,g,k,_,w;o._RF.push({},"79d73TdenFAL7LlYd7U4e9n","test-slope-vector",void 0);var z=a.ccclass,S=a.property,F=a.executeInEditMode;e("TestSlopeVector",(f=z("TestSlopeVector"),d=S([s]),y=S(s),m=S(c),b=S(c),f(h=F((g=t((v=function(e){function t(){for(var t,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,i(t,"masks",g,n(t)),i(t,"distance",k,n(t)),i(t,"direction",_,n(t)),t._mask=0,t._ray=new l.Ray,t.hitPoint=u(.5,0,.5),i(t,"vectorSlop",w,n(t)),t}r(t,e);var o=t.prototype;return o.start=function(){for(var e=0;e<this.masks.length;e++)this._mask=this._mask|1<<this.masks[e]},o.update=function(e){},t}(p)).prototype,"masks",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),k=t(v.prototype,"distance",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),_=t(v.prototype,"direction",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return u(0,0,1)}}),w=t(v.prototype,"vectorSlop",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return u(0,0,0)}}),h=v))||h)||h));o._RF.pop()}}}));

System.register("chunks:///_virtual/test-stairs.ts",["./rollupPluginModLoBabelHelpers.js","cc","./util2.ts","./res.ts"],(function(e){"use strict";var t,r,i,n,o,a,l,c,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,l=e.Vec3,c=e.Component,u=e.v3},null,null],execute:function(){var s,p,f,b,g,y,h,v;o._RF.push({},"f4cd0RMTKlJ5pPN/Hbgx5zp","test-stairs",void 0);var d=a.ccclass,z=a.property,m=a.executeInEditMode;e("TestStairs",(s=d("TestStairs"),p=z(l),s(f=m((g=t((b=function(e){function t(){for(var t,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,i(t,"count",g,n(t)),i(t,"height",y,n(t)),i(t,"angle",h,n(t)),i(t,"vector",v,n(t)),t}return r(t,e),t.prototype.onEnable=function(){},t}(c)).prototype,"count",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),y=t(b.prototype,"height",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),h=t(b.prototype,"angle",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 45}}),v=t(b.prototype,"vector",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return u(0,0,0)}}),f=b))||f)||f));o._RF.pop()}}}));

System.register("chunks:///_virtual/test-steering-init.ts",["./rollupPluginModLoBabelHelpers.js","cc","./navigation-system.ts","./res-cache.ts","./data-core.ts","./level.ts","./actor.ts","./sound.ts","./save.ts","./game-set.ts"],(function(e){"use strict";var t,n,i,r,o,s,a,l,c,u,p,y,f,d,v,g,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,s=e._decorator,a=e.JsonAsset,l=e.Node,c=e.Component},function(e){u=e.NavSystem},function(e){p=e.ResCache},function(e){y=e.Init},function(e){f=e.Level},function(e){d=e.Actor},function(e){v=e.Sound},function(e){g=e.Save},function(e){m=e.GameSet}],execute:function(){var h,b,I,S,A,C,N,_,j;o._RF.push({},"28f03uEZntM46bDTM6i7qr8","test-steering-init",void 0);var z=s.ccclass,w=s.property;e("TestSteeringInit",(h=z("TestSteeringInit"),b=w(a),I=w(l),S=w({type:d}),h((N=t((C=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return t=e.call.apply(e,[this].concat(o))||this,i(t,"jsonAsset",N,r(t)),i(t,"enemiesNode",_,r(t)),i(t,"player",j,r(t)),t}n(t,e);var o=t.prototype;return o.start=function(){var e,t=this;u.Init(null==(e=this.jsonAsset)?void 0:e.json),p.Instance.load((function(){var e,n,i=t.node.getChildByName("player-tps");t.player=null==i?void 0:i.getComponent(d),y(),g.Instance.init(),m.Instance.init(),v.init(),null==(e=t.player)||e.init("data-player"),f.Instance._player=t.player,v.init();for(var r=null==(n=t.enemiesNode)?void 0:n.getComponentsInChildren(d),o=0;o<r.length;o++)r[o].init("data-enemy_0"),r[o].isReady=!0;f.Instance.stop=!1}))},o.update=function(e){},t}(c)).prototype,"jsonAsset",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=t(C.prototype,"enemiesNode",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=t(C.prototype,"player",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=C))||A));o._RF.pop()}}}));

System.register("chunks:///_virtual/test-stretched-billboard.ts",["./rollupPluginModLoBabelHelpers.js","cc","./g-math.ts"],(function(e){"use strict";var t,r,i,n,o,a,l,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,l=e.Node,c=e.Component},null],execute:function(){var u,s,p,d,b,f,h,y;o._RF.push({},"786200QDZZLrKZ2Jid1u7ZT","test-stretched-billboard",void 0);var g=a.ccclass,m=a.property,v=a.executeInEditMode;e("TestStretchedBillboard",(u=g("TestStretchedBillboard"),s=m(l),p=m(l),u(d=v((f=t((b=function(e){function t(){for(var t,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,i(t,"target",f,n(t)),i(t,"current",h,n(t)),i(t,"updateTime",y,n(t)),t}r(t,e);var o=t.prototype;return o.start=function(){},o.update=function(e){},t}(c)).prototype,"target",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=t(b.prototype,"current",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=t(b.prototype,"updateTime",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),d=b))||d)||d));o._RF.pop()}}}));

System.register("chunks:///_virtual/test-taa.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,r,a,i,n,o,s,c,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,a=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){n=t.cclegacy,o=t._decorator,s=t.Node,c=t.instantiate,p=t.Component}],execute:function(){var l,u,h,f,d;n._RF.push({},"dfd71p8wkJHMaSoDhEndP14","test-taa",void 0);var y=o.ccclass,v=o.property;t("test_taa",(l=y("test_taa"),u=v(s),l((d=e((f=function(t){function e(){for(var e,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return e=t.call.apply(t,[this].concat(n))||this,a(e,"temp",d,i(e)),e}r(e,t);var n=e.prototype;return n.start=function(){this.temp&&(globalThis.test_taa=this)},n.create=function(){c(this.temp).parent=this.node.parent,this.node.active=!1},e}(p)).prototype,"temp",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=f))||h));n._RF.pop()}}}));

System.register("chunks:///_virtual/test-ui.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var o,e,n,s;return{setters:[function(t){o=t.inheritsLoose},function(t){e=t.cclegacy,n=t._decorator,s=t.Component}],execute:function(){var i;e._RF.push({},"6af18D6TbtNH6AYhK5mvjsZ","test-ui",void 0);var r=n.ccclass;n.property,t("test_ui",r("test_ui")(i=function(t){function e(){return t.apply(this,arguments)||this}o(e,t);var n=e.prototype;return n.start=function(){console.log(this.node.name,this.node.position,this.node.worldPosition)},n.update=function(t){},e}(s))||i);e._RF.pop()}}}));

System.register("chunks:///_virtual/touch-cancel.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){"use strict";var t,e,c,o,u,r,s;return{setters:[function(n){t=n.inheritsLoose},function(n){e=n.cclegacy,c=n._decorator,o=n.Touch,u=n.EventTouch,r=n.Input,s=n.Component}],execute:function(){var i;e._RF.push({},"2fd681A8khCEJwwyPC7+nQn","touch-cancel",void 0);var a=c.ccclass;c.property,n("TouchCancel",a("TouchCancel")(i=function(n){function e(){return n.apply(this,arguments)||this}return t(e,n),e.prototype.onDisable=function(){var n=new o(0,0,0),t=new u([n],!0,r.EventType.TOUCH_CANCEL);t.touch=n,this.node.dispatchEvent(t)},e}(s))||i);e._RF.pop()}}}));

System.register("chunks:///_virtual/ubo.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var n,t;return{setters:[function(e){n=e.createClass},function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"32eafJcbkdKK6CqEeWYZoN8","ubo",void 0);var u=e("UBOBase",function(){function e(){}return e.increaseIndex=function(e){var n=this.ubo_index;return this.ubo_index+=e,n},n(e,null,[{key:"COUNT",get:function(){return this.ubo_index}},{key:"SIZE",get:function(){return 4*this.COUNT}}]),e}());u.NAME="",u.BINDING=0,u.LAYOUT=void 0,u.DESCRIPTOR=void 0,u.ubo_index=0,t._RF.pop()}}}));

System.register("chunks:///_virtual/ui-aim-range.ts",["./rollupPluginModLoBabelHelpers.js","cc","./msg.ts"],(function(t){"use strict";var i,e,n,r,o,s;return{setters:[function(t){i=t.inheritsLoose},function(t){e=t.cclegacy,n=t._decorator,r=t.SpriteComponent,o=t.Component},function(t){s=t.Msg}],execute:function(){var a;e._RF.push({},"67693VFPHZJxozmdCVahxpU","ui-aim-range",void 0);var c=n.ccclass;n.property,t("UIAimRange",c("UIAimRange")(a=function(t){function e(){for(var i,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(i=t.call.apply(t,[this].concat(n))||this).sprite=void 0,i.dirs=[[1,0],[0,1],[-1,0],[0,-1]],i.baseSize=40,i}i(e,t);var n=e.prototype;return n.start=function(){if(this.sprite=this.getComponent(r),void 0===this.sprite)throw new Error(this.node.name+" node UIAimRange can not find sprite component.");s.bind("msg_update_aim",this.updateAim,this),this.updateAim(0)},n.updateAim=function(t){for(var i=t*this.baseSize,e=0;e<this.node.children.length;e++){var n=this.node.children[e],r=this.dirs[e];n.setPosition(r[0]*i,r[1]*i,0)}},e}(o))||a);e._RF.pop()}}}));

System.register("chunks:///_virtual/ui-animation.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){"use strict";var t,o,i,r,e;return{setters:[function(n){t=n.inheritsLoose},function(n){o=n.cclegacy,i=n._decorator,r=n.animation,e=n.Component}],execute:function(){var a;o._RF.push({},"351ecDBP0RMHrGz1xzrr0oK","ui-animation",void 0);var s=i.ccclass;i.property,n("ui_animation",s("UIAnimation")(a=function(n){function o(){for(var t,o=arguments.length,i=new Array(o),r=0;r<o;r++)i[r]=arguments[r];return(t=n.call.apply(n,[this].concat(i))||this)._graph=void 0,t}t(o,n);var i=o.prototype;return i.onEnable=function(){if(this._graph=this.getComponent(r.AnimationController),null===this._graph)throw new Error(this.node.name+" node can not find AnimationController.");this.node.on("set_anim",this.play,this)},i.play=function(n,t){this._graph.setValue(n,t)},o}(e))||a);o._RF.pop()}}}));

System.register("chunks:///_virtual/ui-auto-hidden.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var i,o,e,r,n,s,a,c,l,u,h;return{setters:[function(t){i=t.applyDecoratedDescriptor,o=t.inheritsLoose,e=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){n=t.cclegacy,s=t._decorator,a=t.CCFloat,c=t.Color,l=t.SpriteComponent,u=t.math,h=t.Component}],execute:function(){var p,_,d,f,y,w,m;n._RF.push({},"136df29SN5J5KukUd6VJXVN","ui-auto-hidden",void 0);var v=s.ccclass,b=s.property;t("UiAutoHidden",(p=v("UiAutoHidden"),_=b(a),d=b(a),p((w=i((y=function(t){function i(){for(var i,o=arguments.length,n=new Array(o),s=0;s<o;s++)n[s]=arguments[s];return(i=t.call.apply(t,[this].concat(n))||this)._color_a=0,i._color=new c(255,255,255,0),e(i,"smooth",w,r(i)),e(i,"wait",m,r(i)),i._sprite=void 0,i._wait=3,i}o(i,t);var n=i.prototype;return n.__preload=function(){this._sprite=this.getComponent(l),this._sprite.color=this._color},n.onEnable=function(){this.setDisplay(255)},n.setDisplay=function(t){255===t&&(this._color.a=t,this._sprite.color=this._color,this._color_a=0),this._wait=this.wait},n.update=function(t){this._wait-=t,this._wait>0||(this._color.a=u.lerp(this._color.a,this._color_a,t*this.smooth),this._sprite.color=this._color,this._color.a<=.01&&(this.node.active=!1))},i}(h)).prototype,"smooth",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),m=i(y.prototype,"wait",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),f=y))||f));n._RF.pop()}}}));

System.register("chunks:///_virtual/ui-base.ts",["./rollupPluginModLoBabelHelpers.js","cc","./gm.ts","./bind.ts","./level.ts","./sound.ts","./local.ts","./msg.ts","./res.ts","./res-cache.ts","./data-structure.ts","./g-math.ts","./util2.ts","./fil-smooth.ts","./data-core.ts","./local-label.ts","./game-set.ts"],(function(t){"use strict";var n,i,e,o,s,r,a,_,l,c,u,h,p,d,g,f,m,v,y,x,I,C,b,w,B,q,S,E,G;return{setters:[function(t){n=t.inheritsLoose,i=t.assertThisInitialized},function(t){e=t.cclegacy,o=t.Button,s=t.Label,r=t.Slider,a=t.Sprite,_=t.EditBox,l=t.Toggle,c=t.v2,u=t.math,h=t.v3,p=t.Vec2},function(t){d=t.GM},function(t){g=t.Bind},function(t){f=t.Level},function(t){m=t.Sound},function(t){v=t.Local},function(t){y=t.Msg},function(t){x=t.Res},function(t){I=t.ResCache},function(t){C=t.Queue},function(t){b=t.GMath},function(t){w=t.UtilNode,B=t.UtilVec3},function(t){q=t.FilSmooth},function(t){S=t.DataGameInst},function(t){E=t.LocalLabel},function(t){G=t.GameSet}],execute:function(){e._RF.push({},"cc094e8w7lEsq+Xg5atbhjQ","ui-base",void 0);t("UIBase",function(){function t(t){this.node=void 0,this.isOn=!1,this._map=Object.create(null),this.node=t,this._map=L.get(this.node)}var n=t.prototype;return n.refresh=function(){if(this.isOn)for(var t=0;t<this._map.length;t++)this._map[t].refresh()},n.on=function(){this.isOn=!0;for(var t=0;t<this._map.length;t++)this._map[t].on();this.node.active=!0},n.off=function(){this.isOn=!1;for(var t=0;t<this._map.length;t++)this._map[t].off();this.node.active=!1},n.destroy=function(){},t}());var D=t("UICom",function(){function t(t){this._node=void 0,this._node=t}var n=t.prototype;return n.on=function(){},n.off=function(){},n.refresh=function(){},t}()),L=t("BindUI",function(){function t(){}return t.init=function(){this._map.btn=function(t){return new R(t)},this._map.txt=function(t){return new F(t)},this._map.grp=function(t){return new P(t)},this._map.spr=function(t){return new N(t)},this._map.tgl=function(t){return new O(t)},this._map.grp_gm=function(t){return new z(t)},this._map.sli=function(t){return new T(t)},this._map.fil=function(t){return new M(t)},this._map.grp_picked_tips=function(t){return new K(t)},this._map.grp_select_equips=function(t){return new k(t)},this._map.grp_equip_info=function(t){return new A(t)},this._map.grp_bag=function(t){return new j(t)},this._map.grp_map=function(t){return new Q(t)},this._map.grp_dev_move=function(t){return new X(t)}},t.get=function(t){for(var n=w.getChildren(t),i=[],e=0;e<n.length;e++){var o=n[e];if(o.name.includes("local_")&&o.addComponent(E),this._map[o.name]){var s=o.name;if(void 0!==this._map[s]){i.push(this._map[s](o));continue}}if(g.Instance.hasBind(o.name)){var r=o.name.slice(0,3),a=this._map[r];a&&i.push(a(o))}}return i},t}());L._map={};var R=t("BtnBase",function(t){function e(n){var e,s,r;(r=t.call(this,n)||this)._name="",r._btn=void 0;var a=i(r);return r._name=n.name,r._btn=null==(e=a._node)?void 0:e.getComponent(o),null==(s=r._node)||s.on(o.EventType.CLICK,(function(){g.Instance.on(a._name),m.on("sfx_click")}),i(r)),r}return n(e,t),e}(D)),F=t("TxtBase",function(t){function i(n){var i,e;return(e=t.call(this,n)||this).text=void 0,e.text=w.getComponent(e._node,s),e.text.string=g.Instance.get(null==(i=e._node)?void 0:i.name),e}n(i,t);var e=i.prototype;return e.on=function(){t.prototype.on.call(this),this.refresh()},e.refresh=function(){t.prototype.refresh.call(this),this.text.string=g.Instance.get(this._node.name)},i}(D)),T=t("SliBase",function(t){function e(n){var e,o;if((o=t.call(this,n)||this).slider=void 0,o.fill=void 0,o.slider=w.getComponent(o._node,r),o.fill=w.getChildComponent(o._node,"fill",a),o.fill.type!==a.Type.FILLED)throw new Error(o._node.name+" node Sprite not set Sprite.Type.FILLED");var s=g.Instance.get(o._node.name);return o.slider.progress=s,o.fill.fillRange=s,null==(e=o.slider)||e.node.on("slide",(function(){var t;o.fill.fillRange=b.range(1,0,o.slider.progress),y.emit(o._node.name,null==(t=o.slider)?void 0:t.progress)}),i(o)),o}return n(e,t),e.prototype.on=function(){t.prototype.on.call(this);var n=g.Instance.get(this._node.name);this.slider.progress=n,this.fill.fillRange=n},e}(D)),M=t("FilBase",function(t){function i(n){var i;return(i=t.call(this,n)||this).fil_value=void 0,i.fil_smooth=void 0,i.fil_value=w.getComponent(i._node,a),i.fil_value.fillRange=0,i.fil_smooth=i._node.addComponent(q),y.on(i._node.name,(function(t){i.fil_smooth.setValue(t)})),i}return n(i,t),i.prototype.on=function(){this.fil_value.fillRange=0},i}(D)),N=t("SprBase",function(t){function i(n){var i;return(i=t.call(this,n)||this).sprite=void 0,i.sprite=w.getComponent(i._node,a),y.on(i._node.name,(function(t){i.sprite.spriteFrame=t})),i}return n(i,t),i.prototype.on=function(){t.prototype.on.call(this);var n=g.Instance.get(this._node.name);this.sprite.spriteFrame=n},i}(D)),P=t("GrpBase",function(t){function i(n){return t.call(this,n)||this}return n(i,t),i}(D)),z=t("GrpGM",function(t){function i(n){var i;return(i=t.call(this,n)||this).btn_gm=void 0,i.inp_gm=void 0,i.btn_gm=w.getChildByName(i._node,"btn_gm"),i.inp_gm=w.getChildComponent(i._node,"inp_gm",_),i.btn_gm.on(o.EventType.CLICK,(function(){d.run(i.inp_gm.string)})),i}return n(i,t),i}(P)),O=t("TglBase",function(t){function i(n){var i;return(i=t.call(this,n)||this)._toggle=void 0,i._toggle=w.getComponent(i._node,l),i._node.on(l.EventType.TOGGLE,(function(){g.Instance.on(i._node.name)})),i}return n(i,t),i}(D)),k=t("GrpSelectEquips",function(t){function i(n){var i;(i=t.call(this,n)||this).list=void 0,i.img_select_highlight=void 0,i._curIndex=-1;var e=S._data.count_bag_count;i.list=new Array(e);var o=360/e;i.img_select_highlight=w.getChildByName(i._node,"img_select_highlight"),i.img_select_highlight.setPosition(1e5,0,0);for(var s=w.getChildByName(i._node,"img_items"),r=s.position.x,a=o/2,_=c(1,0),l=function(t){return{x:Math.cos(t)*r,y:Math.sin(t)*r}},d=0;d<e;d++){var g=o*d+a,f=u.toRadian(g),m=l(f),v=x.instNode(s,i._node,h(m.x,m.y,0));i.list[d]=new U(v,g-90)}return s.active=!1,y.on("msg_select_equip",(function(t){var n=u.toDegree(p.angle(t,_)),e=c(0,1);p.dot(e,t)<0&&(n=360-n),i._curIndex=Math.round(n/o),i._curIndex>=S._data.count_bag_count&&(i._curIndex=S._data.count_bag_count-1);var s=u.toRadian(i._curIndex*o+a),r=l(s);i.img_select_highlight.setPosition(r.x,r.y,0),i.img_select_highlight.setRotationFromEuler(0,0,i.list[i._curIndex]._angle)})),i}n(i,t);var e=i.prototype;return e.on=function(){var t=f.Instance._player;if(t)for(var n=t._data.items,i=t._data.equipment_name_list,e=0;e<this.list.length;e++){var o=i[e],s=this.list[e],r=o.length>0;if(s.setDisplay(r),r){var a=n[o];s.setInfo(a)}}},e.off=function(){f.Instance._player&&f.Instance._player.onEquip(this._curIndex)},i}(D)),U=function(){function t(t,n){this.txt_nun=void 0,this.img_icon=void 0,this._node=void 0,this._angle=void 0,this._angle=n,this._node=t,w.getChildByName(this._node,"img_bg").setRotationFromEuler(0,0,n),this.txt_nun=w.getChildComponent(this._node,"txt_num",s),this.img_icon=w.getChildComponent(this._node,"img_icon",a)}var n=t.prototype;return n.setDisplay=function(t){this.txt_nun.node.active=t,this.img_icon.node.active=t},n.setInfo=function(t){this.txt_nun.string=t.count.toString(),this.img_icon.spriteFrame=I.Instance.getSprite("img_icon_"+t.name)},t}(),A=t("GrpEquipInfo",function(t){function i(n){var i;return(i=t.call(this,n)||this).txt_equip_info=void 0,i.txt_equip_info=w.getChildComponent(i._node,"txt_equip_info",s),y.on("msg_update_equip_info",(function(){var t=f.Instance._player;if(t){var n=t._data.items,e=t._data.equipment_name_list,o=t._data.current_equipment_index;if(-1!==o){var s=e[o],r=n[s];if(""!==s){var a=r.data.bullet_count>1;if(y.emit("msg_grp_equip_info",a?255:0),a){var _=r.bulletCount;_<0&&(_=0),i.txt_equip_info.string=v.Instance.get("reload")+"\n("+_+"/"+t.bulletBox+")"}}}}})),i}return n(i,t),i}(D)),j=t("GrpBag",function(t){function i(n){var i;if((i=t.call(this,n)||this).list=void 0,i.img_highlight=void 0,i.img_highlight=w.getChildByName(i._node,"img_highlight"),null==i.img_highlight&&null===i.img_highlight)throw new Error(""+i._node.name);var e=S._data.count_bag_count;i.list=new Array(e);var o=w.getChildByName(i._node,"items_root");i.img_highlight.active=!1;for(var s=0;s<o.children.length;s++)i.list[s]=new V(o.children[s],s+1);return y.on("msg_update_bag",(function(){var t=f.Instance._player;if(t){for(var n=t._data.items,e=t._data.equipment_name_list,o=0;o<i.list.length;o++){var s=e[o],r=i.list[o],a=s.length>0;if(r.setDisplay(a),a){var _=n[s];r.setInfo(_)}}y.emit("msg_grp_bag",255)}})),y.on("msg_change_equip",(function(){var t=f.Instance._player;if(t){var n=t._data.current_equipment_index,e=-1!==n;if(i.img_highlight.active=e,e){var o=i.list[n]._node.position;i.img_highlight.setPosition(o.x,o.y,o.z)}y.emit("msg_grp_bag",255)}})),i}return n(i,t),i.prototype.on=function(){var t=f.Instance._player;if(t)for(var n=t._data.items,i=t._data.equipment_name_list,e=0;e<this.list.length;e++){var o=i[e],s=this.list[e],r=o.length>0;if(s.setDisplay(r),r){var a=n[o];s.setInfo(a)}}},i}(D)),V=function(){function t(t,n){this.txt_nun=void 0,this.img_icon=void 0,this._node=void 0,this.index=void 0,this._node=t,this.index=n,this.txt_nun=w.getChildComponent(this._node,"txt_num",s),this.txt_nun.string=""+this.index,this.img_icon=w.getChildComponent(this._node,"img_icon",a),this.setDisplay(!1)}var n=t.prototype;return n.setDisplay=function(t){this.img_icon.node.active=t},n.setInfo=function(t){this.img_icon.spriteFrame=I.Instance.getSprite("img_icon_"+t.name)},t}(),K=t("GrpPickedTips",function(t){function i(n){var i;(i=t.call(this,n)||this).list=void 0,i.msgs=void 0,i.index=0;var e=S._data.count_picked_info;i.list=new Array(e),i.msgs=new C(e);for(var o=i._node.children[0],s=0;s<e;s++){var r=x.instNode(o,i._node);i.list[s]=new H(r)}return o.active=!1,y.on("msg_tips",(function(t){i._node.children[0].setSiblingIndex(e),i.list[i.index].refresh(t),i.index++,i.index>=e&&(i.index=0)})),i}return n(i,t),i}(D)),Q=t("GrpMap",function(t){function i(n){var i;(i=t.call(this,n)||this).list=void 0,i.map=void 0,i.map=w.find(i._node,"map");var e=w.find(i._node,"img_enemy_point");i.list=new Array(20),i.list[0]=e;for(var o=1;o<20;o++){var s=x.instNode(e,e.parent,h(1e4,0,0));i.list[o]=s}var r=h(0,0,0),a=1158/110,_=1172/110;return y.on("msg_update_map",(function(){var t=f.Instance._player;if(void 0!==t&&t.node){B.copy(r,t.node.position);var n=r.x*a,e=r.z*_;r.z=0,r.x=-e,r.y=-n,i.map.setPosition(r)}for(var o=f.Instance._enemies,s=o.length,l=0;l<20;l++){var c=l<s,u=i.list[l];if(c){B.copy(r,o[l].position);var h=r.x*a,p=r.z*_;r.z=0,r.x=p,r.y=h,i.list[l].setPosition(r.x,r.y,r.z)}else u.setPosition(1e4,0,0)}})),i}return n(i,t),i}(D)),H=function(){function t(t){this.txt_info=void 0,this._node=void 0,this._node=t,this.txt_info=w.getChildComponent(this._node,"txt_info",s),this.setDisplay(!1)}var n=t.prototype;return n.refresh=function(t){this.txt_info.string=t,this.setDisplay(!0)},n.setDisplay=function(t){this._node.active=t},t}(),X=t("GrpDevMove",function(t){function i(n){var i;return(i=t.call(this,n)||this).inp_move_value_list=void 0,i.inp_move_accelerate_list=void 0,i.inp_screen_to_angle=void 0,i.inp_accelerate_point=void 0,i.inp_move_value_list=w.getChildComponent(i._node,"inp_move_value_list",_),i.inp_move_accelerate_list=w.getChildComponent(i._node,"inp_move_accelerate_list",_),i.inp_screen_to_angle=w.getChildComponent(i._node,"inp_screen_to_angle",_),i.inp_accelerate_point=w.getChildComponent(i._node,"inp_accelerate_point",_),i}n(i,t);var e=i.prototype;return e.on=function(){this.inp_move_value_list.string=G.Instance.move_value_list.toString(),this.inp_move_accelerate_list.string=G.Instance.move_accelerate_list.toString(),this.inp_screen_to_angle.string=G.Instance.screen_to_angle.toString(),this.inp_accelerate_point.string=G.Instance.accelerate_point.toString()},e.off=function(){var t,n,i,e;y.emit("inp_move_value_list",null==(t=this.inp_move_value_list)?void 0:t.string),y.emit("inp_move_accelerate_list",null==(n=this.inp_move_accelerate_list)?void 0:n.string),y.emit("inp_screen_to_angle",null==(i=this.inp_screen_to_angle)?void 0:i.string),y.emit("inp_accelerate_point",null==(e=this.inp_accelerate_point)?void 0:e.string)},i}(D));e._RF.pop()}}}));

System.register("chunks:///_virtual/ui-display-by-state-auto-hidden.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ui-display-by-state.ts"],(function(t){"use strict";var e,i,n,a,r,o,s;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){r=t.cclegacy,o=t._decorator},function(t){s=t.UIDisplayByState}],execute:function(){var d,u,c;r._RF.push({},"88beeDVUAVBrpfti4Hsxq59","ui-display-by-state-auto-hidden",void 0);var l=o.ccclass,p=o.property;t("UIDisplayByStateAutoHidden",l("UIDisplayByStateAutoHidden")((c=e((u=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r))||this,n(e,"hiddenTime",c,a(e)),e._hiddenTime=5,e}i(e,t);var r=e.prototype;return r.onChangeState=function(e){t.prototype.onChangeState.call(this,e),this._hiddenTime=this.hiddenTime},r.update=function(e){t.prototype.update.call(this,e),this._hiddenTime<0||(this._hiddenTime-=e,this._hiddenTime<0&&(this._color_a=0))},e}(s)).prototype,"hiddenTime",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),d=u))||d);r._RF.pop()}}}));

System.register("chunks:///_virtual/ui-display-by-state.ts",["./rollupPluginModLoBabelHelpers.js","cc","./msg.ts"],(function(t){"use strict";var o,e,i,n,r,s,a,c,l,p,h,u;return{setters:[function(t){o=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,a=t.CCFloat,c=t.Color,l=t.SpriteComponent,p=t.math,h=t.Component},function(t){u=t.Msg}],execute:function(){var _,f,y,m,d;r._RF.push({},"bae6dR6zoNN3ozfjxYC0AV0","ui-display-by-state",void 0);var g=s.ccclass,C=s.property;t("UIDisplayByState",(_=g("UIDisplayByState"),f=C(a),_((d=o((m=function(t){function o(){for(var o,e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];return(o=t.call.apply(t,[this].concat(r))||this)._color_a=0,o._color=new c(0,0,0,0),i(o,"smooth",d,n(o)),o._sprite=void 0,o}e(o,t);var r=o.prototype;return r.start=function(){this._sprite=this.getComponent(l),u.bind("msg_"+this.node.name,this.onChangeState,this)},r.onDestroy=function(){u.off("msg_"+this.node.name,this.onChangeState)},r.onChangeState=function(t){this._color_a=t},r.update=function(t){this._color.a=p.lerp(this._color.a,this._color_a,t*this.smooth),this._sprite.color=this._color},o}(h)).prototype,"smooth",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),y=m))||y));r._RF.pop()}}}));

System.register("chunks:///_virtual/ui-enable-play-anim.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){"use strict";var t,a,i,e,o;return{setters:[function(n){t=n.inheritsLoose},function(n){a=n.cclegacy,i=n._decorator,e=n.animation,o=n.Component}],execute:function(){var r;a._RF.push({},"32365YaXqJA2JXwB0O6kMAm","ui-enable-play-anim",void 0);var l=i.ccclass;i.property,n("UIEnablePlayAnimation",l("UIEnablePlayAnimation")(r=function(n){function a(){for(var t,a=arguments.length,i=new Array(a),e=0;e<a;e++)i[e]=arguments[e];return(t=n.call.apply(n,[this].concat(i))||this)._animationGraph=void 0,t}return t(a,n),a.prototype.onEnable=function(){var n;this._animationGraph||(this._animationGraph=this.getComponent(e.AnimationController)),null==(n=this._animationGraph)||n.setValue("trigger_replay",!0)},a}(o))||r);a._RF.pop()}}}));

System.register("chunks:///_virtual/ui-enable-play-animation.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){"use strict";var t,i,a,e,o;return{setters:[function(n){t=n.inheritsLoose},function(n){i=n.cclegacy,a=n._decorator,e=n.Animation,o=n.Component}],execute:function(){var r;i._RF.push({},"eaa4558aLdN1oUip5tLSnpH","ui-enable-play-animation",void 0);var l=a.ccclass;a.property,n("UIEnablePlayAnimation",l("UIEnablePlayAnimation")(r=function(n){function i(){for(var t,i=arguments.length,a=new Array(i),e=0;e<i;e++)a[e]=arguments[e];return(t=n.call.apply(n,[this].concat(a))||this)._anim=void 0,t}return t(i,n),i.prototype.onEnable=function(){var n,t;this._anim||(this._anim=this.getComponent(e)),null==(n=this._anim)||n.stop(),null==(t=this._anim)||t.play()},i}(o))||r);i._RF.pop()}}}));

System.register("chunks:///_virtual/ui-enable-play.ts",["./rollupPluginModLoBabelHelpers.js","cc","./fun.ts"],(function(t){"use strict";var n,e,i,a,o,r,l,p,s,u,c,b;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){o=t.cclegacy,r=t._decorator,l=t.Animation,p=t.SpriteComponent,s=t.Color,u=t.Button,c=t.Component},function(t){b=t.fun}],execute:function(){var y,d,f,m,h;o._RF.push({},"afa4eXY8ZVEh7JzvyiB3Q5L","ui-enable-play",void 0);var v=r.ccclass,g=r.property;t("UIEnablePlay",v("UIEnablePlay")((f=n((d=function(t){function n(){for(var n,e=arguments.length,o=new Array(e),r=0;r<e;r++)o[r]=arguments[r];return n=t.call.apply(t,[this].concat(o))||this,i(n,"speed",f,a(n)),i(n,"delay_time",m,a(n)),i(n,"enable_opacity",h,a(n)),n.animation=void 0,n.btn=void 0,n}return e(n,t),n.prototype.onEnable=function(){var t=this;void 0===this.animation&&(this.animation=this.getComponent(l)),this.animation.stop(),this.enable_opacity&&(this.node.getComponent(p).color=new s(1,1,1,0)),void 0===this.btn&&(this.btn=this.getComponent(u)),this.btn&&(this.btn.enabled=!1),b.delay((function(){var n;t.animation&&null!=(n=t.animation)&&n.defaultClip&&(t.animation.defaultClip.speed=t.speed,t.animation.stop(),t.animation.play())}),this.delay_time),b.delay((function(){t.btn&&(t.btn.enabled=!0)}),2)},n}(c)).prototype,"speed",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),m=n(d.prototype,"delay_time",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),h=n(d.prototype,"enable_opacity",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),y=d))||y);o._RF.pop()}}}));

System.register("chunks:///_virtual/ui-fadein.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,r,i,n,o,a,l,c,s,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){o=t.cclegacy,a=t._decorator,l=t.Color,c=t.SpriteComponent,s=t.tween,u=t.Component}],execute:function(){var p,f,d,h,b,y,C;o._RF.push({},"2b34ac+NWpHqYriJPd3WqwM","ui-fadein",void 0);var w=a.ccclass,m=a.property,v=(t("UIFadeIn",(p=w("UIFadeIn"),f=m(l),p((b=e((h=function(t){function e(){for(var e,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o))||this,i(e,"time",b,n(e)),i(e,"startColor",y,n(e)),i(e,"endColor",C,n(e)),e._sprite=Object.create(null),e}r(e,t);var o=e.prototype;return o.onEnable=function(){this.tweenUpdateColor()},o.tweenUpdateColor=function(){null===this._sprite&&(this._sprite=this.getComponent(c));var t=new v;this._sprite.color=this.startColor,s(t).by(this.time,{color:this.endColor},{onUpdate:function(t){this._sprite.color=t}}).start()},o.update=function(t){},e}(u)).prototype,"time",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),y=e(h.prototype,"startColor",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new l}}),C=e(h.prototype,"endColor",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new l}}),d=h))||d)),function(){this.color=void 0});o._RF.pop()}}}));

System.register("chunks:///_virtual/ui-fx.ts",["./rollupPluginModLoBabelHelpers.js","cc","./msg.ts"],(function(t){"use strict";var n,o,i,e,r;return{setters:[function(t){n=t.inheritsLoose},function(t){o=t.cclegacy,i=t._decorator,e=t.Component},function(t){r=t.Msg}],execute:function(){var s;o._RF.push({},"6223eY6BH5Hro5ZLuCoJkOw","ui-fx",void 0);var c=i.ccclass;i.property,t("UIFx",c("UIFx")(s=function(t){function o(){for(var n,o=arguments.length,i=new Array(o),e=0;e<o;e++)i[e]=arguments[e];return(n=t.call.apply(t,[this].concat(i))||this).map={},n}n(o,t);var i=o.prototype;return i.start=function(){for(var t=0;t<this.node.children.length;t++){var n=this.node.children[t];this.map[n.name]=n}r.on("msg_ui_fx_open",this.open.bind(this)),r.on("msg_ui_fx_close",this.close.bind(this))},i.open=function(t){var n=this.map[t];void 0!==n&&(n.active=!0)},i.close=function(t){var n=this.map[t];void 0!==n&&(n.active=!1)},o}(e))||s);o._RF.pop()}}}));

System.register("chunks:///_virtual/ui-grp-picked-tips.ts",["cc"],(function(){"use strict";var t;return{setters:[function(c){t=c.cclegacy}],execute:function(){t._RF.push({},"c341f1ZYuZHII2xh06oeTtu","ui-grp-picked-tips",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/ui-guide-platform.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,r,i,o,a,p,s,n,l,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){a=t.cclegacy,p=t._decorator,s=t.SpriteFrame,n=t.Sprite,l=t.sys,u=t.Component}],execute:function(){var c,f,m,y,d,g,h;a._RF.push({},"afcf2Ysp4tC4bctyRG1y23d","ui-guide-platform",void 0);var S=p.ccclass,b=p.property;t("UIGuidePlatform",(c=S("UIGuidePlatform"),f=b({type:[s]}),m=b({type:n}),c((g=e((d=function(t){function e(){for(var e,r=arguments.length,a=new Array(r),p=0;p<r;p++)a[p]=arguments[p];return e=t.call.apply(t,[this].concat(a))||this,i(e,"guideSprites",g,o(e)),i(e,"sprite",h,o(e)),e}return r(e,t),e.prototype.start=function(){l.platform===l.Platform.MOBILE_BROWSER||l.platform===l.Platform.ANDROID||l.platform===l.Platform.IOS?this.sprite.spriteFrame=this.guideSprites[1]:this.sprite.spriteFrame=this.guideSprites[0]},e}(u)).prototype,"guideSprites",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),h=e(d.prototype,"sprite",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=d))||y));a._RF.pop()}}}));

System.register("chunks:///_virtual/ui-loading.ts",["./rollupPluginModLoBabelHelpers.js","cc","./msg.ts","./game.ts"],(function(t){"use strict";var i,n,e,a,o,s,r,c,u,l,h,d;return{setters:[function(t){i=t.applyDecoratedDescriptor,n=t.inheritsLoose,e=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){o=t.cclegacy,s=t._decorator,r=t.Label,c=t.Sprite,u=t.math,l=t.Component},function(t){h=t.Msg},function(t){d=t.Game}],execute:function(){var g,p,_,L,m,f,v;o._RF.push({},"ece98FSjSJAsp9adTbaY7eK","ui-loading",void 0);var w=s.ccclass,b=s.property;t("UILoading",(g=w("UILoading"),p=b(r),_=b(c),g((f=i((m=function(t){function i(){for(var i,n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return i=t.call.apply(t,[this].concat(o))||this,e(i,"txtLoading",f,a(i)),e(i,"img_loading_bar",v,a(i)),i._percent=0,i._realPercent=0,i.waitList={},i.viewNode=void 0,i.count=0,i.wait_count=0,i.current_msg="",i.isLoading=!1,i}n(i,t);var o=i.prototype;return o.start=function(){h.on("msg_loading",this.onWaitList.bind(this)),this.viewNode=this.node.children[0]},o.onWaitList=function(t){this.waitList[t.id]=t,this.isLoading=!0,this.viewNode.active=!0,this._percent=0},o.update=function(t){this.isLoading&&(this.calculateLoading(),this._percent=u.lerp(this._percent,this._realPercent,t),this.txtLoading.string=this.current_msg,this.img_loading_bar.fillRange=this._percent,this._percent>=.9999&&this.onLoadFinished())},o.onLoadFinished=function(){this.isLoading=!1,this.viewNode.active=!1,"menu"===d.Instance._currentGameNodeName&&h.emit("msg_play_animation")},o.calculateLoading=function(){for(var t in this.count=0,this.wait_count=0,this.waitList){var i=this.waitList[t];this.count+=i.count,this.wait_count+=i.wait_count}this._realPercent=(this.count-this.wait_count)/this.count},i}(l)).prototype,"txtLoading",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=i(m.prototype,"img_loading_bar",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=m))||L));o._RF.pop()}}}));

System.register("chunks:///_virtual/ui-move-show.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,i,o,n,r,s,h,c,u,l,p,a;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,o=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){r=e.cclegacy,s=e._decorator,h=e.Color,c=e.input,u=e.Input,l=e.SpriteComponent,p=e.Button,a=e.Component}],execute:function(){var _,d,f,v,m;r._RF.push({},"d9580+5+wlJj7S9RtWzYGa4","ui-move-show",void 0);var T=s.ccclass,M=s.property;e("UIMoveShow",T("UIMoveShow")((f=t((d=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return t=e.call.apply(e,[this].concat(r))||this,o(t,"hiddenTime",f,n(t)),o(t,"showSpeed",v,n(t)),o(t,"hiddenSpeed",m,n(t)),t._curTime=0,t._sprite=void 0,t._color=new h(255,255,255,0),t._a=0,t._btn=void 0,t}i(t,e);var r=t.prototype;return r.start=function(){c.on(u.EventType.MOUSE_MOVE,this.onMouseMove,this),c.on(u.EventType.TOUCH_MOVE,this.onTouchMove,this),this._sprite=this.getComponent(l),this._sprite.color=this._color,this._curTime=this.hiddenTime,this._btn=this.getComponent(p)},r.onDestroy=function(){c.off(u.EventType.MOUSE_MOVE,this.onMouseMove,this),c.off(u.EventType.TOUCH_MOVE,this.onTouchMove,this)},r.onMouseMove=function(e){this._curTime=0},r.onTouchMove=function(e){this._curTime=0},r.update=function(e){if(this._curTime+=e,this._curTime>this.hiddenTime){if(this._color.a>0){var t=e*this.hiddenSpeed;this._color.a-=t,this._sprite.color=this._color.clone(),this._btn.enabled=!1}}else if(this._color.a<255){t=e*this.showSpeed;this._color.a+=t,this._sprite.color=this._color.clone(),this._btn.enabled=!0}},t}(a)).prototype,"hiddenTime",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),v=t(d.prototype,"showSpeed",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.3}}),m=t(d.prototype,"hiddenSpeed",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.3}}),_=d))||_);r._RF.pop()}}}));

System.register("chunks:///_virtual/ui-roller.ts",["./rollupPluginModLoBabelHelpers.js","cc","./util2.ts"],(function(i){"use strict";var t,o,e,n,r,s,l,a,c;return{setters:[function(i){t=i.applyDecoratedDescriptor,o=i.inheritsLoose,e=i.initializerDefineProperty,n=i.assertThisInitialized},function(i){r=i.cclegacy,s=i._decorator,l=i.v3,a=i.Component},function(i){c=i.UtilVec3}],execute:function(){var u,p,h,_;r._RF.push({},"4b419FOYZtB3aVthaUrBynt","ui-roller",void 0);var f=s.ccclass,y=s.property;i("ui_roller",f("ui_roller")((h=t((p=function(i){function t(){for(var t,o=arguments.length,r=new Array(o),s=0;s<o;s++)r[s]=arguments[s];return(t=i.call.apply(i,[this].concat(r))||this)._orignal=void 0,e(t,"final",h,n(t)),e(t,"speed",_,n(t)),t._pos=l(0,0,0),t}o(t,i);var r=t.prototype;return r.start=function(){},r.onEnable=function(){void 0===this._orignal&&(this._orignal=this.node.position.clone()),this.node.setPosition(this._orignal.x,this._orignal.y,this._orignal.z),c.copy(this._pos,this._orignal)},r.update=function(i){this._pos.y<this.final.y&&(this._pos.y+=i*this.speed,this.node.setPosition(this._pos.x,this._pos.y,this._pos.z))},t}(a)).prototype,"final",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return l(0,0,0)}}),_=t(p.prototype,"speed",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),u=p))||u);r._RF.pop()}}}));

System.register("chunks:///_virtual/ui-svc-reset-pos.ts",["./rollupPluginModLoBabelHelpers.js","cc","./fun.ts"],(function(e){"use strict";var t,n,r,o,i,s,a,c,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){i=e.cclegacy,s=e._decorator,a=e.Layout,c=e.Component},function(e){l=e.fun}],execute:function(){var u,p,f;i._RF.push({},"b37d0R9lelPkovonSTkJ/wx","ui-svc-reset-pos",void 0);var y=s.ccclass,d=s.property;e("UIScrollViewResetPos",y("UIScrollViewResetPos")((f=t((p=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return t=e.call.apply(e,[this].concat(i))||this,r(t,"delay",f,o(t)),t}return n(t,e),t.prototype.onEnable=function(){var e=this;l.delay((function(){var t=e.node.getComponent(a);t.enabled=!1,t.enabled=!0}),this.delay)},t}(c)).prototype,"delay",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.3}}),u=p))||u);i._RF.pop()}}}));

System.register("chunks:///_virtual/ui.ts",["./rollupPluginModLoBabelHelpers.js","cc","./singleton.ts","./log.ts","./ui-base.ts","./res.ts","./msg.ts","./util2.ts","./data-core.ts","./res-cache.ts"],(function(n){"use strict";var t,e,o,i,a,r,s,u,c,l,f,d,h,p;return{setters:[function(n){t=n.inheritsLoose,e=n.asyncToGenerator,o=n.regeneratorRuntime},function(n){i=n.cclegacy,a=n.find,r=n.Camera},function(n){s=n.Singleton},function(n){u=n.Log},function(n){c=n.UIBase},function(n){l=n.Res},function(n){f=n.Msg},function(n){d=n.UtilNode},function(n){h=n.DataGameInst},function(n){p=n.ResCache}],execute:function(){i._RF.push({},"d43b4aUQulCsZMavo7g1FoR","ui",void 0);n("UI",function(n){function i(){for(var t,e=arguments.length,o=new Array(e),i=0;i<e;i++)o[i]=arguments[i];return(t=n.call.apply(n,[this].concat(o))||this)._map={},t.node=void 0,t.panelRoot=void 0,t.camera=void 0,t}t(i,n);var s=i.prototype;return s.init=function(){var n,t;if(this.node=a("init/canvas"),this.panelRoot=d.getChildByName(this.node,"panels"),void 0===this.node||null==this.node)throw new Error("can not find canvas ui root.");f.on("refresh_ui",this.refresh.bind(this));for(var e=["ui_level","ui_level_end","ui_logo","ui_menu","ui_select_equips","ui_settings"],o=0;o<e.length;o++)this.load(e[o]);this.camera=null==(n=this.node)||null==(t=n.getChildByName("Camera"))?void 0:t.getComponent(r)},s.refresh=function(){for(var n in this._map)this._map[n].refresh()},s.load=function(n){var t=p.Instance.getPrefab(n);if(t){var e=l.inst(t,i.Instance.panelRoot),o=h._data.ui_order[n];e.setPosition(0,0,o);for(var a=!1,r=i.Instance.panelRoot.children.length,s=1;s<r;s++){if(this.panelRoot.children[s].position.z>o){var f=s;e.setSiblingIndex(f),a=!0;break}}a||e.setSiblingIndex(r);var d=new c(e);d.on(),this._map[n]=d,d.off()}else u.warn("Can not load res : "+n)},s.on=function(n){var t=this;(function(){var a=e(o().mark((function e(){var a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(a=t._map[n])?a.on():l.loadPrefab("ui/"+n,(function(e,o){if(o){var a=l.inst(o,i.Instance.panelRoot),r=h._data.ui_order[n];a.setPosition(0,0,r);for(var s=!1,f=i.Instance.panelRoot.children.length,d=1;d<f;d++){if(t.panelRoot.children[d].position.z>r){var p=d;a.setSiblingIndex(p),s=!0;break}}s||a.setSiblingIndex(f);var v=new c(a);v.on(),t._map[n]=v}else u.warn("Can not load res : "+n)}));case 2:case"end":return e.stop()}}),e)})));return function(){return a.apply(this,arguments)}})()()},s.off=function(n){var t=this._map[n];t&&t.off()},s.destroy=function(n){var t=this._map[n];t?(t.destroy(),this._map[n]=void 0):u.warn("You want destroy a ui object that does not exist. - "+n)},i}(s));i._RF.pop()}}}));

System.register("chunks:///_virtual/util.ts",["cc"],(function(t){"use strict";var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){t("isDefined",(function(t){return null!=t})),e._RF.push({},"772fb+2AwdKJIgYVaqQJfSr","util",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/util2.ts",["cc","./camera-setting.ts"],(function(n){"use strict";var t,r,e,o,i,u,a,c,l,f;return{setters:[function(n){t=n.cclegacy,r=n._decorator,e=n.Quat,o=n.v3,i=n.randomRangeInt,u=n.MeshRenderer,a=n.director,c=n.Color,l=n.geometry},function(n){f=n.CameraSetting}],execute:function(){n({Gizmo:void 0,waitFor:function(n){return new Promise((function(t){setTimeout((function(){t()}),1e3*n)}))}}),t._RF.push({},"95cd1rb+2NMubrAy5DIVXcl","util",void 0);r.ccclass,r.property;var d=n("Util",function(){function n(){}return n.deltaLimit=function(n,t,r,e,o){return(n+=t*r)<e&&(n=e),n>o&&(n=o),n},n.calculateMaxBounders=function(n){for(var t=0,r=0,e=0;e<n.length;e++)if(n[e].node.active){var o=n[e].model.worldBounds.halfExtents.x*n[e].node.scale.x;o>t&&(t=o);var i=n[e].model.worldBounds.halfExtents.y*n[e].node.scale.y;i>r&&(r=i)}return{x:t,y:r,max:t>r?t:r}},n.calculateMask=function(n){for(var t=0,r=0;r<n.length;r++)t|=1<<n[r];return t},n}()),g=(n("UtilStr",function(){function n(){}return n.equal=function(n,t){for(var r=t.length,e=0;e<r;e++){if(n===t[e])return!0}return!1},n.include=function(n,t){for(var r=t.length,e=0;e<r;e++){var o=t[e];if(n.includes(o))return!0}return!1},n.selectFromItems=function(n,t){void 0===t&&(t=-1);var r=-1===t?n.length:t;return n[i(0,r)]},n}()),n("UtilMaterial",function(){function n(){}return n.setColor=function(n,t){var r,e=n.getComponent(u);null==e||null==(r=e.material)||r.setProperty("mainColor",t)},n}()),n("UtilVec3",function(){function n(){}return n.deltaLimit=function(n,t,r,e,o){n.x=d.deltaLimit(n.x,t.x,r,e.x,o.y),n.y=d.deltaLimit(n.y,t.y,r,e.y,o.y),n.z=d.deltaLimit(n.z,t.z,r,e.z,o.z)},n.copy=function(n,t){n.x=t.x,n.y=t.y,n.z=t.z},n.scaleDirection=function(n,t,r){n.x+=t.x*r,n.y+=t.y*r,n.z+=t.z*r},n.clampMagnitude=function(n,t){n.length()>t&&n.normalize().multiplyScalar(t)},n}()),n("UtilVec2",function(){function n(){}return n.deltaLimit=function(n,t,r,e,o){n.x=d.deltaLimit(n.x,t.x,r,e.x,o.y),n.y=d.deltaLimit(n.y,t.y,r,e.y,o.y)},n.c=function(n,t){n.x=t.x,n.y=t.y},n}()),n("UtilArray",function(){function n(){}return n.remove=function(n,t){var r=n.indexOf(t,0);-1!==r&&n.splice(r,0)},n.init=function(n,t){void 0===t&&(t=0);for(var r=[],e=0;e<n;e++)r.push(t);return r},n.init_3=function(n,t,r){for(var e=[],o=0;o<n;o++){for(var i=[],u=0;u<t;u++){for(var a=[],c=0;c<r;c++)a.push(0);i.push(a)}e.push(i)}return e},n.reset_3=function(n,t){void 0===t&&(t=0);for(var r=n.length,e=n[0].length,o=n[0][0].length,i=0;i<r;i++)for(var u=0;u<e;u++)for(var a=0;a<o;a++)n[i][u][a]=t},n.addArray=function(n,t){for(var r=0;r<t.length;r++)n.push(t[r])},n}()),n("UtilNode",function(){function n(){}return n.getChildByName=function(n,t){var r=n.getChildByName(t);if(null===r)throw new Error(n.name+" node children not find '"+t+"'");return r},n.getComponent=function(n,t){var r=n.getComponent(t);if(null===r)throw new Error(n.name+" node not find '"+name+"'");return r},n.getChildComponent=function(n,t,r){var e=this.getChildByName(n,t);return this.getComponent(e,r)},n.getChildren=function(n){var t=[];return function n(r){t.push(r),r.children.forEach((function(t){t.children&&n(t)}))}(n),t},n.find=function(n,t){var r=Object.create(null),e=function n(t,e){t.name!==e?t.children.forEach((function(t){t.children&&n(t,e)})):r=t};return e(n,t),r},n.getChildrenByNameBlur=function(n,t){var r={};return function n(e){e.name.concat(t)&&(r[e.name]=e),r[e.name]=e,e.children.forEach((function(t){t.children&&n(t)}))}(n),r},n.getParentComponent=function(n,t){if(null!==n){var r=null==n?void 0:n.getComponent(t);return null!==r?r:this.getParentComponent(n.parent,t)}},n.getWorldEulerAngles=function(n){return n.getWorldRotation(this._worldRotation),this._worldRotation.getEulerAngles(this._angle),this._angle},n}()));g._worldRotation=new e,g._angle=o(0,0,0);n("UtilLog",function(){function n(){}return n.children=function(n){var t=n.name+":"+n.children.length+":";n.children.forEach((function(n){t+=n.name+","})),console.log(t)},n}());var h;n("UtilCurve",function(){function n(){}return n.Bezier=function(n,t){n.length},n.ParaCurve=function(n,t,r,e,o,i,u,a,c){for(var l=[],f=Math.sqrt(2*n/a)/c,d=0,g=0;g<=c;g++){var h=o*d+t,v=u*d+e,m=i*d-.5*a*d*d+r;l.push(h),l.push(m),l.push(v),d+=f}return l},n.ParaCurveByDir=function(n,t,r,e,o,i,u,a,c,l,f,d){for(var g=[],h=Math.sqrt(2*n/a)/d,v=0,m=0;m<=d;m++){var s=o*v+t,y=u*v+e,p=i*v-.5*a*v*v+r;g.push(s*c),g.push(p*l),g.push(y*f),v+=h}return g},n}()),n("UtilRandom",function(){function n(){}return n.pos=function(n,t,r,e){void 0===e&&(e=1e3);var i=o(0,0,0);return i.x=n.range(t.x,r.x)/e,i.y=n.range(t.y,r.y)/e,i.z=n.range(t.z,r.z)/e,i},n.angle=function(n,t,r){var e=o(0,0,0);return e.x=n.range(t.x,r.x),e.y=n.range(t.y,r.y),e.z=n.range(t.z,r.z),e},n.scale=function(n,t,r,e){void 0===e&&(e=1e3);var i=o(0,0,0);return i.x=n.range(t.x,r.x)/e,i.y=n.range(t.y,r.y)/e,i.z=n.range(t.z,r.z)/e,i},n}());!function(n){function t(){var n,t=f.mainCamera&&f.mainCamera.camera;return t&&t.initGeometryRenderer(),t&&t.geometryRenderer||(null==(n=a.root)?void 0:n.pipeline.geometryRenderer)}n.getGeometryRender=t,n.drawLine=function(n,r,e){void 0===e&&(e=c.GREEN);var o=t();o&&(null==o||o.addLine(n,r,e,void 0))},n.drawCircle=function(n,r,e){void 0===e&&(e=c.YELLOW);var o=t();o&&(null==o||o.addCircle(n,r,e,10,!0,void 0,void 0))},n.drawBox=function(n,r,e){void 0===e&&(e=c.BLUE);var o=t();if(o){var i=new l.AABB(n.x,n.y,n.z,r.x,r.y,r.z);null==o||o.addBoundingBox(i,e,!0,!1)}}}(h||(h=n("Gizmo",{})));n("UtilTime",function(){function n(){}return n.toHours=function(n){return Math.ceil(n/3600)},n.yearMonth=function(){var n=new Date,t=n.getFullYear().toString(),r=n.getMonth().toString();r.length<2&&(r="0"+r);var e=n.getDate().toString();return e.length<2&&(e="0"+e),t+"."+r+"."+e+":"+n.getHours().toString()},n.timeStamp=function(){return Date.parse((new Date).toString())},n}());t._RF.pop()}}}));

System.register("chunks:///_virtual/utils.ts",["cc"],(function(t){"use strict";var e,r,a;return{setters:[function(t){e=t.cclegacy,r=t.director,a=t.gfx}],execute:function(){var o;t("packCubemapAtlas",(function(t){for(var e=r.root.device,o=Math.min(e.capabilities.maxTextureSize,4096),u=0,n=0,f=[],s=[],c=8,h=0;h<t.length;h++)c=Math.min(c,t[h].mipmapAtlas.layout.length);for(var p=[],l=0;l<c;l++){for(var m=0,g=0,v=0,x=0;x<t.length;x++){var T=t[x];T.mipmapAtlas.layout;var b=T.mipmaps[l],d=6*b.front.width,y=b.front.height;v=Math.max(y,v),m+d>o&&(g+=v,m=0,v=0),p.push([m,g,d,y]);for(var w=0;w<i.length;w++){var A=b[i[w]];f.push(A.data),s.push(new a.BufferTextureCopy(void 0,void 0,A.height,new a.Offset(m,g),new a.Extent(A.width,A.height),new a.TextureSubresLayers(l))),m+=A.width}}0===l&&(u=m,n=g+v)}p.forEach((function(t){t[0]=t[0]/u,t[1]=t[1]/n,t[2]=t[2]/u,t[3]=t[3]/n}));var M=e.createTexture(new a.TextureInfo(a.TextureType.TEX2D,a.TextureUsageBit.SAMPLED|a.TextureUsageBit.TRANSFER_DST,a.Format.RGBA8,u,n,a.TextureFlagBit.GEN_MIPMAP,void 0,c));return e.copyTexImagesToTexture(f,M,s),{texture:M,cubemaps:t,offsets:p}})),e._RF.push({},"68af6kyIXBF/aMlp33lZRPZ","utils",void 0),function(t){t[t.right=0]="right",t[t.left=1]="left",t[t.top=2]="top",t[t.bottom=3]="bottom",t[t.front=4]="front",t[t.back=5]="back"}(o||(o={}));var i=["right","left","top","bottom","front","back"];e._RF.pop()}}}));

System.register("chunks:///_virtual/utils2.ts",["cc"],(function(e){"use strict";var t,i,r,n,s,o,a,h;return{setters:[function(e){t=e.cclegacy,i=e.geometry,r=e.gfx,n=e.rendering,s=e.renderer,o=e.utils,a=e.Vec3,h=e.director}],execute:function(){e({SRGBToLinear:function(e,t){e.x=t.x*t.x,e.y=t.y*t.y,e.z=t.z*t.z},getCameraUniqueID:function(e){T.includes(e)||T.push(e);return e.name+"_"+T.indexOf(e)},getLoadOpOfClearFlag:function(e,t){var i=d.CLEAR;e&l.COLOR||t!==p.RENDER_TARGET||(i=e&v?d.CLEAR:d.LOAD);(e&l.DEPTH_STENCIL)!==l.DEPTH_STENCIL&&t===p.DEPTH_STENCIL&&(e&l.DEPTH||(i=d.LOAD),e&l.STENCIL||(i=d.LOAD));return i},getQuadIA:function(){if(!y){var e=h.root.pipeline.device,t=x();y=e.createInputAssembler(t.renderingSubMeshes[0].iaInfo)}return y},getQuadMesh:x,getRenderArea:function(e,t,i,r,n,s){void 0===n&&(n=null);void 0===s&&(s=0);var o=t.viewport,a=i,h=r;if(e.x=o.x*a,e.y=o.y*h,e.width=o.width*a,e.height=o.height*h,n)switch(n.type){case g.DIRECTIONAL:var u=n;u.shadowFixedArea||u.csmLevel===w.LEVEL_1?(e.x=0,e.y=0,e.width=a,e.height=h):(e.x=s%2*.5*a,e.y=.5*(1-Math.floor(s/2))*h,e.width=.5*a,e.height=.5*h);break;case g.SPOT:e.x=0,e.y=0,e.width=a,e.height=h}return e.width=Math.floor(e.width),e.height=Math.floor(e.height),e},readPixels:function(e,t,i){void 0===i&&(i=0);var n=e.window.framebuffer.colorTextures[i],s=[],o=[],a=new r.BufferTextureCopy;a.texOffset.x=0,a.texOffset.y=0,a.texExtent.width=e.width,a.texExtent.height=e.height,o.push(a),s.push(t),h.root.device.copyTextureToBuffers(n,s,o)},validPunctualLightsCulling:function(e,t){var i=e.pipelineSceneData.validPunctualLights;i.length=0;for(var r=u.create(0,0,0,1),n=t.scene.spotLights,s=0;s<n.length;s++){var o=n[s];o.baked||(u.set(r,o.position.x,o.position.y,o.position.z,o.range),c.sphereFrustum(r,t.frustum)&&i.push(o))}for(var a=t.scene.sphereLights,h=0;h<a.length;h++){var d=a[h];d.baked||(u.set(r,d.position.x,d.position.y,d.position.z,d.range),c.sphereFrustum(r,t.frustum)&&i.push(d))}}}),t._RF.push({},"79840YqDEtOk56P7BIQNbwJ","utils",void 0);var u=i.Sphere,c=i.intersect,d=(r.Format,r.LoadOp),l=(r.StoreOp,r.ClearFlagBit),p=(r.Color,r.Viewport,n.RasterView,n.AttachmentType),f=(n.AccessType,n.ResourceResidency,n.LightInfo,n.SceneFlags,n.QueueHint,n.ComputeView,s.scene),g=(f.ShadowType,f.LightType),v=f.SKYBOX_FLAG,w=f.CSMLevel,L=null;function x(){return L||(L=o.createMesh({positions:[-1,-1,0,-1,1,0,1,1,0,1,-1,0],uvs:[0,0,0,1,1,1,1,0],indices:[0,2,1,0,3,2],minPos:new a(-1,-1,0),maxPos:new a(1,1,0)})).initialize(),L}var y=null;e("CameraInfo",(function(){this.shadowEnabled=!1,this.mainLightShadowNames=new Array,this.spotLightShadowNames=new Array}));var T=[];t._RF.pop()}}}));

System.register("chunks:///_virtual/utils3.ts",["cc","./halton.ts","./pool.ts"],(function(t){"use strict";var e,n,o,s,r;return{setters:[function(t){e=t.cclegacy,n=t.Vec3,o=t.gfx},function(t){s=t.HaltonUtils},function(t){r=t.Pool}],execute:function(){t({modelPoints:function(t){for(var e=[],u=0;u<t.length;u++){var l=t[u],c=l.node.worldMatrix;l.worldBounds.getBoundary(a,i);for(var f=0,h=l.subModels,d=0;d<h.length;d++){var v=h[d].subMesh.geometricInfo.positions;f+=v.length/3}if(f>36)for(var M=0;M<36;M++){var g=s.instance.Generate3DRandomOffset(36),p=new n(l.worldBounds.halfExtents);p.multiplyScalar(2).multiply(g),p.add(a),n.transformMat4(p,p,c),e.push(p)}else for(var m=l.subModels,w=0;w<m.length;w++){var I=m[w].subMesh,b=I.geometricInfo,y=b.positions,x=b.indices;b.doubleSided;if(I.primitiveMode===o.PrimitiveMode.TRIANGLE_LIST&&x&&y)for(var R=0;R<y.length;R+=3){var S=r.Vec3.get().set(y[R],y[R+1],y[R+2]);n.transformMat4(S,S,c),e.push(S)}}}return e},sphereDirections:function(t){for(var e=[],o=(1+Math.sqrt(5))/2,s=2*Math.PI*o,a=0;a<t;a++){var i=a/t,u=Math.acos(1-2*i),l=s*a,c=Math.sin(u)*Math.cos(l),f=Math.sin(u)*Math.sin(l),h=Math.cos(u),d=r.Vec3.get()||new n;d.set(c,f,h),e.push(d)}return e}}),e._RF.push({},"a39deAISQJIBKjDbgEfxyMR","utils",void 0);var a=new n,i=new n;e._RF.pop()}}}));

System.register("chunks:///_virtual/vec2.ts",["cc","./graph.ts"],(function(e){"use strict";var t,i;return{setters:[function(e){t=e.cclegacy},function(e){i=e.liteGraph}],execute:function(){function u(){var e=this;this.properties={x:1,y:1},e.addWidget("number","x",1,"x"),e.addWidget("number","y",1,"y"),e.addOutput("Output","vec2");var t=[];e.onExecute=function(){t[0]=this.properties.x,t[1]=this.properties.y,this.setOutputData(0,t)},e.size=e.computeSize()}e("Vec2",u),t._RF.push({},"8a907f+KplNcbi/sH3WuSDF","vec2",void 0),delete i.registered_node_types["input/Vec2"],i.registerNodeType("input/Vec2",u),t._RF.pop()}}}));

System.register("chunks:///_virtual/weapon-aim.ts",["./rollupPluginModLoBabelHelpers.js","cc","./math-util.ts"],(function(t){"use strict";var e,i,a,n,r,o,u,c,s,h,l,p,m;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,a=t.initializerDefineProperty,n=t.assertThisInitialized,r=t.createClass},function(t){o=t.cclegacy,u=t._decorator,c=t.ccenum,s=t.Quat,h=t.Vec3,l=t.view,p=t.Component},function(t){m=t.default}],execute:function(){var y,f,R,d,g,A,b,w,C,T,W,v,_;t({AimControls:void 0,AimRotateType:void 0}),o._RF.push({},"6da2brKURRDMIxhl+5NZ87v","weapon-aim",void 0);var P,z,B=u.ccclass,M=u.property,k=u.type;!function(t){t[t.Auto=0]="Auto",t[t.Center=1]="Center",t[t.Mouse=2]="Mouse"}(P||(P=t("AimControls",{}))),c(P),function(t){t[t.ByNone=0]="ByNone",t[t.ByCharacter=1]="ByCharacter",t[t.ByWeapon=2]="ByWeapon"}(z||(z=t("AimRotateType",{}))),c(z);var D=new s,Y=new h;t("WeaponAim",(y=B("WeaponAim"),f=k(z),R=k(z),y((A=e((g=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r))||this,a(e,"yawRotateType",A,n(e)),a(e,"pitchRotateType",b,n(e)),e.aimControl=P.Mouse,a(e,"isAutoAim",w,n(e)),a(e,"pitchWhenYawInRange",C,n(e)),a(e,"maxPitch",T,n(e)),a(e,"minPitch",W,n(e)),a(e,"aimReadyValue",v,n(e)),a(e,"aimRange",_,n(e)),e.currentYaw=0,e.currentPitch=0,e._currentAim=new h,e._lookRotation=new s,e.aimWasReady=!1,e._currentTarget=null,e}i(e,t);var o=e.prototype;return o.start=function(){this.initialization()},o.initialization=function(){},o.updateCurrentAim=function(){switch(this.aimControl){case P.Center:this.updateCenterAim();break;case P.Mouse:this.updateMouseAim();break;case P.Auto:this.updateAutoAim()}},o.updateAutoAim=function(){this._currentTarget?(this._currentTarget.getWorldPosition(this._currentAim),this.calculateCurrentAim()):(this.currentPitch=0,this.aimWasReady=!1)},o.updateCenterAim=function(){var t=l.getViewportRect();t.width,t.height;this.calculateCurrentAim()},o.updateMouseAim=function(){this.calculateCurrentAim()},o.calculateCurrentAim=function(){var t=this.node;if(m.convertToNodeSpace(Y,this._currentAim,t),!(Y.length()<this.aimRange)){Y.normalize();var e=m.radiansToDegrees(Math.atan2(Y.x,Y.z)),i=-m.radiansToDegrees(Math.atan2(Y.y,Y.z));Math.abs(e)>this.pitchWhenYawInRange&&(i=0),this.currentYaw=m.clampDegrees(this.currentYaw+e),this.currentPitch=m.clamp(m.clampDegrees(this.currentPitch+i),this.minPitch,this.maxPitch),this.aimReady(e,i)&&(this.aimWasReady=!0)}},o.aimReady=function(t,e){return Math.abs(t)<this.aimReadyValue&&Math.abs(e)<this.aimReadyValue},o.earlyProcess=function(t){},o.process=function(t){this.updateCurrentAim(),this.determineWeaponRotation()},o.lateProcess=function(t){},o.determineWeaponRotation=function(){if(this.yawRotateType==z.ByWeapon||this.pitchRotateType==z.ByWeapon){var t=0,e=0;this.yawRotateType==z.ByWeapon&&(t=this.currentYaw),this.pitchRotateType==z.ByWeapon&&(e=this.currentPitch),this.node.getRotation(D),s.fromEuler(this._lookRotation,e,t,0),s.multiply(this._lookRotation,D,this._lookRotation)}},r(e,[{key:"currentAim",get:function(){return this._currentAim}},{key:"currentTarget",set:function(t){t!=this._currentTarget&&(this.aimWasReady=!1,this._currentTarget=t)}}]),e}(p)).prototype,"yawRotateType",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return z.ByCharacter}}),b=e(g.prototype,"pitchRotateType",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return z.ByCharacter}}),w=e(g.prototype,"isAutoAim",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),C=e(g.prototype,"pitchWhenYawInRange",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),T=e(g.prototype,"maxPitch",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 80}}),W=e(g.prototype,"minPitch",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-80}}),v=e(g.prototype,"aimReadyValue",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),_=e(g.prototype,"aimRange",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.2}}),d=g))||d));o._RF.pop()}}}));

System.register("chunks:///_virtual/webgl-constants.ts",["cc"],(function(_){"use strict";var E;return{setters:[function(_){E=_.cclegacy}],execute:function(){E._RF.push({},"0ab75hj+nFLNqyYEYUosWbY","webgl-constants",void 0);_("GL_DEPTH_BUFFER_BIT",256),_("GL_STENCIL_BUFFER_BIT",1024),_("GL_COLOR_BUFFER_BIT",16384),_("GL_POINTS",0),_("GL_LINES",1),_("GL_LINE_LOOP",2),_("GL_LINE_STRIP",3),_("GL_TRIANGLES",4),_("GL_TRIANGLE_STRIP",5),_("GL_TRIANGLE_FAN",6),_("GL_ZERO",0),_("GL_ONE",1),_("GL_SRC_COLOR",768),_("GL_ONE_MINUS_SRC_COLOR",769),_("GL_SRC_ALPHA",770),_("GL_ONE_MINUS_SRC_ALPHA",771),_("GL_DST_ALPHA",772),_("GL_ONE_MINUS_DST_ALPHA",773),_("GL_DST_COLOR",774),_("GL_ONE_MINUS_DST_COLOR",775),_("GL_SRC_ALPHA_SATURATE",776),_("GL_CONSTANT_COLOR",32769),_("GL_ONE_MINUS_CONSTANT_COLOR",32770),_("GL_CONSTANT_ALPHA",32771),_("GL_ONE_MINUS_CONSTANT_ALPHA",32772),_("GL_FUNC_ADD",32774),_("GL_FUNC_SUBSTRACT",32778),_("GL_FUNC_REVERSE_SUBTRACT",32779),_("GL_BLEND_EQUATION",32777),_("GL_BLEND_EQUATION_RGB",32777),_("GL_BLEND_EQUATION_ALPHA",34877),_("GL_BLEND_DST_RGB",32968),_("GL_BLEND_SRC_RGB",32969),_("GL_BLEND_DST_ALPHA",32970),_("GL_BLEND_SRC_ALPHA",32971),_("GL_BLEND_COLOR",32773),_("GL_ARRAY_BUFFER_BINDING",34964),_("GL_ELEMENT_ARRAY_BUFFER_BINDING",34965),_("GL_LINE_WIDTH",2849),_("GL_ALIASED_POINT_SIZE_RANGE",33901),_("GL_ALIASED_LINE_WIDTH_RANGE",33902),_("GL_CULL_FACE_MODE",2885),_("GL_FRONT_FACE",2886),_("GL_DEPTH_RANGE",2928),_("GL_DEPTH_WRITEMASK",2930),_("GL_DEPTH_CLEAR_VALUE",2931),_("GL_DEPTH_FUNC",2932),_("GL_STENCIL_CLEAR_VALUE",2961),_("GL_STENCIL_FUNC",2962),_("GL_STENCIL_FAIL",2964),_("GL_STENCIL_PASS_DEPTH_FAIL",2965),_("GL_STENCIL_PASS_DEPTH_PASS",2966),_("GL_STENCIL_REF",2967),_("GL_STENCIL_VALUE_MASK",2963),_("GL_STENCIL_WRITEMASK",2968),_("GL_STENCIL_BACK_FUNC",34816),_("GL_STENCIL_BACK_FAIL",34817),_("GL_STENCIL_BACK_PASS_DEPTH_FAIL",34818),_("GL_STENCIL_BACK_PASS_DEPTH_PASS",34819),_("GL_STENCIL_BACK_REF",36003),_("GL_STENCIL_BACK_VALUE_MASK",36004),_("GL_STENCIL_BACK_WRITEMASK",36005),_("GL_VIEWPORT",2978),_("GL_SCISSOR_BOX",3088),_("GL_COLOR_CLEAR_VALUE",3106),_("GL_COLOR_WRITEMASK",3107),_("GL_UNPACK_ALIGNMENT",3317),_("GL_PACK_ALIGNMENT",3333),_("GL_MAX_TEXTURE_SIZE",3379),_("GL_MAX_VIEWPORT_DIMS",3386),_("GL_SUBPIXEL_BITS",3408),_("GL_RED_BITS",3410),_("GL_GREEN_BITS",3411),_("GL_BLUE_BITS",3412),_("GL_ALPHA_BITS",3413),_("GL_DEPTH_BITS",3414),_("GL_STENCIL_BITS",3415),_("GL_POLYGON_OFFSET_UNITS",10752),_("GL_POLYGON_OFFSET_FACTOR",32824),_("GL_TEXTURE_BINDING_2D",32873),_("GL_SAMPLE_BUFFERS",32936),_("GL_SAMPLES",32937),_("GL_SAMPLE_COVERAGE_VALUE",32938),_("GL_SAMPLE_COVERAGE_INVERT",32939),_("GL_COMPRESSED_TEXTURE_FORMATS",34467),_("GL_VENDOR",7936),_("GL_RENDERER",7937),_("GL_VERSION",7938),_("GL_IMPLEMENTATION_COLOR_READ_TYPE",35738),_("GL_IMPLEMENTATION_COLOR_READ_FORMAT",35739),_("GL_BROWSER_DEFAULT_WEBGL",37444),_("GL_STATIC_DRAW",35044),_("GL_STREAM_DRAW",35040),_("GL_DYNAMIC_DRAW",35048),_("GL_ARRAY_BUFFER",34962),_("GL_ELEMENT_ARRAY_BUFFER",34963),_("GL_BUFFER_SIZE",34660),_("GL_BUFFER_USAGE",34661),_("GL_CURRENT_VERTEX_ATTRIB",34342),_("GL_VERTEX_ATTRIB_ARRAY_ENABLED",34338),_("GL_VERTEX_ATTRIB_ARRAY_SIZE",34339),_("GL_VERTEX_ATTRIB_ARRAY_STRIDE",34340),_("GL_VERTEX_ATTRIB_ARRAY_TYPE",34341),_("GL_VERTEX_ATTRIB_ARRAY_NORMALIZED",34922),_("GL_VERTEX_ATTRIB_ARRAY_POINTER",34373),_("GL_VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",34975),_("GL_CULL_FACE",2884),_("GL_FRONT",1028),_("GL_BACK",1029),_("GL_FRONT_AND_BACK",1032),_("GL_BLEND",3042),_("GL_DEPTH_TEST",2929),_("GL_DITHER",3024),_("GL_POLYGON_OFFSET_FILL",32823),_("GL_SAMPLE_ALPHA_TO_COVERAGE",32926),_("GL_SAMPLE_COVERAGE",32928),_("GL_SCISSOR_TEST",3089),_("GL_STENCIL_TEST",2960),_("GL_NO_ERROR",0),_("GL_INVALID_ENUM",1280),_("GL_INVALID_VALUE",1281),_("GL_INVALID_OPERATION",1282),_("GL_OUT_OF_MEMORY",1285),_("GL_CONTEXT_LOST_WEBGL",37442),_("GL_CW",2304),_("GL_CCW",2305),_("GL_DONT_CARE",4352),_("GL_FASTEST",4353),_("GL_NICEST",4354),_("GL_GENERATE_MIPMAP_HINT",33170),_("GL_BYTE",5120),_("GL_UNSIGNED_BYTE",5121),_("GL_SHORT",5122),_("GL_UNSIGNED_SHORT",5123),_("GL_INT",5124),_("GL_UNSIGNED_INT",5125),_("GL_FLOAT",5126),_("GL_DEPTH_COMPONENT",6402),_("GL_ALPHA",6406),_("GL_RGB",6407),_("GL_RGBA",6408),_("GL_LUMINANCE",6409),_("GL_LUMINANCE_ALPHA",6410),_("GL_UNSIGNED_SHORT_4_4_4_4",32819),_("GL_UNSIGNED_SHORT_5_5_5_1",32820),_("GL_UNSIGNED_SHORT_5_6_5",33635),_("GL_FRAGMENT_SHADER",35632),_("GL_VERTEX_SHADER",35633),_("GL_COMPILE_STATUS",35713),_("GL_DELETE_STATUS",35712),_("GL_LINK_STATUS",35714),_("GL_VALIDATE_STATUS",35715),_("GL_ATTACHED_SHADERS",35717),_("GL_ACTIVE_ATTRIBUTES",35721),_("GL_ACTIVE_UNIFORMS",35718),_("GL_MAX_VERTEX_ATTRIBS",34921),_("GL_MAX_VERTEX_UNIFORM_VECTORS",36347),_("GL_MAX_VARYING_VECTORS",36348),_("GL_MAX_COMBINED_TEXTURE_IMAGE_UNITS",35661),_("GL_MAX_VERTEX_TEXTURE_IMAGE_UNITS",35660),_("GL_MAX_TEXTURE_IMAGE_UNITS",34930),_("GL_MAX_FRAGMENT_UNIFORM_VECTORS",36349),_("GL_SHADER_TYPE",35663),_("GL_SHADING_LANGUAGE_VERSION",35724),_("GL_CURRENT_PROGRAM",35725),_("GL_NEVER",512),_("GL_ALWAYS",519),_("GL_LESS",513),_("GL_EQUAL",514),_("GL_LEQUAL",515),_("GL_GREATER",516),_("GL_GEQUAL",518),_("GL_NOTEQUAL",517),_("GL_KEEP",7680),_("GL_REPLACE",7681),_("GL_INCR",7682),_("GL_DECR",7683),_("GL_INVERT",5386),_("GL_INCR_WRAP",34055),_("GL_DECR_WRAP",34056),_("GL_NEAREST",9728),_("GL_LINEAR",9729),_("GL_NEAREST_MIPMAP_NEAREST",9984),_("GL_LINEAR_MIPMAP_NEAREST",9985),_("GL_NEAREST_MIPMAP_LINEAR",9986),_("GL_LINEAR_MIPMAP_LINEAR",9987),_("GL_TEXTURE_MAG_FILTER",10240),_("GL_TEXTURE_MIN_FILTER",10241),_("GL_TEXTURE_WRAP_S",10242),_("GL_TEXTURE_WRAP_T",10243),_("GL_TEXTURE_2D",3553),_("GL_TEXTURE",5890),_("GL_TEXTURE_CUBE_MAP",34067),_("GL_TEXTURE_BINDING_CUBE_MAP",34068),_("GL_TEXTURE_CUBE_MAP_POSITIVE_X",34069),_("GL_TEXTURE_CUBE_MAP_NEGATIVE_X",34070),_("GL_TEXTURE_CUBE_MAP_POSITIVE_Y",34071),_("GL_TEXTURE_CUBE_MAP_NEGATIVE_Y",34072),_("GL_TEXTURE_CUBE_MAP_POSITIVE_Z",34073),_("GL_TEXTURE_CUBE_MAP_NEGATIVE_Z",34074),_("GL_MAX_CUBE_MAP_TEXTURE_SIZE",34076),_("GL_TEXTURE0",33984),_("GL_TEXTURE1",33985),_("GL_TEXTURE2",33986),_("GL_TEXTURE3",33987),_("GL_TEXTURE4",33988),_("GL_TEXTURE5",33989),_("GL_TEXTURE6",33990),_("GL_TEXTURE7",33991),_("GL_TEXTURE8",33992),_("GL_TEXTURE9",33993),_("GL_TEXTURE10",33994),_("GL_TEXTURE11",33995),_("GL_TEXTURE12",33996),_("GL_TEXTURE13",33997),_("GL_TEXTURE14",33998),_("GL_TEXTURE15",33999),_("GL_TEXTURE16",34e3),_("GL_TEXTURE17",34001),_("GL_TEXTURE18",34002),_("GL_TEXTURE19",34003),_("GL_TEXTURE20",34004),_("GL_TEXTURE21",34005),_("GL_TEXTURE22",34006),_("GL_TEXTURE23",34007),_("GL_TEXTURE24",34008),_("GL_TEXTURE25",34009),_("GL_TEXTURE26",34010),_("GL_TEXTURE27",34011),_("GL_TEXTURE28",34012),_("GL_TEXTURE29",34013),_("GL_TEXTURE30",34014),_("GL_TEXTURE31",34015),_("GL_ACTIVE_TEXTURE",34016),_("GL_REPEAT",10497),_("GL_CLAMP_TO_EDGE",33071),_("GL_MIRRORED_REPEAT",33648),_("GL_FLOAT_VEC2",35664),_("GL_FLOAT_VEC3",35665),_("GL_FLOAT_VEC4",35666),_("GL_INT_VEC2",35667),_("GL_INT_VEC3",35668),_("GL_INT_VEC4",35669),_("GL_BOOL",35670),_("GL_BOOL_VEC2",35671),_("GL_BOOL_VEC3",35672),_("GL_BOOL_VEC4",35673),_("GL_FLOAT_MAT2",35674),_("GL_FLOAT_MAT3",35675),_("GL_FLOAT_MAT4",35676),_("GL_SAMPLER_2D",35678),_("GL_SAMPLER_CUBE",35680),_("GL_LOW_FLOAT",36336),_("GL_MEDIUM_FLOAT",36337),_("GL_HIGH_FLOAT",36338),_("GL_LOW_INT",36339),_("GL_MEDIUM_INT",36340),_("GL_HIGH_INT",36341),_("GL_FRAMEBUFFER",36160),_("GL_RENDERBUFFER",36161),_("GL_RGBA4",32854),_("GL_RGB5_A1",32855),_("GL_RGB565",36194),_("GL_DEPTH_COMPONENT16",33189),_("GL_STENCIL_INDEX",6401),_("GL_STENCIL_INDEX8",36168),_("GL_DEPTH_STENCIL",34041),_("GL_RENDERBUFFER_WIDTH",36162),_("GL_RENDERBUFFER_HEIGHT",36163),_("GL_RENDERBUFFER_INTERNAL_FORMAT",36164),_("GL_RENDERBUFFER_RED_SIZE",36176),_("GL_RENDERBUFFER_GREEN_SIZE",36177),_("GL_RENDERBUFFER_BLUE_SIZE",36178),_("GL_RENDERBUFFER_ALPHA_SIZE",36179),_("GL_RENDERBUFFER_DEPTH_SIZE",36180),_("GL_RENDERBUFFER_STENCIL_SIZE",36181),_("GL_FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36048),_("GL_FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36049),_("GL_FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36050),_("GL_FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36051),_("GL_COLOR_ATTACHMENT0",36064),_("GL_DEPTH_ATTACHMENT",36096),_("GL_STENCIL_ATTACHMENT",36128),_("GL_DEPTH_STENCIL_ATTACHMENT",33306),_("GL_NONE",0),_("GL_FRAMEBUFFER_COMPLETE",36053),_("GL_FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36054),_("GL_FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36055),_("GL_FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36057),_("GL_FRAMEBUFFER_UNSUPPORTED",36061),_("GL_FRAMEBUFFER_BINDING",36006),_("GL_RENDERBUFFER_BINDING",36007),_("GL_MAX_RENDERBUFFER_SIZE",34024),_("GL_INVALID_FRAMEBUFFER_OPERATION",1286),_("GL_UNPACK_FLIP_Y_WEBGL",37440),_("GL_UNPACK_PREMULTIPLY_ALPHA_WEBGL",37441),_("GL_UNPACK_COLORSPACE_CONVERSION_WEBGL",37443),_("GL_READ_BUFFER",3074),_("GL_UNPACK_ROW_LENGTH",3314),_("GL_UNPACK_SKIP_ROWS",3315),_("GL_UNPACK_SKIP_PIXELS",3316),_("GL_PACK_ROW_LENGTH",3330),_("GL_PACK_SKIP_ROWS",3331),_("GL_PACK_SKIP_PIXELS",3332),_("GL_TEXTURE_BINDING_3D",32874),_("GL_UNPACK_SKIP_IMAGES",32877),_("GL_UNPACK_IMAGE_HEIGHT",32878),_("GL_MAX_3D_TEXTURE_SIZE",32883),_("GL_MAX_ELEMENTS_VERTICES",33e3),_("GL_MAX_ELEMENTS_INDICES",33001),_("GL_MAX_TEXTURE_LOD_BIAS",34045),_("GL_MAX_FRAGMENT_UNIFORM_COMPONENTS",35657),_("GL_MAX_VERTEX_UNIFORM_COMPONENTS",35658),_("GL_MAX_ARRAY_TEXTURE_LAYERS",35071),_("GL_MIN_PROGRAM_TEXEL_OFFSET",35076),_("GL_MAX_PROGRAM_TEXEL_OFFSET",35077),_("GL_MAX_VARYING_COMPONENTS",35659),_("GL_FRAGMENT_SHADER_DERIVATIVE_HINT",35723),_("GL_RASTERIZER_DISCARD",35977),_("GL_VERTEX_ARRAY_BINDING",34229),_("GL_MAX_VERTEX_OUTPUT_COMPONENTS",37154),_("GL_MAX_FRAGMENT_INPUT_COMPONENTS",37157),_("GL_MAX_SERVER_WAIT_TIMEOUT",37137),_("GL_MAX_ELEMENT_INDEX",36203),_("GL_RED",6403),_("GL_RGB8",32849),_("GL_RGBA8",32856),_("GL_RGB10_A2",32857),_("GL_TEXTURE_3D",32879),_("GL_TEXTURE_WRAP_R",32882),_("GL_TEXTURE_MIN_LOD",33082),_("GL_TEXTURE_MAX_LOD",33083),_("GL_TEXTURE_BASE_LEVEL",33084),_("GL_TEXTURE_MAX_LEVEL",33085),_("GL_TEXTURE_COMPARE_MODE",34892),_("GL_TEXTURE_COMPARE_FUNC",34893),_("GL_SRGB",35904),_("GL_SRGB8",35905),_("GL_SRGB8_ALPHA8",35907),_("GL_COMPARE_REF_TO_TEXTURE",34894),_("GL_RGBA32F",34836),_("GL_RGB32F",34837),_("GL_RGBA16F",34842),_("GL_RGB16F",34843),_("GL_TEXTURE_2D_ARRAY",35866),_("GL_TEXTURE_BINDING_2D_ARRAY",35869),_("GL_R11F_G11F_B10F",35898),_("GL_RGB9_E5",35901),_("GL_RGBA32UI",36208),_("GL_RGB32UI",36209),_("GL_RGBA16UI",36214),_("GL_RGB16UI",36215),_("GL_RGBA8UI",36220),_("GL_RGB8UI",36221),_("GL_RGBA32I",36226),_("GL_RGB32I",36227),_("GL_RGBA16I",36232),_("GL_RGB16I",36233),_("GL_RGBA8I",36238),_("GL_RGB8I",36239),_("GL_RED_INTEGER",36244),_("GL_RGB_INTEGER",36248),_("GL_RGBA_INTEGER",36249),_("GL_R8",33321),_("GL_RG8",33323),_("GL_R16F",33325),_("GL_R32F",33326),_("GL_RG16F",33327),_("GL_RG32F",33328),_("GL_R8I",33329),_("GL_R8UI",33330),_("GL_R16I",33331),_("GL_R16UI",33332),_("GL_R32I",33333),_("GL_R32UI",33334),_("GL_RG8I",33335),_("GL_RG8UI",33336),_("GL_RG16I",33337),_("GL_RG16UI",33338),_("GL_RG32I",33339),_("GL_RG32UI",33340),_("GL_R8_SNORM",36756),_("GL_RG8_SNORM",36757),_("GL_RGB8_SNORM",36758),_("GL_RGBA8_SNORM",36759),_("GL_RGB10_A2UI",36975),_("GL_TEXTURE_IMMUTABLE_FORMAT",37167),_("GL_TEXTURE_IMMUTABLE_LEVELS",33503),_("GL_UNSIGNED_INT_2_10_10_10_REV",33640),_("GL_UNSIGNED_INT_10F_11F_11F_REV",35899),_("GL_UNSIGNED_INT_5_9_9_9_REV",35902),_("GL_FLOAT_32_UNSIGNED_INT_24_8_REV",36269),_("GL_UNSIGNED_INT_24_8",34042),_("GL_HALF_FLOAT",5131),_("GL_RG",33319),_("GL_RG_INTEGER",33320),_("GL_INT_2_10_10_10_REV",36255),_("GL_CURRENT_QUERY",34917),_("GL_QUERY_RESULT",34918),_("GL_QUERY_RESULT_AVAILABLE",34919),_("GL_ANY_SAMPLES_PASSED",35887),_("GL_ANY_SAMPLES_PASSED_CONSERVATIVE",36202),_("GL_MAX_DRAW_BUFFERS",34852),_("GL_DRAW_BUFFER0",34853),_("GL_DRAW_BUFFER1",34854),_("GL_DRAW_BUFFER2",34855),_("GL_DRAW_BUFFER3",34856),_("GL_DRAW_BUFFER4",34857),_("GL_DRAW_BUFFER5",34858),_("GL_DRAW_BUFFER6",34859),_("GL_DRAW_BUFFER7",34860),_("GL_DRAW_BUFFER8",34861),_("GL_DRAW_BUFFER9",34862),_("GL_DRAW_BUFFER10",34863),_("GL_DRAW_BUFFER11",34864),_("GL_DRAW_BUFFER12",34865),_("GL_DRAW_BUFFER13",34866),_("GL_DRAW_BUFFER14",34867),_("GL_DRAW_BUFFER15",34868),_("GL_MAX_COLOR_ATTACHMENTS",36063),_("GL_COLOR_ATTACHMENT1",36065),_("GL_COLOR_ATTACHMENT2",36066),_("GL_COLOR_ATTACHMENT3",36067),_("GL_COLOR_ATTACHMENT4",36068),_("GL_COLOR_ATTACHMENT5",36069),_("GL_COLOR_ATTACHMENT6",36070),_("GL_COLOR_ATTACHMENT7",36071),_("GL_COLOR_ATTACHMENT8",36072),_("GL_COLOR_ATTACHMENT9",36073),_("GL_COLOR_ATTACHMENT10",36074),_("GL_COLOR_ATTACHMENT11",36075),_("GL_COLOR_ATTACHMENT12",36076),_("GL_COLOR_ATTACHMENT13",36077),_("GL_COLOR_ATTACHMENT14",36078),_("GL_COLOR_ATTACHMENT15",36079),_("GL_SAMPLER_3D",35679),_("GL_SAMPLER_2D_SHADOW",35682),_("GL_SAMPLER_2D_ARRAY",36289),_("GL_SAMPLER_2D_ARRAY_SHADOW",36292),_("GL_SAMPLER_CUBE_SHADOW",36293),_("GL_INT_SAMPLER_2D",36298),_("GL_INT_SAMPLER_3D",36299),_("GL_INT_SAMPLER_CUBE",36300),_("GL_INT_SAMPLER_2D_ARRAY",36303),_("GL_UNSIGNED_INT_SAMPLER_2D",36306),_("GL_UNSIGNED_INT_SAMPLER_3D",36307),_("GL_UNSIGNED_INT_SAMPLER_CUBE",36308),_("GL_UNSIGNED_INT_SAMPLER_2D_ARRAY",36311),_("GL_MAX_SAMPLES",36183),_("GL_SAMPLER_BINDING",35097),_("GL_PIXEL_PACK_BUFFER",35051),_("GL_PIXEL_UNPACK_BUFFER",35052),_("GL_PIXEL_PACK_BUFFER_BINDING",35053),_("GL_PIXEL_UNPACK_BUFFER_BINDING",35055),_("GL_COPY_READ_BUFFER",36662),_("GL_COPY_WRITE_BUFFER",36663),_("GL_COPY_READ_BUFFER_BINDING",36662),_("GL_COPY_WRITE_BUFFER_BINDING",36663),_("GL_FLOAT_MAT2X3",35685),_("GL_FLOAT_MAT2X4",35686),_("GL_FLOAT_MAT3X2",35687),_("GL_FLOAT_MAT3X4",35688),_("GL_FLOAT_MAT4X2",35689),_("GL_FLOAT_MAT4X3",35690),_("GL_UNSIGNED_INT_VEC2",36294),_("GL_UNSIGNED_INT_VEC3",36295),_("GL_UNSIGNED_INT_VEC4",36296),_("GL_UNSIGNED_NORMALIZED",35863),_("GL_SIGNED_NORMALIZED",36764),_("GL_VERTEX_ATTRIB_ARRAY_INTEGER",35069),_("GL_VERTEX_ATTRIB_ARRAY_DIVISOR",35070),_("GL_TRANSFORM_FEEDBACK_BUFFER_MODE",35967),_("GL_MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS",35968),_("GL_TRANSFORM_FEEDBACK_VARYINGS",35971),_("GL_TRANSFORM_FEEDBACK_BUFFER_START",35972),_("GL_TRANSFORM_FEEDBACK_BUFFER_SIZE",35973),_("GL_TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN",35976),_("GL_MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS",35978),_("GL_MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS",35979),_("GL_INTERLEAVED_ATTRIBS",35980),_("GL_SEPARATE_ATTRIBS",35981),_("GL_TRANSFORM_FEEDBACK_BUFFER",35982),_("GL_TRANSFORM_FEEDBACK_BUFFER_BINDING",35983),_("GL_TRANSFORM_FEEDBACK",36386),_("GL_TRANSFORM_FEEDBACK_PAUSED",36387),_("GL_TRANSFORM_FEEDBACK_ACTIVE",36388),_("GL_TRANSFORM_FEEDBACK_BINDING",36389),_("GL_FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING",33296),_("GL_FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE",33297),_("GL_FRAMEBUFFER_ATTACHMENT_RED_SIZE",33298),_("GL_FRAMEBUFFER_ATTACHMENT_GREEN_SIZE",33299),_("GL_FRAMEBUFFER_ATTACHMENT_BLUE_SIZE",33300),_("GL_FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE",33301),_("GL_FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE",33302),_("GL_FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE",33303),_("GL_FRAMEBUFFER_DEFAULT",33304),_("GL_DEPTH24_STENCIL8",35056),_("GL_DRAW_FRAMEBUFFER_BINDING",36006),_("GL_READ_FRAMEBUFFER",36008),_("GL_DRAW_FRAMEBUFFER",36009),_("GL_READ_FRAMEBUFFER_BINDING",36010),_("GL_RENDERBUFFER_SAMPLES",36011),_("GL_FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER",36052),_("GL_FRAMEBUFFER_INCOMPLETE_MULTISAMPLE",36182),_("GL_UNIFORM_BUFFER",35345),_("GL_UNIFORM_BUFFER_BINDING",35368),_("GL_UNIFORM_BUFFER_START",35369),_("GL_UNIFORM_BUFFER_SIZE",35370),_("GL_MAX_VERTEX_UNIFORM_BLOCKS",35371),_("GL_MAX_FRAGMENT_UNIFORM_BLOCKS",35373),_("GL_MAX_COMBINED_UNIFORM_BLOCKS",35374),_("GL_MAX_UNIFORM_BUFFER_BINDINGS",35375),_("GL_MAX_UNIFORM_BLOCK_SIZE",35376),_("GL_MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS",35377),_("GL_MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS",35379),_("GL_UNIFORM_BUFFER_OFFSET_ALIGNMENT",35380),_("GL_ACTIVE_UNIFORM_BLOCKS",35382),_("GL_UNIFORM_TYPE",35383),_("GL_UNIFORM_SIZE",35384),_("GL_UNIFORM_BLOCK_INDEX",35386),_("GL_UNIFORM_OFFSET",35387),_("GL_UNIFORM_ARRAY_STRIDE",35388),_("GL_UNIFORM_MATRIX_STRIDE",35389),_("GL_UNIFORM_IS_ROW_MAJOR",35390),_("GL_UNIFORM_BLOCK_BINDING",35391),_("GL_UNIFORM_BLOCK_DATA_SIZE",35392),_("GL_UNIFORM_BLOCK_ACTIVE_UNIFORMS",35394),_("GL_UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES",35395),_("GL_UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER",35396),_("GL_UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER",35398),_("GL_OBJECT_TYPE",37138),_("GL_SYNC_CONDITION",37139),_("GL_SYNC_STATUS",37140),_("GL_SYNC_FLAGS",37141),_("GL_SYNC_FENCE",37142),_("GL_SYNC_GPU_COMMANDS_COMPLETE",37143),_("GL_UNSIGNALED",37144),_("GL_SIGNALED",37145),_("GL_ALREADY_SIGNALED",37146),_("GL_TIMEOUT_EXPIRED",37147),_("GL_CONDITION_SATISFIED",37148),_("GL_WAIT_FAILED",37149),_("GL_SYNC_FLUSH_COMMANDS_BIT",1),_("GL_COLOR",6144),_("GL_DEPTH",6145),_("GL_STENCIL",6146),_("GL_MIN",32775),_("GL_MAX",32776),_("GL_DEPTH_COMPONENT24",33190),_("GL_STREAM_READ",35041),_("GL_STREAM_COPY",35042),_("GL_STATIC_READ",35045),_("GL_STATIC_COPY",35046),_("GL_DYNAMIC_READ",35049),_("GL_DYNAMIC_COPY",35050),_("GL_DEPTH_COMPONENT32F",36012),_("GL_DEPTH32F_STENCIL8",36013),_("GL_INVALID_INDEX",4294967295),_("GL_TIMEOUT_IGNORED",-1),_("GL_MAX_CLIENT_WAIT_TIMEOUT_WEBGL",37447),_("GL_VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE",35070),_("GL_UNMASKED_VENDOR_WEBGL",37445),_("GL_UNMASKED_RENDERER_WEBGL",37446),_("GL_MAX_TEXTURE_MAX_ANISOTROPY_EXT",34047),_("GL_TEXTURE_MAX_ANISOTROPY_EXT",34046),_("GL_COMPRESSED_RGB_S3TC_DXT1_EXT",33776),_("GL_COMPRESSED_RGBA_S3TC_DXT1_EXT",33777),_("GL_COMPRESSED_RGBA_S3TC_DXT3_EXT",33778),_("GL_COMPRESSED_RGBA_S3TC_DXT5_EXT",33779),_("GL_COMPRESSED_SRGB_S3TC_DXT1_EXT",35916),_("GL_COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",35917),_("GL_COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",35918),_("GL_COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",35919),_("GL_COMPRESSED_R11_EAC",37488),_("GL_COMPRESSED_SIGNED_R11_EAC",37489),_("GL_COMPRESSED_RG11_EAC",37490),_("GL_COMPRESSED_SIGNED_RG11_EAC",37491),_("GL_COMPRESSED_RGB8_ETC2",37492),_("GL_COMPRESSED_RGBA8_ETC2_EAC",37493),_("GL_COMPRESSED_SRGB8_ETC2",37494),_("GL_COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",37495),_("GL_COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",37496),_("GL_COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",37497),_("GL_COMPRESSED_RGB_PVRTC_4BPPV1_IMG",35840),_("GL_COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",35842),_("GL_COMPRESSED_RGB_PVRTC_2BPPV1_IMG",35841),_("GL_COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",35843),_("GL_COMPRESSED_RGB_ETC1_WEBGL",36196),_("GL_COMPRESSED_RGB_ATC_WEBGL",35986),_("GL_COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",35986),_("GL_COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",34798),_("GL_COMPRESSED_RGBA_ASTC_4X4_KHR",37808),_("GL_COMPRESSED_RGBA_ASTC_5X4_KHR",37809),_("GL_COMPRESSED_RGBA_ASTC_5X5_KHR",37810),_("GL_COMPRESSED_RGBA_ASTC_6X5_KHR",37811),_("GL_COMPRESSED_RGBA_ASTC_6X6_KHR",37812),_("GL_COMPRESSED_RGBA_ASTC_8X5_KHR",37813),_("GL_COMPRESSED_RGBA_ASTC_8X6_KHR",37814),_("GL_COMPRESSED_RGBA_ASTC_8X8_KHR",37815),_("GL_COMPRESSED_RGBA_ASTC_10X5_KHR",37816),_("GL_COMPRESSED_RGBA_ASTC_10X6_KHR",37817),_("GL_COMPRESSED_RGBA_ASTC_10X8_KHR",37818),_("GL_COMPRESSED_RGBA_ASTC_10X10_KHR",37819),_("GL_COMPRESSED_RGBA_ASTC_12X10_KHR",37820),_("GL_COMPRESSED_RGBA_ASTC_12X12_KHR",37821),_("GL_COMPRESSED_SRGB8_ALPHA8_ASTC_4X4_KHR",37840),_("GL_COMPRESSED_SRGB8_ALPHA8_ASTC_5X4_KHR",37841),_("GL_COMPRESSED_SRGB8_ALPHA8_ASTC_5X5_KHR",37842),_("GL_COMPRESSED_SRGB8_ALPHA8_ASTC_6X5_KHR",37843),_("GL_COMPRESSED_SRGB8_ALPHA8_ASTC_6X6_KHR",37844),_("GL_COMPRESSED_SRGB8_ALPHA8_ASTC_8X5_KHR",37845),_("GL_COMPRESSED_SRGB8_ALPHA8_ASTC_8X6_KHR",37846),_("GL_COMPRESSED_SRGB8_ALPHA8_ASTC_8X8_KHR",37847),_("GL_COMPRESSED_SRGB8_ALPHA8_ASTC_10X5_KHR",37848),_("GL_COMPRESSED_SRGB8_ALPHA8_ASTC_10X6_KHR",37849),_("GL_COMPRESSED_SRGB8_ALPHA8_ASTC_10X8_KHR",37850),_("GL_COMPRESSED_SRGB8_ALPHA8_ASTC_10X10_KHR",37851),_("GL_COMPRESSED_SRGB8_ALPHA8_ASTC_12X10_KHR",37852),_("GL_COMPRESSED_SRGB8_ALPHA8_ASTC_12X12_KHR",37853),_("GL_UNSIGNED_INT_24_8_WEBGL",34042),_("GL_HALF_FLOAT_OES",36193),_("GL_RGBA32F_EXT",34836),_("GL_RGB32F_EXT",34837),_("GL_FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT",33297),_("GL_UNSIGNED_NORMALIZED_EXT",35863),_("GL_MIN_EXT",32775),_("GL_MAX_EXT",32776),_("GL_SRGB_EXT",35904),_("GL_SRGB_ALPHA_EXT",35906),_("GL_SRGB8_ALPHA8_EXT",35907),_("GL_FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT",33296),_("GL_FRAGMENT_SHADER_DERIVATIVE_HINT_OES",35723),_("GL_COLOR_ATTACHMENT0_WEBGL",36064),_("GL_COLOR_ATTACHMENT1_WEBGL",36065),_("GL_COLOR_ATTACHMENT2_WEBGL",36066),_("GL_COLOR_ATTACHMENT3_WEBGL",36067),_("GL_COLOR_ATTACHMENT4_WEBGL",36068),_("GL_COLOR_ATTACHMENT5_WEBGL",36069),_("GL_COLOR_ATTACHMENT6_WEBGL",36070),_("GL_COLOR_ATTACHMENT7_WEBGL",36071),_("GL_COLOR_ATTACHMENT8_WEBGL",36072),_("GL_COLOR_ATTACHMENT9_WEBGL",36073),_("GL_COLOR_ATTACHMENT10_WEBGL",36074),_("GL_COLOR_ATTACHMENT11_WEBGL",36075),_("GL_COLOR_ATTACHMENT12_WEBGL",36076),_("GL_COLOR_ATTACHMENT13_WEBGL",36077),_("GL_COLOR_ATTACHMENT14_WEBGL",36078),_("GL_COLOR_ATTACHMENT15_WEBGL",36079),_("GL_DRAW_BUFFER0_WEBGL",34853),_("GL_DRAW_BUFFER1_WEBGL",34854),_("GL_DRAW_BUFFER2_WEBGL",34855),_("GL_DRAW_BUFFER3_WEBGL",34856),_("GL_DRAW_BUFFER4_WEBGL",34857),_("GL_DRAW_BUFFER5_WEBGL",34858),_("GL_DRAW_BUFFER6_WEBGL",34859),_("GL_DRAW_BUFFER7_WEBGL",34860),_("GL_DRAW_BUFFER8_WEBGL",34861),_("GL_DRAW_BUFFER9_WEBGL",34862),_("GL_DRAW_BUFFER10_WEBGL",34863),_("GL_DRAW_BUFFER11_WEBGL",34864),_("GL_DRAW_BUFFER12_WEBGL",34865),_("GL_DRAW_BUFFER13_WEBGL",34866),_("GL_DRAW_BUFFER14_WEBGL",34867),_("GL_DRAW_BUFFER15_WEBGL",34868),_("GL_MAX_COLOR_ATTACHMENTS_WEBGL",36063),_("GL_MAX_DRAW_BUFFERS_WEBGL",34852),_("GL_VERTEX_ARRAY_BINDING_OES",34229),_("GL_QUERY_COUNTER_BITS_EXT",34916),_("GL_CURRENT_QUERY_EXT",34917),_("GL_QUERY_RESULT_EXT",34918),_("GL_QUERY_RESULT_AVAILABLE_EXT",34919),_("GL_TIME_ELAPSED_EXT",35007),_("GL_TIMESTAMP_EXT",36392),_("GL_GPU_DISJOINT_EXT",36795),_("GL_COMPLETION_STATUS_KHR",37297);E._RF.pop()}}}));

System.register("chunks:///_virtual/world-cluster.ts",["./rollupPluginModLoBabelHelpers.js","cc","./debug.ts","./math.ts"],(function(t){"use strict";var e,s,i,l,r,n,a,o,u,c,h,d,x,C,f,p,v,b,y,D,m;return{setters:[function(t){e=t.applyDecoratedDescriptor,s=t.inheritsLoose,i=t.initializerDefineProperty,l=t.assertThisInitialized,r=t.createClass},function(t){n=t.cclegacy,a=t._decorator,o=t.Vec3,u=t.Vec4,c=t.geometry,h=t.director,d=t.gfx,x=t.Mat4,C=t.Color,f=t.Quat,p=t.Component},function(t){v=t.getGeometryRenderer},function(t){b=t.roundUp,y=t.vec3_min,D=t.vec3_max,m=t.vec3_floor}],execute:function(){var _,w,g,T,B;n._RF.push({},"79074YfIOVJoIaJ+SemjB3f","world-cluster",void 0);var O=a.ccclass,z=a.property,j=a.executeInEditMode,M=new o,I=new o,F=(new o,t("ClusterObject",(function(){this.object=null,this.min=new o,this.max=new o,this.radius=0,this.center=new o,this.minCell=new o,this.maxCell=new o})));t("WorldCluster",O("WorldCluster")(_=j((g=e((w=function(t){function e(){for(var e,s=arguments.length,r=new Array(s),n=0;n<s;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))||this)._cellsLimit=new o,i(e,"_cells",g,l(e)),i(e,"_maxCellObjectCount",T,l(e)),e._usedObjects=[new F],e.dataInfoFloat=void 0,e.dataInfoTextureFloat=void 0,e.infoTextureInvSizeData=new u,e.clusterTexture=void 0,e.clustersData=void 0,e.clustersCounts=void 0,e.clustersDistances=void 0,e.clusterCellsMaxData=new u,e.clusterCellsDotData=new u,e.clusterTextureSizeData=new u,e.clusterCellsCountByBoundsSizeData=new u,e._bounds=new c.AABB,e.boundsMin=new o,e.boundsMax=new o,e.boundsDelta=new o,e.maxCount=255,e.reportCount=0,e._cellsDirty=!0,e._pixelsPerCellCount=0,e.pixelsPerObjectFloat=1,i(e,"renderDebug",B,l(e)),e}s(e,t);var n=e.prototype;return n.getBoundingBox=function(t,e){},n.addObjectData=function(t,e){},n.createTexture=function(t,e,s){return h.root.device.createTexture(new d.TextureInfo(d.TextureType.TEX2D,d.TextureUsageBit.SAMPLED|d.TextureUsageBit.TRANSFER_DST,s,t,e))},n.__preload=function(){this.maxCellObjectCount=this.maxCellObjectCount,this._cellsLimit.set(this._cells).subtract(o.ONE),this.initTexture()},n.initTexture=function(){var t=this.pixelsPerObjectFloat;this.dataInfoFloat=new Float32Array(4*t*this.maxCount),this.dataInfoTextureFloat=this.createTexture(t,this.maxCount,d.Format.RGBA32F),this.infoTextureInvSizeData.x=1/this.dataInfoTextureFloat.width,this.infoTextureInvSizeData.y=1/this.dataInfoTextureFloat.height},n.updateCells=function(){if(this._cellsDirty){this._cellsDirty=!1;var t=this._cells.x,e=this._cells.y,s=this._cells.z,i=t*e*s,l=this._pixelsPerCellCount*i,r=Math.ceil(Math.sqrt(l));r=b(r,this._pixelsPerCellCount);var n=Math.ceil(l/r);(r>4096||n>4096)&&console.error("LightCluster parameters cause the texture size to be over the limit."),this.clusterCellsMaxData.x=t,this.clusterCellsMaxData.y=e,this.clusterCellsMaxData.z=s,this.clusterCellsDotData.x=this._pixelsPerCellCount,this.clusterCellsDotData.y=t*s*this._pixelsPerCellCount,this.clusterCellsDotData.z=t*this._pixelsPerCellCount,this.clustersData=new Uint8Array(4*r*n),this.clustersCounts=new Int32Array(i),this.clustersDistances=new Float32Array(4*r*n),this.clusterTextureSizeData.x=r,this.clusterTextureSizeData.y=1/r,this.clusterTextureSizeData.z=1/n,this.clusterTexture&&this.clusterTexture.destroy(),this.clusterTexture=this.createTexture(r,n,d.Format.RGBA8)}},n.collectObjects=function(t){for(var e=this._usedObjects,s=1,i=0;i<t.length;i++){var l=t[i];if(!(s<this.maxCount)){console.warn("Clustered lighting: more than "+(this.maxCount-1)+" lights in the frame, ignoring some.");break}var r=void 0;s<e.length?r=e[s]:(r=new F,e.push(r)),r.object=l,this.getBoundingBox(l,r),s++}e.length=s},n.evaluateBounds=function(){var t=this._usedObjects,e=this.boundsMin,s=this.boundsMax;if(t.length>1){o.copy(e,t[1].min),o.copy(s,t[1].max);for(var i=2;i<t.length;i++)y(e,e,t[i].min),D(s,s,t[i].max)}else e.set(0,0,0),s.set(1,1,1);o.subtract(this.boundsDelta,s,e);var l=this.boundsDelta;if(this.clusterCellsCountByBoundsSizeData.x=this._cells.x/l.x,this.clusterCellsCountByBoundsSizeData.y=this._cells.y/l.y,this.clusterCellsCountByBoundsSizeData.z=this._cells.z/l.z,this.clusterCellsCountByBoundsSizeData.w=this._pixelsPerCellCount,t.length>1)for(var r=0;r<t.length;r++){var n=t[r];this.evalCellMinMax(n,n.minCell,n.maxCell)}},n.evalCellMinMax=function(t,e,s){e.set(t.min),e.subtract(this.boundsMin),e.divide(this.boundsDelta),e.multiply(this._cells),m(e,e),s.set(t.max),s.subtract(this.boundsMin),s.divide(this.boundsDelta),s.multiply(this._cells),m(s,s),D(e,e,o.ZERO),y(s,s,this._cellsLimit)},n.updateClusters=function(){this.clustersCounts.fill(0),this.clustersData.fill(0),this.clustersDistances.fill(1/0);for(var t=this._cells.x,e=this._cells.y,s=this._cells.z,i=this.clustersCounts,l=(this.clustersDistances,this._maxCellObjectCount),r=this.clustersData,n=this._pixelsPerCellCount,a=this._usedObjects,u=1;u<a.length;u++){var c=a[u].object;c&&this.addObjectData(c,u)}for(var h=new o,d=[],x=function(t,e){return o.distance(t.center,h)-o.distance(e.center,h)},C=0;C<e;C++)for(var f=0;f<s;f++)for(var p=0;p<t;p++){d.length=0;for(var v=1;v<a.length;v++){var b=a[v];b.minCell.x>p||b.minCell.y>C||b.minCell.z>f||b.maxCell.x<p||b.maxCell.y<C||b.maxCell.z<f||d.push(b)}h.set(this.boundsDelta).multiply3f((p+.5)/t,(C+.5)/e,(f+.5)/s).add(this.boundsMin),d.sort(x);for(var y=p+t*(f+C*s),D=i[y],m=0;m<d.length;m++){var _=d[m];D<l&&(r[n*y*4+D]=a.indexOf(_),i[y]=++D)}}},n.findObjects=function(){return[]},n.update=function(t){var e=this.findObjects();this.collectObjects(e),this.evaluateBounds(),this.updateCells(),this.updateClusters(),this.uploadTextures(),this.drawDebug()},n.uploadTextures=function(){var t=h.root.device,e=this.clusterTexture,s=this.clustersData;if(e&&s){var i=new d.BufferTextureCopy(void 0,void 0,e.height,void 0,new d.Extent(e.width,e.height));t.copyBuffersToTexture([s],e,[i])}var l=this.dataInfoFloat,r=this.dataInfoTextureFloat;if(l&&r){var n=new d.BufferTextureCopy(void 0,void 0,r.height,void 0,new d.Extent(r.width,r.height));t.copyBuffersToTexture([l],r,[n])}},n.onDestroy=function(){var t,e;null==(t=this.clusterTexture)||t.destroy(),null==(e=this.dataInfoTextureFloat)||e.destroy()},n.drawDebug=function(){if(this.renderDebug){var t=v();t&&this.drawCluster(t)}},n.drawCluster=function(t){var e=this.cells;M.set(this.boundsDelta).divide(e);for(var s=M.x,i=M.y,l=M.z,r=new x,n=new c.AABB(0,0,0,.5,.5,.5),a=new C(255,255,255,50),u=new o(0,0,0),h=e,d=u.x;d<h.x;d++)for(var p=u.y;p<h.y;p++)for(var v=u.z;v<h.z;v++)I.set(this.boundsMin).add3f(s*(d+.5),i*(p+.5),l*(v+.5)),M.set(s,i,l),r.fromRTS(f.IDENTITY,I,M),t.addBoundingBox(n,a,!1,!1,void 0,!0,r)},r(e,[{key:"cells",get:function(){return this._cells},set:function(t){M.set(t),m(M,M),this._cells.equals(M)||(this._cells.set(M),this._cellsLimit.set(M).subtract(o.ONE),this._cellsDirty=!0)}},{key:"maxCellObjectCount",get:function(){return this._maxCellObjectCount},set:function(t){var e=b(t,4);this._maxCellObjectCount=t,this._pixelsPerCellCount=e/4,this._cellsDirty=!0}}]),e}(p)).prototype,"_cells",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new o(12,12,12)}}),e(w.prototype,"cells",[z],Object.getOwnPropertyDescriptor(w.prototype,"cells"),w.prototype),T=e(w.prototype,"_maxCellObjectCount",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),e(w.prototype,"maxCellObjectCount",[z],Object.getOwnPropertyDescriptor(w.prototype,"maxCellObjectCount"),w.prototype),B=e(w.prototype,"renderDebug",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_=w))||_)||_);n._RF.pop()}}}));

System.register("chunks:///_virtual/zoom-screen-stage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./base-stage.ts","./utils2.ts","./pass-utils.ts","./href-setting.ts"],(function(e){"use strict";var t,s,o,a,i,n,r,c,h,p,u,l,f,g,d,m,v,_;return{setters:[function(e){t=e.applyDecoratedDescriptor,s=e.inheritsLoose,o=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){i=e.cclegacy,n=e._decorator,r=e.rendering,c=e.gfx,h=e.Vec2,p=e.Vec4,u=e.input,l=e.Input,f=e.game,g=e.renderer},function(e){d=e.BaseStage},function(e){m=e.getCameraUniqueID},function(e){v=e.passUtils},function(e){_=e.HrefSetting}],execute:function(){var T,S,y,M,w,E,P;i._RF.push({},"dcc2fkeM/BDloecRxD/MQCv","zoom-screen-stage",void 0);n.type;var C=n.property,D=n.ccclass,O=(r.RasterView,r.AttachmentType,r.AccessType,r.ResourceResidency,r.LightInfo,r.SceneFlags,r.QueueHint,r.ComputeView,c.Format),R=(c.LoadOp,c.StoreOp,c.ClearFlagBit,c.Color,c.Viewport,new c.Sampler(new c.SamplerInfo(c.Filter.POINT,c.Filter.POINT),0));R.custom=!0;e("ZoomScreenStage",(T=D("ZoomScreenStage"),S=C({override:!0}),y=C({override:!0}),T((E=t((w=function(e){function t(){var t;return(t=e.call(this)||this)._materialName="zoom-screen",t.materialMap=new Map,o(t,"name",E,a(t)),o(t,"outputNames",P,a(t)),t._scale=1,t._offset=new h,t.screenParams=new p,t.touchPos=new h,t.lastTouchDist=0,t.pressed=!1,u.on(l.EventType.MOUSE_WHEEL,t.onMouseWheel,a(t)),u.on(l.EventType.TOUCH_START,t.onTouchDown,a(t)),u.on(l.EventType.TOUCH_MOVE,t.onTouchMove,a(t)),u.on(l.EventType.TOUCH_END,t.onTouchUp,a(t)),t}s(t,e);var i=t.prototype;return i.destroy=function(){u.off(l.EventType.MOUSE_WHEEL,this.onMouseWheel,this),u.off(l.EventType.TOUCH_START,this.onTouchDown,this),u.off(l.EventType.TOUCH_MOVE,this.onTouchMove,this),u.off(l.EventType.TOUCH_END,this.onTouchUp,this)},i.reset=function(){this.updateMousePosition(),this.updateScale()},i.checkEnable=function(){return e.prototype.checkEnable.call(this)&&!!_.zoomScreen},i.onTouchDown=function(e){e.propagationStopped=!0,this.lastTouchDist=0,this.pressed=!0,this.updateMousePosition(e)},i.onTouchMove=function(e){e.propagationStopped=!0,this.pressed&&(this.updateMousePosition(e),this._offset.x-=e.getDeltaX()/f.canvas.width*this._scale,this._offset.y-=e.getDeltaY()/f.canvas.width*this._scale)},i.onTouchUp=function(e){e.propagationStopped=!0,this.pressed=!1},i.updateMousePosition=function(e){var t=0,s=0;e&&(t=e.getLocationX()/f.canvas.width,s=e.getLocationY()/f.canvas.height),this.touchPos.set(t,s)},i.onMouseWheel=function(e){if(e.propagationStopped=!0,e){var t=e.getScrollY(),s=.1*-Math.sign(t)*this._scale;this.updateScale(e.getLocation(),s)}else this._scale=1,this._offset.set(0,0)},i.updateScale=function(e,t){void 0===t&&(t=0),e?(this._scale+=t,this._scale=Math.max(0,this._scale),e.x/=f.canvas.width,e.y/=f.canvas.height,this._offset.x-=e.x*t,this._offset.y-=e.y*t):(this._scale=1,this._offset.set(0,0))},i.render=function(e,t){var s=m(e),o=this.getRenderArea(e),a=o.width,i=o.height,n=this.finalShadingScale(),r=Math.floor(a/n),h=Math.floor(i/n);v.clearFlag=c.ClearFlagBit.COLOR,p.set(v.clearColor,0,0,0,1);var u=this.materialMap.get(e);u&&u.parent===this.material||(u=new g.MaterialInstance({parent:this.material}),this.materialMap.set(e,u)),u.setProperty("screenParams",this.screenParams.set(this._scale,this._scale,this._offset.x,this._offset.y));var l=u.passes[0];l.bindSampler(l.getBinding("outputResultMap"),R),v.material=u;var f=this.lastStage.slotName(e,0),d=this.slotName(e,0);v.addRasterPass(r,h,"post-process","Camera_DebugScreen_Pass"+s),v.setViewport(o.x,o.y,r,h).setPassInput(f,"outputResultMap").addRasterView(d,O.RGBA16F).blitScreen(0).version()},t}(d)).prototype,"name",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"ZoomScreenStage"}}),P=t(w.prototype,"outputNames",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return["ZoomScreenColor"]}}),M=w))||M));i._RF.pop()}}}));
